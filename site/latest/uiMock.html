<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{SolBeats();}</title>
    <style>
        body {
            background-color: black;
            color: white;
            margin: 0;
            font-size: 18px;
            font-family: Monospace;
        }

        .iframe {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(255, 0, 0, 0.8);
            padding: 10px;
            border-radius: 5px;
            color: white;
            font-size: 18px;
            font-family: Monospace;
            z-index: 9999;
        }

        .arrow {
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 10px;
            border-color: transparent transparent rgba(255, 0, 0, 0.8) transparent;
            position: absolute;
            top: -20px;
            right: 25px;
        }

        .web3 {
            display: none;
            text-align: center;
            margin-top: 60px;
        }

        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: lightgray;
            font-size: 20px;
            font-family: Monospace;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 999;
        }

        .content {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .input-container {
            margin-top: 20px;
        }

        input {
            padding: 5px;
            margin-bottom: 10px;
        }

        .button-container {
            display: flex;
            justify-content: center;
        }

        button {
            padding: 10px 20px;
            margin: 0 5px;
            font-size: 16px;
        }

        .dot {
            margin: 10px 20px;
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .dot-red {
            background-color: red;
        }

        .dot-green {
            background-color: green;
        }

        .top-right {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .switch-button,
        .connect-button {
            display: none;
            padding: 5px 20px;
            font-size: 16px;
        }

        .mint-button,
        .play-button {
            display: block;
            padding: 5px 20px;
            font-size: 16px;
        }

        .output-box {
            display: none;
            text-align: left;
            white-space: pre-wrap;
            word-wrap: break-word;
            width: 80%;
            max-width: 800px; /* Adjust the max-width to your preference */
            margin: 20px auto;
            background-color: black;
            padding: 10px;
            font-family: Monospace;
            color: white;
        }
    </style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
</head>
<body>
    <div class="header-bar">
        <div class="title">{SolBeats();}</div>
        <div class="top-right">
            <div class="dot"></div>
            <button class="connect-button">Connect Wallet</button>
            <button class="switch-button">Switch to Arbitrum</button>            
        </div>
    </div>

    <div class="web3">
        <div class="content">
            <div class="input-container">
                <input type="text" placeholder="Enter a line">
            </div>
            <div class="button-container">
                <button class="play-button">Play</button>
                <button class="mint-button">Mint</button>
            </div>
        </div>
        
    </div>

    <div class="iframe">
        <div class="arrow"></div>
        <span class="body">Please click "View Original Media"</span>
        <span class="material-icons-outlined">open_in_new</span>
        <span class="body">to enable Web3 features</span>
    </div>

    <div class="output-box"></div>

    <script>
        function compileContract(input) {
            return new Promise((resolve, reject) => {
                var bundleCode = "KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitpKyInIik7dGhyb3cgYS5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXsoZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIG9iamVjdEFzc2lnbj1yZXF1aXJlKCJvYmplY3QtYXNzaWduIik7ZnVuY3Rpb24gY29tcGFyZShhLGIpe2lmKGE9PT1iKXtyZXR1cm4gMH12YXIgeD1hLmxlbmd0aDt2YXIgeT1iLmxlbmd0aDtmb3IodmFyIGk9MCxsZW49TWF0aC5taW4oeCx5KTtpPGxlbjsrK2kpe2lmKGFbaV0hPT1iW2ldKXt4PWFbaV07eT1iW2ldO2JyZWFrfX1pZih4PHkpe3JldHVybi0xfWlmKHk8eCl7cmV0dXJuIDF9cmV0dXJuIDB9ZnVuY3Rpb24gaXNCdWZmZXIoYil7aWYoZ2xvYmFsLkJ1ZmZlciYmdHlwZW9mIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXI9PT0iZnVuY3Rpb24iKXtyZXR1cm4gZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihiKX1yZXR1cm4hIShiIT1udWxsJiZiLl9pc0J1ZmZlcil9dmFyIHV0aWw9cmVxdWlyZSgidXRpbC8iKTt2YXIgaGFzT3duPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIHBTbGljZT1BcnJheS5wcm90b3R5cGUuc2xpY2U7dmFyIGZ1bmN0aW9uc0hhdmVOYW1lcz1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBmb28oKXt9Lm5hbWU9PT0iZm9vIn0oKTtmdW5jdGlvbiBwVG9TdHJpbmcob2JqKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iail9ZnVuY3Rpb24gaXNWaWV3KGFycmJ1Zil7aWYoaXNCdWZmZXIoYXJyYnVmKSl7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBnbG9iYWwuQXJyYXlCdWZmZXIhPT0iZnVuY3Rpb24iKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldz09PSJmdW5jdGlvbiIpe3JldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcoYXJyYnVmKX1pZighYXJyYnVmKXtyZXR1cm4gZmFsc2V9aWYoYXJyYnVmIGluc3RhbmNlb2YgRGF0YVZpZXcpe3JldHVybiB0cnVlfWlmKGFycmJ1Zi5idWZmZXImJmFycmJ1Zi5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfXZhciBhc3NlcnQ9bW9kdWxlLmV4cG9ydHM9b2s7dmFyIHJlZ2V4PS9ccypmdW5jdGlvblxzKyhbXlwoXHNdKilccyovO2Z1bmN0aW9uIGdldE5hbWUoZnVuYyl7aWYoIXV0aWwuaXNGdW5jdGlvbihmdW5jKSl7cmV0dXJufWlmKGZ1bmN0aW9uc0hhdmVOYW1lcyl7cmV0dXJuIGZ1bmMubmFtZX12YXIgc3RyPWZ1bmMudG9TdHJpbmcoKTt2YXIgbWF0Y2g9c3RyLm1hdGNoKHJlZ2V4KTtyZXR1cm4gbWF0Y2gmJm1hdGNoWzFdfWFzc2VydC5Bc3NlcnRpb25FcnJvcj1mdW5jdGlvbiBBc3NlcnRpb25FcnJvcihvcHRpb25zKXt0aGlzLm5hbWU9IkFzc2VydGlvbkVycm9yIjt0aGlzLmFjdHVhbD1vcHRpb25zLmFjdHVhbDt0aGlzLmV4cGVjdGVkPW9wdGlvbnMuZXhwZWN0ZWQ7dGhpcy5vcGVyYXRvcj1vcHRpb25zLm9wZXJhdG9yO2lmKG9wdGlvbnMubWVzc2FnZSl7dGhpcy5tZXNzYWdlPW9wdGlvbnMubWVzc2FnZTt0aGlzLmdlbmVyYXRlZE1lc3NhZ2U9ZmFsc2V9ZWxzZXt0aGlzLm1lc3NhZ2U9Z2V0TWVzc2FnZSh0aGlzKTt0aGlzLmdlbmVyYXRlZE1lc3NhZ2U9dHJ1ZX12YXIgc3RhY2tTdGFydEZ1bmN0aW9uPW9wdGlvbnMuc3RhY2tTdGFydEZ1bmN0aW9ufHxmYWlsO2lmKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKXtFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHN0YWNrU3RhcnRGdW5jdGlvbil9ZWxzZXt2YXIgZXJyPW5ldyBFcnJvcjtpZihlcnIuc3RhY2spe3ZhciBvdXQ9ZXJyLnN0YWNrO3ZhciBmbl9uYW1lPWdldE5hbWUoc3RhY2tTdGFydEZ1bmN0aW9uKTt2YXIgaWR4PW91dC5pbmRleE9mKCJcbiIrZm5fbmFtZSk7aWYoaWR4Pj0wKXt2YXIgbmV4dF9saW5lPW91dC5pbmRleE9mKCJcbiIsaWR4KzEpO291dD1vdXQuc3Vic3RyaW5nKG5leHRfbGluZSsxKX10aGlzLnN0YWNrPW91dH19fTt1dGlsLmluaGVyaXRzKGFzc2VydC5Bc3NlcnRpb25FcnJvcixFcnJvcik7ZnVuY3Rpb24gdHJ1bmNhdGUocyxuKXtpZih0eXBlb2Ygcz09PSJzdHJpbmciKXtyZXR1cm4gcy5sZW5ndGg8bj9zOnMuc2xpY2UoMCxuKX1lbHNle3JldHVybiBzfX1mdW5jdGlvbiBpbnNwZWN0KHNvbWV0aGluZyl7aWYoZnVuY3Rpb25zSGF2ZU5hbWVzfHwhdXRpbC5pc0Z1bmN0aW9uKHNvbWV0aGluZykpe3JldHVybiB1dGlsLmluc3BlY3Qoc29tZXRoaW5nKX12YXIgcmF3bmFtZT1nZXROYW1lKHNvbWV0aGluZyk7dmFyIG5hbWU9cmF3bmFtZT8iOiAiK3Jhd25hbWU6IiI7cmV0dXJuIltGdW5jdGlvbiIrbmFtZSsiXSJ9ZnVuY3Rpb24gZ2V0TWVzc2FnZShzZWxmKXtyZXR1cm4gdHJ1bmNhdGUoaW5zcGVjdChzZWxmLmFjdHVhbCksMTI4KSsiICIrc2VsZi5vcGVyYXRvcisiICIrdHJ1bmNhdGUoaW5zcGVjdChzZWxmLmV4cGVjdGVkKSwxMjgpfWZ1bmN0aW9uIGZhaWwoYWN0dWFsLGV4cGVjdGVkLG1lc3NhZ2Usb3BlcmF0b3Isc3RhY2tTdGFydEZ1bmN0aW9uKXt0aHJvdyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHttZXNzYWdlOm1lc3NhZ2UsYWN0dWFsOmFjdHVhbCxleHBlY3RlZDpleHBlY3RlZCxvcGVyYXRvcjpvcGVyYXRvcixzdGFja1N0YXJ0RnVuY3Rpb246c3RhY2tTdGFydEZ1bmN0aW9ufSl9YXNzZXJ0LmZhaWw9ZmFpbDtmdW5jdGlvbiBvayh2YWx1ZSxtZXNzYWdlKXtpZighdmFsdWUpZmFpbCh2YWx1ZSx0cnVlLG1lc3NhZ2UsIj09Iixhc3NlcnQub2spfWFzc2VydC5vaz1vazthc3NlcnQuZXF1YWw9ZnVuY3Rpb24gZXF1YWwoYWN0dWFsLGV4cGVjdGVkLG1lc3NhZ2Upe2lmKGFjdHVhbCE9ZXhwZWN0ZWQpZmFpbChhY3R1YWwsZXhwZWN0ZWQsbWVzc2FnZSwiPT0iLGFzc2VydC5lcXVhbCl9O2Fzc2VydC5ub3RFcXVhbD1mdW5jdGlvbiBub3RFcXVhbChhY3R1YWwsZXhwZWN0ZWQsbWVzc2FnZSl7aWYoYWN0dWFsPT1leHBlY3RlZCl7ZmFpbChhY3R1YWwsZXhwZWN0ZWQsbWVzc2FnZSwiIT0iLGFzc2VydC5ub3RFcXVhbCl9fTthc3NlcnQuZGVlcEVxdWFsPWZ1bmN0aW9uIGRlZXBFcXVhbChhY3R1YWwsZXhwZWN0ZWQsbWVzc2FnZSl7aWYoIV9kZWVwRXF1YWwoYWN0dWFsLGV4cGVjdGVkLGZhbHNlKSl7ZmFpbChhY3R1YWwsZXhwZWN0ZWQsbWVzc2FnZSwiZGVlcEVxdWFsIixhc3NlcnQuZGVlcEVxdWFsKX19O2Fzc2VydC5kZWVwU3RyaWN0RXF1YWw9ZnVuY3Rpb24gZGVlcFN0cmljdEVxdWFsKGFjdHVhbCxleHBlY3RlZCxtZXNzYWdlKXtpZighX2RlZXBFcXVhbChhY3R1YWwsZXhwZWN0ZWQsdHJ1ZSkpe2ZhaWwoYWN0dWFsLGV4cGVjdGVkLG1lc3NhZ2UsImRlZXBTdHJpY3RFcXVhbCIsYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCl9fTtmdW5jdGlvbiBfZGVlcEVxdWFsKGFjdHVhbCxleHBlY3RlZCxzdHJpY3QsbWVtb3Mpe2lmKGFjdHVhbD09PWV4cGVjdGVkKXtyZXR1cm4gdHJ1ZX1lbHNlIGlmKGlzQnVmZmVyKGFjdHVhbCkmJmlzQnVmZmVyKGV4cGVjdGVkKSl7cmV0dXJuIGNvbXBhcmUoYWN0dWFsLGV4cGVjdGVkKT09PTB9ZWxzZSBpZih1dGlsLmlzRGF0ZShhY3R1YWwpJiZ1dGlsLmlzRGF0ZShleHBlY3RlZCkpe3JldHVybiBhY3R1YWwuZ2V0VGltZSgpPT09ZXhwZWN0ZWQuZ2V0VGltZSgpfWVsc2UgaWYodXRpbC5pc1JlZ0V4cChhY3R1YWwpJiZ1dGlsLmlzUmVnRXhwKGV4cGVjdGVkKSl7cmV0dXJuIGFjdHVhbC5zb3VyY2U9PT1leHBlY3RlZC5zb3VyY2UmJmFjdHVhbC5nbG9iYWw9PT1leHBlY3RlZC5nbG9iYWwmJmFjdHVhbC5tdWx0aWxpbmU9PT1leHBlY3RlZC5tdWx0aWxpbmUmJmFjdHVhbC5sYXN0SW5kZXg9PT1leHBlY3RlZC5sYXN0SW5kZXgmJmFjdHVhbC5pZ25vcmVDYXNlPT09ZXhwZWN0ZWQuaWdub3JlQ2FzZX1lbHNlIGlmKChhY3R1YWw9PT1udWxsfHx0eXBlb2YgYWN0dWFsIT09Im9iamVjdCIpJiYoZXhwZWN0ZWQ9PT1udWxsfHx0eXBlb2YgZXhwZWN0ZWQhPT0ib2JqZWN0Iikpe3JldHVybiBzdHJpY3Q/YWN0dWFsPT09ZXhwZWN0ZWQ6YWN0dWFsPT1leHBlY3RlZH1lbHNlIGlmKGlzVmlldyhhY3R1YWwpJiZpc1ZpZXcoZXhwZWN0ZWQpJiZwVG9TdHJpbmcoYWN0dWFsKT09PXBUb1N0cmluZyhleHBlY3RlZCkmJiEoYWN0dWFsIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5fHxhY3R1YWwgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpKXtyZXR1cm4gY29tcGFyZShuZXcgVWludDhBcnJheShhY3R1YWwuYnVmZmVyKSxuZXcgVWludDhBcnJheShleHBlY3RlZC5idWZmZXIpKT09PTB9ZWxzZSBpZihpc0J1ZmZlcihhY3R1YWwpIT09aXNCdWZmZXIoZXhwZWN0ZWQpKXtyZXR1cm4gZmFsc2V9ZWxzZXttZW1vcz1tZW1vc3x8e2FjdHVhbDpbXSxleHBlY3RlZDpbXX07dmFyIGFjdHVhbEluZGV4PW1lbW9zLmFjdHVhbC5pbmRleE9mKGFjdHVhbCk7aWYoYWN0dWFsSW5kZXghPT0tMSl7aWYoYWN0dWFsSW5kZXg9PT1tZW1vcy5leHBlY3RlZC5pbmRleE9mKGV4cGVjdGVkKSl7cmV0dXJuIHRydWV9fW1lbW9zLmFjdHVhbC5wdXNoKGFjdHVhbCk7bWVtb3MuZXhwZWN0ZWQucHVzaChleHBlY3RlZCk7cmV0dXJuIG9iakVxdWl2KGFjdHVhbCxleHBlY3RlZCxzdHJpY3QsbWVtb3MpfX1mdW5jdGlvbiBpc0FyZ3VtZW50cyhvYmplY3Qpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KT09IltvYmplY3QgQXJndW1lbnRzXSJ9ZnVuY3Rpb24gb2JqRXF1aXYoYSxiLHN0cmljdCxhY3R1YWxWaXNpdGVkT2JqZWN0cyl7aWYoYT09PW51bGx8fGE9PT11bmRlZmluZWR8fGI9PT1udWxsfHxiPT09dW5kZWZpbmVkKXJldHVybiBmYWxzZTtpZih1dGlsLmlzUHJpbWl0aXZlKGEpfHx1dGlsLmlzUHJpbWl0aXZlKGIpKXJldHVybiBhPT09YjtpZihzdHJpY3QmJk9iamVjdC5nZXRQcm90b3R5cGVPZihhKSE9PU9iamVjdC5nZXRQcm90b3R5cGVPZihiKSlyZXR1cm4gZmFsc2U7dmFyIGFJc0FyZ3M9aXNBcmd1bWVudHMoYSk7dmFyIGJJc0FyZ3M9aXNBcmd1bWVudHMoYik7aWYoYUlzQXJncyYmIWJJc0FyZ3N8fCFhSXNBcmdzJiZiSXNBcmdzKXJldHVybiBmYWxzZTtpZihhSXNBcmdzKXthPXBTbGljZS5jYWxsKGEpO2I9cFNsaWNlLmNhbGwoYik7cmV0dXJuIF9kZWVwRXF1YWwoYSxiLHN0cmljdCl9dmFyIGthPW9iamVjdEtleXMoYSk7dmFyIGtiPW9iamVjdEtleXMoYik7dmFyIGtleSxpO2lmKGthLmxlbmd0aCE9PWtiLmxlbmd0aClyZXR1cm4gZmFsc2U7a2Euc29ydCgpO2tiLnNvcnQoKTtmb3IoaT1rYS5sZW5ndGgtMTtpPj0wO2ktLSl7aWYoa2FbaV0hPT1rYltpXSlyZXR1cm4gZmFsc2V9Zm9yKGk9a2EubGVuZ3RoLTE7aT49MDtpLS0pe2tleT1rYVtpXTtpZighX2RlZXBFcXVhbChhW2tleV0sYltrZXldLHN0cmljdCxhY3R1YWxWaXNpdGVkT2JqZWN0cykpcmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfWFzc2VydC5ub3REZWVwRXF1YWw9ZnVuY3Rpb24gbm90RGVlcEVxdWFsKGFjdHVhbCxleHBlY3RlZCxtZXNzYWdlKXtpZihfZGVlcEVxdWFsKGFjdHVhbCxleHBlY3RlZCxmYWxzZSkpe2ZhaWwoYWN0dWFsLGV4cGVjdGVkLG1lc3NhZ2UsIm5vdERlZXBFcXVhbCIsYXNzZXJ0Lm5vdERlZXBFcXVhbCl9fTthc3NlcnQubm90RGVlcFN0cmljdEVxdWFsPW5vdERlZXBTdHJpY3RFcXVhbDtmdW5jdGlvbiBub3REZWVwU3RyaWN0RXF1YWwoYWN0dWFsLGV4cGVjdGVkLG1lc3NhZ2Upe2lmKF9kZWVwRXF1YWwoYWN0dWFsLGV4cGVjdGVkLHRydWUpKXtmYWlsKGFjdHVhbCxleHBlY3RlZCxtZXNzYWdlLCJub3REZWVwU3RyaWN0RXF1YWwiLG5vdERlZXBTdHJpY3RFcXVhbCl9fWFzc2VydC5zdHJpY3RFcXVhbD1mdW5jdGlvbiBzdHJpY3RFcXVhbChhY3R1YWwsZXhwZWN0ZWQsbWVzc2FnZSl7aWYoYWN0dWFsIT09ZXhwZWN0ZWQpe2ZhaWwoYWN0dWFsLGV4cGVjdGVkLG1lc3NhZ2UsIj09PSIsYXNzZXJ0LnN0cmljdEVxdWFsKX19O2Fzc2VydC5ub3RTdHJpY3RFcXVhbD1mdW5jdGlvbiBub3RTdHJpY3RFcXVhbChhY3R1YWwsZXhwZWN0ZWQsbWVzc2FnZSl7aWYoYWN0dWFsPT09ZXhwZWN0ZWQpe2ZhaWwoYWN0dWFsLGV4cGVjdGVkLG1lc3NhZ2UsIiE9PSIsYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKX19O2Z1bmN0aW9uIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCxleHBlY3RlZCl7aWYoIWFjdHVhbHx8IWV4cGVjdGVkKXtyZXR1cm4gZmFsc2V9aWYoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGV4cGVjdGVkKT09IltvYmplY3QgUmVnRXhwXSIpe3JldHVybiBleHBlY3RlZC50ZXN0KGFjdHVhbCl9dHJ5e2lmKGFjdHVhbCBpbnN0YW5jZW9mIGV4cGVjdGVkKXtyZXR1cm4gdHJ1ZX19Y2F0Y2goZSl7fWlmKEVycm9yLmlzUHJvdG90eXBlT2YoZXhwZWN0ZWQpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGV4cGVjdGVkLmNhbGwoe30sYWN0dWFsKT09PXRydWV9ZnVuY3Rpb24gX3RyeUJsb2NrKGJsb2NrKXt2YXIgZXJyb3I7dHJ5e2Jsb2NrKCl9Y2F0Y2goZSl7ZXJyb3I9ZX1yZXR1cm4gZXJyb3J9ZnVuY3Rpb24gX3Rocm93cyhzaG91bGRUaHJvdyxibG9jayxleHBlY3RlZCxtZXNzYWdlKXt2YXIgYWN0dWFsO2lmKHR5cGVvZiBibG9jayE9PSJmdW5jdGlvbiIpe3Rocm93IG5ldyBUeXBlRXJyb3IoJyJibG9jayIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyl9aWYodHlwZW9mIGV4cGVjdGVkPT09InN0cmluZyIpe21lc3NhZ2U9ZXhwZWN0ZWQ7ZXhwZWN0ZWQ9bnVsbH1hY3R1YWw9X3RyeUJsb2NrKGJsb2NrKTttZXNzYWdlPShleHBlY3RlZCYmZXhwZWN0ZWQubmFtZT8iICgiK2V4cGVjdGVkLm5hbWUrIikuIjoiLiIpKyhtZXNzYWdlPyIgIittZXNzYWdlOiIuIik7aWYoc2hvdWxkVGhyb3cmJiFhY3R1YWwpe2ZhaWwoYWN0dWFsLGV4cGVjdGVkLCJNaXNzaW5nIGV4cGVjdGVkIGV4Y2VwdGlvbiIrbWVzc2FnZSl9dmFyIHVzZXJQcm92aWRlZE1lc3NhZ2U9dHlwZW9mIG1lc3NhZ2U9PT0ic3RyaW5nIjt2YXIgaXNVbndhbnRlZEV4Y2VwdGlvbj0hc2hvdWxkVGhyb3cmJnV0aWwuaXNFcnJvcihhY3R1YWwpO3ZhciBpc1VuZXhwZWN0ZWRFeGNlcHRpb249IXNob3VsZFRocm93JiZhY3R1YWwmJiFleHBlY3RlZDtpZihpc1Vud2FudGVkRXhjZXB0aW9uJiZ1c2VyUHJvdmlkZWRNZXNzYWdlJiZleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsZXhwZWN0ZWQpfHxpc1VuZXhwZWN0ZWRFeGNlcHRpb24pe2ZhaWwoYWN0dWFsLGV4cGVjdGVkLCJHb3QgdW53YW50ZWQgZXhjZXB0aW9uIittZXNzYWdlKX1pZihzaG91bGRUaHJvdyYmYWN0dWFsJiZleHBlY3RlZCYmIWV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCxleHBlY3RlZCl8fCFzaG91bGRUaHJvdyYmYWN0dWFsKXt0aHJvdyBhY3R1YWx9fWFzc2VydC50aHJvd3M9ZnVuY3Rpb24oYmxvY2ssZXJyb3IsbWVzc2FnZSl7X3Rocm93cyh0cnVlLGJsb2NrLGVycm9yLG1lc3NhZ2UpfTthc3NlcnQuZG9lc05vdFRocm93PWZ1bmN0aW9uKGJsb2NrLGVycm9yLG1lc3NhZ2Upe190aHJvd3MoZmFsc2UsYmxvY2ssZXJyb3IsbWVzc2FnZSl9O2Fzc2VydC5pZkVycm9yPWZ1bmN0aW9uKGVycil7aWYoZXJyKXRocm93IGVycn07ZnVuY3Rpb24gc3RyaWN0KHZhbHVlLG1lc3NhZ2Upe2lmKCF2YWx1ZSlmYWlsKHZhbHVlLHRydWUsbWVzc2FnZSwiPT0iLHN0cmljdCl9YXNzZXJ0LnN0cmljdD1vYmplY3RBc3NpZ24oc3RyaWN0LGFzc2VydCx7ZXF1YWw6YXNzZXJ0LnN0cmljdEVxdWFsLGRlZXBFcXVhbDphc3NlcnQuZGVlcFN0cmljdEVxdWFsLG5vdEVxdWFsOmFzc2VydC5ub3RTdHJpY3RFcXVhbCxub3REZWVwRXF1YWw6YXNzZXJ0Lm5vdERlZXBTdHJpY3RFcXVhbH0pO2Fzc2VydC5zdHJpY3Quc3RyaWN0PWFzc2VydC5zdHJpY3Q7dmFyIG9iamVjdEtleXM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKG9iail7dmFyIGtleXM9W107Zm9yKHZhciBrZXkgaW4gb2JqKXtpZihoYXNPd24uY2FsbChvYmosa2V5KSlrZXlzLnB1c2goa2V5KX1yZXR1cm4ga2V5c319KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwhPT0idW5kZWZpbmVkIj9nbG9iYWw6dHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30pfSx7Im9iamVjdC1hc3NpZ24iOjM3LCJ1dGlsLyI6NH1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe2lmKHR5cGVvZiBPYmplY3QuY3JlYXRlPT09ImZ1bmN0aW9uIil7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gaW5oZXJpdHMoY3RvcixzdXBlckN0b3Ipe2N0b3Iuc3VwZXJfPXN1cGVyQ3RvcjtjdG9yLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpjdG9yLGVudW1lcmFibGU6ZmFsc2Usd3JpdGFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZX19KX19ZWxzZXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBpbmhlcml0cyhjdG9yLHN1cGVyQ3Rvcil7Y3Rvci5zdXBlcl89c3VwZXJDdG9yO3ZhciBUZW1wQ3Rvcj1mdW5jdGlvbigpe307VGVtcEN0b3IucHJvdG90eXBlPXN1cGVyQ3Rvci5wcm90b3R5cGU7Y3Rvci5wcm90b3R5cGU9bmV3IFRlbXBDdG9yO2N0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yPWN0b3J9fX0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIGlzQnVmZmVyKGFyZyl7cmV0dXJuIGFyZyYmdHlwZW9mIGFyZz09PSJvYmplY3QiJiZ0eXBlb2YgYXJnLmNvcHk9PT0iZnVuY3Rpb24iJiZ0eXBlb2YgYXJnLmZpbGw9PT0iZnVuY3Rpb24iJiZ0eXBlb2YgYXJnLnJlYWRVSW50OD09PSJmdW5jdGlvbiJ9fSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKHByb2Nlc3MsZ2xvYmFsKXsoZnVuY3Rpb24oKXt2YXIgZm9ybWF0UmVnRXhwPS8lW3NkaiVdL2c7ZXhwb3J0cy5mb3JtYXQ9ZnVuY3Rpb24oZil7aWYoIWlzU3RyaW5nKGYpKXt2YXIgb2JqZWN0cz1bXTtmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXtvYmplY3RzLnB1c2goaW5zcGVjdChhcmd1bWVudHNbaV0pKX1yZXR1cm4gb2JqZWN0cy5qb2luKCIgIil9dmFyIGk9MTt2YXIgYXJncz1hcmd1bWVudHM7dmFyIGxlbj1hcmdzLmxlbmd0aDt2YXIgc3RyPVN0cmluZyhmKS5yZXBsYWNlKGZvcm1hdFJlZ0V4cCxmdW5jdGlvbih4KXtpZih4PT09IiUlIilyZXR1cm4iJSI7aWYoaT49bGVuKXJldHVybiB4O3N3aXRjaCh4KXtjYXNlIiVzIjpyZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7Y2FzZSIlZCI6cmV0dXJuIE51bWJlcihhcmdzW2krK10pO2Nhc2UiJWoiOnRyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKX1jYXRjaChfKXtyZXR1cm4iW0NpcmN1bGFyXSJ9ZGVmYXVsdDpyZXR1cm4geH19KTtmb3IodmFyIHg9YXJnc1tpXTtpPGxlbjt4PWFyZ3NbKytpXSl7aWYoaXNOdWxsKHgpfHwhaXNPYmplY3QoeCkpe3N0cis9IiAiK3h9ZWxzZXtzdHIrPSIgIitpbnNwZWN0KHgpfX1yZXR1cm4gc3RyfTtleHBvcnRzLmRlcHJlY2F0ZT1mdW5jdGlvbihmbixtc2cpe2lmKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGV4cG9ydHMuZGVwcmVjYXRlKGZuLG1zZykuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1pZihwcm9jZXNzLm5vRGVwcmVjYXRpb249PT10cnVlKXtyZXR1cm4gZm59dmFyIHdhcm5lZD1mYWxzZTtmdW5jdGlvbiBkZXByZWNhdGVkKCl7aWYoIXdhcm5lZCl7aWYocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKXt0aHJvdyBuZXcgRXJyb3IobXNnKX1lbHNlIGlmKHByb2Nlc3MudHJhY2VEZXByZWNhdGlvbil7Y29uc29sZS50cmFjZShtc2cpfWVsc2V7Y29uc29sZS5lcnJvcihtc2cpfXdhcm5lZD10cnVlfXJldHVybiBmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGRlcHJlY2F0ZWR9O3ZhciBkZWJ1Z3M9e307dmFyIGRlYnVnRW52aXJvbjtleHBvcnRzLmRlYnVnbG9nPWZ1bmN0aW9uKHNldCl7aWYoaXNVbmRlZmluZWQoZGVidWdFbnZpcm9uKSlkZWJ1Z0Vudmlyb249cHJvY2Vzcy5lbnYuTk9ERV9ERUJVR3x8IiI7c2V0PXNldC50b1VwcGVyQ2FzZSgpO2lmKCFkZWJ1Z3Nbc2V0XSl7aWYobmV3IFJlZ0V4cCgiXFxiIitzZXQrIlxcYiIsImkiKS50ZXN0KGRlYnVnRW52aXJvbikpe3ZhciBwaWQ9cHJvY2Vzcy5waWQ7ZGVidWdzW3NldF09ZnVuY3Rpb24oKXt2YXIgbXNnPWV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKTtjb25zb2xlLmVycm9yKCIlcyAlZDogJXMiLHNldCxwaWQsbXNnKX19ZWxzZXtkZWJ1Z3Nbc2V0XT1mdW5jdGlvbigpe319fXJldHVybiBkZWJ1Z3Nbc2V0XX07ZnVuY3Rpb24gaW5zcGVjdChvYmosb3B0cyl7dmFyIGN0eD17c2VlbjpbXSxzdHlsaXplOnN0eWxpemVOb0NvbG9yfTtpZihhcmd1bWVudHMubGVuZ3RoPj0zKWN0eC5kZXB0aD1hcmd1bWVudHNbMl07aWYoYXJndW1lbnRzLmxlbmd0aD49NCljdHguY29sb3JzPWFyZ3VtZW50c1szXTtpZihpc0Jvb2xlYW4ob3B0cykpe2N0eC5zaG93SGlkZGVuPW9wdHN9ZWxzZSBpZihvcHRzKXtleHBvcnRzLl9leHRlbmQoY3R4LG9wdHMpfWlmKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSljdHguc2hvd0hpZGRlbj1mYWxzZTtpZihpc1VuZGVmaW5lZChjdHguZGVwdGgpKWN0eC5kZXB0aD0yO2lmKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKWN0eC5jb2xvcnM9ZmFsc2U7aWYoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKWN0eC5jdXN0b21JbnNwZWN0PXRydWU7aWYoY3R4LmNvbG9ycyljdHguc3R5bGl6ZT1zdHlsaXplV2l0aENvbG9yO3JldHVybiBmb3JtYXRWYWx1ZShjdHgsb2JqLGN0eC5kZXB0aCl9ZXhwb3J0cy5pbnNwZWN0PWluc3BlY3Q7aW5zcGVjdC5jb2xvcnM9e2JvbGQ6WzEsMjJdLGl0YWxpYzpbMywyM10sdW5kZXJsaW5lOls0LDI0XSxpbnZlcnNlOls3LDI3XSx3aGl0ZTpbMzcsMzldLGdyZXk6WzkwLDM5XSxibGFjazpbMzAsMzldLGJsdWU6WzM0LDM5XSxjeWFuOlszNiwzOV0sZ3JlZW46WzMyLDM5XSxtYWdlbnRhOlszNSwzOV0scmVkOlszMSwzOV0seWVsbG93OlszMywzOV19O2luc3BlY3Quc3R5bGVzPXtzcGVjaWFsOiJjeWFuIixudW1iZXI6InllbGxvdyIsYm9vbGVhbjoieWVsbG93Iix1bmRlZmluZWQ6ImdyZXkiLG51bGw6ImJvbGQiLHN0cmluZzoiZ3JlZW4iLGRhdGU6Im1hZ2VudGEiLHJlZ2V4cDoicmVkIn07ZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsc3R5bGVUeXBlKXt2YXIgc3R5bGU9aW5zcGVjdC5zdHlsZXNbc3R5bGVUeXBlXTtpZihzdHlsZSl7cmV0dXJuIhtbIitpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0rIm0iK3N0cisiG1siK2luc3BlY3QuY29sb3JzW3N0eWxlXVsxXSsibSJ9ZWxzZXtyZXR1cm4gc3RyfX1mdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsc3R5bGVUeXBlKXtyZXR1cm4gc3RyfWZ1bmN0aW9uIGFycmF5VG9IYXNoKGFycmF5KXt2YXIgaGFzaD17fTthcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCxpZHgpe2hhc2hbdmFsXT10cnVlfSk7cmV0dXJuIGhhc2h9ZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LHZhbHVlLHJlY3Vyc2VUaW1lcyl7aWYoY3R4LmN1c3RvbUluc3BlY3QmJnZhbHVlJiZpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpJiZ2YWx1ZS5pbnNwZWN0IT09ZXhwb3J0cy5pbnNwZWN0JiYhKHZhbHVlLmNvbnN0cnVjdG9yJiZ2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU9PT12YWx1ZSkpe3ZhciByZXQ9dmFsdWUuaW5zcGVjdChyZWN1cnNlVGltZXMsY3R4KTtpZighaXNTdHJpbmcocmV0KSl7cmV0PWZvcm1hdFZhbHVlKGN0eCxyZXQscmVjdXJzZVRpbWVzKX1yZXR1cm4gcmV0fXZhciBwcmltaXRpdmU9Zm9ybWF0UHJpbWl0aXZlKGN0eCx2YWx1ZSk7aWYocHJpbWl0aXZlKXtyZXR1cm4gcHJpbWl0aXZlfXZhciBrZXlzPU9iamVjdC5rZXlzKHZhbHVlKTt2YXIgdmlzaWJsZUtleXM9YXJyYXlUb0hhc2goa2V5cyk7aWYoY3R4LnNob3dIaWRkZW4pe2tleXM9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpfWlmKGlzRXJyb3IodmFsdWUpJiYoa2V5cy5pbmRleE9mKCJtZXNzYWdlIik+PTB8fGtleXMuaW5kZXhPZigiZGVzY3JpcHRpb24iKT49MCkpe3JldHVybiBmb3JtYXRFcnJvcih2YWx1ZSl9aWYoa2V5cy5sZW5ndGg9PT0wKXtpZihpc0Z1bmN0aW9uKHZhbHVlKSl7dmFyIG5hbWU9dmFsdWUubmFtZT8iOiAiK3ZhbHVlLm5hbWU6IiI7cmV0dXJuIGN0eC5zdHlsaXplKCJbRnVuY3Rpb24iK25hbWUrIl0iLCJzcGVjaWFsIil9aWYoaXNSZWdFeHAodmFsdWUpKXtyZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwicmVnZXhwIil9aWYoaXNEYXRlKHZhbHVlKSl7cmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCJkYXRlIil9aWYoaXNFcnJvcih2YWx1ZSkpe3JldHVybiBmb3JtYXRFcnJvcih2YWx1ZSl9fXZhciBiYXNlPSIiLGFycmF5PWZhbHNlLGJyYWNlcz1bInsiLCJ9Il07aWYoaXNBcnJheSh2YWx1ZSkpe2FycmF5PXRydWU7YnJhY2VzPVsiWyIsIl0iXX1pZihpc0Z1bmN0aW9uKHZhbHVlKSl7dmFyIG49dmFsdWUubmFtZT8iOiAiK3ZhbHVlLm5hbWU6IiI7YmFzZT0iIFtGdW5jdGlvbiIrbisiXSJ9aWYoaXNSZWdFeHAodmFsdWUpKXtiYXNlPSIgIitSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpfWlmKGlzRGF0ZSh2YWx1ZSkpe2Jhc2U9IiAiK0RhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpfWlmKGlzRXJyb3IodmFsdWUpKXtiYXNlPSIgIitmb3JtYXRFcnJvcih2YWx1ZSl9aWYoa2V5cy5sZW5ndGg9PT0wJiYoIWFycmF5fHx2YWx1ZS5sZW5ndGg9PTApKXtyZXR1cm4gYnJhY2VzWzBdK2Jhc2UrYnJhY2VzWzFdfWlmKHJlY3Vyc2VUaW1lczwwKXtpZihpc1JlZ0V4cCh2YWx1ZSkpe3JldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCJyZWdleHAiKX1lbHNle3JldHVybiBjdHguc3R5bGl6ZSgiW09iamVjdF0iLCJzcGVjaWFsIil9fWN0eC5zZWVuLnB1c2godmFsdWUpO3ZhciBvdXRwdXQ7aWYoYXJyYXkpe291dHB1dD1mb3JtYXRBcnJheShjdHgsdmFsdWUscmVjdXJzZVRpbWVzLHZpc2libGVLZXlzLGtleXMpfWVsc2V7b3V0cHV0PWtleXMubWFwKGZ1bmN0aW9uKGtleSl7cmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCx2YWx1ZSxyZWN1cnNlVGltZXMsdmlzaWJsZUtleXMsa2V5LGFycmF5KX0pfWN0eC5zZWVuLnBvcCgpO3JldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsYmFzZSxicmFjZXMpfWZ1bmN0aW9uIGZvcm1hdFByaW1pdGl2ZShjdHgsdmFsdWUpe2lmKGlzVW5kZWZpbmVkKHZhbHVlKSlyZXR1cm4gY3R4LnN0eWxpemUoInVuZGVmaW5lZCIsInVuZGVmaW5lZCIpO2lmKGlzU3RyaW5nKHZhbHVlKSl7dmFyIHNpbXBsZT0iJyIrSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL14ifCIkL2csIiIpLnJlcGxhY2UoLycvZywiXFwnIikucmVwbGFjZSgvXFwiL2csJyInKSsiJyI7cmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwic3RyaW5nIil9aWYoaXNOdW1iZXIodmFsdWUpKXJldHVybiBjdHguc3R5bGl6ZSgiIit2YWx1ZSwibnVtYmVyIik7aWYoaXNCb29sZWFuKHZhbHVlKSlyZXR1cm4gY3R4LnN0eWxpemUoIiIrdmFsdWUsImJvb2xlYW4iKTtpZihpc051bGwodmFsdWUpKXJldHVybiBjdHguc3R5bGl6ZSgibnVsbCIsIm51bGwiKX1mdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSl7cmV0dXJuIlsiK0Vycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSsiXSJ9ZnVuY3Rpb24gZm9ybWF0QXJyYXkoY3R4LHZhbHVlLHJlY3Vyc2VUaW1lcyx2aXNpYmxlS2V5cyxrZXlzKXt2YXIgb3V0cHV0PVtdO2Zvcih2YXIgaT0wLGw9dmFsdWUubGVuZ3RoO2k8bDsrK2kpe2lmKGhhc093blByb3BlcnR5KHZhbHVlLFN0cmluZyhpKSkpe291dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCx2YWx1ZSxyZWN1cnNlVGltZXMsdmlzaWJsZUtleXMsU3RyaW5nKGkpLHRydWUpKX1lbHNle291dHB1dC5wdXNoKCIiKX19a2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7aWYoIWtleS5tYXRjaCgvXlxkKyQvKSl7b3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LHZhbHVlLHJlY3Vyc2VUaW1lcyx2aXNpYmxlS2V5cyxrZXksdHJ1ZSkpfX0pO3JldHVybiBvdXRwdXR9ZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LHZhbHVlLHJlY3Vyc2VUaW1lcyx2aXNpYmxlS2V5cyxrZXksYXJyYXkpe3ZhciBuYW1lLHN0cixkZXNjO2Rlc2M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSxrZXkpfHx7dmFsdWU6dmFsdWVba2V5XX07aWYoZGVzYy5nZXQpe2lmKGRlc2Muc2V0KXtzdHI9Y3R4LnN0eWxpemUoIltHZXR0ZXIvU2V0dGVyXSIsInNwZWNpYWwiKX1lbHNle3N0cj1jdHguc3R5bGl6ZSgiW0dldHRlcl0iLCJzcGVjaWFsIil9fWVsc2V7aWYoZGVzYy5zZXQpe3N0cj1jdHguc3R5bGl6ZSgiW1NldHRlcl0iLCJzcGVjaWFsIil9fWlmKCFoYXNPd25Qcm9wZXJ0eSh2aXNpYmxlS2V5cyxrZXkpKXtuYW1lPSJbIitrZXkrIl0ifWlmKCFzdHIpe2lmKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSk8MCl7aWYoaXNOdWxsKHJlY3Vyc2VUaW1lcykpe3N0cj1mb3JtYXRWYWx1ZShjdHgsZGVzYy52YWx1ZSxudWxsKX1lbHNle3N0cj1mb3JtYXRWYWx1ZShjdHgsZGVzYy52YWx1ZSxyZWN1cnNlVGltZXMtMSl9aWYoc3RyLmluZGV4T2YoIlxuIik+LTEpe2lmKGFycmF5KXtzdHI9c3RyLnNwbGl0KCJcbiIpLm1hcChmdW5jdGlvbihsaW5lKXtyZXR1cm4iICAiK2xpbmV9KS5qb2luKCJcbiIpLnN1YnN0cigyKX1lbHNle3N0cj0iXG4iK3N0ci5zcGxpdCgiXG4iKS5tYXAoZnVuY3Rpb24obGluZSl7cmV0dXJuIiAgICIrbGluZX0pLmpvaW4oIlxuIil9fX1lbHNle3N0cj1jdHguc3R5bGl6ZSgiW0NpcmN1bGFyXSIsInNwZWNpYWwiKX19aWYoaXNVbmRlZmluZWQobmFtZSkpe2lmKGFycmF5JiZrZXkubWF0Y2goL15cZCskLykpe3JldHVybiBzdHJ9bmFtZT1KU09OLnN0cmluZ2lmeSgiIitrZXkpO2lmKG5hbWUubWF0Y2goL14iKFthLXpBLVpfXVthLXpBLVpfMC05XSopIiQvKSl7bmFtZT1uYW1lLnN1YnN0cigxLG5hbWUubGVuZ3RoLTIpO25hbWU9Y3R4LnN0eWxpemUobmFtZSwibmFtZSIpfWVsc2V7bmFtZT1uYW1lLnJlcGxhY2UoLycvZywiXFwnIikucmVwbGFjZSgvXFwiL2csJyInKS5yZXBsYWNlKC8oXiJ8IiQpL2csIiciKTtuYW1lPWN0eC5zdHlsaXplKG5hbWUsInN0cmluZyIpfX1yZXR1cm4gbmFtZSsiOiAiK3N0cn1mdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsYmFzZSxicmFjZXMpe3ZhciBudW1MaW5lc0VzdD0wO3ZhciBsZW5ndGg9b3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LGN1cil7bnVtTGluZXNFc3QrKztpZihjdXIuaW5kZXhPZigiXG4iKT49MCludW1MaW5lc0VzdCsrO3JldHVybiBwcmV2K2N1ci5yZXBsYWNlKC9cdTAwMWJcW1xkXGQ/bS9nLCIiKS5sZW5ndGgrMX0sMCk7aWYobGVuZ3RoPjYwKXtyZXR1cm4gYnJhY2VzWzBdKyhiYXNlPT09IiI/IiI6YmFzZSsiXG4gIikrIiAiK291dHB1dC5qb2luKCIsXG4gICIpKyIgIiticmFjZXNbMV19cmV0dXJuIGJyYWNlc1swXStiYXNlKyIgIitvdXRwdXQuam9pbigiLCAiKSsiICIrYnJhY2VzWzFdfWZ1bmN0aW9uIGlzQXJyYXkoYXIpe3JldHVybiBBcnJheS5pc0FycmF5KGFyKX1leHBvcnRzLmlzQXJyYXk9aXNBcnJheTtmdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKXtyZXR1cm4gdHlwZW9mIGFyZz09PSJib29sZWFuIn1leHBvcnRzLmlzQm9vbGVhbj1pc0Jvb2xlYW47ZnVuY3Rpb24gaXNOdWxsKGFyZyl7cmV0dXJuIGFyZz09PW51bGx9ZXhwb3J0cy5pc051bGw9aXNOdWxsO2Z1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZyl7cmV0dXJuIGFyZz09bnVsbH1leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkPWlzTnVsbE9yVW5kZWZpbmVkO2Z1bmN0aW9uIGlzTnVtYmVyKGFyZyl7cmV0dXJuIHR5cGVvZiBhcmc9PT0ibnVtYmVyIn1leHBvcnRzLmlzTnVtYmVyPWlzTnVtYmVyO2Z1bmN0aW9uIGlzU3RyaW5nKGFyZyl7cmV0dXJuIHR5cGVvZiBhcmc9PT0ic3RyaW5nIn1leHBvcnRzLmlzU3RyaW5nPWlzU3RyaW5nO2Z1bmN0aW9uIGlzU3ltYm9sKGFyZyl7cmV0dXJuIHR5cGVvZiBhcmc9PT0ic3ltYm9sIn1leHBvcnRzLmlzU3ltYm9sPWlzU3ltYm9sO2Z1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZyl7cmV0dXJuIGFyZz09PXZvaWQgMH1leHBvcnRzLmlzVW5kZWZpbmVkPWlzVW5kZWZpbmVkO2Z1bmN0aW9uIGlzUmVnRXhwKHJlKXtyZXR1cm4gaXNPYmplY3QocmUpJiZvYmplY3RUb1N0cmluZyhyZSk9PT0iW29iamVjdCBSZWdFeHBdIn1leHBvcnRzLmlzUmVnRXhwPWlzUmVnRXhwO2Z1bmN0aW9uIGlzT2JqZWN0KGFyZyl7cmV0dXJuIHR5cGVvZiBhcmc9PT0ib2JqZWN0IiYmYXJnIT09bnVsbH1leHBvcnRzLmlzT2JqZWN0PWlzT2JqZWN0O2Z1bmN0aW9uIGlzRGF0ZShkKXtyZXR1cm4gaXNPYmplY3QoZCkmJm9iamVjdFRvU3RyaW5nKGQpPT09IltvYmplY3QgRGF0ZV0ifWV4cG9ydHMuaXNEYXRlPWlzRGF0ZTtmdW5jdGlvbiBpc0Vycm9yKGUpe3JldHVybiBpc09iamVjdChlKSYmKG9iamVjdFRvU3RyaW5nKGUpPT09IltvYmplY3QgRXJyb3JdInx8ZSBpbnN0YW5jZW9mIEVycm9yKX1leHBvcnRzLmlzRXJyb3I9aXNFcnJvcjtmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZyl7cmV0dXJuIHR5cGVvZiBhcmc9PT0iZnVuY3Rpb24ifWV4cG9ydHMuaXNGdW5jdGlvbj1pc0Z1bmN0aW9uO2Z1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZyl7cmV0dXJuIGFyZz09PW51bGx8fHR5cGVvZiBhcmc9PT0iYm9vbGVhbiJ8fHR5cGVvZiBhcmc9PT0ibnVtYmVyInx8dHlwZW9mIGFyZz09PSJzdHJpbmcifHx0eXBlb2YgYXJnPT09InN5bWJvbCJ8fHR5cGVvZiBhcmc9PT0idW5kZWZpbmVkIn1leHBvcnRzLmlzUHJpbWl0aXZlPWlzUHJpbWl0aXZlO2V4cG9ydHMuaXNCdWZmZXI9cmVxdWlyZSgiLi9zdXBwb3J0L2lzQnVmZmVyIik7ZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobyl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKX1mdW5jdGlvbiBwYWQobil7cmV0dXJuIG48MTA/IjAiK24udG9TdHJpbmcoMTApOm4udG9TdHJpbmcoMTApfXZhciBtb250aHM9WyJKYW4iLCJGZWIiLCJNYXIiLCJBcHIiLCJNYXkiLCJKdW4iLCJKdWwiLCJBdWciLCJTZXAiLCJPY3QiLCJOb3YiLCJEZWMiXTtmdW5jdGlvbiB0aW1lc3RhbXAoKXt2YXIgZD1uZXcgRGF0ZTt2YXIgdGltZT1bcGFkKGQuZ2V0SG91cnMoKSkscGFkKGQuZ2V0TWludXRlcygpKSxwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCI6Iik7cmV0dXJuW2QuZ2V0RGF0ZSgpLG1vbnRoc1tkLmdldE1vbnRoKCldLHRpbWVdLmpvaW4oIiAiKX1leHBvcnRzLmxvZz1mdW5jdGlvbigpe2NvbnNvbGUubG9nKCIlcyAtICVzIix0aW1lc3RhbXAoKSxleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLGFyZ3VtZW50cykpfTtleHBvcnRzLmluaGVyaXRzPXJlcXVpcmUoImluaGVyaXRzIik7ZXhwb3J0cy5fZXh0ZW5kPWZ1bmN0aW9uKG9yaWdpbixhZGQpe2lmKCFhZGR8fCFpc09iamVjdChhZGQpKXJldHVybiBvcmlnaW47dmFyIGtleXM9T2JqZWN0LmtleXMoYWRkKTt2YXIgaT1rZXlzLmxlbmd0aDt3aGlsZShpLS0pe29yaWdpbltrZXlzW2ldXT1hZGRba2V5c1tpXV19cmV0dXJuIG9yaWdpbn07ZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLHByb3Ape3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLHByb3ApfX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMscmVxdWlyZSgiX3Byb2Nlc3MiKSx0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9KX0seyIuL3N1cHBvcnQvaXNCdWZmZXIiOjMsX3Byb2Nlc3M6MzksaW5oZXJpdHM6Mn1dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpeyhmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgcG9zc2libGVOYW1lcz1bIkJpZ0ludDY0QXJyYXkiLCJCaWdVaW50NjRBcnJheSIsIkZsb2F0MzJBcnJheSIsIkZsb2F0NjRBcnJheSIsIkludDE2QXJyYXkiLCJJbnQzMkFycmF5IiwiSW50OEFycmF5IiwiVWludDE2QXJyYXkiLCJVaW50MzJBcnJheSIsIlVpbnQ4QXJyYXkiLCJVaW50OENsYW1wZWRBcnJheSJdO3ZhciBnPXR5cGVvZiBnbG9iYWxUaGlzPT09InVuZGVmaW5lZCI/Z2xvYmFsOmdsb2JhbFRoaXM7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gYXZhaWxhYmxlVHlwZWRBcnJheXMoKXt2YXIgb3V0PVtdO2Zvcih2YXIgaT0wO2k8cG9zc2libGVOYW1lcy5sZW5ndGg7aSsrKXtpZih0eXBlb2YgZ1twb3NzaWJsZU5hbWVzW2ldXT09PSJmdW5jdGlvbiIpe291dFtvdXQubGVuZ3RoXT1wb3NzaWJsZU5hbWVzW2ldfX1yZXR1cm4gb3V0fX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCE9PSJ1bmRlZmluZWQiP2dsb2JhbDp0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSl9LHt9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5ieXRlTGVuZ3RoPWJ5dGVMZW5ndGg7ZXhwb3J0cy50b0J5dGVBcnJheT10b0J5dGVBcnJheTtleHBvcnRzLmZyb21CeXRlQXJyYXk9ZnJvbUJ5dGVBcnJheTt2YXIgbG9va3VwPVtdO3ZhciByZXZMb29rdXA9W107dmFyIEFycj10eXBlb2YgVWludDhBcnJheSE9PSJ1bmRlZmluZWQiP1VpbnQ4QXJyYXk6QXJyYXk7dmFyIGNvZGU9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iO2Zvcih2YXIgaT0wLGxlbj1jb2RlLmxlbmd0aDtpPGxlbjsrK2kpe2xvb2t1cFtpXT1jb2RlW2ldO3Jldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldPWl9cmV2TG9va3VwWyItIi5jaGFyQ29kZUF0KDApXT02MjtyZXZMb29rdXBbIl8iLmNoYXJDb2RlQXQoMCldPTYzO2Z1bmN0aW9uIGdldExlbnMoYjY0KXt2YXIgbGVuPWI2NC5sZW5ndGg7aWYobGVuJTQ+MCl7dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Iil9dmFyIHZhbGlkTGVuPWI2NC5pbmRleE9mKCI9Iik7aWYodmFsaWRMZW49PT0tMSl2YWxpZExlbj1sZW47dmFyIHBsYWNlSG9sZGVyc0xlbj12YWxpZExlbj09PWxlbj8wOjQtdmFsaWRMZW4lNDtyZXR1cm5bdmFsaWRMZW4scGxhY2VIb2xkZXJzTGVuXX1mdW5jdGlvbiBieXRlTGVuZ3RoKGI2NCl7dmFyIGxlbnM9Z2V0TGVucyhiNjQpO3ZhciB2YWxpZExlbj1sZW5zWzBdO3ZhciBwbGFjZUhvbGRlcnNMZW49bGVuc1sxXTtyZXR1cm4odmFsaWRMZW4rcGxhY2VIb2xkZXJzTGVuKSozLzQtcGxhY2VIb2xkZXJzTGVufWZ1bmN0aW9uIF9ieXRlTGVuZ3RoKGI2NCx2YWxpZExlbixwbGFjZUhvbGRlcnNMZW4pe3JldHVybih2YWxpZExlbitwbGFjZUhvbGRlcnNMZW4pKjMvNC1wbGFjZUhvbGRlcnNMZW59ZnVuY3Rpb24gdG9CeXRlQXJyYXkoYjY0KXt2YXIgdG1wO3ZhciBsZW5zPWdldExlbnMoYjY0KTt2YXIgdmFsaWRMZW49bGVuc1swXTt2YXIgcGxhY2VIb2xkZXJzTGVuPWxlbnNbMV07dmFyIGFycj1uZXcgQXJyKF9ieXRlTGVuZ3RoKGI2NCx2YWxpZExlbixwbGFjZUhvbGRlcnNMZW4pKTt2YXIgY3VyQnl0ZT0wO3ZhciBsZW49cGxhY2VIb2xkZXJzTGVuPjA/dmFsaWRMZW4tNDp2YWxpZExlbjt2YXIgaTtmb3IoaT0wO2k8bGVuO2krPTQpe3RtcD1yZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldPDwxOHxyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSsxKV08PDEyfHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKzIpXTw8NnxyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSszKV07YXJyW2N1ckJ5dGUrK109dG1wPj4xNiYyNTU7YXJyW2N1ckJ5dGUrK109dG1wPj44JjI1NTthcnJbY3VyQnl0ZSsrXT10bXAmMjU1fWlmKHBsYWNlSG9sZGVyc0xlbj09PTIpe3RtcD1yZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldPDwyfHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKzEpXT4+NDthcnJbY3VyQnl0ZSsrXT10bXAmMjU1fWlmKHBsYWNlSG9sZGVyc0xlbj09PTEpe3RtcD1yZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldPDwxMHxyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSsxKV08PDR8cmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkrMildPj4yO2FycltjdXJCeXRlKytdPXRtcD4+OCYyNTU7YXJyW2N1ckJ5dGUrK109dG1wJjI1NX1yZXR1cm4gYXJyfWZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NChudW0pe3JldHVybiBsb29rdXBbbnVtPj4xOCY2M10rbG9va3VwW251bT4+MTImNjNdK2xvb2t1cFtudW0+PjYmNjNdK2xvb2t1cFtudW0mNjNdfWZ1bmN0aW9uIGVuY29kZUNodW5rKHVpbnQ4LHN0YXJ0LGVuZCl7dmFyIHRtcDt2YXIgb3V0cHV0PVtdO2Zvcih2YXIgaT1zdGFydDtpPGVuZDtpKz0zKXt0bXA9KHVpbnQ4W2ldPDwxNiYxNjcxMTY4MCkrKHVpbnQ4W2krMV08PDgmNjUyODApKyh1aW50OFtpKzJdJjI1NSk7b3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0KHRtcCkpfXJldHVybiBvdXRwdXQuam9pbigiIil9ZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSh1aW50OCl7dmFyIHRtcDt2YXIgbGVuPXVpbnQ4Lmxlbmd0aDt2YXIgZXh0cmFCeXRlcz1sZW4lMzt2YXIgcGFydHM9W107dmFyIG1heENodW5rTGVuZ3RoPTE2MzgzO2Zvcih2YXIgaT0wLGxlbjI9bGVuLWV4dHJhQnl0ZXM7aTxsZW4yO2krPW1heENodW5rTGVuZ3RoKXtwYXJ0cy5wdXNoKGVuY29kZUNodW5rKHVpbnQ4LGksaSttYXhDaHVua0xlbmd0aD5sZW4yP2xlbjI6aSttYXhDaHVua0xlbmd0aCkpfWlmKGV4dHJhQnl0ZXM9PT0xKXt0bXA9dWludDhbbGVuLTFdO3BhcnRzLnB1c2gobG9va3VwW3RtcD4+Ml0rbG9va3VwW3RtcDw8NCY2M10rIj09Iil9ZWxzZSBpZihleHRyYUJ5dGVzPT09Mil7dG1wPSh1aW50OFtsZW4tMl08PDgpK3VpbnQ4W2xlbi0xXTtwYXJ0cy5wdXNoKGxvb2t1cFt0bXA+PjEwXStsb29rdXBbdG1wPj40JjYzXStsb29rdXBbdG1wPDwyJjYzXSsiPSIpfXJldHVybiBwYXJ0cy5qb2luKCIiKX19LHt9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXt9LHt9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oQnVmZmVyKXsoZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGJhc2U2ND1yZXF1aXJlKCJiYXNlNjQtanMiKTt2YXIgaWVlZTc1ND1yZXF1aXJlKCJpZWVlNzU0Iik7ZXhwb3J0cy5CdWZmZXI9QnVmZmVyO2V4cG9ydHMuU2xvd0J1ZmZlcj1TbG93QnVmZmVyO2V4cG9ydHMuSU5TUEVDVF9NQVhfQllURVM9NTA7dmFyIEtfTUFYX0xFTkdUSD0yMTQ3NDgzNjQ3O2V4cG9ydHMua01heExlbmd0aD1LX01BWF9MRU5HVEg7QnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQ9dHlwZWRBcnJheVN1cHBvcnQoKTtpZighQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQmJnR5cGVvZiBjb25zb2xlIT09InVuZGVmaW5lZCImJnR5cGVvZiBjb25zb2xlLmVycm9yPT09ImZ1bmN0aW9uIil7Y29uc29sZS5lcnJvcigiVGhpcyBicm93c2VyIGxhY2tzIHR5cGVkIGFycmF5IChVaW50OEFycmF5KSBzdXBwb3J0IHdoaWNoIGlzIHJlcXVpcmVkIGJ5ICIrImBidWZmZXJgIHY1LnguIFVzZSBgYnVmZmVyYCB2NC54IGlmIHlvdSByZXF1aXJlIG9sZCBicm93c2VyIHN1cHBvcnQuIil9ZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQoKXt0cnl7dmFyIGFycj1uZXcgVWludDhBcnJheSgxKTthcnIuX19wcm90b19fPXtfX3Byb3RvX186VWludDhBcnJheS5wcm90b3R5cGUsZm9vOmZ1bmN0aW9uKCl7cmV0dXJuIDQyfX07cmV0dXJuIGFyci5mb28oKT09PTQyfWNhdGNoKGUpe3JldHVybiBmYWxzZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlci5wcm90b3R5cGUsInBhcmVudCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtpZighQnVmZmVyLmlzQnVmZmVyKHRoaXMpKXJldHVybiB1bmRlZmluZWQ7cmV0dXJuIHRoaXMuYnVmZmVyfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIucHJvdG90eXBlLCJvZmZzZXQiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7aWYoIUJ1ZmZlci5pc0J1ZmZlcih0aGlzKSlyZXR1cm4gdW5kZWZpbmVkO3JldHVybiB0aGlzLmJ5dGVPZmZzZXR9fSk7ZnVuY3Rpb24gY3JlYXRlQnVmZmVyKGxlbmd0aCl7aWYobGVuZ3RoPktfTUFYX0xFTkdUSCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSAiJytsZW5ndGgrJyIgaXMgaW52YWxpZCBmb3Igb3B0aW9uICJzaXplIicpfXZhciBidWY9bmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtidWYuX19wcm90b19fPUJ1ZmZlci5wcm90b3R5cGU7cmV0dXJuIGJ1Zn1mdW5jdGlvbiBCdWZmZXIoYXJnLGVuY29kaW5nT3JPZmZzZXQsbGVuZ3RoKXtpZih0eXBlb2YgYXJnPT09Im51bWJlciIpe2lmKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0PT09InN0cmluZyIpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAic3RyaW5nIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nLiBSZWNlaXZlZCB0eXBlIG51bWJlcicpfXJldHVybiBhbGxvY1Vuc2FmZShhcmcpfXJldHVybiBmcm9tKGFyZyxlbmNvZGluZ09yT2Zmc2V0LGxlbmd0aCl9aWYodHlwZW9mIFN5bWJvbCE9PSJ1bmRlZmluZWQiJiZTeW1ib2wuc3BlY2llcyE9bnVsbCYmQnVmZmVyW1N5bWJvbC5zcGVjaWVzXT09PUJ1ZmZlcil7T2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlcixTeW1ib2wuc3BlY2llcyx7dmFsdWU6bnVsbCxjb25maWd1cmFibGU6dHJ1ZSxlbnVtZXJhYmxlOmZhbHNlLHdyaXRhYmxlOmZhbHNlfSl9QnVmZmVyLnBvb2xTaXplPTgxOTI7ZnVuY3Rpb24gZnJvbSh2YWx1ZSxlbmNvZGluZ09yT2Zmc2V0LGxlbmd0aCl7aWYodHlwZW9mIHZhbHVlPT09InN0cmluZyIpe3JldHVybiBmcm9tU3RyaW5nKHZhbHVlLGVuY29kaW5nT3JPZmZzZXQpfWlmKEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpe3JldHVybiBmcm9tQXJyYXlMaWtlKHZhbHVlKX1pZih2YWx1ZT09bnVsbCl7dGhyb3cgVHlwZUVycm9yKCJUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCAiKyJvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSAiK3R5cGVvZiB2YWx1ZSl9aWYoaXNJbnN0YW5jZSh2YWx1ZSxBcnJheUJ1ZmZlcil8fHZhbHVlJiZpc0luc3RhbmNlKHZhbHVlLmJ1ZmZlcixBcnJheUJ1ZmZlcikpe3JldHVybiBmcm9tQXJyYXlCdWZmZXIodmFsdWUsZW5jb2RpbmdPck9mZnNldCxsZW5ndGgpfWlmKHR5cGVvZiB2YWx1ZT09PSJudW1iZXIiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSBudW1iZXInKX12YXIgdmFsdWVPZj12YWx1ZS52YWx1ZU9mJiZ2YWx1ZS52YWx1ZU9mKCk7aWYodmFsdWVPZiE9bnVsbCYmdmFsdWVPZiE9PXZhbHVlKXtyZXR1cm4gQnVmZmVyLmZyb20odmFsdWVPZixlbmNvZGluZ09yT2Zmc2V0LGxlbmd0aCl9dmFyIGI9ZnJvbU9iamVjdCh2YWx1ZSk7aWYoYilyZXR1cm4gYjtpZih0eXBlb2YgU3ltYm9sIT09InVuZGVmaW5lZCImJlN5bWJvbC50b1ByaW1pdGl2ZSE9bnVsbCYmdHlwZW9mIHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV09PT0iZnVuY3Rpb24iKXtyZXR1cm4gQnVmZmVyLmZyb20odmFsdWVbU3ltYm9sLnRvUHJpbWl0aXZlXSgic3RyaW5nIiksZW5jb2RpbmdPck9mZnNldCxsZW5ndGgpfXRocm93IG5ldyBUeXBlRXJyb3IoIlRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksICIrIm9yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlICIrdHlwZW9mIHZhbHVlKX1CdWZmZXIuZnJvbT1mdW5jdGlvbih2YWx1ZSxlbmNvZGluZ09yT2Zmc2V0LGxlbmd0aCl7cmV0dXJuIGZyb20odmFsdWUsZW5jb2RpbmdPck9mZnNldCxsZW5ndGgpfTtCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXz1VaW50OEFycmF5LnByb3RvdHlwZTtCdWZmZXIuX19wcm90b19fPVVpbnQ4QXJyYXk7ZnVuY3Rpb24gYXNzZXJ0U2l6ZShzaXplKXtpZih0eXBlb2Ygc2l6ZSE9PSJudW1iZXIiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlcicpfWVsc2UgaWYoc2l6ZTwwKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlICInK3NpemUrJyIgaXMgaW52YWxpZCBmb3Igb3B0aW9uICJzaXplIicpfX1mdW5jdGlvbiBhbGxvYyhzaXplLGZpbGwsZW5jb2Rpbmcpe2Fzc2VydFNpemUoc2l6ZSk7aWYoc2l6ZTw9MCl7cmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplKX1pZihmaWxsIT09dW5kZWZpbmVkKXtyZXR1cm4gdHlwZW9mIGVuY29kaW5nPT09InN0cmluZyI/Y3JlYXRlQnVmZmVyKHNpemUpLmZpbGwoZmlsbCxlbmNvZGluZyk6Y3JlYXRlQnVmZmVyKHNpemUpLmZpbGwoZmlsbCl9cmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplKX1CdWZmZXIuYWxsb2M9ZnVuY3Rpb24oc2l6ZSxmaWxsLGVuY29kaW5nKXtyZXR1cm4gYWxsb2Moc2l6ZSxmaWxsLGVuY29kaW5nKX07ZnVuY3Rpb24gYWxsb2NVbnNhZmUoc2l6ZSl7YXNzZXJ0U2l6ZShzaXplKTtyZXR1cm4gY3JlYXRlQnVmZmVyKHNpemU8MD8wOmNoZWNrZWQoc2l6ZSl8MCl9QnVmZmVyLmFsbG9jVW5zYWZlPWZ1bmN0aW9uKHNpemUpe3JldHVybiBhbGxvY1Vuc2FmZShzaXplKX07QnVmZmVyLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihzaXplKXtyZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSl9O2Z1bmN0aW9uIGZyb21TdHJpbmcoc3RyaW5nLGVuY29kaW5nKXtpZih0eXBlb2YgZW5jb2RpbmchPT0ic3RyaW5nInx8ZW5jb2Rpbmc9PT0iIil7ZW5jb2Rpbmc9InV0ZjgifWlmKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrZW5jb2RpbmcpfXZhciBsZW5ndGg9Ynl0ZUxlbmd0aChzdHJpbmcsZW5jb2RpbmcpfDA7dmFyIGJ1Zj1jcmVhdGVCdWZmZXIobGVuZ3RoKTt2YXIgYWN0dWFsPWJ1Zi53cml0ZShzdHJpbmcsZW5jb2RpbmcpO2lmKGFjdHVhbCE9PWxlbmd0aCl7YnVmPWJ1Zi5zbGljZSgwLGFjdHVhbCl9cmV0dXJuIGJ1Zn1mdW5jdGlvbiBmcm9tQXJyYXlMaWtlKGFycmF5KXt2YXIgbGVuZ3RoPWFycmF5Lmxlbmd0aDwwPzA6Y2hlY2tlZChhcnJheS5sZW5ndGgpfDA7dmFyIGJ1Zj1jcmVhdGVCdWZmZXIobGVuZ3RoKTtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKz0xKXtidWZbaV09YXJyYXlbaV0mMjU1fXJldHVybiBidWZ9ZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyKGFycmF5LGJ5dGVPZmZzZXQsbGVuZ3RoKXtpZihieXRlT2Zmc2V0PDB8fGFycmF5LmJ5dGVMZW5ndGg8Ynl0ZU9mZnNldCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJvZmZzZXQiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpfWlmKGFycmF5LmJ5dGVMZW5ndGg8Ynl0ZU9mZnNldCsobGVuZ3RofHwwKSl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJsZW5ndGgiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpfXZhciBidWY7aWYoYnl0ZU9mZnNldD09PXVuZGVmaW5lZCYmbGVuZ3RoPT09dW5kZWZpbmVkKXtidWY9bmV3IFVpbnQ4QXJyYXkoYXJyYXkpfWVsc2UgaWYobGVuZ3RoPT09dW5kZWZpbmVkKXtidWY9bmV3IFVpbnQ4QXJyYXkoYXJyYXksYnl0ZU9mZnNldCl9ZWxzZXtidWY9bmV3IFVpbnQ4QXJyYXkoYXJyYXksYnl0ZU9mZnNldCxsZW5ndGgpfWJ1Zi5fX3Byb3RvX189QnVmZmVyLnByb3RvdHlwZTtyZXR1cm4gYnVmfWZ1bmN0aW9uIGZyb21PYmplY3Qob2JqKXtpZihCdWZmZXIuaXNCdWZmZXIob2JqKSl7dmFyIGxlbj1jaGVja2VkKG9iai5sZW5ndGgpfDA7dmFyIGJ1Zj1jcmVhdGVCdWZmZXIobGVuKTtpZihidWYubGVuZ3RoPT09MCl7cmV0dXJuIGJ1Zn1vYmouY29weShidWYsMCwwLGxlbik7cmV0dXJuIGJ1Zn1pZihvYmoubGVuZ3RoIT09dW5kZWZpbmVkKXtpZih0eXBlb2Ygb2JqLmxlbmd0aCE9PSJudW1iZXIifHxudW1iZXJJc05hTihvYmoubGVuZ3RoKSl7cmV0dXJuIGNyZWF0ZUJ1ZmZlcigwKX1yZXR1cm4gZnJvbUFycmF5TGlrZShvYmopfWlmKG9iai50eXBlPT09IkJ1ZmZlciImJkFycmF5LmlzQXJyYXkob2JqLmRhdGEpKXtyZXR1cm4gZnJvbUFycmF5TGlrZShvYmouZGF0YSl9fWZ1bmN0aW9uIGNoZWNrZWQobGVuZ3RoKXtpZihsZW5ndGg+PUtfTUFYX0xFTkdUSCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkF0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gIisic2l6ZTogMHgiK0tfTUFYX0xFTkdUSC50b1N0cmluZygxNikrIiBieXRlcyIpfXJldHVybiBsZW5ndGh8MH1mdW5jdGlvbiBTbG93QnVmZmVyKGxlbmd0aCl7aWYoK2xlbmd0aCE9bGVuZ3RoKXtsZW5ndGg9MH1yZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpfUJ1ZmZlci5pc0J1ZmZlcj1mdW5jdGlvbiBpc0J1ZmZlcihiKXtyZXR1cm4gYiE9bnVsbCYmYi5faXNCdWZmZXI9PT10cnVlJiZiIT09QnVmZmVyLnByb3RvdHlwZX07QnVmZmVyLmNvbXBhcmU9ZnVuY3Rpb24gY29tcGFyZShhLGIpe2lmKGlzSW5zdGFuY2UoYSxVaW50OEFycmF5KSlhPUJ1ZmZlci5mcm9tKGEsYS5vZmZzZXQsYS5ieXRlTGVuZ3RoKTtpZihpc0luc3RhbmNlKGIsVWludDhBcnJheSkpYj1CdWZmZXIuZnJvbShiLGIub2Zmc2V0LGIuYnl0ZUxlbmd0aCk7aWYoIUJ1ZmZlci5pc0J1ZmZlcihhKXx8IUJ1ZmZlci5pc0J1ZmZlcihiKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignVGhlICJidWYxIiwgImJ1ZjIiIGFyZ3VtZW50cyBtdXN0IGJlIG9uZSBvZiB0eXBlIEJ1ZmZlciBvciBVaW50OEFycmF5Jyl9aWYoYT09PWIpcmV0dXJuIDA7dmFyIHg9YS5sZW5ndGg7dmFyIHk9Yi5sZW5ndGg7Zm9yKHZhciBpPTAsbGVuPU1hdGgubWluKHgseSk7aTxsZW47KytpKXtpZihhW2ldIT09YltpXSl7eD1hW2ldO3k9YltpXTticmVha319aWYoeDx5KXJldHVybi0xO2lmKHk8eClyZXR1cm4gMTtyZXR1cm4gMH07QnVmZmVyLmlzRW5jb2Rpbmc9ZnVuY3Rpb24gaXNFbmNvZGluZyhlbmNvZGluZyl7c3dpdGNoKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSl7Y2FzZSJoZXgiOmNhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6Y2FzZSJhc2NpaSI6Y2FzZSJsYXRpbjEiOmNhc2UiYmluYXJ5IjpjYXNlImJhc2U2NCI6Y2FzZSJ1Y3MyIjpjYXNlInVjcy0yIjpjYXNlInV0ZjE2bGUiOmNhc2UidXRmLTE2bGUiOnJldHVybiB0cnVlO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX07QnVmZmVyLmNvbmNhdD1mdW5jdGlvbiBjb25jYXQobGlzdCxsZW5ndGgpe2lmKCFBcnJheS5pc0FycmF5KGxpc3QpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyl9aWYobGlzdC5sZW5ndGg9PT0wKXtyZXR1cm4gQnVmZmVyLmFsbG9jKDApfXZhciBpO2lmKGxlbmd0aD09PXVuZGVmaW5lZCl7bGVuZ3RoPTA7Zm9yKGk9MDtpPGxpc3QubGVuZ3RoOysraSl7bGVuZ3RoKz1saXN0W2ldLmxlbmd0aH19dmFyIGJ1ZmZlcj1CdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKTt2YXIgcG9zPTA7Zm9yKGk9MDtpPGxpc3QubGVuZ3RoOysraSl7dmFyIGJ1Zj1saXN0W2ldO2lmKGlzSW5zdGFuY2UoYnVmLFVpbnQ4QXJyYXkpKXtidWY9QnVmZmVyLmZyb20oYnVmKX1pZighQnVmZmVyLmlzQnVmZmVyKGJ1Zikpe3Rocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKX1idWYuY29weShidWZmZXIscG9zKTtwb3MrPWJ1Zi5sZW5ndGh9cmV0dXJuIGJ1ZmZlcn07ZnVuY3Rpb24gYnl0ZUxlbmd0aChzdHJpbmcsZW5jb2Rpbmcpe2lmKEJ1ZmZlci5pc0J1ZmZlcihzdHJpbmcpKXtyZXR1cm4gc3RyaW5nLmxlbmd0aH1pZihBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKXx8aXNJbnN0YW5jZShzdHJpbmcsQXJyYXlCdWZmZXIpKXtyZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGh9aWYodHlwZW9mIHN0cmluZyE9PSJzdHJpbmciKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgInN0cmluZyIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgb3IgQXJyYXlCdWZmZXIuICcrIlJlY2VpdmVkIHR5cGUgIit0eXBlb2Ygc3RyaW5nKX12YXIgbGVuPXN0cmluZy5sZW5ndGg7dmFyIG11c3RNYXRjaD1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXT09PXRydWU7aWYoIW11c3RNYXRjaCYmbGVuPT09MClyZXR1cm4gMDt2YXIgbG93ZXJlZENhc2U9ZmFsc2U7Zm9yKDs7KXtzd2l0Y2goZW5jb2Rpbmcpe2Nhc2UiYXNjaWkiOmNhc2UibGF0aW4xIjpjYXNlImJpbmFyeSI6cmV0dXJuIGxlbjtjYXNlInV0ZjgiOmNhc2UidXRmLTgiOnJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aDtjYXNlInVjczIiOmNhc2UidWNzLTIiOmNhc2UidXRmMTZsZSI6Y2FzZSJ1dGYtMTZsZSI6cmV0dXJuIGxlbioyO2Nhc2UiaGV4IjpyZXR1cm4gbGVuPj4+MTtjYXNlImJhc2U2NCI6cmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGg7ZGVmYXVsdDppZihsb3dlcmVkQ2FzZSl7cmV0dXJuIG11c3RNYXRjaD8tMTp1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aH1lbmNvZGluZz0oIiIrZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCk7bG93ZXJlZENhc2U9dHJ1ZX19fUJ1ZmZlci5ieXRlTGVuZ3RoPWJ5dGVMZW5ndGg7ZnVuY3Rpb24gc2xvd1RvU3RyaW5nKGVuY29kaW5nLHN0YXJ0LGVuZCl7dmFyIGxvd2VyZWRDYXNlPWZhbHNlO2lmKHN0YXJ0PT09dW5kZWZpbmVkfHxzdGFydDwwKXtzdGFydD0wfWlmKHN0YXJ0PnRoaXMubGVuZ3RoKXtyZXR1cm4iIn1pZihlbmQ9PT11bmRlZmluZWR8fGVuZD50aGlzLmxlbmd0aCl7ZW5kPXRoaXMubGVuZ3RofWlmKGVuZDw9MCl7cmV0dXJuIiJ9ZW5kPj4+PTA7c3RhcnQ+Pj49MDtpZihlbmQ8PXN0YXJ0KXtyZXR1cm4iIn1pZighZW5jb2RpbmcpZW5jb2Rpbmc9InV0ZjgiO3doaWxlKHRydWUpe3N3aXRjaChlbmNvZGluZyl7Y2FzZSJoZXgiOnJldHVybiBoZXhTbGljZSh0aGlzLHN0YXJ0LGVuZCk7Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpyZXR1cm4gdXRmOFNsaWNlKHRoaXMsc3RhcnQsZW5kKTtjYXNlImFzY2lpIjpyZXR1cm4gYXNjaWlTbGljZSh0aGlzLHN0YXJ0LGVuZCk7Y2FzZSJsYXRpbjEiOmNhc2UiYmluYXJ5IjpyZXR1cm4gbGF0aW4xU2xpY2UodGhpcyxzdGFydCxlbmQpO2Nhc2UiYmFzZTY0IjpyZXR1cm4gYmFzZTY0U2xpY2UodGhpcyxzdGFydCxlbmQpO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsc3RhcnQsZW5kKTtkZWZhdWx0OmlmKGxvd2VyZWRDYXNlKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrZW5jb2RpbmcpO2VuY29kaW5nPShlbmNvZGluZysiIikudG9Mb3dlckNhc2UoKTtsb3dlcmVkQ2FzZT10cnVlfX19QnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXI9dHJ1ZTtmdW5jdGlvbiBzd2FwKGIsbixtKXt2YXIgaT1iW25dO2Jbbl09YlttXTtiW21dPWl9QnVmZmVyLnByb3RvdHlwZS5zd2FwMTY9ZnVuY3Rpb24gc3dhcDE2KCl7dmFyIGxlbj10aGlzLmxlbmd0aDtpZihsZW4lMiE9PTApe3Rocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cyIpfWZvcih2YXIgaT0wO2k8bGVuO2krPTIpe3N3YXAodGhpcyxpLGkrMSl9cmV0dXJuIHRoaXN9O0J1ZmZlci5wcm90b3R5cGUuc3dhcDMyPWZ1bmN0aW9uIHN3YXAzMigpe3ZhciBsZW49dGhpcy5sZW5ndGg7aWYobGVuJTQhPT0wKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMiKX1mb3IodmFyIGk9MDtpPGxlbjtpKz00KXtzd2FwKHRoaXMsaSxpKzMpO3N3YXAodGhpcyxpKzEsaSsyKX1yZXR1cm4gdGhpc307QnVmZmVyLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24gc3dhcDY0KCl7dmFyIGxlbj10aGlzLmxlbmd0aDtpZihsZW4lOCE9PTApe3Rocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cyIpfWZvcih2YXIgaT0wO2k8bGVuO2krPTgpe3N3YXAodGhpcyxpLGkrNyk7c3dhcCh0aGlzLGkrMSxpKzYpO3N3YXAodGhpcyxpKzIsaSs1KTtzd2FwKHRoaXMsaSszLGkrNCl9cmV0dXJuIHRoaXN9O0J1ZmZlci5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24gdG9TdHJpbmcoKXt2YXIgbGVuZ3RoPXRoaXMubGVuZ3RoO2lmKGxlbmd0aD09PTApcmV0dXJuIiI7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApcmV0dXJuIHV0ZjhTbGljZSh0aGlzLDAsbGVuZ3RoKTtyZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07QnVmZmVyLnByb3RvdHlwZS50b0xvY2FsZVN0cmluZz1CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nO0J1ZmZlci5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uIGVxdWFscyhiKXtpZighQnVmZmVyLmlzQnVmZmVyKGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTtpZih0aGlzPT09YilyZXR1cm4gdHJ1ZTtyZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcyxiKT09PTB9O0J1ZmZlci5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbiBpbnNwZWN0KCl7dmFyIHN0cj0iIjt2YXIgbWF4PWV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVM7c3RyPXRoaXMudG9TdHJpbmcoImhleCIsMCxtYXgpLnJlcGxhY2UoLyguezJ9KS9nLCIkMSAiKS50cmltKCk7aWYodGhpcy5sZW5ndGg+bWF4KXN0cis9IiAuLi4gIjtyZXR1cm4iPEJ1ZmZlciAiK3N0cisiPiJ9O0J1ZmZlci5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbiBjb21wYXJlKHRhcmdldCxzdGFydCxlbmQsdGhpc1N0YXJ0LHRoaXNFbmQpe2lmKGlzSW5zdGFuY2UodGFyZ2V0LFVpbnQ4QXJyYXkpKXt0YXJnZXQ9QnVmZmVyLmZyb20odGFyZ2V0LHRhcmdldC5vZmZzZXQsdGFyZ2V0LmJ5dGVMZW5ndGgpfWlmKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSl7dGhyb3cgbmV3IFR5cGVFcnJvcignVGhlICJ0YXJnZXQiIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXkuICcrIlJlY2VpdmVkIHR5cGUgIit0eXBlb2YgdGFyZ2V0KX1pZihzdGFydD09PXVuZGVmaW5lZCl7c3RhcnQ9MH1pZihlbmQ9PT11bmRlZmluZWQpe2VuZD10YXJnZXQ/dGFyZ2V0Lmxlbmd0aDowfWlmKHRoaXNTdGFydD09PXVuZGVmaW5lZCl7dGhpc1N0YXJ0PTB9aWYodGhpc0VuZD09PXVuZGVmaW5lZCl7dGhpc0VuZD10aGlzLmxlbmd0aH1pZihzdGFydDwwfHxlbmQ+dGFyZ2V0Lmxlbmd0aHx8dGhpc1N0YXJ0PDB8fHRoaXNFbmQ+dGhpcy5sZW5ndGgpe3Rocm93IG5ldyBSYW5nZUVycm9yKCJvdXQgb2YgcmFuZ2UgaW5kZXgiKX1pZih0aGlzU3RhcnQ+PXRoaXNFbmQmJnN0YXJ0Pj1lbmQpe3JldHVybiAwfWlmKHRoaXNTdGFydD49dGhpc0VuZCl7cmV0dXJuLTF9aWYoc3RhcnQ+PWVuZCl7cmV0dXJuIDF9c3RhcnQ+Pj49MDtlbmQ+Pj49MDt0aGlzU3RhcnQ+Pj49MDt0aGlzRW5kPj4+PTA7aWYodGhpcz09PXRhcmdldClyZXR1cm4gMDt2YXIgeD10aGlzRW5kLXRoaXNTdGFydDt2YXIgeT1lbmQtc3RhcnQ7dmFyIGxlbj1NYXRoLm1pbih4LHkpO3ZhciB0aGlzQ29weT10aGlzLnNsaWNlKHRoaXNTdGFydCx0aGlzRW5kKTt2YXIgdGFyZ2V0Q29weT10YXJnZXQuc2xpY2Uoc3RhcnQsZW5kKTtmb3IodmFyIGk9MDtpPGxlbjsrK2kpe2lmKHRoaXNDb3B5W2ldIT09dGFyZ2V0Q29weVtpXSl7eD10aGlzQ29weVtpXTt5PXRhcmdldENvcHlbaV07YnJlYWt9fWlmKHg8eSlyZXR1cm4tMTtpZih5PHgpcmV0dXJuIDE7cmV0dXJuIDB9O2Z1bmN0aW9uIGJpZGlyZWN0aW9uYWxJbmRleE9mKGJ1ZmZlcix2YWwsYnl0ZU9mZnNldCxlbmNvZGluZyxkaXIpe2lmKGJ1ZmZlci5sZW5ndGg9PT0wKXJldHVybi0xO2lmKHR5cGVvZiBieXRlT2Zmc2V0PT09InN0cmluZyIpe2VuY29kaW5nPWJ5dGVPZmZzZXQ7Ynl0ZU9mZnNldD0wfWVsc2UgaWYoYnl0ZU9mZnNldD4yMTQ3NDgzNjQ3KXtieXRlT2Zmc2V0PTIxNDc0ODM2NDd9ZWxzZSBpZihieXRlT2Zmc2V0PC0yMTQ3NDgzNjQ4KXtieXRlT2Zmc2V0PS0yMTQ3NDgzNjQ4fWJ5dGVPZmZzZXQ9K2J5dGVPZmZzZXQ7aWYobnVtYmVySXNOYU4oYnl0ZU9mZnNldCkpe2J5dGVPZmZzZXQ9ZGlyPzA6YnVmZmVyLmxlbmd0aC0xfWlmKGJ5dGVPZmZzZXQ8MClieXRlT2Zmc2V0PWJ1ZmZlci5sZW5ndGgrYnl0ZU9mZnNldDtpZihieXRlT2Zmc2V0Pj1idWZmZXIubGVuZ3RoKXtpZihkaXIpcmV0dXJuLTE7ZWxzZSBieXRlT2Zmc2V0PWJ1ZmZlci5sZW5ndGgtMX1lbHNlIGlmKGJ5dGVPZmZzZXQ8MCl7aWYoZGlyKWJ5dGVPZmZzZXQ9MDtlbHNlIHJldHVybi0xfWlmKHR5cGVvZiB2YWw9PT0ic3RyaW5nIil7dmFsPUJ1ZmZlci5mcm9tKHZhbCxlbmNvZGluZyl9aWYoQnVmZmVyLmlzQnVmZmVyKHZhbCkpe2lmKHZhbC5sZW5ndGg9PT0wKXtyZXR1cm4tMX1yZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlcix2YWwsYnl0ZU9mZnNldCxlbmNvZGluZyxkaXIpfWVsc2UgaWYodHlwZW9mIHZhbD09PSJudW1iZXIiKXt2YWw9dmFsJjI1NTtpZih0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZj09PSJmdW5jdGlvbiIpe2lmKGRpcil7cmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsdmFsLGJ5dGVPZmZzZXQpfWVsc2V7cmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLHZhbCxieXRlT2Zmc2V0KX19cmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsW3ZhbF0sYnl0ZU9mZnNldCxlbmNvZGluZyxkaXIpfXRocm93IG5ldyBUeXBlRXJyb3IoInZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlciIpfWZ1bmN0aW9uIGFycmF5SW5kZXhPZihhcnIsdmFsLGJ5dGVPZmZzZXQsZW5jb2RpbmcsZGlyKXt2YXIgaW5kZXhTaXplPTE7dmFyIGFyckxlbmd0aD1hcnIubGVuZ3RoO3ZhciB2YWxMZW5ndGg9dmFsLmxlbmd0aDtpZihlbmNvZGluZyE9PXVuZGVmaW5lZCl7ZW5jb2Rpbmc9U3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpO2lmKGVuY29kaW5nPT09InVjczIifHxlbmNvZGluZz09PSJ1Y3MtMiJ8fGVuY29kaW5nPT09InV0ZjE2bGUifHxlbmNvZGluZz09PSJ1dGYtMTZsZSIpe2lmKGFyci5sZW5ndGg8Mnx8dmFsLmxlbmd0aDwyKXtyZXR1cm4tMX1pbmRleFNpemU9MjthcnJMZW5ndGgvPTI7dmFsTGVuZ3RoLz0yO2J5dGVPZmZzZXQvPTJ9fWZ1bmN0aW9uIHJlYWQoYnVmLGkpe2lmKGluZGV4U2l6ZT09PTEpe3JldHVybiBidWZbaV19ZWxzZXtyZXR1cm4gYnVmLnJlYWRVSW50MTZCRShpKmluZGV4U2l6ZSl9fXZhciBpO2lmKGRpcil7dmFyIGZvdW5kSW5kZXg9LTE7Zm9yKGk9Ynl0ZU9mZnNldDtpPGFyckxlbmd0aDtpKyspe2lmKHJlYWQoYXJyLGkpPT09cmVhZCh2YWwsZm91bmRJbmRleD09PS0xPzA6aS1mb3VuZEluZGV4KSl7aWYoZm91bmRJbmRleD09PS0xKWZvdW5kSW5kZXg9aTtpZihpLWZvdW5kSW5kZXgrMT09PXZhbExlbmd0aClyZXR1cm4gZm91bmRJbmRleCppbmRleFNpemV9ZWxzZXtpZihmb3VuZEluZGV4IT09LTEpaS09aS1mb3VuZEluZGV4O2ZvdW5kSW5kZXg9LTF9fX1lbHNle2lmKGJ5dGVPZmZzZXQrdmFsTGVuZ3RoPmFyckxlbmd0aClieXRlT2Zmc2V0PWFyckxlbmd0aC12YWxMZW5ndGg7Zm9yKGk9Ynl0ZU9mZnNldDtpPj0wO2ktLSl7dmFyIGZvdW5kPXRydWU7Zm9yKHZhciBqPTA7ajx2YWxMZW5ndGg7aisrKXtpZihyZWFkKGFycixpK2opIT09cmVhZCh2YWwsaikpe2ZvdW5kPWZhbHNlO2JyZWFrfX1pZihmb3VuZClyZXR1cm4gaX19cmV0dXJuLTF9QnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcz1mdW5jdGlvbiBpbmNsdWRlcyh2YWwsYnl0ZU9mZnNldCxlbmNvZGluZyl7cmV0dXJuIHRoaXMuaW5kZXhPZih2YWwsYnl0ZU9mZnNldCxlbmNvZGluZykhPT0tMX07QnVmZmVyLnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uIGluZGV4T2YodmFsLGJ5dGVPZmZzZXQsZW5jb2Rpbmcpe3JldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLHZhbCxieXRlT2Zmc2V0LGVuY29kaW5nLHRydWUpfTtCdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mPWZ1bmN0aW9uIGxhc3RJbmRleE9mKHZhbCxieXRlT2Zmc2V0LGVuY29kaW5nKXtyZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcyx2YWwsYnl0ZU9mZnNldCxlbmNvZGluZyxmYWxzZSl9O2Z1bmN0aW9uIGhleFdyaXRlKGJ1ZixzdHJpbmcsb2Zmc2V0LGxlbmd0aCl7b2Zmc2V0PU51bWJlcihvZmZzZXQpfHwwO3ZhciByZW1haW5pbmc9YnVmLmxlbmd0aC1vZmZzZXQ7aWYoIWxlbmd0aCl7bGVuZ3RoPXJlbWFpbmluZ31lbHNle2xlbmd0aD1OdW1iZXIobGVuZ3RoKTtpZihsZW5ndGg+cmVtYWluaW5nKXtsZW5ndGg9cmVtYWluaW5nfX12YXIgc3RyTGVuPXN0cmluZy5sZW5ndGg7aWYobGVuZ3RoPnN0ckxlbi8yKXtsZW5ndGg9c3RyTGVuLzJ9Zm9yKHZhciBpPTA7aTxsZW5ndGg7KytpKXt2YXIgcGFyc2VkPXBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSoyLDIpLDE2KTtpZihudW1iZXJJc05hTihwYXJzZWQpKXJldHVybiBpO2J1ZltvZmZzZXQraV09cGFyc2VkfXJldHVybiBpfWZ1bmN0aW9uIHV0ZjhXcml0ZShidWYsc3RyaW5nLG9mZnNldCxsZW5ndGgpe3JldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZyxidWYubGVuZ3RoLW9mZnNldCksYnVmLG9mZnNldCxsZW5ndGgpfWZ1bmN0aW9uIGFzY2lpV3JpdGUoYnVmLHN0cmluZyxvZmZzZXQsbGVuZ3RoKXtyZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSxidWYsb2Zmc2V0LGxlbmd0aCl9ZnVuY3Rpb24gbGF0aW4xV3JpdGUoYnVmLHN0cmluZyxvZmZzZXQsbGVuZ3RoKXtyZXR1cm4gYXNjaWlXcml0ZShidWYsc3RyaW5nLG9mZnNldCxsZW5ndGgpfWZ1bmN0aW9uIGJhc2U2NFdyaXRlKGJ1ZixzdHJpbmcsb2Zmc2V0LGxlbmd0aCl7cmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLGJ1ZixvZmZzZXQsbGVuZ3RoKX1mdW5jdGlvbiB1Y3MyV3JpdGUoYnVmLHN0cmluZyxvZmZzZXQsbGVuZ3RoKXtyZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsYnVmLmxlbmd0aC1vZmZzZXQpLGJ1ZixvZmZzZXQsbGVuZ3RoKX1CdWZmZXIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uIHdyaXRlKHN0cmluZyxvZmZzZXQsbGVuZ3RoLGVuY29kaW5nKXtpZihvZmZzZXQ9PT11bmRlZmluZWQpe2VuY29kaW5nPSJ1dGY4IjtsZW5ndGg9dGhpcy5sZW5ndGg7b2Zmc2V0PTB9ZWxzZSBpZihsZW5ndGg9PT11bmRlZmluZWQmJnR5cGVvZiBvZmZzZXQ9PT0ic3RyaW5nIil7ZW5jb2Rpbmc9b2Zmc2V0O2xlbmd0aD10aGlzLmxlbmd0aDtvZmZzZXQ9MH1lbHNlIGlmKGlzRmluaXRlKG9mZnNldCkpe29mZnNldD1vZmZzZXQ+Pj4wO2lmKGlzRmluaXRlKGxlbmd0aCkpe2xlbmd0aD1sZW5ndGg+Pj4wO2lmKGVuY29kaW5nPT09dW5kZWZpbmVkKWVuY29kaW5nPSJ1dGY4In1lbHNle2VuY29kaW5nPWxlbmd0aDtsZW5ndGg9dW5kZWZpbmVkfX1lbHNle3Rocm93IG5ldyBFcnJvcigiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQiKX12YXIgcmVtYWluaW5nPXRoaXMubGVuZ3RoLW9mZnNldDtpZihsZW5ndGg9PT11bmRlZmluZWR8fGxlbmd0aD5yZW1haW5pbmcpbGVuZ3RoPXJlbWFpbmluZztpZihzdHJpbmcubGVuZ3RoPjAmJihsZW5ndGg8MHx8b2Zmc2V0PDApfHxvZmZzZXQ+dGhpcy5sZW5ndGgpe3Rocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcyIpfWlmKCFlbmNvZGluZyllbmNvZGluZz0idXRmOCI7dmFyIGxvd2VyZWRDYXNlPWZhbHNlO2Zvcig7Oyl7c3dpdGNoKGVuY29kaW5nKXtjYXNlImhleCI6cmV0dXJuIGhleFdyaXRlKHRoaXMsc3RyaW5nLG9mZnNldCxsZW5ndGgpO2Nhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6cmV0dXJuIHV0ZjhXcml0ZSh0aGlzLHN0cmluZyxvZmZzZXQsbGVuZ3RoKTtjYXNlImFzY2lpIjpyZXR1cm4gYXNjaWlXcml0ZSh0aGlzLHN0cmluZyxvZmZzZXQsbGVuZ3RoKTtjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOnJldHVybiBsYXRpbjFXcml0ZSh0aGlzLHN0cmluZyxvZmZzZXQsbGVuZ3RoKTtjYXNlImJhc2U2NCI6cmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsc3RyaW5nLG9mZnNldCxsZW5ndGgpO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gdWNzMldyaXRlKHRoaXMsc3RyaW5nLG9mZnNldCxsZW5ndGgpO2RlZmF1bHQ6aWYobG93ZXJlZENhc2UpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitlbmNvZGluZyk7ZW5jb2Rpbmc9KCIiK2VuY29kaW5nKS50b0xvd2VyQ2FzZSgpO2xvd2VyZWRDYXNlPXRydWV9fX07QnVmZmVyLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24gdG9KU09OKCl7cmV0dXJue3R5cGU6IkJ1ZmZlciIsZGF0YTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnJ8fHRoaXMsMCl9fTtmdW5jdGlvbiBiYXNlNjRTbGljZShidWYsc3RhcnQsZW5kKXtpZihzdGFydD09PTAmJmVuZD09PWJ1Zi5sZW5ndGgpe3JldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpfWVsc2V7cmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCxlbmQpKX19ZnVuY3Rpb24gdXRmOFNsaWNlKGJ1ZixzdGFydCxlbmQpe2VuZD1NYXRoLm1pbihidWYubGVuZ3RoLGVuZCk7dmFyIHJlcz1bXTt2YXIgaT1zdGFydDt3aGlsZShpPGVuZCl7dmFyIGZpcnN0Qnl0ZT1idWZbaV07dmFyIGNvZGVQb2ludD1udWxsO3ZhciBieXRlc1BlclNlcXVlbmNlPWZpcnN0Qnl0ZT4yMzk/NDpmaXJzdEJ5dGU+MjIzPzM6Zmlyc3RCeXRlPjE5MT8yOjE7aWYoaStieXRlc1BlclNlcXVlbmNlPD1lbmQpe3ZhciBzZWNvbmRCeXRlLHRoaXJkQnl0ZSxmb3VydGhCeXRlLHRlbXBDb2RlUG9pbnQ7c3dpdGNoKGJ5dGVzUGVyU2VxdWVuY2Upe2Nhc2UgMTppZihmaXJzdEJ5dGU8MTI4KXtjb2RlUG9pbnQ9Zmlyc3RCeXRlfWJyZWFrO2Nhc2UgMjpzZWNvbmRCeXRlPWJ1ZltpKzFdO2lmKChzZWNvbmRCeXRlJjE5Mik9PT0xMjgpe3RlbXBDb2RlUG9pbnQ9KGZpcnN0Qnl0ZSYzMSk8PDZ8c2Vjb25kQnl0ZSY2MztpZih0ZW1wQ29kZVBvaW50PjEyNyl7Y29kZVBvaW50PXRlbXBDb2RlUG9pbnR9fWJyZWFrO2Nhc2UgMzpzZWNvbmRCeXRlPWJ1ZltpKzFdO3RoaXJkQnl0ZT1idWZbaSsyXTtpZigoc2Vjb25kQnl0ZSYxOTIpPT09MTI4JiYodGhpcmRCeXRlJjE5Mik9PT0xMjgpe3RlbXBDb2RlUG9pbnQ9KGZpcnN0Qnl0ZSYxNSk8PDEyfChzZWNvbmRCeXRlJjYzKTw8Nnx0aGlyZEJ5dGUmNjM7aWYodGVtcENvZGVQb2ludD4yMDQ3JiYodGVtcENvZGVQb2ludDw1NTI5Nnx8dGVtcENvZGVQb2ludD41NzM0Mykpe2NvZGVQb2ludD10ZW1wQ29kZVBvaW50fX1icmVhaztjYXNlIDQ6c2Vjb25kQnl0ZT1idWZbaSsxXTt0aGlyZEJ5dGU9YnVmW2krMl07Zm91cnRoQnl0ZT1idWZbaSszXTtpZigoc2Vjb25kQnl0ZSYxOTIpPT09MTI4JiYodGhpcmRCeXRlJjE5Mik9PT0xMjgmJihmb3VydGhCeXRlJjE5Mik9PT0xMjgpe3RlbXBDb2RlUG9pbnQ9KGZpcnN0Qnl0ZSYxNSk8PDE4fChzZWNvbmRCeXRlJjYzKTw8MTJ8KHRoaXJkQnl0ZSY2Myk8PDZ8Zm91cnRoQnl0ZSY2MztpZih0ZW1wQ29kZVBvaW50PjY1NTM1JiZ0ZW1wQ29kZVBvaW50PDExMTQxMTIpe2NvZGVQb2ludD10ZW1wQ29kZVBvaW50fX19fWlmKGNvZGVQb2ludD09PW51bGwpe2NvZGVQb2ludD02NTUzMztieXRlc1BlclNlcXVlbmNlPTF9ZWxzZSBpZihjb2RlUG9pbnQ+NjU1MzUpe2NvZGVQb2ludC09NjU1MzY7cmVzLnB1c2goY29kZVBvaW50Pj4+MTAmMTAyM3w1NTI5Nik7Y29kZVBvaW50PTU2MzIwfGNvZGVQb2ludCYxMDIzfXJlcy5wdXNoKGNvZGVQb2ludCk7aSs9Ynl0ZXNQZXJTZXF1ZW5jZX1yZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcyl9dmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIPTQwOTY7ZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5KGNvZGVQb2ludHMpe3ZhciBsZW49Y29kZVBvaW50cy5sZW5ndGg7aWYobGVuPD1NQVhfQVJHVU1FTlRTX0xFTkdUSCl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGNvZGVQb2ludHMpfXZhciByZXM9IiI7dmFyIGk9MDt3aGlsZShpPGxlbil7cmVzKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxjb2RlUG9pbnRzLnNsaWNlKGksaSs9TUFYX0FSR1VNRU5UU19MRU5HVEgpKX1yZXR1cm4gcmVzfWZ1bmN0aW9uIGFzY2lpU2xpY2UoYnVmLHN0YXJ0LGVuZCl7dmFyIHJldD0iIjtlbmQ9TWF0aC5taW4oYnVmLmxlbmd0aCxlbmQpO2Zvcih2YXIgaT1zdGFydDtpPGVuZDsrK2kpe3JldCs9U3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0mMTI3KX1yZXR1cm4gcmV0fWZ1bmN0aW9uIGxhdGluMVNsaWNlKGJ1ZixzdGFydCxlbmQpe3ZhciByZXQ9IiI7ZW5kPU1hdGgubWluKGJ1Zi5sZW5ndGgsZW5kKTtmb3IodmFyIGk9c3RhcnQ7aTxlbmQ7KytpKXtyZXQrPVN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKX1yZXR1cm4gcmV0fWZ1bmN0aW9uIGhleFNsaWNlKGJ1ZixzdGFydCxlbmQpe3ZhciBsZW49YnVmLmxlbmd0aDtpZighc3RhcnR8fHN0YXJ0PDApc3RhcnQ9MDtpZighZW5kfHxlbmQ8MHx8ZW5kPmxlbillbmQ9bGVuO3ZhciBvdXQ9IiI7Zm9yKHZhciBpPXN0YXJ0O2k8ZW5kOysraSl7b3V0Kz10b0hleChidWZbaV0pfXJldHVybiBvdXR9ZnVuY3Rpb24gdXRmMTZsZVNsaWNlKGJ1ZixzdGFydCxlbmQpe3ZhciBieXRlcz1idWYuc2xpY2Uoc3RhcnQsZW5kKTt2YXIgcmVzPSIiO2Zvcih2YXIgaT0wO2k8Ynl0ZXMubGVuZ3RoO2krPTIpe3Jlcys9U3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXStieXRlc1tpKzFdKjI1Nil9cmV0dXJuIHJlc31CdWZmZXIucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uIHNsaWNlKHN0YXJ0LGVuZCl7dmFyIGxlbj10aGlzLmxlbmd0aDtzdGFydD1+fnN0YXJ0O2VuZD1lbmQ9PT11bmRlZmluZWQ/bGVuOn5+ZW5kO2lmKHN0YXJ0PDApe3N0YXJ0Kz1sZW47aWYoc3RhcnQ8MClzdGFydD0wfWVsc2UgaWYoc3RhcnQ+bGVuKXtzdGFydD1sZW59aWYoZW5kPDApe2VuZCs9bGVuO2lmKGVuZDwwKWVuZD0wfWVsc2UgaWYoZW5kPmxlbil7ZW5kPWxlbn1pZihlbmQ8c3RhcnQpZW5kPXN0YXJ0O3ZhciBuZXdCdWY9dGhpcy5zdWJhcnJheShzdGFydCxlbmQpO25ld0J1Zi5fX3Byb3RvX189QnVmZmVyLnByb3RvdHlwZTtyZXR1cm4gbmV3QnVmfTtmdW5jdGlvbiBjaGVja09mZnNldChvZmZzZXQsZXh0LGxlbmd0aCl7aWYob2Zmc2V0JTEhPT0wfHxvZmZzZXQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib2Zmc2V0IGlzIG5vdCB1aW50Iik7aWYob2Zmc2V0K2V4dD5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgiKX1CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24gcmVhZFVJbnRMRShvZmZzZXQsYnl0ZUxlbmd0aCxub0Fzc2VydCl7b2Zmc2V0PW9mZnNldD4+PjA7Ynl0ZUxlbmd0aD1ieXRlTGVuZ3RoPj4+MDtpZighbm9Bc3NlcnQpY2hlY2tPZmZzZXQob2Zmc2V0LGJ5dGVMZW5ndGgsdGhpcy5sZW5ndGgpO3ZhciB2YWw9dGhpc1tvZmZzZXRdO3ZhciBtdWw9MTt2YXIgaT0wO3doaWxlKCsraTxieXRlTGVuZ3RoJiYobXVsKj0yNTYpKXt2YWwrPXRoaXNbb2Zmc2V0K2ldKm11bH1yZXR1cm4gdmFsfTtCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkU9ZnVuY3Rpb24gcmVhZFVJbnRCRShvZmZzZXQsYnl0ZUxlbmd0aCxub0Fzc2VydCl7b2Zmc2V0PW9mZnNldD4+PjA7Ynl0ZUxlbmd0aD1ieXRlTGVuZ3RoPj4+MDtpZighbm9Bc3NlcnQpe2NoZWNrT2Zmc2V0KG9mZnNldCxieXRlTGVuZ3RoLHRoaXMubGVuZ3RoKX12YXIgdmFsPXRoaXNbb2Zmc2V0Ky0tYnl0ZUxlbmd0aF07dmFyIG11bD0xO3doaWxlKGJ5dGVMZW5ndGg+MCYmKG11bCo9MjU2KSl7dmFsKz10aGlzW29mZnNldCstLWJ5dGVMZW5ndGhdKm11bH1yZXR1cm4gdmFsfTtCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbiByZWFkVUludDgob2Zmc2V0LG5vQXNzZXJ0KXtvZmZzZXQ9b2Zmc2V0Pj4+MDtpZighbm9Bc3NlcnQpY2hlY2tPZmZzZXQob2Zmc2V0LDEsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW29mZnNldF19O0J1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFPWZ1bmN0aW9uIHJlYWRVSW50MTZMRShvZmZzZXQsbm9Bc3NlcnQpe29mZnNldD1vZmZzZXQ+Pj4wO2lmKCFub0Fzc2VydCljaGVja09mZnNldChvZmZzZXQsMix0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXNbb2Zmc2V0XXx0aGlzW29mZnNldCsxXTw8OH07QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24gcmVhZFVJbnQxNkJFKG9mZnNldCxub0Fzc2VydCl7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrT2Zmc2V0KG9mZnNldCwyLHRoaXMubGVuZ3RoKTtyZXR1cm4gdGhpc1tvZmZzZXRdPDw4fHRoaXNbb2Zmc2V0KzFdfTtCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRT1mdW5jdGlvbiByZWFkVUludDMyTEUob2Zmc2V0LG5vQXNzZXJ0KXtvZmZzZXQ9b2Zmc2V0Pj4+MDtpZighbm9Bc3NlcnQpY2hlY2tPZmZzZXQob2Zmc2V0LDQsdGhpcy5sZW5ndGgpO3JldHVybih0aGlzW29mZnNldF18dGhpc1tvZmZzZXQrMV08PDh8dGhpc1tvZmZzZXQrMl08PDE2KSt0aGlzW29mZnNldCszXSoxNjc3NzIxNn07QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24gcmVhZFVJbnQzMkJFKG9mZnNldCxub0Fzc2VydCl7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrT2Zmc2V0KG9mZnNldCw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gdGhpc1tvZmZzZXRdKjE2Nzc3MjE2Kyh0aGlzW29mZnNldCsxXTw8MTZ8dGhpc1tvZmZzZXQrMl08PDh8dGhpc1tvZmZzZXQrM10pfTtCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRT1mdW5jdGlvbiByZWFkSW50TEUob2Zmc2V0LGJ5dGVMZW5ndGgsbm9Bc3NlcnQpe29mZnNldD1vZmZzZXQ+Pj4wO2J5dGVMZW5ndGg9Ynl0ZUxlbmd0aD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrT2Zmc2V0KG9mZnNldCxieXRlTGVuZ3RoLHRoaXMubGVuZ3RoKTt2YXIgdmFsPXRoaXNbb2Zmc2V0XTt2YXIgbXVsPTE7dmFyIGk9MDt3aGlsZSgrK2k8Ynl0ZUxlbmd0aCYmKG11bCo9MjU2KSl7dmFsKz10aGlzW29mZnNldCtpXSptdWx9bXVsKj0xMjg7aWYodmFsPj1tdWwpdmFsLT1NYXRoLnBvdygyLDgqYnl0ZUxlbmd0aCk7cmV0dXJuIHZhbH07QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkU9ZnVuY3Rpb24gcmVhZEludEJFKG9mZnNldCxieXRlTGVuZ3RoLG5vQXNzZXJ0KXtvZmZzZXQ9b2Zmc2V0Pj4+MDtieXRlTGVuZ3RoPWJ5dGVMZW5ndGg+Pj4wO2lmKCFub0Fzc2VydCljaGVja09mZnNldChvZmZzZXQsYnl0ZUxlbmd0aCx0aGlzLmxlbmd0aCk7dmFyIGk9Ynl0ZUxlbmd0aDt2YXIgbXVsPTE7dmFyIHZhbD10aGlzW29mZnNldCstLWldO3doaWxlKGk+MCYmKG11bCo9MjU2KSl7dmFsKz10aGlzW29mZnNldCstLWldKm11bH1tdWwqPTEyODtpZih2YWw+PW11bCl2YWwtPU1hdGgucG93KDIsOCpieXRlTGVuZ3RoKTtyZXR1cm4gdmFsfTtCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uIHJlYWRJbnQ4KG9mZnNldCxub0Fzc2VydCl7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrT2Zmc2V0KG9mZnNldCwxLHRoaXMubGVuZ3RoKTtpZighKHRoaXNbb2Zmc2V0XSYxMjgpKXJldHVybiB0aGlzW29mZnNldF07cmV0dXJuKDI1NS10aGlzW29mZnNldF0rMSkqLTF9O0J1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEU9ZnVuY3Rpb24gcmVhZEludDE2TEUob2Zmc2V0LG5vQXNzZXJ0KXtvZmZzZXQ9b2Zmc2V0Pj4+MDtpZighbm9Bc3NlcnQpY2hlY2tPZmZzZXQob2Zmc2V0LDIsdGhpcy5sZW5ndGgpO3ZhciB2YWw9dGhpc1tvZmZzZXRdfHRoaXNbb2Zmc2V0KzFdPDw4O3JldHVybiB2YWwmMzI3Njg/dmFsfDQyOTQ5MDE3NjA6dmFsfTtCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFPWZ1bmN0aW9uIHJlYWRJbnQxNkJFKG9mZnNldCxub0Fzc2VydCl7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrT2Zmc2V0KG9mZnNldCwyLHRoaXMubGVuZ3RoKTt2YXIgdmFsPXRoaXNbb2Zmc2V0KzFdfHRoaXNbb2Zmc2V0XTw8ODtyZXR1cm4gdmFsJjMyNzY4P3ZhbHw0Mjk0OTAxNzYwOnZhbH07QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRT1mdW5jdGlvbiByZWFkSW50MzJMRShvZmZzZXQsbm9Bc3NlcnQpe29mZnNldD1vZmZzZXQ+Pj4wO2lmKCFub0Fzc2VydCljaGVja09mZnNldChvZmZzZXQsNCx0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXNbb2Zmc2V0XXx0aGlzW29mZnNldCsxXTw8OHx0aGlzW29mZnNldCsyXTw8MTZ8dGhpc1tvZmZzZXQrM108PDI0fTtCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uIHJlYWRJbnQzMkJFKG9mZnNldCxub0Fzc2VydCl7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrT2Zmc2V0KG9mZnNldCw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gdGhpc1tvZmZzZXRdPDwyNHx0aGlzW29mZnNldCsxXTw8MTZ8dGhpc1tvZmZzZXQrMl08PDh8dGhpc1tvZmZzZXQrM119O0J1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEU9ZnVuY3Rpb24gcmVhZEZsb2F0TEUob2Zmc2V0LG5vQXNzZXJ0KXtvZmZzZXQ9b2Zmc2V0Pj4+MDtpZighbm9Bc3NlcnQpY2hlY2tPZmZzZXQob2Zmc2V0LDQsdGhpcy5sZW5ndGgpO3JldHVybiBpZWVlNzU0LnJlYWQodGhpcyxvZmZzZXQsdHJ1ZSwyMyw0KX07QnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRT1mdW5jdGlvbiByZWFkRmxvYXRCRShvZmZzZXQsbm9Bc3NlcnQpe29mZnNldD1vZmZzZXQ+Pj4wO2lmKCFub0Fzc2VydCljaGVja09mZnNldChvZmZzZXQsNCx0aGlzLmxlbmd0aCk7cmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLG9mZnNldCxmYWxzZSwyMyw0KX07QnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEU9ZnVuY3Rpb24gcmVhZERvdWJsZUxFKG9mZnNldCxub0Fzc2VydCl7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrT2Zmc2V0KG9mZnNldCw4LHRoaXMubGVuZ3RoKTtyZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsb2Zmc2V0LHRydWUsNTIsOCl9O0J1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFPWZ1bmN0aW9uIHJlYWREb3VibGVCRShvZmZzZXQsbm9Bc3NlcnQpe29mZnNldD1vZmZzZXQ+Pj4wO2lmKCFub0Fzc2VydCljaGVja09mZnNldChvZmZzZXQsOCx0aGlzLmxlbmd0aCk7cmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLG9mZnNldCxmYWxzZSw1Miw4KX07ZnVuY3Rpb24gY2hlY2tJbnQoYnVmLHZhbHVlLG9mZnNldCxleHQsbWF4LG1pbil7aWYoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZih2YWx1ZT5tYXh8fHZhbHVlPG1pbil0aHJvdyBuZXcgUmFuZ2VFcnJvcignInZhbHVlIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJyk7aWYob2Zmc2V0K2V4dD5idWYubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKX1CdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uIHdyaXRlVUludExFKHZhbHVlLG9mZnNldCxieXRlTGVuZ3RoLG5vQXNzZXJ0KXt2YWx1ZT0rdmFsdWU7b2Zmc2V0PW9mZnNldD4+PjA7Ynl0ZUxlbmd0aD1ieXRlTGVuZ3RoPj4+MDtpZighbm9Bc3NlcnQpe3ZhciBtYXhCeXRlcz1NYXRoLnBvdygyLDgqYnl0ZUxlbmd0aCktMTtjaGVja0ludCh0aGlzLHZhbHVlLG9mZnNldCxieXRlTGVuZ3RoLG1heEJ5dGVzLDApfXZhciBtdWw9MTt2YXIgaT0wO3RoaXNbb2Zmc2V0XT12YWx1ZSYyNTU7d2hpbGUoKytpPGJ5dGVMZW5ndGgmJihtdWwqPTI1Nikpe3RoaXNbb2Zmc2V0K2ldPXZhbHVlL211bCYyNTV9cmV0dXJuIG9mZnNldCtieXRlTGVuZ3RofTtCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFPWZ1bmN0aW9uIHdyaXRlVUludEJFKHZhbHVlLG9mZnNldCxieXRlTGVuZ3RoLG5vQXNzZXJ0KXt2YWx1ZT0rdmFsdWU7b2Zmc2V0PW9mZnNldD4+PjA7Ynl0ZUxlbmd0aD1ieXRlTGVuZ3RoPj4+MDtpZighbm9Bc3NlcnQpe3ZhciBtYXhCeXRlcz1NYXRoLnBvdygyLDgqYnl0ZUxlbmd0aCktMTtjaGVja0ludCh0aGlzLHZhbHVlLG9mZnNldCxieXRlTGVuZ3RoLG1heEJ5dGVzLDApfXZhciBpPWJ5dGVMZW5ndGgtMTt2YXIgbXVsPTE7dGhpc1tvZmZzZXQraV09dmFsdWUmMjU1O3doaWxlKC0taT49MCYmKG11bCo9MjU2KSl7dGhpc1tvZmZzZXQraV09dmFsdWUvbXVsJjI1NX1yZXR1cm4gb2Zmc2V0K2J5dGVMZW5ndGh9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OD1mdW5jdGlvbiB3cml0ZVVJbnQ4KHZhbHVlLG9mZnNldCxub0Fzc2VydCl7dmFsdWU9K3ZhbHVlO29mZnNldD1vZmZzZXQ+Pj4wO2lmKCFub0Fzc2VydCljaGVja0ludCh0aGlzLHZhbHVlLG9mZnNldCwxLDI1NSwwKTt0aGlzW29mZnNldF09dmFsdWUmMjU1O3JldHVybiBvZmZzZXQrMX07QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uIHdyaXRlVUludDE2TEUodmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXt2YWx1ZT0rdmFsdWU7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrSW50KHRoaXMsdmFsdWUsb2Zmc2V0LDIsNjU1MzUsMCk7dGhpc1tvZmZzZXRdPXZhbHVlJjI1NTt0aGlzW29mZnNldCsxXT12YWx1ZT4+Pjg7cmV0dXJuIG9mZnNldCsyfTtCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkU9ZnVuY3Rpb24gd3JpdGVVSW50MTZCRSh2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe3ZhbHVlPSt2YWx1ZTtvZmZzZXQ9b2Zmc2V0Pj4+MDtpZighbm9Bc3NlcnQpY2hlY2tJbnQodGhpcyx2YWx1ZSxvZmZzZXQsMiw2NTUzNSwwKTt0aGlzW29mZnNldF09dmFsdWU+Pj44O3RoaXNbb2Zmc2V0KzFdPXZhbHVlJjI1NTtyZXR1cm4gb2Zmc2V0KzJ9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRT1mdW5jdGlvbiB3cml0ZVVJbnQzMkxFKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7dmFsdWU9K3ZhbHVlO29mZnNldD1vZmZzZXQ+Pj4wO2lmKCFub0Fzc2VydCljaGVja0ludCh0aGlzLHZhbHVlLG9mZnNldCw0LDQyOTQ5NjcyOTUsMCk7dGhpc1tvZmZzZXQrM109dmFsdWU+Pj4yNDt0aGlzW29mZnNldCsyXT12YWx1ZT4+PjE2O3RoaXNbb2Zmc2V0KzFdPXZhbHVlPj4+ODt0aGlzW29mZnNldF09dmFsdWUmMjU1O3JldHVybiBvZmZzZXQrNH07QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uIHdyaXRlVUludDMyQkUodmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXt2YWx1ZT0rdmFsdWU7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrSW50KHRoaXMsdmFsdWUsb2Zmc2V0LDQsNDI5NDk2NzI5NSwwKTt0aGlzW29mZnNldF09dmFsdWU+Pj4yNDt0aGlzW29mZnNldCsxXT12YWx1ZT4+PjE2O3RoaXNbb2Zmc2V0KzJdPXZhbHVlPj4+ODt0aGlzW29mZnNldCszXT12YWx1ZSYyNTU7cmV0dXJuIG9mZnNldCs0fTtCdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEU9ZnVuY3Rpb24gd3JpdGVJbnRMRSh2YWx1ZSxvZmZzZXQsYnl0ZUxlbmd0aCxub0Fzc2VydCl7dmFsdWU9K3ZhbHVlO29mZnNldD1vZmZzZXQ+Pj4wO2lmKCFub0Fzc2VydCl7dmFyIGxpbWl0PU1hdGgucG93KDIsOCpieXRlTGVuZ3RoLTEpO2NoZWNrSW50KHRoaXMsdmFsdWUsb2Zmc2V0LGJ5dGVMZW5ndGgsbGltaXQtMSwtbGltaXQpfXZhciBpPTA7dmFyIG11bD0xO3ZhciBzdWI9MDt0aGlzW29mZnNldF09dmFsdWUmMjU1O3doaWxlKCsraTxieXRlTGVuZ3RoJiYobXVsKj0yNTYpKXtpZih2YWx1ZTwwJiZzdWI9PT0wJiZ0aGlzW29mZnNldCtpLTFdIT09MCl7c3ViPTF9dGhpc1tvZmZzZXQraV09KHZhbHVlL211bD4+MCktc3ViJjI1NX1yZXR1cm4gb2Zmc2V0K2J5dGVMZW5ndGh9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRT1mdW5jdGlvbiB3cml0ZUludEJFKHZhbHVlLG9mZnNldCxieXRlTGVuZ3RoLG5vQXNzZXJ0KXt2YWx1ZT0rdmFsdWU7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KXt2YXIgbGltaXQ9TWF0aC5wb3coMiw4KmJ5dGVMZW5ndGgtMSk7Y2hlY2tJbnQodGhpcyx2YWx1ZSxvZmZzZXQsYnl0ZUxlbmd0aCxsaW1pdC0xLC1saW1pdCl9dmFyIGk9Ynl0ZUxlbmd0aC0xO3ZhciBtdWw9MTt2YXIgc3ViPTA7dGhpc1tvZmZzZXQraV09dmFsdWUmMjU1O3doaWxlKC0taT49MCYmKG11bCo9MjU2KSl7aWYodmFsdWU8MCYmc3ViPT09MCYmdGhpc1tvZmZzZXQraSsxXSE9PTApe3N1Yj0xfXRoaXNbb2Zmc2V0K2ldPSh2YWx1ZS9tdWw+PjApLXN1YiYyNTV9cmV0dXJuIG9mZnNldCtieXRlTGVuZ3RofTtCdWZmZXIucHJvdG90eXBlLndyaXRlSW50OD1mdW5jdGlvbiB3cml0ZUludDgodmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXt2YWx1ZT0rdmFsdWU7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrSW50KHRoaXMsdmFsdWUsb2Zmc2V0LDEsMTI3LC0xMjgpO2lmKHZhbHVlPDApdmFsdWU9MjU1K3ZhbHVlKzE7dGhpc1tvZmZzZXRdPXZhbHVlJjI1NTtyZXR1cm4gb2Zmc2V0KzF9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFPWZ1bmN0aW9uIHdyaXRlSW50MTZMRSh2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe3ZhbHVlPSt2YWx1ZTtvZmZzZXQ9b2Zmc2V0Pj4+MDtpZighbm9Bc3NlcnQpY2hlY2tJbnQodGhpcyx2YWx1ZSxvZmZzZXQsMiwzMjc2NywtMzI3NjgpO3RoaXNbb2Zmc2V0XT12YWx1ZSYyNTU7dGhpc1tvZmZzZXQrMV09dmFsdWU+Pj44O3JldHVybiBvZmZzZXQrMn07QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24gd3JpdGVJbnQxNkJFKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7dmFsdWU9K3ZhbHVlO29mZnNldD1vZmZzZXQ+Pj4wO2lmKCFub0Fzc2VydCljaGVja0ludCh0aGlzLHZhbHVlLG9mZnNldCwyLDMyNzY3LC0zMjc2OCk7dGhpc1tvZmZzZXRdPXZhbHVlPj4+ODt0aGlzW29mZnNldCsxXT12YWx1ZSYyNTU7cmV0dXJuIG9mZnNldCsyfTtCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbiB3cml0ZUludDMyTEUodmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXt2YWx1ZT0rdmFsdWU7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KWNoZWNrSW50KHRoaXMsdmFsdWUsb2Zmc2V0LDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCk7dGhpc1tvZmZzZXRdPXZhbHVlJjI1NTt0aGlzW29mZnNldCsxXT12YWx1ZT4+Pjg7dGhpc1tvZmZzZXQrMl09dmFsdWU+Pj4xNjt0aGlzW29mZnNldCszXT12YWx1ZT4+PjI0O3JldHVybiBvZmZzZXQrNH07QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkU9ZnVuY3Rpb24gd3JpdGVJbnQzMkJFKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7dmFsdWU9K3ZhbHVlO29mZnNldD1vZmZzZXQ+Pj4wO2lmKCFub0Fzc2VydCljaGVja0ludCh0aGlzLHZhbHVlLG9mZnNldCw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpO2lmKHZhbHVlPDApdmFsdWU9NDI5NDk2NzI5NSt2YWx1ZSsxO3RoaXNbb2Zmc2V0XT12YWx1ZT4+PjI0O3RoaXNbb2Zmc2V0KzFdPXZhbHVlPj4+MTY7dGhpc1tvZmZzZXQrMl09dmFsdWU+Pj44O3RoaXNbb2Zmc2V0KzNdPXZhbHVlJjI1NTtyZXR1cm4gb2Zmc2V0KzR9O2Z1bmN0aW9uIGNoZWNrSUVFRTc1NChidWYsdmFsdWUsb2Zmc2V0LGV4dCxtYXgsbWluKXtpZihvZmZzZXQrZXh0PmJ1Zi5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpO2lmKG9mZnNldDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKX1mdW5jdGlvbiB3cml0ZUZsb2F0KGJ1Zix2YWx1ZSxvZmZzZXQsbGl0dGxlRW5kaWFuLG5vQXNzZXJ0KXt2YWx1ZT0rdmFsdWU7b2Zmc2V0PW9mZnNldD4+PjA7aWYoIW5vQXNzZXJ0KXtjaGVja0lFRUU3NTQoYnVmLHZhbHVlLG9mZnNldCw0LDM0MDI4MjM0NjYzODUyODg2ZTIyLC0zNDAyODIzNDY2Mzg1Mjg4NmUyMil9aWVlZTc1NC53cml0ZShidWYsdmFsdWUsb2Zmc2V0LGxpdHRsZUVuZGlhbiwyMyw0KTtyZXR1cm4gb2Zmc2V0KzR9QnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24gd3JpdGVGbG9hdExFKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7cmV0dXJuIHdyaXRlRmxvYXQodGhpcyx2YWx1ZSxvZmZzZXQsdHJ1ZSxub0Fzc2VydCl9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFPWZ1bmN0aW9uIHdyaXRlRmxvYXRCRSh2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe3JldHVybiB3cml0ZUZsb2F0KHRoaXMsdmFsdWUsb2Zmc2V0LGZhbHNlLG5vQXNzZXJ0KX07ZnVuY3Rpb24gd3JpdGVEb3VibGUoYnVmLHZhbHVlLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpe3ZhbHVlPSt2YWx1ZTtvZmZzZXQ9b2Zmc2V0Pj4+MDtpZighbm9Bc3NlcnQpe2NoZWNrSUVFRTc1NChidWYsdmFsdWUsb2Zmc2V0LDgsMTc5NzY5MzEzNDg2MjMxNTdlMjkyLC0xNzk3NjkzMTM0ODYyMzE1N2UyOTIpfWllZWU3NTQud3JpdGUoYnVmLHZhbHVlLG9mZnNldCxsaXR0bGVFbmRpYW4sNTIsOCk7cmV0dXJuIG9mZnNldCs4fUJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbiB3cml0ZURvdWJsZUxFKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7cmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsdmFsdWUsb2Zmc2V0LHRydWUsbm9Bc3NlcnQpfTtCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24gd3JpdGVEb3VibGVCRSh2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe3JldHVybiB3cml0ZURvdWJsZSh0aGlzLHZhbHVlLG9mZnNldCxmYWxzZSxub0Fzc2VydCl9O0J1ZmZlci5wcm90b3R5cGUuY29weT1mdW5jdGlvbiBjb3B5KHRhcmdldCx0YXJnZXRTdGFydCxzdGFydCxlbmQpe2lmKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJhcmd1bWVudCBzaG91bGQgYmUgYSBCdWZmZXIiKTtpZighc3RhcnQpc3RhcnQ9MDtpZighZW5kJiZlbmQhPT0wKWVuZD10aGlzLmxlbmd0aDtpZih0YXJnZXRTdGFydD49dGFyZ2V0Lmxlbmd0aCl0YXJnZXRTdGFydD10YXJnZXQubGVuZ3RoO2lmKCF0YXJnZXRTdGFydCl0YXJnZXRTdGFydD0wO2lmKGVuZD4wJiZlbmQ8c3RhcnQpZW5kPXN0YXJ0O2lmKGVuZD09PXN0YXJ0KXJldHVybiAwO2lmKHRhcmdldC5sZW5ndGg9PT0wfHx0aGlzLmxlbmd0aD09PTApcmV0dXJuIDA7aWYodGFyZ2V0U3RhcnQ8MCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMiKX1pZihzdGFydDwwfHxzdGFydD49dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpO2lmKGVuZDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcyIpO2lmKGVuZD50aGlzLmxlbmd0aCllbmQ9dGhpcy5sZW5ndGg7aWYodGFyZ2V0Lmxlbmd0aC10YXJnZXRTdGFydDxlbmQtc3RhcnQpe2VuZD10YXJnZXQubGVuZ3RoLXRhcmdldFN0YXJ0K3N0YXJ0fXZhciBsZW49ZW5kLXN0YXJ0O2lmKHRoaXM9PT10YXJnZXQmJnR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluPT09ImZ1bmN0aW9uIil7dGhpcy5jb3B5V2l0aGluKHRhcmdldFN0YXJ0LHN0YXJ0LGVuZCl9ZWxzZSBpZih0aGlzPT09dGFyZ2V0JiZzdGFydDx0YXJnZXRTdGFydCYmdGFyZ2V0U3RhcnQ8ZW5kKXtmb3IodmFyIGk9bGVuLTE7aT49MDstLWkpe3RhcmdldFtpK3RhcmdldFN0YXJ0XT10aGlzW2krc3RhcnRdfX1lbHNle1VpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKHRhcmdldCx0aGlzLnN1YmFycmF5KHN0YXJ0LGVuZCksdGFyZ2V0U3RhcnQpfXJldHVybiBsZW59O0J1ZmZlci5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbiBmaWxsKHZhbCxzdGFydCxlbmQsZW5jb2Rpbmcpe2lmKHR5cGVvZiB2YWw9PT0ic3RyaW5nIil7aWYodHlwZW9mIHN0YXJ0PT09InN0cmluZyIpe2VuY29kaW5nPXN0YXJ0O3N0YXJ0PTA7ZW5kPXRoaXMubGVuZ3RofWVsc2UgaWYodHlwZW9mIGVuZD09PSJzdHJpbmciKXtlbmNvZGluZz1lbmQ7ZW5kPXRoaXMubGVuZ3RofWlmKGVuY29kaW5nIT09dW5kZWZpbmVkJiZ0eXBlb2YgZW5jb2RpbmchPT0ic3RyaW5nIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZyIpfWlmKHR5cGVvZiBlbmNvZGluZz09PSJzdHJpbmciJiYhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK2VuY29kaW5nKX1pZih2YWwubGVuZ3RoPT09MSl7dmFyIGNvZGU9dmFsLmNoYXJDb2RlQXQoMCk7aWYoZW5jb2Rpbmc9PT0idXRmOCImJmNvZGU8MTI4fHxlbmNvZGluZz09PSJsYXRpbjEiKXt2YWw9Y29kZX19fWVsc2UgaWYodHlwZW9mIHZhbD09PSJudW1iZXIiKXt2YWw9dmFsJjI1NX1pZihzdGFydDwwfHx0aGlzLmxlbmd0aDxzdGFydHx8dGhpcy5sZW5ndGg8ZW5kKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiT3V0IG9mIHJhbmdlIGluZGV4Iil9aWYoZW5kPD1zdGFydCl7cmV0dXJuIHRoaXN9c3RhcnQ9c3RhcnQ+Pj4wO2VuZD1lbmQ9PT11bmRlZmluZWQ/dGhpcy5sZW5ndGg6ZW5kPj4+MDtpZighdmFsKXZhbD0wO3ZhciBpO2lmKHR5cGVvZiB2YWw9PT0ibnVtYmVyIil7Zm9yKGk9c3RhcnQ7aTxlbmQ7KytpKXt0aGlzW2ldPXZhbH19ZWxzZXt2YXIgYnl0ZXM9QnVmZmVyLmlzQnVmZmVyKHZhbCk/dmFsOkJ1ZmZlci5mcm9tKHZhbCxlbmNvZGluZyk7dmFyIGxlbj1ieXRlcy5sZW5ndGg7aWYobGVuPT09MCl7dGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIHZhbHVlICInK3ZhbCsnIiBpcyBpbnZhbGlkIGZvciBhcmd1bWVudCAidmFsdWUiJyl9Zm9yKGk9MDtpPGVuZC1zdGFydDsrK2kpe3RoaXNbaStzdGFydF09Ynl0ZXNbaSVsZW5dfX1yZXR1cm4gdGhpc307dmFyIElOVkFMSURfQkFTRTY0X1JFPS9bXisvMC05QS1aYS16LV9dL2c7ZnVuY3Rpb24gYmFzZTY0Y2xlYW4oc3RyKXtzdHI9c3RyLnNwbGl0KCI9IilbMF07c3RyPXN0ci50cmltKCkucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwiIik7aWYoc3RyLmxlbmd0aDwyKXJldHVybiIiO3doaWxlKHN0ci5sZW5ndGglNCE9PTApe3N0cj1zdHIrIj0ifXJldHVybiBzdHJ9ZnVuY3Rpb24gdG9IZXgobil7aWYobjwxNilyZXR1cm4iMCIrbi50b1N0cmluZygxNik7cmV0dXJuIG4udG9TdHJpbmcoMTYpfWZ1bmN0aW9uIHV0ZjhUb0J5dGVzKHN0cmluZyx1bml0cyl7dW5pdHM9dW5pdHN8fEluZmluaXR5O3ZhciBjb2RlUG9pbnQ7dmFyIGxlbmd0aD1zdHJpbmcubGVuZ3RoO3ZhciBsZWFkU3Vycm9nYXRlPW51bGw7dmFyIGJ5dGVzPVtdO2Zvcih2YXIgaT0wO2k8bGVuZ3RoOysraSl7Y29kZVBvaW50PXN0cmluZy5jaGFyQ29kZUF0KGkpO2lmKGNvZGVQb2ludD41NTI5NSYmY29kZVBvaW50PDU3MzQ0KXtpZighbGVhZFN1cnJvZ2F0ZSl7aWYoY29kZVBvaW50PjU2MzE5KXtpZigodW5pdHMtPTMpPi0xKWJ5dGVzLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWVsc2UgaWYoaSsxPT09bGVuZ3RoKXtpZigodW5pdHMtPTMpPi0xKWJ5dGVzLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWxlYWRTdXJyb2dhdGU9Y29kZVBvaW50O2NvbnRpbnVlfWlmKGNvZGVQb2ludDw1NjMyMCl7aWYoKHVuaXRzLT0zKT4tMSlieXRlcy5wdXNoKDIzOSwxOTEsMTg5KTtsZWFkU3Vycm9nYXRlPWNvZGVQb2ludDtjb250aW51ZX1jb2RlUG9pbnQ9KGxlYWRTdXJyb2dhdGUtNTUyOTY8PDEwfGNvZGVQb2ludC01NjMyMCkrNjU1MzZ9ZWxzZSBpZihsZWFkU3Vycm9nYXRlKXtpZigodW5pdHMtPTMpPi0xKWJ5dGVzLnB1c2goMjM5LDE5MSwxODkpfWxlYWRTdXJyb2dhdGU9bnVsbDtpZihjb2RlUG9pbnQ8MTI4KXtpZigodW5pdHMtPTEpPDApYnJlYWs7Ynl0ZXMucHVzaChjb2RlUG9pbnQpfWVsc2UgaWYoY29kZVBvaW50PDIwNDgpe2lmKCh1bml0cy09Mik8MClicmVhaztieXRlcy5wdXNoKGNvZGVQb2ludD4+NnwxOTIsY29kZVBvaW50JjYzfDEyOCl9ZWxzZSBpZihjb2RlUG9pbnQ8NjU1MzYpe2lmKCh1bml0cy09Myk8MClicmVhaztieXRlcy5wdXNoKGNvZGVQb2ludD4+MTJ8MjI0LGNvZGVQb2ludD4+NiY2M3wxMjgsY29kZVBvaW50JjYzfDEyOCl9ZWxzZSBpZihjb2RlUG9pbnQ8MTExNDExMil7aWYoKHVuaXRzLT00KTwwKWJyZWFrO2J5dGVzLnB1c2goY29kZVBvaW50Pj4xOHwyNDAsY29kZVBvaW50Pj4xMiY2M3wxMjgsY29kZVBvaW50Pj42JjYzfDEyOCxjb2RlUG9pbnQmNjN8MTI4KX1lbHNle3Rocm93IG5ldyBFcnJvcigiSW52YWxpZCBjb2RlIHBvaW50Iil9fXJldHVybiBieXRlc31mdW5jdGlvbiBhc2NpaVRvQnl0ZXMoc3RyKXt2YXIgYnl0ZUFycmF5PVtdO2Zvcih2YXIgaT0wO2k8c3RyLmxlbmd0aDsrK2kpe2J5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpJjI1NSl9cmV0dXJuIGJ5dGVBcnJheX1mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyhzdHIsdW5pdHMpe3ZhciBjLGhpLGxvO3ZhciBieXRlQXJyYXk9W107Zm9yKHZhciBpPTA7aTxzdHIubGVuZ3RoOysraSl7aWYoKHVuaXRzLT0yKTwwKWJyZWFrO2M9c3RyLmNoYXJDb2RlQXQoaSk7aGk9Yz4+ODtsbz1jJTI1NjtieXRlQXJyYXkucHVzaChsbyk7Ynl0ZUFycmF5LnB1c2goaGkpfXJldHVybiBieXRlQXJyYXl9ZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyhzdHIpe3JldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSl9ZnVuY3Rpb24gYmxpdEJ1ZmZlcihzcmMsZHN0LG9mZnNldCxsZW5ndGgpe2Zvcih2YXIgaT0wO2k8bGVuZ3RoOysraSl7aWYoaStvZmZzZXQ+PWRzdC5sZW5ndGh8fGk+PXNyYy5sZW5ndGgpYnJlYWs7ZHN0W2krb2Zmc2V0XT1zcmNbaV19cmV0dXJuIGl9ZnVuY3Rpb24gaXNJbnN0YW5jZShvYmosdHlwZSl7cmV0dXJuIG9iaiBpbnN0YW5jZW9mIHR5cGV8fG9iaiE9bnVsbCYmb2JqLmNvbnN0cnVjdG9yIT1udWxsJiZvYmouY29uc3RydWN0b3IubmFtZSE9bnVsbCYmb2JqLmNvbnN0cnVjdG9yLm5hbWU9PT10eXBlLm5hbWV9ZnVuY3Rpb24gbnVtYmVySXNOYU4ob2JqKXtyZXR1cm4gb2JqIT09b2JqfX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKX0seyJiYXNlNjQtanMiOjYsYnVmZmVyOjgsaWVlZTc1NDoyOH1dLDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPXsxMDA6IkNvbnRpbnVlIiwxMDE6IlN3aXRjaGluZyBQcm90b2NvbHMiLDEwMjoiUHJvY2Vzc2luZyIsMjAwOiJPSyIsMjAxOiJDcmVhdGVkIiwyMDI6IkFjY2VwdGVkIiwyMDM6Ik5vbi1BdXRob3JpdGF0aXZlIEluZm9ybWF0aW9uIiwyMDQ6Ik5vIENvbnRlbnQiLDIwNToiUmVzZXQgQ29udGVudCIsMjA2OiJQYXJ0aWFsIENvbnRlbnQiLDIwNzoiTXVsdGktU3RhdHVzIiwyMDg6IkFscmVhZHkgUmVwb3J0ZWQiLDIyNjoiSU0gVXNlZCIsMzAwOiJNdWx0aXBsZSBDaG9pY2VzIiwzMDE6Ik1vdmVkIFBlcm1hbmVudGx5IiwzMDI6IkZvdW5kIiwzMDM6IlNlZSBPdGhlciIsMzA0OiJOb3QgTW9kaWZpZWQiLDMwNToiVXNlIFByb3h5IiwzMDc6IlRlbXBvcmFyeSBSZWRpcmVjdCIsMzA4OiJQZXJtYW5lbnQgUmVkaXJlY3QiLDQwMDoiQmFkIFJlcXVlc3QiLDQwMToiVW5hdXRob3JpemVkIiw0MDI6IlBheW1lbnQgUmVxdWlyZWQiLDQwMzoiRm9yYmlkZGVuIiw0MDQ6Ik5vdCBGb3VuZCIsNDA1OiJNZXRob2QgTm90IEFsbG93ZWQiLDQwNjoiTm90IEFjY2VwdGFibGUiLDQwNzoiUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWQiLDQwODoiUmVxdWVzdCBUaW1lb3V0Iiw0MDk6IkNvbmZsaWN0Iiw0MTA6IkdvbmUiLDQxMToiTGVuZ3RoIFJlcXVpcmVkIiw0MTI6IlByZWNvbmRpdGlvbiBGYWlsZWQiLDQxMzoiUGF5bG9hZCBUb28gTGFyZ2UiLDQxNDoiVVJJIFRvbyBMb25nIiw0MTU6IlVuc3VwcG9ydGVkIE1lZGlhIFR5cGUiLDQxNjoiUmFuZ2UgTm90IFNhdGlzZmlhYmxlIiw0MTc6IkV4cGVjdGF0aW9uIEZhaWxlZCIsNDE4OiJJJ20gYSB0ZWFwb3QiLDQyMToiTWlzZGlyZWN0ZWQgUmVxdWVzdCIsNDIyOiJVbnByb2Nlc3NhYmxlIEVudGl0eSIsNDIzOiJMb2NrZWQiLDQyNDoiRmFpbGVkIERlcGVuZGVuY3kiLDQyNToiVW5vcmRlcmVkIENvbGxlY3Rpb24iLDQyNjoiVXBncmFkZSBSZXF1aXJlZCIsNDI4OiJQcmVjb25kaXRpb24gUmVxdWlyZWQiLDQyOToiVG9vIE1hbnkgUmVxdWVzdHMiLDQzMToiUmVxdWVzdCBIZWFkZXIgRmllbGRzIFRvbyBMYXJnZSIsNDUxOiJVbmF2YWlsYWJsZSBGb3IgTGVnYWwgUmVhc29ucyIsNTAwOiJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiLDUwMToiTm90IEltcGxlbWVudGVkIiw1MDI6IkJhZCBHYXRld2F5Iiw1MDM6IlNlcnZpY2UgVW5hdmFpbGFibGUiLDUwNDoiR2F0ZXdheSBUaW1lb3V0Iiw1MDU6IkhUVFAgVmVyc2lvbiBOb3QgU3VwcG9ydGVkIiw1MDY6IlZhcmlhbnQgQWxzbyBOZWdvdGlhdGVzIiw1MDc6Ikluc3VmZmljaWVudCBTdG9yYWdlIiw1MDg6Ikxvb3AgRGV0ZWN0ZWQiLDUwOToiQmFuZHdpZHRoIExpbWl0IEV4Y2VlZGVkIiw1MTA6Ik5vdCBFeHRlbmRlZCIsNTExOiJOZXR3b3JrIEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkIn19LHt9XSwxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO3ZhciBHZXRJbnRyaW5zaWM9cmVxdWlyZSgiZ2V0LWludHJpbnNpYyIpO3ZhciBjYWxsQmluZD1yZXF1aXJlKCIuLyIpO3ZhciAkaW5kZXhPZj1jYWxsQmluZChHZXRJbnRyaW5zaWMoIlN0cmluZy5wcm90b3R5cGUuaW5kZXhPZiIpKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBjYWxsQm91bmRJbnRyaW5zaWMobmFtZSxhbGxvd01pc3Npbmcpe3ZhciBpbnRyaW5zaWM9R2V0SW50cmluc2ljKG5hbWUsISFhbGxvd01pc3NpbmcpO2lmKHR5cGVvZiBpbnRyaW5zaWM9PT0iZnVuY3Rpb24iJiYkaW5kZXhPZihuYW1lLCIucHJvdG90eXBlLiIpPi0xKXtyZXR1cm4gY2FsbEJpbmQoaW50cmluc2ljKX1yZXR1cm4gaW50cmluc2ljfX0seyIuLyI6MTEsImdldC1pbnRyaW5zaWMiOjIwfV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYmluZD1yZXF1aXJlKCJmdW5jdGlvbi1iaW5kIik7dmFyIEdldEludHJpbnNpYz1yZXF1aXJlKCJnZXQtaW50cmluc2ljIik7dmFyICRhcHBseT1HZXRJbnRyaW5zaWMoIiVGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHklIik7dmFyICRjYWxsPUdldEludHJpbnNpYygiJUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsJSIpO3ZhciAkcmVmbGVjdEFwcGx5PUdldEludHJpbnNpYygiJVJlZmxlY3QuYXBwbHklIix0cnVlKXx8YmluZC5jYWxsKCRjYWxsLCRhcHBseSk7dmFyICRnT1BEPUdldEludHJpbnNpYygiJU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IlIix0cnVlKTt2YXIgJGRlZmluZVByb3BlcnR5PUdldEludHJpbnNpYygiJU9iamVjdC5kZWZpbmVQcm9wZXJ0eSUiLHRydWUpO3ZhciAkbWF4PUdldEludHJpbnNpYygiJU1hdGgubWF4JSIpO2lmKCRkZWZpbmVQcm9wZXJ0eSl7dHJ5eyRkZWZpbmVQcm9wZXJ0eSh7fSwiYSIse3ZhbHVlOjF9KX1jYXRjaChlKXskZGVmaW5lUHJvcGVydHk9bnVsbH19bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gY2FsbEJpbmQob3JpZ2luYWxGdW5jdGlvbil7dmFyIGZ1bmM9JHJlZmxlY3RBcHBseShiaW5kLCRjYWxsLGFyZ3VtZW50cyk7aWYoJGdPUEQmJiRkZWZpbmVQcm9wZXJ0eSl7dmFyIGRlc2M9JGdPUEQoZnVuYywibGVuZ3RoIik7aWYoZGVzYy5jb25maWd1cmFibGUpeyRkZWZpbmVQcm9wZXJ0eShmdW5jLCJsZW5ndGgiLHt2YWx1ZToxKyRtYXgoMCxvcmlnaW5hbEZ1bmN0aW9uLmxlbmd0aC0oYXJndW1lbnRzLmxlbmd0aC0xKSl9KX19cmV0dXJuIGZ1bmN9O3ZhciBhcHBseUJpbmQ9ZnVuY3Rpb24gYXBwbHlCaW5kKCl7cmV0dXJuICRyZWZsZWN0QXBwbHkoYmluZCwkYXBwbHksYXJndW1lbnRzKX07aWYoJGRlZmluZVByb3BlcnR5KXskZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsImFwcGx5Iix7dmFsdWU6YXBwbHlCaW5kfSl9ZWxzZXttb2R1bGUuZXhwb3J0cy5hcHBseT1hcHBseUJpbmR9fSx7ImZ1bmN0aW9uLWJpbmQiOjE5LCJnZXQtaW50cmluc2ljIjoyMH1dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2Vzcyl7KGZ1bmN0aW9uKCl7ZXhwb3J0cy5mb3JtYXRBcmdzPWZvcm1hdEFyZ3M7ZXhwb3J0cy5zYXZlPXNhdmU7ZXhwb3J0cy5sb2FkPWxvYWQ7ZXhwb3J0cy51c2VDb2xvcnM9dXNlQ29sb3JzO2V4cG9ydHMuc3RvcmFnZT1sb2NhbHN0b3JhZ2UoKTtleHBvcnRzLmRlc3Ryb3k9KCgpPT57bGV0IHdhcm5lZD1mYWxzZTtyZXR1cm4oKT0+e2lmKCF3YXJuZWQpe3dhcm5lZD10cnVlO2NvbnNvbGUud2FybigiSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLiIpfX19KSgpO2V4cG9ydHMuY29sb3JzPVsiIzAwMDBDQyIsIiMwMDAwRkYiLCIjMDAzM0NDIiwiIzAwMzNGRiIsIiMwMDY2Q0MiLCIjMDA2NkZGIiwiIzAwOTlDQyIsIiMwMDk5RkYiLCIjMDBDQzAwIiwiIzAwQ0MzMyIsIiMwMENDNjYiLCIjMDBDQzk5IiwiIzAwQ0NDQyIsIiMwMENDRkYiLCIjMzMwMENDIiwiIzMzMDBGRiIsIiMzMzMzQ0MiLCIjMzMzM0ZGIiwiIzMzNjZDQyIsIiMzMzY2RkYiLCIjMzM5OUNDIiwiIzMzOTlGRiIsIiMzM0NDMDAiLCIjMzNDQzMzIiwiIzMzQ0M2NiIsIiMzM0NDOTkiLCIjMzNDQ0NDIiwiIzMzQ0NGRiIsIiM2NjAwQ0MiLCIjNjYwMEZGIiwiIzY2MzNDQyIsIiM2NjMzRkYiLCIjNjZDQzAwIiwiIzY2Q0MzMyIsIiM5OTAwQ0MiLCIjOTkwMEZGIiwiIzk5MzNDQyIsIiM5OTMzRkYiLCIjOTlDQzAwIiwiIzk5Q0MzMyIsIiNDQzAwMDAiLCIjQ0MwMDMzIiwiI0NDMDA2NiIsIiNDQzAwOTkiLCIjQ0MwMENDIiwiI0NDMDBGRiIsIiNDQzMzMDAiLCIjQ0MzMzMzIiwiI0NDMzM2NiIsIiNDQzMzOTkiLCIjQ0MzM0NDIiwiI0NDMzNGRiIsIiNDQzY2MDAiLCIjQ0M2NjMzIiwiI0NDOTkwMCIsIiNDQzk5MzMiLCIjQ0NDQzAwIiwiI0NDQ0MzMyIsIiNGRjAwMDAiLCIjRkYwMDMzIiwiI0ZGMDA2NiIsIiNGRjAwOTkiLCIjRkYwMENDIiwiI0ZGMDBGRiIsIiNGRjMzMDAiLCIjRkYzMzMzIiwiI0ZGMzM2NiIsIiNGRjMzOTkiLCIjRkYzM0NDIiwiI0ZGMzNGRiIsIiNGRjY2MDAiLCIjRkY2NjMzIiwiI0ZGOTkwMCIsIiNGRjk5MzMiLCIjRkZDQzAwIiwiI0ZGQ0MzMyJdO2Z1bmN0aW9uIHVzZUNvbG9ycygpe2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIiYmd2luZG93LnByb2Nlc3MmJih3aW5kb3cucHJvY2Vzcy50eXBlPT09InJlbmRlcmVyInx8d2luZG93LnByb2Nlc3MuX19ud2pzKSl7cmV0dXJuIHRydWV9aWYodHlwZW9mIG5hdmlnYXRvciE9PSJ1bmRlZmluZWQiJiZuYXZpZ2F0b3IudXNlckFnZW50JiZuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXC8oXGQrKS8pKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHR5cGVvZiBkb2N1bWVudCE9PSJ1bmRlZmluZWQiJiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLldlYmtpdEFwcGVhcmFuY2V8fHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIiYmd2luZG93LmNvbnNvbGUmJih3aW5kb3cuY29uc29sZS5maXJlYnVnfHx3aW5kb3cuY29uc29sZS5leGNlcHRpb24mJndpbmRvdy5jb25zb2xlLnRhYmxlKXx8dHlwZW9mIG5hdmlnYXRvciE9PSJ1bmRlZmluZWQiJiZuYXZpZ2F0b3IudXNlckFnZW50JiZuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcLyhcZCspLykmJnBhcnNlSW50KFJlZ0V4cC4kMSwxMCk+PTMxfHx0eXBlb2YgbmF2aWdhdG9yIT09InVuZGVmaW5lZCImJm5hdmlnYXRvci51c2VyQWdlbnQmJm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcLyhcZCspLyl9ZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKXthcmdzWzBdPSh0aGlzLnVzZUNvbG9ycz8iJWMiOiIiKSt0aGlzLm5hbWVzcGFjZSsodGhpcy51c2VDb2xvcnM/IiAlYyI6IiAiKSthcmdzWzBdKyh0aGlzLnVzZUNvbG9ycz8iJWMgIjoiICIpKyIrIittb2R1bGUuZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpO2lmKCF0aGlzLnVzZUNvbG9ycyl7cmV0dXJufWNvbnN0IGM9ImNvbG9yOiAiK3RoaXMuY29sb3I7YXJncy5zcGxpY2UoMSwwLGMsImNvbG9yOiBpbmhlcml0Iik7bGV0IGluZGV4PTA7bGV0IGxhc3RDPTA7YXJnc1swXS5yZXBsYWNlKC8lW2EtekEtWiVdL2csbWF0Y2g9PntpZihtYXRjaD09PSIlJSIpe3JldHVybn1pbmRleCsrO2lmKG1hdGNoPT09IiVjIil7bGFzdEM9aW5kZXh9fSk7YXJncy5zcGxpY2UobGFzdEMsMCxjKX1leHBvcnRzLmxvZz1jb25zb2xlLmRlYnVnfHxjb25zb2xlLmxvZ3x8KCgpPT57fSk7ZnVuY3Rpb24gc2F2ZShuYW1lc3BhY2VzKXt0cnl7aWYobmFtZXNwYWNlcyl7ZXhwb3J0cy5zdG9yYWdlLnNldEl0ZW0oImRlYnVnIixuYW1lc3BhY2VzKX1lbHNle2V4cG9ydHMuc3RvcmFnZS5yZW1vdmVJdGVtKCJkZWJ1ZyIpfX1jYXRjaChlcnJvcil7fX1mdW5jdGlvbiBsb2FkKCl7bGV0IHI7dHJ5e3I9ZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oImRlYnVnIil9Y2F0Y2goZXJyb3Ipe31pZighciYmdHlwZW9mIHByb2Nlc3MhPT0idW5kZWZpbmVkIiYmImVudiJpbiBwcm9jZXNzKXtyPXByb2Nlc3MuZW52LkRFQlVHfXJldHVybiByfWZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpe3RyeXtyZXR1cm4gbG9jYWxTdG9yYWdlfWNhdGNoKGVycm9yKXt9fW1vZHVsZS5leHBvcnRzPXJlcXVpcmUoIi4vY29tbW9uIikoZXhwb3J0cyk7Y29uc3R7Zm9ybWF0dGVyc309bW9kdWxlLmV4cG9ydHM7Zm9ybWF0dGVycy5qPWZ1bmN0aW9uKHYpe3RyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodil9Y2F0Y2goZXJyb3Ipe3JldHVybiJbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogIitlcnJvci5tZXNzYWdlfX19KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHJlcXVpcmUoIl9wcm9jZXNzIikpfSx7Ii4vY29tbW9uIjoxMyxfcHJvY2VzczozOX1dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtmdW5jdGlvbiBzZXR1cChlbnYpe2NyZWF0ZURlYnVnLmRlYnVnPWNyZWF0ZURlYnVnO2NyZWF0ZURlYnVnLmRlZmF1bHQ9Y3JlYXRlRGVidWc7Y3JlYXRlRGVidWcuY29lcmNlPWNvZXJjZTtjcmVhdGVEZWJ1Zy5kaXNhYmxlPWRpc2FibGU7Y3JlYXRlRGVidWcuZW5hYmxlPWVuYWJsZTtjcmVhdGVEZWJ1Zy5lbmFibGVkPWVuYWJsZWQ7Y3JlYXRlRGVidWcuaHVtYW5pemU9cmVxdWlyZSgibXMiKTtjcmVhdGVEZWJ1Zy5kZXN0cm95PWRlc3Ryb3k7T2JqZWN0LmtleXMoZW52KS5mb3JFYWNoKGtleT0+e2NyZWF0ZURlYnVnW2tleV09ZW52W2tleV19KTtjcmVhdGVEZWJ1Zy5uYW1lcz1bXTtjcmVhdGVEZWJ1Zy5za2lwcz1bXTtjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzPXt9O2Z1bmN0aW9uIHNlbGVjdENvbG9yKG5hbWVzcGFjZSl7bGV0IGhhc2g9MDtmb3IobGV0IGk9MDtpPG5hbWVzcGFjZS5sZW5ndGg7aSsrKXtoYXNoPShoYXNoPDw1KS1oYXNoK25hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO2hhc2h8PTB9cmV0dXJuIGNyZWF0ZURlYnVnLmNvbG9yc1tNYXRoLmFicyhoYXNoKSVjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXX1jcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcj1zZWxlY3RDb2xvcjtmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2Upe2xldCBwcmV2VGltZTtsZXQgZW5hYmxlT3ZlcnJpZGU9bnVsbDtsZXQgbmFtZXNwYWNlc0NhY2hlO2xldCBlbmFibGVkQ2FjaGU7ZnVuY3Rpb24gZGVidWcoLi4uYXJncyl7aWYoIWRlYnVnLmVuYWJsZWQpe3JldHVybn1jb25zdCBzZWxmPWRlYnVnO2NvbnN0IGN1cnI9TnVtYmVyKG5ldyBEYXRlKTtjb25zdCBtcz1jdXJyLShwcmV2VGltZXx8Y3Vycik7c2VsZi5kaWZmPW1zO3NlbGYucHJldj1wcmV2VGltZTtzZWxmLmN1cnI9Y3VycjtwcmV2VGltZT1jdXJyO2FyZ3NbMF09Y3JlYXRlRGVidWcuY29lcmNlKGFyZ3NbMF0pO2lmKHR5cGVvZiBhcmdzWzBdIT09InN0cmluZyIpe2FyZ3MudW5zaGlmdCgiJU8iKX1sZXQgaW5kZXg9MDthcmdzWzBdPWFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csKG1hdGNoLGZvcm1hdCk9PntpZihtYXRjaD09PSIlJSIpe3JldHVybiIlIn1pbmRleCsrO2NvbnN0IGZvcm1hdHRlcj1jcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzW2Zvcm1hdF07aWYodHlwZW9mIGZvcm1hdHRlcj09PSJmdW5jdGlvbiIpe2NvbnN0IHZhbD1hcmdzW2luZGV4XTttYXRjaD1mb3JtYXR0ZXIuY2FsbChzZWxmLHZhbCk7YXJncy5zcGxpY2UoaW5kZXgsMSk7aW5kZXgtLX1yZXR1cm4gbWF0Y2h9KTtjcmVhdGVEZWJ1Zy5mb3JtYXRBcmdzLmNhbGwoc2VsZixhcmdzKTtjb25zdCBsb2dGbj1zZWxmLmxvZ3x8Y3JlYXRlRGVidWcubG9nO2xvZ0ZuLmFwcGx5KHNlbGYsYXJncyl9ZGVidWcubmFtZXNwYWNlPW5hbWVzcGFjZTtkZWJ1Zy51c2VDb2xvcnM9Y3JlYXRlRGVidWcudXNlQ29sb3JzKCk7ZGVidWcuY29sb3I9Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IobmFtZXNwYWNlKTtkZWJ1Zy5leHRlbmQ9ZXh0ZW5kO2RlYnVnLmRlc3Ryb3k9Y3JlYXRlRGVidWcuZGVzdHJveTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVidWcsImVuYWJsZWQiLHtlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOmZhbHNlLGdldDooKT0+e2lmKGVuYWJsZU92ZXJyaWRlIT09bnVsbCl7cmV0dXJuIGVuYWJsZU92ZXJyaWRlfWlmKG5hbWVzcGFjZXNDYWNoZSE9PWNyZWF0ZURlYnVnLm5hbWVzcGFjZXMpe25hbWVzcGFjZXNDYWNoZT1jcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzO2VuYWJsZWRDYWNoZT1jcmVhdGVEZWJ1Zy5lbmFibGVkKG5hbWVzcGFjZSl9cmV0dXJuIGVuYWJsZWRDYWNoZX0sc2V0OnY9PntlbmFibGVPdmVycmlkZT12fX0pO2lmKHR5cGVvZiBjcmVhdGVEZWJ1Zy5pbml0PT09ImZ1bmN0aW9uIil7Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyl9cmV0dXJuIGRlYnVnfWZ1bmN0aW9uIGV4dGVuZChuYW1lc3BhY2UsZGVsaW1pdGVyKXtjb25zdCBuZXdEZWJ1Zz1jcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSsodHlwZW9mIGRlbGltaXRlcj09PSJ1bmRlZmluZWQiPyI6IjpkZWxpbWl0ZXIpK25hbWVzcGFjZSk7bmV3RGVidWcubG9nPXRoaXMubG9nO3JldHVybiBuZXdEZWJ1Z31mdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcyl7Y3JlYXRlRGVidWcuc2F2ZShuYW1lc3BhY2VzKTtjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzPW5hbWVzcGFjZXM7Y3JlYXRlRGVidWcubmFtZXM9W107Y3JlYXRlRGVidWcuc2tpcHM9W107bGV0IGk7Y29uc3Qgc3BsaXQ9KHR5cGVvZiBuYW1lc3BhY2VzPT09InN0cmluZyI/bmFtZXNwYWNlczoiIikuc3BsaXQoL1tccyxdKy8pO2NvbnN0IGxlbj1zcGxpdC5sZW5ndGg7Zm9yKGk9MDtpPGxlbjtpKyspe2lmKCFzcGxpdFtpXSl7Y29udGludWV9bmFtZXNwYWNlcz1zcGxpdFtpXS5yZXBsYWNlKC9cKi9nLCIuKj8iKTtpZihuYW1lc3BhY2VzWzBdPT09Ii0iKXtjcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoIl4iK25hbWVzcGFjZXMuc2xpY2UoMSkrIiQiKSl9ZWxzZXtjcmVhdGVEZWJ1Zy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoIl4iK25hbWVzcGFjZXMrIiQiKSl9fX1mdW5jdGlvbiBkaXNhYmxlKCl7Y29uc3QgbmFtZXNwYWNlcz1bLi4uY3JlYXRlRGVidWcubmFtZXMubWFwKHRvTmFtZXNwYWNlKSwuLi5jcmVhdGVEZWJ1Zy5za2lwcy5tYXAodG9OYW1lc3BhY2UpLm1hcChuYW1lc3BhY2U9PiItIituYW1lc3BhY2UpXS5qb2luKCIsIik7Y3JlYXRlRGVidWcuZW5hYmxlKCIiKTtyZXR1cm4gbmFtZXNwYWNlc31mdW5jdGlvbiBlbmFibGVkKG5hbWUpe2lmKG5hbWVbbmFtZS5sZW5ndGgtMV09PT0iKiIpe3JldHVybiB0cnVlfWxldCBpO2xldCBsZW47Zm9yKGk9MCxsZW49Y3JlYXRlRGVidWcuc2tpcHMubGVuZ3RoO2k8bGVuO2krKyl7aWYoY3JlYXRlRGVidWcuc2tpcHNbaV0udGVzdChuYW1lKSl7cmV0dXJuIGZhbHNlfX1mb3IoaT0wLGxlbj1jcmVhdGVEZWJ1Zy5uYW1lcy5sZW5ndGg7aTxsZW47aSsrKXtpZihjcmVhdGVEZWJ1Zy5uYW1lc1tpXS50ZXN0KG5hbWUpKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIHRvTmFtZXNwYWNlKHJlZ2V4cCl7cmV0dXJuIHJlZ2V4cC50b1N0cmluZygpLnN1YnN0cmluZygyLHJlZ2V4cC50b1N0cmluZygpLmxlbmd0aC0yKS5yZXBsYWNlKC9cLlwqXD8kLywiKiIpfWZ1bmN0aW9uIGNvZXJjZSh2YWwpe2lmKHZhbCBpbnN0YW5jZW9mIEVycm9yKXtyZXR1cm4gdmFsLnN0YWNrfHx2YWwubWVzc2FnZX1yZXR1cm4gdmFsfWZ1bmN0aW9uIGRlc3Ryb3koKXtjb25zb2xlLndhcm4oIkluc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4iKX1jcmVhdGVEZWJ1Zy5lbmFibGUoY3JlYXRlRGVidWcubG9hZCgpKTtyZXR1cm4gY3JlYXRlRGVidWd9bW9kdWxlLmV4cG9ydHM9c2V0dXB9LHttczozNn1dLDE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7dmFyIFI9dHlwZW9mIFJlZmxlY3Q9PT0ib2JqZWN0Ij9SZWZsZWN0Om51bGw7dmFyIFJlZmxlY3RBcHBseT1SJiZ0eXBlb2YgUi5hcHBseT09PSJmdW5jdGlvbiI/Ui5hcHBseTpmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LHJlY2VpdmVyLGFyZ3Mpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQscmVjZWl2ZXIsYXJncyl9O3ZhciBSZWZsZWN0T3duS2V5cztpZihSJiZ0eXBlb2YgUi5vd25LZXlzPT09ImZ1bmN0aW9uIil7UmVmbGVjdE93bktleXM9Ui5vd25LZXlzfWVsc2UgaWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7UmVmbGVjdE93bktleXM9ZnVuY3Rpb24gUmVmbGVjdE93bktleXModGFyZ2V0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpKX19ZWxzZXtSZWZsZWN0T3duS2V5cz1mdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpfX1mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZyl7aWYoY29uc29sZSYmY29uc29sZS53YXJuKWNvbnNvbGUud2Fybih3YXJuaW5nKX12YXIgTnVtYmVySXNOYU49TnVtYmVyLmlzTmFOfHxmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSl7cmV0dXJuIHZhbHVlIT09dmFsdWV9O2Z1bmN0aW9uIEV2ZW50RW1pdHRlcigpe0V2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyl9bW9kdWxlLmV4cG9ydHM9RXZlbnRFbWl0dGVyO21vZHVsZS5leHBvcnRzLm9uY2U9b25jZTtFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyPUV2ZW50RW1pdHRlcjtFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHM9dW5kZWZpbmVkO0V2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50PTA7RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzPXVuZGVmaW5lZDt2YXIgZGVmYXVsdE1heExpc3RlbmVycz0xMDtmdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKXtpZih0eXBlb2YgbGlzdGVuZXIhPT0iZnVuY3Rpb24iKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgImxpc3RlbmVyIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyt0eXBlb2YgbGlzdGVuZXIpfX1PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCJkZWZhdWx0TWF4TGlzdGVuZXJzIix7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBkZWZhdWx0TWF4TGlzdGVuZXJzfSxzZXQ6ZnVuY3Rpb24oYXJnKXtpZih0eXBlb2YgYXJnIT09Im51bWJlciJ8fGFyZzwwfHxOdW1iZXJJc05hTihhcmcpKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mICJkZWZhdWx0TWF4TGlzdGVuZXJzIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnK2FyZysiLiIpfWRlZmF1bHRNYXhMaXN0ZW5lcnM9YXJnfX0pO0V2ZW50RW1pdHRlci5pbml0PWZ1bmN0aW9uKCl7aWYodGhpcy5fZXZlbnRzPT09dW5kZWZpbmVkfHx0aGlzLl9ldmVudHM9PT1PYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50cyl7dGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5fZXZlbnRzQ291bnQ9MH10aGlzLl9tYXhMaXN0ZW5lcnM9dGhpcy5fbWF4TGlzdGVuZXJzfHx1bmRlZmluZWR9O0V2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uIHNldE1heExpc3RlbmVycyhuKXtpZih0eXBlb2YgbiE9PSJudW1iZXIifHxuPDB8fE51bWJlcklzTmFOKG4pKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mICJuIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnK24rIi4iKX10aGlzLl9tYXhMaXN0ZW5lcnM9bjtyZXR1cm4gdGhpc307ZnVuY3Rpb24gX2dldE1heExpc3RlbmVycyh0aGF0KXtpZih0aGF0Ll9tYXhMaXN0ZW5lcnM9PT11bmRlZmluZWQpcmV0dXJuIEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO3JldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnN9RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCl7cmV0dXJuIF9nZXRNYXhMaXN0ZW5lcnModGhpcyl9O0V2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbiBlbWl0KHR5cGUpe3ZhciBhcmdzPVtdO2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7dmFyIGRvRXJyb3I9dHlwZT09PSJlcnJvciI7dmFyIGV2ZW50cz10aGlzLl9ldmVudHM7aWYoZXZlbnRzIT09dW5kZWZpbmVkKWRvRXJyb3I9ZG9FcnJvciYmZXZlbnRzLmVycm9yPT09dW5kZWZpbmVkO2Vsc2UgaWYoIWRvRXJyb3IpcmV0dXJuIGZhbHNlO2lmKGRvRXJyb3Ipe3ZhciBlcjtpZihhcmdzLmxlbmd0aD4wKWVyPWFyZ3NbMF07aWYoZXIgaW5zdGFuY2VvZiBFcnJvcil7dGhyb3cgZXJ9dmFyIGVycj1uZXcgRXJyb3IoIlVuaGFuZGxlZCBlcnJvci4iKyhlcj8iICgiK2VyLm1lc3NhZ2UrIikiOiIiKSk7ZXJyLmNvbnRleHQ9ZXI7dGhyb3cgZXJyfXZhciBoYW5kbGVyPWV2ZW50c1t0eXBlXTtpZihoYW5kbGVyPT09dW5kZWZpbmVkKXJldHVybiBmYWxzZTtpZih0eXBlb2YgaGFuZGxlcj09PSJmdW5jdGlvbiIpe1JlZmxlY3RBcHBseShoYW5kbGVyLHRoaXMsYXJncyl9ZWxzZXt2YXIgbGVuPWhhbmRsZXIubGVuZ3RoO3ZhciBsaXN0ZW5lcnM9YXJyYXlDbG9uZShoYW5kbGVyLGxlbik7Zm9yKHZhciBpPTA7aTxsZW47KytpKVJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sdGhpcyxhcmdzKX1yZXR1cm4gdHJ1ZX07ZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCx0eXBlLGxpc3RlbmVyLHByZXBlbmQpe3ZhciBtO3ZhciBldmVudHM7dmFyIGV4aXN0aW5nO2NoZWNrTGlzdGVuZXIobGlzdGVuZXIpO2V2ZW50cz10YXJnZXQuX2V2ZW50cztpZihldmVudHM9PT11bmRlZmluZWQpe2V2ZW50cz10YXJnZXQuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpO3RhcmdldC5fZXZlbnRzQ291bnQ9MH1lbHNle2lmKGV2ZW50cy5uZXdMaXN0ZW5lciE9PXVuZGVmaW5lZCl7dGFyZ2V0LmVtaXQoIm5ld0xpc3RlbmVyIix0eXBlLGxpc3RlbmVyLmxpc3RlbmVyP2xpc3RlbmVyLmxpc3RlbmVyOmxpc3RlbmVyKTtldmVudHM9dGFyZ2V0Ll9ldmVudHN9ZXhpc3Rpbmc9ZXZlbnRzW3R5cGVdfWlmKGV4aXN0aW5nPT09dW5kZWZpbmVkKXtleGlzdGluZz1ldmVudHNbdHlwZV09bGlzdGVuZXI7Kyt0YXJnZXQuX2V2ZW50c0NvdW50fWVsc2V7aWYodHlwZW9mIGV4aXN0aW5nPT09ImZ1bmN0aW9uIil7ZXhpc3Rpbmc9ZXZlbnRzW3R5cGVdPXByZXBlbmQ/W2xpc3RlbmVyLGV4aXN0aW5nXTpbZXhpc3RpbmcsbGlzdGVuZXJdfWVsc2UgaWYocHJlcGVuZCl7ZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcil9ZWxzZXtleGlzdGluZy5wdXNoKGxpc3RlbmVyKX1tPV9nZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtpZihtPjAmJmV4aXN0aW5nLmxlbmd0aD5tJiYhZXhpc3Rpbmcud2FybmVkKXtleGlzdGluZy53YXJuZWQ9dHJ1ZTt2YXIgdz1uZXcgRXJyb3IoIlBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gIitleGlzdGluZy5sZW5ndGgrIiAiK1N0cmluZyh0eXBlKSsiIGxpc3RlbmVycyAiKyJhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gIisiaW5jcmVhc2UgbGltaXQiKTt3Lm5hbWU9Ik1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyI7dy5lbWl0dGVyPXRhcmdldDt3LnR5cGU9dHlwZTt3LmNvdW50PWV4aXN0aW5nLmxlbmd0aDtQcm9jZXNzRW1pdFdhcm5pbmcodyl9fXJldHVybiB0YXJnZXR9RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbiBhZGRMaXN0ZW5lcih0eXBlLGxpc3RlbmVyKXtyZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsdHlwZSxsaXN0ZW5lcixmYWxzZSl9O0V2ZW50RW1pdHRlci5wcm90b3R5cGUub249RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtFdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lcj1mdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSxsaXN0ZW5lcil7cmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLHR5cGUsbGlzdGVuZXIsdHJ1ZSl9O2Z1bmN0aW9uIG9uY2VXcmFwcGVyKCl7aWYoIXRoaXMuZmlyZWQpe3RoaXMudGFyZ2V0LnJlbW92ZUxpc3RlbmVyKHRoaXMudHlwZSx0aGlzLndyYXBGbik7dGhpcy5maXJlZD10cnVlO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpO3JldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LGFyZ3VtZW50cyl9fWZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsdHlwZSxsaXN0ZW5lcil7dmFyIHN0YXRlPXtmaXJlZDpmYWxzZSx3cmFwRm46dW5kZWZpbmVkLHRhcmdldDp0YXJnZXQsdHlwZTp0eXBlLGxpc3RlbmVyOmxpc3RlbmVyfTt2YXIgd3JhcHBlZD1vbmNlV3JhcHBlci5iaW5kKHN0YXRlKTt3cmFwcGVkLmxpc3RlbmVyPWxpc3RlbmVyO3N0YXRlLndyYXBGbj13cmFwcGVkO3JldHVybiB3cmFwcGVkfUV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZT1mdW5jdGlvbiBvbmNlKHR5cGUsbGlzdGVuZXIpe2NoZWNrTGlzdGVuZXIobGlzdGVuZXIpO3RoaXMub24odHlwZSxfb25jZVdyYXAodGhpcyx0eXBlLGxpc3RlbmVyKSk7cmV0dXJuIHRoaXN9O0V2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbiBwcmVwZW5kT25jZUxpc3RlbmVyKHR5cGUsbGlzdGVuZXIpe2NoZWNrTGlzdGVuZXIobGlzdGVuZXIpO3RoaXMucHJlcGVuZExpc3RlbmVyKHR5cGUsX29uY2VXcmFwKHRoaXMsdHlwZSxsaXN0ZW5lcikpO3JldHVybiB0aGlzfTtFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHR5cGUsbGlzdGVuZXIpe3ZhciBsaXN0LGV2ZW50cyxwb3NpdGlvbixpLG9yaWdpbmFsTGlzdGVuZXI7Y2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7ZXZlbnRzPXRoaXMuX2V2ZW50cztpZihldmVudHM9PT11bmRlZmluZWQpcmV0dXJuIHRoaXM7bGlzdD1ldmVudHNbdHlwZV07aWYobGlzdD09PXVuZGVmaW5lZClyZXR1cm4gdGhpcztpZihsaXN0PT09bGlzdGVuZXJ8fGxpc3QubGlzdGVuZXI9PT1saXN0ZW5lcil7aWYoLS10aGlzLl9ldmVudHNDb3VudD09PTApdGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk7ZWxzZXtkZWxldGUgZXZlbnRzW3R5cGVdO2lmKGV2ZW50cy5yZW1vdmVMaXN0ZW5lcil0aGlzLmVtaXQoInJlbW92ZUxpc3RlbmVyIix0eXBlLGxpc3QubGlzdGVuZXJ8fGxpc3RlbmVyKX19ZWxzZSBpZih0eXBlb2YgbGlzdCE9PSJmdW5jdGlvbiIpe3Bvc2l0aW9uPS0xO2ZvcihpPWxpc3QubGVuZ3RoLTE7aT49MDtpLS0pe2lmKGxpc3RbaV09PT1saXN0ZW5lcnx8bGlzdFtpXS5saXN0ZW5lcj09PWxpc3RlbmVyKXtvcmlnaW5hbExpc3RlbmVyPWxpc3RbaV0ubGlzdGVuZXI7cG9zaXRpb249aTticmVha319aWYocG9zaXRpb248MClyZXR1cm4gdGhpcztpZihwb3NpdGlvbj09PTApbGlzdC5zaGlmdCgpO2Vsc2V7c3BsaWNlT25lKGxpc3QscG9zaXRpb24pfWlmKGxpc3QubGVuZ3RoPT09MSlldmVudHNbdHlwZV09bGlzdFswXTtpZihldmVudHMucmVtb3ZlTGlzdGVuZXIhPT11bmRlZmluZWQpdGhpcy5lbWl0KCJyZW1vdmVMaXN0ZW5lciIsdHlwZSxvcmlnaW5hbExpc3RlbmVyfHxsaXN0ZW5lcil9cmV0dXJuIHRoaXN9O0V2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmPUV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKHR5cGUpe3ZhciBsaXN0ZW5lcnMsZXZlbnRzLGk7ZXZlbnRzPXRoaXMuX2V2ZW50cztpZihldmVudHM9PT11bmRlZmluZWQpcmV0dXJuIHRoaXM7aWYoZXZlbnRzLnJlbW92ZUxpc3RlbmVyPT09dW5kZWZpbmVkKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7dGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5fZXZlbnRzQ291bnQ9MH1lbHNlIGlmKGV2ZW50c1t0eXBlXSE9PXVuZGVmaW5lZCl7aWYoLS10aGlzLl9ldmVudHNDb3VudD09PTApdGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk7ZWxzZSBkZWxldGUgZXZlbnRzW3R5cGVdfXJldHVybiB0aGlzfWlmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXt2YXIga2V5cz1PYmplY3Qua2V5cyhldmVudHMpO3ZhciBrZXk7Zm9yKGk9MDtpPGtleXMubGVuZ3RoOysraSl7a2V5PWtleXNbaV07aWYoa2V5PT09InJlbW92ZUxpc3RlbmVyIiljb250aW51ZTt0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpfXRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCJyZW1vdmVMaXN0ZW5lciIpO3RoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpO3RoaXMuX2V2ZW50c0NvdW50PTA7cmV0dXJuIHRoaXN9bGlzdGVuZXJzPWV2ZW50c1t0eXBlXTtpZih0eXBlb2YgbGlzdGVuZXJzPT09ImZ1bmN0aW9uIil7dGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLGxpc3RlbmVycyl9ZWxzZSBpZihsaXN0ZW5lcnMhPT11bmRlZmluZWQpe2ZvcihpPWxpc3RlbmVycy5sZW5ndGgtMTtpPj0wO2ktLSl7dGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLGxpc3RlbmVyc1tpXSl9fXJldHVybiB0aGlzfTtmdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCx0eXBlLHVud3JhcCl7dmFyIGV2ZW50cz10YXJnZXQuX2V2ZW50cztpZihldmVudHM9PT11bmRlZmluZWQpcmV0dXJuW107dmFyIGV2bGlzdGVuZXI9ZXZlbnRzW3R5cGVdO2lmKGV2bGlzdGVuZXI9PT11bmRlZmluZWQpcmV0dXJuW107aWYodHlwZW9mIGV2bGlzdGVuZXI9PT0iZnVuY3Rpb24iKXJldHVybiB1bndyYXA/W2V2bGlzdGVuZXIubGlzdGVuZXJ8fGV2bGlzdGVuZXJdOltldmxpc3RlbmVyXTtyZXR1cm4gdW53cmFwP3Vud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKTphcnJheUNsb25lKGV2bGlzdGVuZXIsZXZsaXN0ZW5lci5sZW5ndGgpfUV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKXtyZXR1cm4gX2xpc3RlbmVycyh0aGlzLHR5cGUsdHJ1ZSl9O0V2ZW50RW1pdHRlci5wcm90b3R5cGUucmF3TGlzdGVuZXJzPWZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKXtyZXR1cm4gX2xpc3RlbmVycyh0aGlzLHR5cGUsZmFsc2UpfTtFdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlbWl0dGVyLHR5cGUpe2lmKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQ9PT0iZnVuY3Rpb24iKXtyZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpfWVsc2V7cmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLHR5cGUpfX07RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50PWxpc3RlbmVyQ291bnQ7ZnVuY3Rpb24gbGlzdGVuZXJDb3VudCh0eXBlKXt2YXIgZXZlbnRzPXRoaXMuX2V2ZW50cztpZihldmVudHMhPT11bmRlZmluZWQpe3ZhciBldmxpc3RlbmVyPWV2ZW50c1t0eXBlXTtpZih0eXBlb2YgZXZsaXN0ZW5lcj09PSJmdW5jdGlvbiIpe3JldHVybiAxfWVsc2UgaWYoZXZsaXN0ZW5lciE9PXVuZGVmaW5lZCl7cmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RofX1yZXR1cm4gMH1FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXM9ZnVuY3Rpb24gZXZlbnROYW1lcygpe3JldHVybiB0aGlzLl9ldmVudHNDb3VudD4wP1JlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cyk6W119O2Z1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLG4pe3ZhciBjb3B5PW5ldyBBcnJheShuKTtmb3IodmFyIGk9MDtpPG47KytpKWNvcHlbaV09YXJyW2ldO3JldHVybiBjb3B5fWZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LGluZGV4KXtmb3IoO2luZGV4KzE8bGlzdC5sZW5ndGg7aW5kZXgrKylsaXN0W2luZGV4XT1saXN0W2luZGV4KzFdO2xpc3QucG9wKCl9ZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycil7dmFyIHJldD1uZXcgQXJyYXkoYXJyLmxlbmd0aCk7Zm9yKHZhciBpPTA7aTxyZXQubGVuZ3RoOysraSl7cmV0W2ldPWFycltpXS5saXN0ZW5lcnx8YXJyW2ldfXJldHVybiByZXR9ZnVuY3Rpb24gb25jZShlbWl0dGVyLG5hbWUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7ZnVuY3Rpb24gZXJyb3JMaXN0ZW5lcihlcnIpe2VtaXR0ZXIucmVtb3ZlTGlzdGVuZXIobmFtZSxyZXNvbHZlcik7cmVqZWN0KGVycil9ZnVuY3Rpb24gcmVzb2x2ZXIoKXtpZih0eXBlb2YgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcj09PSJmdW5jdGlvbiIpe2VtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoImVycm9yIixlcnJvckxpc3RlbmVyKX1yZXNvbHZlKFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9ZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsbmFtZSxyZXNvbHZlcix7b25jZTp0cnVlfSk7aWYobmFtZSE9PSJlcnJvciIpe2FkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsZXJyb3JMaXN0ZW5lcix7b25jZTp0cnVlfSl9fSl9ZnVuY3Rpb24gYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlcixoYW5kbGVyLGZsYWdzKXtpZih0eXBlb2YgZW1pdHRlci5vbj09PSJmdW5jdGlvbiIpe2V2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCJlcnJvciIsaGFuZGxlcixmbGFncyl9fWZ1bmN0aW9uIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLG5hbWUsbGlzdGVuZXIsZmxhZ3Mpe2lmKHR5cGVvZiBlbWl0dGVyLm9uPT09ImZ1bmN0aW9uIil7aWYoZmxhZ3Mub25jZSl7ZW1pdHRlci5vbmNlKG5hbWUsbGlzdGVuZXIpfWVsc2V7ZW1pdHRlci5vbihuYW1lLGxpc3RlbmVyKX19ZWxzZSBpZih0eXBlb2YgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyPT09ImZ1bmN0aW9uIil7ZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKG5hbWUsZnVuY3Rpb24gd3JhcExpc3RlbmVyKGFyZyl7aWYoZmxhZ3Mub25jZSl7ZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsd3JhcExpc3RlbmVyKX1saXN0ZW5lcihhcmcpfSl9ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgImVtaXR0ZXIiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBFdmVudEVtaXR0ZXIuIFJlY2VpdmVkIHR5cGUgJyt0eXBlb2YgZW1pdHRlcil9fX0se31dLDE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXt2YXIgZGVidWc7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oKXtpZighZGVidWcpe3RyeXtkZWJ1Zz1yZXF1aXJlKCJkZWJ1ZyIpKCJmb2xsb3ctcmVkaXJlY3RzIil9Y2F0Y2goZXJyb3Ipe31pZih0eXBlb2YgZGVidWchPT0iZnVuY3Rpb24iKXtkZWJ1Zz1mdW5jdGlvbigpe319fWRlYnVnLmFwcGx5KG51bGwsYXJndW1lbnRzKX19LHtkZWJ1ZzoxMn1dLDE2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXt2YXIgdXJsPXJlcXVpcmUoInVybCIpO3ZhciBVUkw9dXJsLlVSTDt2YXIgaHR0cD1yZXF1aXJlKCJodHRwIik7dmFyIGh0dHBzPXJlcXVpcmUoImh0dHBzIik7dmFyIFdyaXRhYmxlPXJlcXVpcmUoInN0cmVhbSIpLldyaXRhYmxlO3ZhciBhc3NlcnQ9cmVxdWlyZSgiYXNzZXJ0Iik7dmFyIGRlYnVnPXJlcXVpcmUoIi4vZGVidWciKTt2YXIgZXZlbnRzPVsiYWJvcnQiLCJhYm9ydGVkIiwiY29ubmVjdCIsImVycm9yIiwic29ja2V0IiwidGltZW91dCJdO3ZhciBldmVudEhhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCk7ZXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpe2V2ZW50SGFuZGxlcnNbZXZlbnRdPWZ1bmN0aW9uKGFyZzEsYXJnMixhcmczKXt0aGlzLl9yZWRpcmVjdGFibGUuZW1pdChldmVudCxhcmcxLGFyZzIsYXJnMyl9fSk7dmFyIEludmFsaWRVcmxFcnJvcj1jcmVhdGVFcnJvclR5cGUoIkVSUl9JTlZBTElEX1VSTCIsIkludmFsaWQgVVJMIixUeXBlRXJyb3IpO3ZhciBSZWRpcmVjdGlvbkVycm9yPWNyZWF0ZUVycm9yVHlwZSgiRVJSX0ZSX1JFRElSRUNUSU9OX0ZBSUxVUkUiLCJSZWRpcmVjdGVkIHJlcXVlc3QgZmFpbGVkIik7dmFyIFRvb01hbnlSZWRpcmVjdHNFcnJvcj1jcmVhdGVFcnJvclR5cGUoIkVSUl9GUl9UT09fTUFOWV9SRURJUkVDVFMiLCJNYXhpbXVtIG51bWJlciBvZiByZWRpcmVjdHMgZXhjZWVkZWQiKTt2YXIgTWF4Qm9keUxlbmd0aEV4Y2VlZGVkRXJyb3I9Y3JlYXRlRXJyb3JUeXBlKCJFUlJfRlJfTUFYX0JPRFlfTEVOR1RIX0VYQ0VFREVEIiwiUmVxdWVzdCBib2R5IGxhcmdlciB0aGFuIG1heEJvZHlMZW5ndGggbGltaXQiKTt2YXIgV3JpdGVBZnRlckVuZEVycm9yPWNyZWF0ZUVycm9yVHlwZSgiRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQiLCJ3cml0ZSBhZnRlciBlbmQiKTtmdW5jdGlvbiBSZWRpcmVjdGFibGVSZXF1ZXN0KG9wdGlvbnMscmVzcG9uc2VDYWxsYmFjayl7V3JpdGFibGUuY2FsbCh0aGlzKTt0aGlzLl9zYW5pdGl6ZU9wdGlvbnMob3B0aW9ucyk7dGhpcy5fb3B0aW9ucz1vcHRpb25zO3RoaXMuX2VuZGVkPWZhbHNlO3RoaXMuX2VuZGluZz1mYWxzZTt0aGlzLl9yZWRpcmVjdENvdW50PTA7dGhpcy5fcmVkaXJlY3RzPVtdO3RoaXMuX3JlcXVlc3RCb2R5TGVuZ3RoPTA7dGhpcy5fcmVxdWVzdEJvZHlCdWZmZXJzPVtdO2lmKHJlc3BvbnNlQ2FsbGJhY2spe3RoaXMub24oInJlc3BvbnNlIixyZXNwb25zZUNhbGxiYWNrKX12YXIgc2VsZj10aGlzO3RoaXMuX29uTmF0aXZlUmVzcG9uc2U9ZnVuY3Rpb24ocmVzcG9uc2Upe3NlbGYuX3Byb2Nlc3NSZXNwb25zZShyZXNwb25zZSl9O3RoaXMuX3BlcmZvcm1SZXF1ZXN0KCl9UmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShXcml0YWJsZS5wcm90b3R5cGUpO1JlZGlyZWN0YWJsZVJlcXVlc3QucHJvdG90eXBlLmFib3J0PWZ1bmN0aW9uKCl7YWJvcnRSZXF1ZXN0KHRoaXMuX2N1cnJlbnRSZXF1ZXN0KTt0aGlzLmVtaXQoImFib3J0Iil9O1JlZGlyZWN0YWJsZVJlcXVlc3QucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGRhdGEsZW5jb2RpbmcsY2FsbGJhY2spe2lmKHRoaXMuX2VuZGluZyl7dGhyb3cgbmV3IFdyaXRlQWZ0ZXJFbmRFcnJvcn1pZighaXNTdHJpbmcoZGF0YSkmJiFpc0J1ZmZlcihkYXRhKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiZGF0YSBzaG91bGQgYmUgYSBzdHJpbmcsIEJ1ZmZlciBvciBVaW50OEFycmF5Iil9aWYoaXNGdW5jdGlvbihlbmNvZGluZykpe2NhbGxiYWNrPWVuY29kaW5nO2VuY29kaW5nPW51bGx9aWYoZGF0YS5sZW5ndGg9PT0wKXtpZihjYWxsYmFjayl7Y2FsbGJhY2soKX1yZXR1cm59aWYodGhpcy5fcmVxdWVzdEJvZHlMZW5ndGgrZGF0YS5sZW5ndGg8PXRoaXMuX29wdGlvbnMubWF4Qm9keUxlbmd0aCl7dGhpcy5fcmVxdWVzdEJvZHlMZW5ndGgrPWRhdGEubGVuZ3RoO3RoaXMuX3JlcXVlc3RCb2R5QnVmZmVycy5wdXNoKHtkYXRhOmRhdGEsZW5jb2Rpbmc6ZW5jb2Rpbmd9KTt0aGlzLl9jdXJyZW50UmVxdWVzdC53cml0ZShkYXRhLGVuY29kaW5nLGNhbGxiYWNrKX1lbHNle3RoaXMuZW1pdCgiZXJyb3IiLG5ldyBNYXhCb2R5TGVuZ3RoRXhjZWVkZWRFcnJvcik7dGhpcy5hYm9ydCgpfX07UmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGRhdGEsZW5jb2RpbmcsY2FsbGJhY2spe2lmKGlzRnVuY3Rpb24oZGF0YSkpe2NhbGxiYWNrPWRhdGE7ZGF0YT1lbmNvZGluZz1udWxsfWVsc2UgaWYoaXNGdW5jdGlvbihlbmNvZGluZykpe2NhbGxiYWNrPWVuY29kaW5nO2VuY29kaW5nPW51bGx9aWYoIWRhdGEpe3RoaXMuX2VuZGVkPXRoaXMuX2VuZGluZz10cnVlO3RoaXMuX2N1cnJlbnRSZXF1ZXN0LmVuZChudWxsLG51bGwsY2FsbGJhY2spfWVsc2V7dmFyIHNlbGY9dGhpczt2YXIgY3VycmVudFJlcXVlc3Q9dGhpcy5fY3VycmVudFJlcXVlc3Q7dGhpcy53cml0ZShkYXRhLGVuY29kaW5nLGZ1bmN0aW9uKCl7c2VsZi5fZW5kZWQ9dHJ1ZTtjdXJyZW50UmVxdWVzdC5lbmQobnVsbCxudWxsLGNhbGxiYWNrKX0pO3RoaXMuX2VuZGluZz10cnVlfX07UmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGUuc2V0SGVhZGVyPWZ1bmN0aW9uKG5hbWUsdmFsdWUpe3RoaXMuX29wdGlvbnMuaGVhZGVyc1tuYW1lXT12YWx1ZTt0aGlzLl9jdXJyZW50UmVxdWVzdC5zZXRIZWFkZXIobmFtZSx2YWx1ZSl9O1JlZGlyZWN0YWJsZVJlcXVlc3QucHJvdG90eXBlLnJlbW92ZUhlYWRlcj1mdW5jdGlvbihuYW1lKXtkZWxldGUgdGhpcy5fb3B0aW9ucy5oZWFkZXJzW25hbWVdO3RoaXMuX2N1cnJlbnRSZXF1ZXN0LnJlbW92ZUhlYWRlcihuYW1lKX07UmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGUuc2V0VGltZW91dD1mdW5jdGlvbihtc2VjcyxjYWxsYmFjayl7dmFyIHNlbGY9dGhpcztmdW5jdGlvbiBkZXN0cm95T25UaW1lb3V0KHNvY2tldCl7c29ja2V0LnNldFRpbWVvdXQobXNlY3MpO3NvY2tldC5yZW1vdmVMaXN0ZW5lcigidGltZW91dCIsc29ja2V0LmRlc3Ryb3kpO3NvY2tldC5hZGRMaXN0ZW5lcigidGltZW91dCIsc29ja2V0LmRlc3Ryb3kpfWZ1bmN0aW9uIHN0YXJ0VGltZXIoc29ja2V0KXtpZihzZWxmLl90aW1lb3V0KXtjbGVhclRpbWVvdXQoc2VsZi5fdGltZW91dCl9c2VsZi5fdGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi5lbWl0KCJ0aW1lb3V0Iik7Y2xlYXJUaW1lcigpfSxtc2Vjcyk7ZGVzdHJveU9uVGltZW91dChzb2NrZXQpfWZ1bmN0aW9uIGNsZWFyVGltZXIoKXtpZihzZWxmLl90aW1lb3V0KXtjbGVhclRpbWVvdXQoc2VsZi5fdGltZW91dCk7c2VsZi5fdGltZW91dD1udWxsfXNlbGYucmVtb3ZlTGlzdGVuZXIoImFib3J0IixjbGVhclRpbWVyKTtzZWxmLnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsY2xlYXJUaW1lcik7c2VsZi5yZW1vdmVMaXN0ZW5lcigicmVzcG9uc2UiLGNsZWFyVGltZXIpO2lmKGNhbGxiYWNrKXtzZWxmLnJlbW92ZUxpc3RlbmVyKCJ0aW1lb3V0IixjYWxsYmFjayl9aWYoIXNlbGYuc29ja2V0KXtzZWxmLl9jdXJyZW50UmVxdWVzdC5yZW1vdmVMaXN0ZW5lcigic29ja2V0IixzdGFydFRpbWVyKX19aWYoY2FsbGJhY2spe3RoaXMub24oInRpbWVvdXQiLGNhbGxiYWNrKX1pZih0aGlzLnNvY2tldCl7c3RhcnRUaW1lcih0aGlzLnNvY2tldCl9ZWxzZXt0aGlzLl9jdXJyZW50UmVxdWVzdC5vbmNlKCJzb2NrZXQiLHN0YXJ0VGltZXIpfXRoaXMub24oInNvY2tldCIsZGVzdHJveU9uVGltZW91dCk7dGhpcy5vbigiYWJvcnQiLGNsZWFyVGltZXIpO3RoaXMub24oImVycm9yIixjbGVhclRpbWVyKTt0aGlzLm9uKCJyZXNwb25zZSIsY2xlYXJUaW1lcik7cmV0dXJuIHRoaXN9O1siZmx1c2hIZWFkZXJzIiwiZ2V0SGVhZGVyIiwic2V0Tm9EZWxheSIsInNldFNvY2tldEtlZXBBbGl2ZSJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKXtSZWRpcmVjdGFibGVSZXF1ZXN0LnByb3RvdHlwZVttZXRob2RdPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuX2N1cnJlbnRSZXF1ZXN0W21ldGhvZF0oYSxiKX19KTtbImFib3J0ZWQiLCJjb25uZWN0aW9uIiwic29ja2V0Il0uZm9yRWFjaChmdW5jdGlvbihwcm9wZXJ0eSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KFJlZGlyZWN0YWJsZVJlcXVlc3QucHJvdG90eXBlLHByb3BlcnR5LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFJlcXVlc3RbcHJvcGVydHldfX0pfSk7UmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGUuX3Nhbml0aXplT3B0aW9ucz1mdW5jdGlvbihvcHRpb25zKXtpZighb3B0aW9ucy5oZWFkZXJzKXtvcHRpb25zLmhlYWRlcnM9e319aWYob3B0aW9ucy5ob3N0KXtpZighb3B0aW9ucy5ob3N0bmFtZSl7b3B0aW9ucy5ob3N0bmFtZT1vcHRpb25zLmhvc3R9ZGVsZXRlIG9wdGlvbnMuaG9zdH1pZighb3B0aW9ucy5wYXRobmFtZSYmb3B0aW9ucy5wYXRoKXt2YXIgc2VhcmNoUG9zPW9wdGlvbnMucGF0aC5pbmRleE9mKCI/Iik7aWYoc2VhcmNoUG9zPDApe29wdGlvbnMucGF0aG5hbWU9b3B0aW9ucy5wYXRofWVsc2V7b3B0aW9ucy5wYXRobmFtZT1vcHRpb25zLnBhdGguc3Vic3RyaW5nKDAsc2VhcmNoUG9zKTtvcHRpb25zLnNlYXJjaD1vcHRpb25zLnBhdGguc3Vic3RyaW5nKHNlYXJjaFBvcyl9fX07UmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGUuX3BlcmZvcm1SZXF1ZXN0PWZ1bmN0aW9uKCl7dmFyIHByb3RvY29sPXRoaXMuX29wdGlvbnMucHJvdG9jb2w7dmFyIG5hdGl2ZVByb3RvY29sPXRoaXMuX29wdGlvbnMubmF0aXZlUHJvdG9jb2xzW3Byb3RvY29sXTtpZighbmF0aXZlUHJvdG9jb2wpe3RoaXMuZW1pdCgiZXJyb3IiLG5ldyBUeXBlRXJyb3IoIlVuc3VwcG9ydGVkIHByb3RvY29sICIrcHJvdG9jb2wpKTtyZXR1cm59aWYodGhpcy5fb3B0aW9ucy5hZ2VudHMpe3ZhciBzY2hlbWU9cHJvdG9jb2wuc2xpY2UoMCwtMSk7dGhpcy5fb3B0aW9ucy5hZ2VudD10aGlzLl9vcHRpb25zLmFnZW50c1tzY2hlbWVdfXZhciByZXF1ZXN0PXRoaXMuX2N1cnJlbnRSZXF1ZXN0PW5hdGl2ZVByb3RvY29sLnJlcXVlc3QodGhpcy5fb3B0aW9ucyx0aGlzLl9vbk5hdGl2ZVJlc3BvbnNlKTtyZXF1ZXN0Ll9yZWRpcmVjdGFibGU9dGhpcztmb3IodmFyIGV2ZW50IG9mIGV2ZW50cyl7cmVxdWVzdC5vbihldmVudCxldmVudEhhbmRsZXJzW2V2ZW50XSl9dGhpcy5fY3VycmVudFVybD0vXlwvLy50ZXN0KHRoaXMuX29wdGlvbnMucGF0aCk/dXJsLmZvcm1hdCh0aGlzLl9vcHRpb25zKTp0aGlzLl9vcHRpb25zLnBhdGg7aWYodGhpcy5faXNSZWRpcmVjdCl7dmFyIGk9MDt2YXIgc2VsZj10aGlzO3ZhciBidWZmZXJzPXRoaXMuX3JlcXVlc3RCb2R5QnVmZmVyczsoZnVuY3Rpb24gd3JpdGVOZXh0KGVycm9yKXtpZihyZXF1ZXN0PT09c2VsZi5fY3VycmVudFJlcXVlc3Qpe2lmKGVycm9yKXtzZWxmLmVtaXQoImVycm9yIixlcnJvcil9ZWxzZSBpZihpPGJ1ZmZlcnMubGVuZ3RoKXt2YXIgYnVmZmVyPWJ1ZmZlcnNbaSsrXTtpZighcmVxdWVzdC5maW5pc2hlZCl7cmVxdWVzdC53cml0ZShidWZmZXIuZGF0YSxidWZmZXIuZW5jb2Rpbmcsd3JpdGVOZXh0KX19ZWxzZSBpZihzZWxmLl9lbmRlZCl7cmVxdWVzdC5lbmQoKX19fSkoKX19O1JlZGlyZWN0YWJsZVJlcXVlc3QucHJvdG90eXBlLl9wcm9jZXNzUmVzcG9uc2U9ZnVuY3Rpb24ocmVzcG9uc2Upe3ZhciBzdGF0dXNDb2RlPXJlc3BvbnNlLnN0YXR1c0NvZGU7aWYodGhpcy5fb3B0aW9ucy50cmFja1JlZGlyZWN0cyl7dGhpcy5fcmVkaXJlY3RzLnB1c2goe3VybDp0aGlzLl9jdXJyZW50VXJsLGhlYWRlcnM6cmVzcG9uc2UuaGVhZGVycyxzdGF0dXNDb2RlOnN0YXR1c0NvZGV9KX12YXIgbG9jYXRpb249cmVzcG9uc2UuaGVhZGVycy5sb2NhdGlvbjtpZighbG9jYXRpb258fHRoaXMuX29wdGlvbnMuZm9sbG93UmVkaXJlY3RzPT09ZmFsc2V8fHN0YXR1c0NvZGU8MzAwfHxzdGF0dXNDb2RlPj00MDApe3Jlc3BvbnNlLnJlc3BvbnNlVXJsPXRoaXMuX2N1cnJlbnRVcmw7cmVzcG9uc2UucmVkaXJlY3RzPXRoaXMuX3JlZGlyZWN0czt0aGlzLmVtaXQoInJlc3BvbnNlIixyZXNwb25zZSk7dGhpcy5fcmVxdWVzdEJvZHlCdWZmZXJzPVtdO3JldHVybn1hYm9ydFJlcXVlc3QodGhpcy5fY3VycmVudFJlcXVlc3QpO3Jlc3BvbnNlLmRlc3Ryb3koKTtpZigrK3RoaXMuX3JlZGlyZWN0Q291bnQ+dGhpcy5fb3B0aW9ucy5tYXhSZWRpcmVjdHMpe3RoaXMuZW1pdCgiZXJyb3IiLG5ldyBUb29NYW55UmVkaXJlY3RzRXJyb3IpO3JldHVybn12YXIgcmVxdWVzdEhlYWRlcnM7dmFyIGJlZm9yZVJlZGlyZWN0PXRoaXMuX29wdGlvbnMuYmVmb3JlUmVkaXJlY3Q7aWYoYmVmb3JlUmVkaXJlY3Qpe3JlcXVlc3RIZWFkZXJzPU9iamVjdC5hc3NpZ24oe0hvc3Q6cmVzcG9uc2UucmVxLmdldEhlYWRlcigiaG9zdCIpfSx0aGlzLl9vcHRpb25zLmhlYWRlcnMpfXZhciBtZXRob2Q9dGhpcy5fb3B0aW9ucy5tZXRob2Q7aWYoKHN0YXR1c0NvZGU9PT0zMDF8fHN0YXR1c0NvZGU9PT0zMDIpJiZ0aGlzLl9vcHRpb25zLm1ldGhvZD09PSJQT1NUInx8c3RhdHVzQ29kZT09PTMwMyYmIS9eKD86R0VUfEhFQUQpJC8udGVzdCh0aGlzLl9vcHRpb25zLm1ldGhvZCkpe3RoaXMuX29wdGlvbnMubWV0aG9kPSJHRVQiO3RoaXMuX3JlcXVlc3RCb2R5QnVmZmVycz1bXTtyZW1vdmVNYXRjaGluZ0hlYWRlcnMoL15jb250ZW50LS9pLHRoaXMuX29wdGlvbnMuaGVhZGVycyl9dmFyIGN1cnJlbnRIb3N0SGVhZGVyPXJlbW92ZU1hdGNoaW5nSGVhZGVycygvXmhvc3QkL2ksdGhpcy5fb3B0aW9ucy5oZWFkZXJzKTt2YXIgY3VycmVudFVybFBhcnRzPXVybC5wYXJzZSh0aGlzLl9jdXJyZW50VXJsKTt2YXIgY3VycmVudEhvc3Q9Y3VycmVudEhvc3RIZWFkZXJ8fGN1cnJlbnRVcmxQYXJ0cy5ob3N0O3ZhciBjdXJyZW50VXJsPS9eXHcrOi8udGVzdChsb2NhdGlvbik/dGhpcy5fY3VycmVudFVybDp1cmwuZm9ybWF0KE9iamVjdC5hc3NpZ24oY3VycmVudFVybFBhcnRzLHtob3N0OmN1cnJlbnRIb3N0fSkpO3ZhciByZWRpcmVjdFVybDt0cnl7cmVkaXJlY3RVcmw9dXJsLnJlc29sdmUoY3VycmVudFVybCxsb2NhdGlvbil9Y2F0Y2goY2F1c2Upe3RoaXMuZW1pdCgiZXJyb3IiLG5ldyBSZWRpcmVjdGlvbkVycm9yKHtjYXVzZTpjYXVzZX0pKTtyZXR1cm59ZGVidWcoInJlZGlyZWN0aW5nIHRvIixyZWRpcmVjdFVybCk7dGhpcy5faXNSZWRpcmVjdD10cnVlO3ZhciByZWRpcmVjdFVybFBhcnRzPXVybC5wYXJzZShyZWRpcmVjdFVybCk7T2JqZWN0LmFzc2lnbih0aGlzLl9vcHRpb25zLHJlZGlyZWN0VXJsUGFydHMpO2lmKHJlZGlyZWN0VXJsUGFydHMucHJvdG9jb2whPT1jdXJyZW50VXJsUGFydHMucHJvdG9jb2wmJnJlZGlyZWN0VXJsUGFydHMucHJvdG9jb2whPT0iaHR0cHM6Inx8cmVkaXJlY3RVcmxQYXJ0cy5ob3N0IT09Y3VycmVudEhvc3QmJiFpc1N1YmRvbWFpbihyZWRpcmVjdFVybFBhcnRzLmhvc3QsY3VycmVudEhvc3QpKXtyZW1vdmVNYXRjaGluZ0hlYWRlcnMoL14oPzphdXRob3JpemF0aW9ufGNvb2tpZSkkL2ksdGhpcy5fb3B0aW9ucy5oZWFkZXJzKX1pZihpc0Z1bmN0aW9uKGJlZm9yZVJlZGlyZWN0KSl7dmFyIHJlc3BvbnNlRGV0YWlscz17aGVhZGVyczpyZXNwb25zZS5oZWFkZXJzLHN0YXR1c0NvZGU6c3RhdHVzQ29kZX07dmFyIHJlcXVlc3REZXRhaWxzPXt1cmw6Y3VycmVudFVybCxtZXRob2Q6bWV0aG9kLGhlYWRlcnM6cmVxdWVzdEhlYWRlcnN9O3RyeXtiZWZvcmVSZWRpcmVjdCh0aGlzLl9vcHRpb25zLHJlc3BvbnNlRGV0YWlscyxyZXF1ZXN0RGV0YWlscyl9Y2F0Y2goZXJyKXt0aGlzLmVtaXQoImVycm9yIixlcnIpO3JldHVybn10aGlzLl9zYW5pdGl6ZU9wdGlvbnModGhpcy5fb3B0aW9ucyl9dHJ5e3RoaXMuX3BlcmZvcm1SZXF1ZXN0KCl9Y2F0Y2goY2F1c2Upe3RoaXMuZW1pdCgiZXJyb3IiLG5ldyBSZWRpcmVjdGlvbkVycm9yKHtjYXVzZTpjYXVzZX0pKX19O2Z1bmN0aW9uIHdyYXAocHJvdG9jb2xzKXt2YXIgZXhwb3J0cz17bWF4UmVkaXJlY3RzOjIxLG1heEJvZHlMZW5ndGg6MTAqMTAyNCoxMDI0fTt2YXIgbmF0aXZlUHJvdG9jb2xzPXt9O09iamVjdC5rZXlzKHByb3RvY29scykuZm9yRWFjaChmdW5jdGlvbihzY2hlbWUpe3ZhciBwcm90b2NvbD1zY2hlbWUrIjoiO3ZhciBuYXRpdmVQcm90b2NvbD1uYXRpdmVQcm90b2NvbHNbcHJvdG9jb2xdPXByb3RvY29sc1tzY2hlbWVdO3ZhciB3cmFwcGVkUHJvdG9jb2w9ZXhwb3J0c1tzY2hlbWVdPU9iamVjdC5jcmVhdGUobmF0aXZlUHJvdG9jb2wpO2Z1bmN0aW9uIHJlcXVlc3QoaW5wdXQsb3B0aW9ucyxjYWxsYmFjayl7aWYoaXNTdHJpbmcoaW5wdXQpKXt2YXIgcGFyc2VkO3RyeXtwYXJzZWQ9dXJsVG9PcHRpb25zKG5ldyBVUkwoaW5wdXQpKX1jYXRjaChlcnIpe3BhcnNlZD11cmwucGFyc2UoaW5wdXQpfWlmKCFpc1N0cmluZyhwYXJzZWQucHJvdG9jb2wpKXt0aHJvdyBuZXcgSW52YWxpZFVybEVycm9yKHtpbnB1dDppbnB1dH0pfWlucHV0PXBhcnNlZH1lbHNlIGlmKFVSTCYmaW5wdXQgaW5zdGFuY2VvZiBVUkwpe2lucHV0PXVybFRvT3B0aW9ucyhpbnB1dCl9ZWxzZXtjYWxsYmFjaz1vcHRpb25zO29wdGlvbnM9aW5wdXQ7aW5wdXQ9e3Byb3RvY29sOnByb3RvY29sfX1pZihpc0Z1bmN0aW9uKG9wdGlvbnMpKXtjYWxsYmFjaz1vcHRpb25zO29wdGlvbnM9bnVsbH1vcHRpb25zPU9iamVjdC5hc3NpZ24oe21heFJlZGlyZWN0czpleHBvcnRzLm1heFJlZGlyZWN0cyxtYXhCb2R5TGVuZ3RoOmV4cG9ydHMubWF4Qm9keUxlbmd0aH0saW5wdXQsb3B0aW9ucyk7b3B0aW9ucy5uYXRpdmVQcm90b2NvbHM9bmF0aXZlUHJvdG9jb2xzO2lmKCFpc1N0cmluZyhvcHRpb25zLmhvc3QpJiYhaXNTdHJpbmcob3B0aW9ucy5ob3N0bmFtZSkpe29wdGlvbnMuaG9zdG5hbWU9Ijo6MSJ9YXNzZXJ0LmVxdWFsKG9wdGlvbnMucHJvdG9jb2wscHJvdG9jb2wsInByb3RvY29sIG1pc21hdGNoIik7ZGVidWcoIm9wdGlvbnMiLG9wdGlvbnMpO3JldHVybiBuZXcgUmVkaXJlY3RhYmxlUmVxdWVzdChvcHRpb25zLGNhbGxiYWNrKX1mdW5jdGlvbiBnZXQoaW5wdXQsb3B0aW9ucyxjYWxsYmFjayl7dmFyIHdyYXBwZWRSZXF1ZXN0PXdyYXBwZWRQcm90b2NvbC5yZXF1ZXN0KGlucHV0LG9wdGlvbnMsY2FsbGJhY2spO3dyYXBwZWRSZXF1ZXN0LmVuZCgpO3JldHVybiB3cmFwcGVkUmVxdWVzdH1PYmplY3QuZGVmaW5lUHJvcGVydGllcyh3cmFwcGVkUHJvdG9jb2wse3JlcXVlc3Q6e3ZhbHVlOnJlcXVlc3QsY29uZmlndXJhYmxlOnRydWUsZW51bWVyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9LGdldDp7dmFsdWU6Z2V0LGNvbmZpZ3VyYWJsZTp0cnVlLGVudW1lcmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfX0pfSk7cmV0dXJuIGV4cG9ydHN9ZnVuY3Rpb24gbm9vcCgpe31mdW5jdGlvbiB1cmxUb09wdGlvbnModXJsT2JqZWN0KXt2YXIgb3B0aW9ucz17cHJvdG9jb2w6dXJsT2JqZWN0LnByb3RvY29sLGhvc3RuYW1lOnVybE9iamVjdC5ob3N0bmFtZS5zdGFydHNXaXRoKCJbIik/dXJsT2JqZWN0Lmhvc3RuYW1lLnNsaWNlKDEsLTEpOnVybE9iamVjdC5ob3N0bmFtZSxoYXNoOnVybE9iamVjdC5oYXNoLHNlYXJjaDp1cmxPYmplY3Quc2VhcmNoLHBhdGhuYW1lOnVybE9iamVjdC5wYXRobmFtZSxwYXRoOnVybE9iamVjdC5wYXRobmFtZSt1cmxPYmplY3Quc2VhcmNoLGhyZWY6dXJsT2JqZWN0LmhyZWZ9O2lmKHVybE9iamVjdC5wb3J0IT09IiIpe29wdGlvbnMucG9ydD1OdW1iZXIodXJsT2JqZWN0LnBvcnQpfXJldHVybiBvcHRpb25zfWZ1bmN0aW9uIHJlbW92ZU1hdGNoaW5nSGVhZGVycyhyZWdleCxoZWFkZXJzKXt2YXIgbGFzdFZhbHVlO2Zvcih2YXIgaGVhZGVyIGluIGhlYWRlcnMpe2lmKHJlZ2V4LnRlc3QoaGVhZGVyKSl7bGFzdFZhbHVlPWhlYWRlcnNbaGVhZGVyXTtkZWxldGUgaGVhZGVyc1toZWFkZXJdfX1yZXR1cm4gbGFzdFZhbHVlPT09bnVsbHx8dHlwZW9mIGxhc3RWYWx1ZT09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDpTdHJpbmcobGFzdFZhbHVlKS50cmltKCl9ZnVuY3Rpb24gY3JlYXRlRXJyb3JUeXBlKGNvZGUsbWVzc2FnZSxiYXNlQ2xhc3Mpe2Z1bmN0aW9uIEN1c3RvbUVycm9yKHByb3BlcnRpZXMpe0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsdGhpcy5jb25zdHJ1Y3Rvcik7T2JqZWN0LmFzc2lnbih0aGlzLHByb3BlcnRpZXN8fHt9KTt0aGlzLmNvZGU9Y29kZTt0aGlzLm1lc3NhZ2U9dGhpcy5jYXVzZT9tZXNzYWdlKyI6ICIrdGhpcy5jYXVzZS5tZXNzYWdlOm1lc3NhZ2V9Q3VzdG9tRXJyb3IucHJvdG90eXBlPW5ldyhiYXNlQ2xhc3N8fEVycm9yKTtDdXN0b21FcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3I9Q3VzdG9tRXJyb3I7Q3VzdG9tRXJyb3IucHJvdG90eXBlLm5hbWU9IkVycm9yIFsiK2NvZGUrIl0iO3JldHVybiBDdXN0b21FcnJvcn1mdW5jdGlvbiBhYm9ydFJlcXVlc3QocmVxdWVzdCl7Zm9yKHZhciBldmVudCBvZiBldmVudHMpe3JlcXVlc3QucmVtb3ZlTGlzdGVuZXIoZXZlbnQsZXZlbnRIYW5kbGVyc1tldmVudF0pfXJlcXVlc3Qub24oImVycm9yIixub29wKTtyZXF1ZXN0LmFib3J0KCl9ZnVuY3Rpb24gaXNTdWJkb21haW4oc3ViZG9tYWluLGRvbWFpbil7YXNzZXJ0KGlzU3RyaW5nKHN1YmRvbWFpbikmJmlzU3RyaW5nKGRvbWFpbikpO3ZhciBkb3Q9c3ViZG9tYWluLmxlbmd0aC1kb21haW4ubGVuZ3RoLTE7cmV0dXJuIGRvdD4wJiZzdWJkb21haW5bZG90XT09PSIuIiYmc3ViZG9tYWluLmVuZHNXaXRoKGRvbWFpbil9ZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWU9PT0ic3RyaW5nInx8dmFsdWUgaW5zdGFuY2VvZiBTdHJpbmd9ZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZT09PSJmdW5jdGlvbiJ9ZnVuY3Rpb24gaXNCdWZmZXIodmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWU9PT0ib2JqZWN0IiYmImxlbmd0aCJpbiB2YWx1ZX1tb2R1bGUuZXhwb3J0cz13cmFwKHtodHRwOmh0dHAsaHR0cHM6aHR0cHN9KTttb2R1bGUuZXhwb3J0cy53cmFwPXdyYXB9LHsiLi9kZWJ1ZyI6MTUsYXNzZXJ0OjEsaHR0cDo3MyxodHRwczoyNyxzdHJlYW06NTgsdXJsOjkzfV0sMTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgaXNDYWxsYWJsZT1yZXF1aXJlKCJpcy1jYWxsYWJsZSIpO3ZhciB0b1N0cj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO3ZhciBoYXNPd25Qcm9wZXJ0eT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciBmb3JFYWNoQXJyYXk9ZnVuY3Rpb24gZm9yRWFjaEFycmF5KGFycmF5LGl0ZXJhdG9yLHJlY2VpdmVyKXtmb3IodmFyIGk9MCxsZW49YXJyYXkubGVuZ3RoO2k8bGVuO2krKyl7aWYoaGFzT3duUHJvcGVydHkuY2FsbChhcnJheSxpKSl7aWYocmVjZWl2ZXI9PW51bGwpe2l0ZXJhdG9yKGFycmF5W2ldLGksYXJyYXkpfWVsc2V7aXRlcmF0b3IuY2FsbChyZWNlaXZlcixhcnJheVtpXSxpLGFycmF5KX19fX07dmFyIGZvckVhY2hTdHJpbmc9ZnVuY3Rpb24gZm9yRWFjaFN0cmluZyhzdHJpbmcsaXRlcmF0b3IscmVjZWl2ZXIpe2Zvcih2YXIgaT0wLGxlbj1zdHJpbmcubGVuZ3RoO2k8bGVuO2krKyl7aWYocmVjZWl2ZXI9PW51bGwpe2l0ZXJhdG9yKHN0cmluZy5jaGFyQXQoaSksaSxzdHJpbmcpfWVsc2V7aXRlcmF0b3IuY2FsbChyZWNlaXZlcixzdHJpbmcuY2hhckF0KGkpLGksc3RyaW5nKX19fTt2YXIgZm9yRWFjaE9iamVjdD1mdW5jdGlvbiBmb3JFYWNoT2JqZWN0KG9iamVjdCxpdGVyYXRvcixyZWNlaXZlcil7Zm9yKHZhciBrIGluIG9iamVjdCl7aWYoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3Qsaykpe2lmKHJlY2VpdmVyPT1udWxsKXtpdGVyYXRvcihvYmplY3Rba10sayxvYmplY3QpfWVsc2V7aXRlcmF0b3IuY2FsbChyZWNlaXZlcixvYmplY3Rba10sayxvYmplY3QpfX19fTt2YXIgZm9yRWFjaD1mdW5jdGlvbiBmb3JFYWNoKGxpc3QsaXRlcmF0b3IsdGhpc0FyZyl7aWYoIWlzQ2FsbGFibGUoaXRlcmF0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJpdGVyYXRvciBtdXN0IGJlIGEgZnVuY3Rpb24iKX12YXIgcmVjZWl2ZXI7aWYoYXJndW1lbnRzLmxlbmd0aD49Myl7cmVjZWl2ZXI9dGhpc0FyZ31pZih0b1N0ci5jYWxsKGxpc3QpPT09IltvYmplY3QgQXJyYXldIil7Zm9yRWFjaEFycmF5KGxpc3QsaXRlcmF0b3IscmVjZWl2ZXIpfWVsc2UgaWYodHlwZW9mIGxpc3Q9PT0ic3RyaW5nIil7Zm9yRWFjaFN0cmluZyhsaXN0LGl0ZXJhdG9yLHJlY2VpdmVyKX1lbHNle2ZvckVhY2hPYmplY3QobGlzdCxpdGVyYXRvcixyZWNlaXZlcil9fTttb2R1bGUuZXhwb3J0cz1mb3JFYWNofSx7ImlzLWNhbGxhYmxlIjozMX1dLDE4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7dmFyIEVSUk9SX01FU1NBR0U9IkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgIjt2YXIgc2xpY2U9QXJyYXkucHJvdG90eXBlLnNsaWNlO3ZhciB0b1N0cj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO3ZhciBmdW5jVHlwZT0iW29iamVjdCBGdW5jdGlvbl0iO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIGJpbmQodGhhdCl7dmFyIHRhcmdldD10aGlzO2lmKHR5cGVvZiB0YXJnZXQhPT0iZnVuY3Rpb24ifHx0b1N0ci5jYWxsKHRhcmdldCkhPT1mdW5jVHlwZSl7dGhyb3cgbmV3IFR5cGVFcnJvcihFUlJPUl9NRVNTQUdFK3RhcmdldCl9dmFyIGFyZ3M9c2xpY2UuY2FsbChhcmd1bWVudHMsMSk7dmFyIGJvdW5kO3ZhciBiaW5kZXI9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgYm91bmQpe3ZhciByZXN1bHQ9dGFyZ2V0LmFwcGx5KHRoaXMsYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7aWYoT2JqZWN0KHJlc3VsdCk9PT1yZXN1bHQpe3JldHVybiByZXN1bHR9cmV0dXJuIHRoaXN9ZWxzZXtyZXR1cm4gdGFyZ2V0LmFwcGx5KHRoYXQsYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSl9fTt2YXIgYm91bmRMZW5ndGg9TWF0aC5tYXgoMCx0YXJnZXQubGVuZ3RoLWFyZ3MubGVuZ3RoKTt2YXIgYm91bmRBcmdzPVtdO2Zvcih2YXIgaT0wO2k8Ym91bmRMZW5ndGg7aSsrKXtib3VuZEFyZ3MucHVzaCgiJCIraSl9Ym91bmQ9RnVuY3Rpb24oImJpbmRlciIsInJldHVybiBmdW5jdGlvbiAoIitib3VuZEFyZ3Muam9pbigiLCIpKyIpeyByZXR1cm4gYmluZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsgfSIpKGJpbmRlcik7aWYodGFyZ2V0LnByb3RvdHlwZSl7dmFyIEVtcHR5PWZ1bmN0aW9uIEVtcHR5KCl7fTtFbXB0eS5wcm90b3R5cGU9dGFyZ2V0LnByb3RvdHlwZTtib3VuZC5wcm90b3R5cGU9bmV3IEVtcHR5O0VtcHR5LnByb3RvdHlwZT1udWxsfXJldHVybiBib3VuZH19LHt9XSwxOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO3ZhciBpbXBsZW1lbnRhdGlvbj1yZXF1aXJlKCIuL2ltcGxlbWVudGF0aW9uIik7bW9kdWxlLmV4cG9ydHM9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fGltcGxlbWVudGF0aW9ufSx7Ii4vaW1wbGVtZW50YXRpb24iOjE4fV0sMjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgdW5kZWZpbmVkO3ZhciAkU3ludGF4RXJyb3I9U3ludGF4RXJyb3I7dmFyICRGdW5jdGlvbj1GdW5jdGlvbjt2YXIgJFR5cGVFcnJvcj1UeXBlRXJyb3I7dmFyIGdldEV2YWxsZWRDb25zdHJ1Y3Rvcj1mdW5jdGlvbihleHByZXNzaW9uU3ludGF4KXt0cnl7cmV0dXJuICRGdW5jdGlvbignInVzZSBzdHJpY3QiOyByZXR1cm4gKCcrZXhwcmVzc2lvblN5bnRheCsiKS5jb25zdHJ1Y3RvcjsiKSgpfWNhdGNoKGUpe319O3ZhciAkZ09QRD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2lmKCRnT1BEKXt0cnl7JGdPUEQoe30sIiIpfWNhdGNoKGUpeyRnT1BEPW51bGx9fXZhciB0aHJvd1R5cGVFcnJvcj1mdW5jdGlvbigpe3Rocm93IG5ldyAkVHlwZUVycm9yfTt2YXIgVGhyb3dUeXBlRXJyb3I9JGdPUEQ/ZnVuY3Rpb24oKXt0cnl7YXJndW1lbnRzLmNhbGxlZTtyZXR1cm4gdGhyb3dUeXBlRXJyb3J9Y2F0Y2goY2FsbGVlVGhyb3dzKXt0cnl7cmV0dXJuICRnT1BEKGFyZ3VtZW50cywiY2FsbGVlIikuZ2V0fWNhdGNoKGdPUER0aHJvd3Mpe3JldHVybiB0aHJvd1R5cGVFcnJvcn19fSgpOnRocm93VHlwZUVycm9yO3ZhciBoYXNTeW1ib2xzPXJlcXVpcmUoImhhcy1zeW1ib2xzIikoKTt2YXIgaGFzUHJvdG89cmVxdWlyZSgiaGFzLXByb3RvIikoKTt2YXIgZ2V0UHJvdG89T2JqZWN0LmdldFByb3RvdHlwZU9mfHwoaGFzUHJvdG8/ZnVuY3Rpb24oeCl7cmV0dXJuIHguX19wcm90b19ffTpudWxsKTt2YXIgbmVlZHNFdmFsPXt9O3ZhciBUeXBlZEFycmF5PXR5cGVvZiBVaW50OEFycmF5PT09InVuZGVmaW5lZCJ8fCFnZXRQcm90bz91bmRlZmluZWQ6Z2V0UHJvdG8oVWludDhBcnJheSk7dmFyIElOVFJJTlNJQ1M9eyIlQWdncmVnYXRlRXJyb3IlIjp0eXBlb2YgQWdncmVnYXRlRXJyb3I9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6QWdncmVnYXRlRXJyb3IsIiVBcnJheSUiOkFycmF5LCIlQXJyYXlCdWZmZXIlIjp0eXBlb2YgQXJyYXlCdWZmZXI9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6QXJyYXlCdWZmZXIsIiVBcnJheUl0ZXJhdG9yUHJvdG90eXBlJSI6aGFzU3ltYm9scyYmZ2V0UHJvdG8/Z2V0UHJvdG8oW11bU3ltYm9sLml0ZXJhdG9yXSgpKTp1bmRlZmluZWQsIiVBc3luY0Zyb21TeW5jSXRlcmF0b3JQcm90b3R5cGUlIjp1bmRlZmluZWQsIiVBc3luY0Z1bmN0aW9uJSI6bmVlZHNFdmFsLCIlQXN5bmNHZW5lcmF0b3IlIjpuZWVkc0V2YWwsIiVBc3luY0dlbmVyYXRvckZ1bmN0aW9uJSI6bmVlZHNFdmFsLCIlQXN5bmNJdGVyYXRvclByb3RvdHlwZSUiOm5lZWRzRXZhbCwiJUF0b21pY3MlIjp0eXBlb2YgQXRvbWljcz09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDpBdG9taWNzLCIlQmlnSW50JSI6dHlwZW9mIEJpZ0ludD09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDpCaWdJbnQsIiVCaWdJbnQ2NEFycmF5JSI6dHlwZW9mIEJpZ0ludDY0QXJyYXk9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6QmlnSW50NjRBcnJheSwiJUJpZ1VpbnQ2NEFycmF5JSI6dHlwZW9mIEJpZ1VpbnQ2NEFycmF5PT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOkJpZ1VpbnQ2NEFycmF5LCIlQm9vbGVhbiUiOkJvb2xlYW4sIiVEYXRhVmlldyUiOnR5cGVvZiBEYXRhVmlldz09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDpEYXRhVmlldywiJURhdGUlIjpEYXRlLCIlZGVjb2RlVVJJJSI6ZGVjb2RlVVJJLCIlZGVjb2RlVVJJQ29tcG9uZW50JSI6ZGVjb2RlVVJJQ29tcG9uZW50LCIlZW5jb2RlVVJJJSI6ZW5jb2RlVVJJLCIlZW5jb2RlVVJJQ29tcG9uZW50JSI6ZW5jb2RlVVJJQ29tcG9uZW50LCIlRXJyb3IlIjpFcnJvciwiJWV2YWwlIjpldmFsLCIlRXZhbEVycm9yJSI6RXZhbEVycm9yLCIlRmxvYXQzMkFycmF5JSI6dHlwZW9mIEZsb2F0MzJBcnJheT09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDpGbG9hdDMyQXJyYXksIiVGbG9hdDY0QXJyYXklIjp0eXBlb2YgRmxvYXQ2NEFycmF5PT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOkZsb2F0NjRBcnJheSwiJUZpbmFsaXphdGlvblJlZ2lzdHJ5JSI6dHlwZW9mIEZpbmFsaXphdGlvblJlZ2lzdHJ5PT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOkZpbmFsaXphdGlvblJlZ2lzdHJ5LCIlRnVuY3Rpb24lIjokRnVuY3Rpb24sIiVHZW5lcmF0b3JGdW5jdGlvbiUiOm5lZWRzRXZhbCwiJUludDhBcnJheSUiOnR5cGVvZiBJbnQ4QXJyYXk9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6SW50OEFycmF5LCIlSW50MTZBcnJheSUiOnR5cGVvZiBJbnQxNkFycmF5PT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOkludDE2QXJyYXksIiVJbnQzMkFycmF5JSI6dHlwZW9mIEludDMyQXJyYXk9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6SW50MzJBcnJheSwiJWlzRmluaXRlJSI6aXNGaW5pdGUsIiVpc05hTiUiOmlzTmFOLCIlSXRlcmF0b3JQcm90b3R5cGUlIjpoYXNTeW1ib2xzJiZnZXRQcm90bz9nZXRQcm90byhnZXRQcm90byhbXVtTeW1ib2wuaXRlcmF0b3JdKCkpKTp1bmRlZmluZWQsIiVKU09OJSI6dHlwZW9mIEpTT049PT0ib2JqZWN0Ij9KU09OOnVuZGVmaW5lZCwiJU1hcCUiOnR5cGVvZiBNYXA9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6TWFwLCIlTWFwSXRlcmF0b3JQcm90b3R5cGUlIjp0eXBlb2YgTWFwPT09InVuZGVmaW5lZCJ8fCFoYXNTeW1ib2xzfHwhZ2V0UHJvdG8/dW5kZWZpbmVkOmdldFByb3RvKChuZXcgTWFwKVtTeW1ib2wuaXRlcmF0b3JdKCkpLCIlTWF0aCUiOk1hdGgsIiVOdW1iZXIlIjpOdW1iZXIsIiVPYmplY3QlIjpPYmplY3QsIiVwYXJzZUZsb2F0JSI6cGFyc2VGbG9hdCwiJXBhcnNlSW50JSI6cGFyc2VJbnQsIiVQcm9taXNlJSI6dHlwZW9mIFByb21pc2U9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6UHJvbWlzZSwiJVByb3h5JSI6dHlwZW9mIFByb3h5PT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOlByb3h5LCIlUmFuZ2VFcnJvciUiOlJhbmdlRXJyb3IsIiVSZWZlcmVuY2VFcnJvciUiOlJlZmVyZW5jZUVycm9yLCIlUmVmbGVjdCUiOnR5cGVvZiBSZWZsZWN0PT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOlJlZmxlY3QsIiVSZWdFeHAlIjpSZWdFeHAsIiVTZXQlIjp0eXBlb2YgU2V0PT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOlNldCwiJVNldEl0ZXJhdG9yUHJvdG90eXBlJSI6dHlwZW9mIFNldD09PSJ1bmRlZmluZWQifHwhaGFzU3ltYm9sc3x8IWdldFByb3RvP3VuZGVmaW5lZDpnZXRQcm90bygobmV3IFNldClbU3ltYm9sLml0ZXJhdG9yXSgpKSwiJVNoYXJlZEFycmF5QnVmZmVyJSI6dHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyPT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOlNoYXJlZEFycmF5QnVmZmVyLCIlU3RyaW5nJSI6U3RyaW5nLCIlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlIjpoYXNTeW1ib2xzJiZnZXRQcm90bz9nZXRQcm90bygiIltTeW1ib2wuaXRlcmF0b3JdKCkpOnVuZGVmaW5lZCwiJVN5bWJvbCUiOmhhc1N5bWJvbHM/U3ltYm9sOnVuZGVmaW5lZCwiJVN5bnRheEVycm9yJSI6JFN5bnRheEVycm9yLCIlVGhyb3dUeXBlRXJyb3IlIjpUaHJvd1R5cGVFcnJvciwiJVR5cGVkQXJyYXklIjpUeXBlZEFycmF5LCIlVHlwZUVycm9yJSI6JFR5cGVFcnJvciwiJVVpbnQ4QXJyYXklIjp0eXBlb2YgVWludDhBcnJheT09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDpVaW50OEFycmF5LCIlVWludDhDbGFtcGVkQXJyYXklIjp0eXBlb2YgVWludDhDbGFtcGVkQXJyYXk9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6VWludDhDbGFtcGVkQXJyYXksIiVVaW50MTZBcnJheSUiOnR5cGVvZiBVaW50MTZBcnJheT09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDpVaW50MTZBcnJheSwiJVVpbnQzMkFycmF5JSI6dHlwZW9mIFVpbnQzMkFycmF5PT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOlVpbnQzMkFycmF5LCIlVVJJRXJyb3IlIjpVUklFcnJvciwiJVdlYWtNYXAlIjp0eXBlb2YgV2Vha01hcD09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDpXZWFrTWFwLCIlV2Vha1JlZiUiOnR5cGVvZiBXZWFrUmVmPT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOldlYWtSZWYsIiVXZWFrU2V0JSI6dHlwZW9mIFdlYWtTZXQ9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6V2Vha1NldH07aWYoZ2V0UHJvdG8pe3RyeXtudWxsLmVycm9yfWNhdGNoKGUpe3ZhciBlcnJvclByb3RvPWdldFByb3RvKGdldFByb3RvKGUpKTtJTlRSSU5TSUNTWyIlRXJyb3IucHJvdG90eXBlJSJdPWVycm9yUHJvdG99fXZhciBkb0V2YWw9ZnVuY3Rpb24gZG9FdmFsKG5hbWUpe3ZhciB2YWx1ZTtpZihuYW1lPT09IiVBc3luY0Z1bmN0aW9uJSIpe3ZhbHVlPWdldEV2YWxsZWRDb25zdHJ1Y3RvcigiYXN5bmMgZnVuY3Rpb24gKCkge30iKX1lbHNlIGlmKG5hbWU9PT0iJUdlbmVyYXRvckZ1bmN0aW9uJSIpe3ZhbHVlPWdldEV2YWxsZWRDb25zdHJ1Y3RvcigiZnVuY3Rpb24qICgpIHt9Iil9ZWxzZSBpZihuYW1lPT09IiVBc3luY0dlbmVyYXRvckZ1bmN0aW9uJSIpe3ZhbHVlPWdldEV2YWxsZWRDb25zdHJ1Y3RvcigiYXN5bmMgZnVuY3Rpb24qICgpIHt9Iil9ZWxzZSBpZihuYW1lPT09IiVBc3luY0dlbmVyYXRvciUiKXt2YXIgZm49ZG9FdmFsKCIlQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiUiKTtpZihmbil7dmFsdWU9Zm4ucHJvdG90eXBlfX1lbHNlIGlmKG5hbWU9PT0iJUFzeW5jSXRlcmF0b3JQcm90b3R5cGUlIil7dmFyIGdlbj1kb0V2YWwoIiVBc3luY0dlbmVyYXRvciUiKTtpZihnZW4mJmdldFByb3RvKXt2YWx1ZT1nZXRQcm90byhnZW4ucHJvdG90eXBlKX19SU5UUklOU0lDU1tuYW1lXT12YWx1ZTtyZXR1cm4gdmFsdWV9O3ZhciBMRUdBQ1lfQUxJQVNFUz17IiVBcnJheUJ1ZmZlclByb3RvdHlwZSUiOlsiQXJyYXlCdWZmZXIiLCJwcm90b3R5cGUiXSwiJUFycmF5UHJvdG90eXBlJSI6WyJBcnJheSIsInByb3RvdHlwZSJdLCIlQXJyYXlQcm90b19lbnRyaWVzJSI6WyJBcnJheSIsInByb3RvdHlwZSIsImVudHJpZXMiXSwiJUFycmF5UHJvdG9fZm9yRWFjaCUiOlsiQXJyYXkiLCJwcm90b3R5cGUiLCJmb3JFYWNoIl0sIiVBcnJheVByb3RvX2tleXMlIjpbIkFycmF5IiwicHJvdG90eXBlIiwia2V5cyJdLCIlQXJyYXlQcm90b192YWx1ZXMlIjpbIkFycmF5IiwicHJvdG90eXBlIiwidmFsdWVzIl0sIiVBc3luY0Z1bmN0aW9uUHJvdG90eXBlJSI6WyJBc3luY0Z1bmN0aW9uIiwicHJvdG90eXBlIl0sIiVBc3luY0dlbmVyYXRvciUiOlsiQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiIsInByb3RvdHlwZSJdLCIlQXN5bmNHZW5lcmF0b3JQcm90b3R5cGUlIjpbIkFzeW5jR2VuZXJhdG9yRnVuY3Rpb24iLCJwcm90b3R5cGUiLCJwcm90b3R5cGUiXSwiJUJvb2xlYW5Qcm90b3R5cGUlIjpbIkJvb2xlYW4iLCJwcm90b3R5cGUiXSwiJURhdGFWaWV3UHJvdG90eXBlJSI6WyJEYXRhVmlldyIsInByb3RvdHlwZSJdLCIlRGF0ZVByb3RvdHlwZSUiOlsiRGF0ZSIsInByb3RvdHlwZSJdLCIlRXJyb3JQcm90b3R5cGUlIjpbIkVycm9yIiwicHJvdG90eXBlIl0sIiVFdmFsRXJyb3JQcm90b3R5cGUlIjpbIkV2YWxFcnJvciIsInByb3RvdHlwZSJdLCIlRmxvYXQzMkFycmF5UHJvdG90eXBlJSI6WyJGbG9hdDMyQXJyYXkiLCJwcm90b3R5cGUiXSwiJUZsb2F0NjRBcnJheVByb3RvdHlwZSUiOlsiRmxvYXQ2NEFycmF5IiwicHJvdG90eXBlIl0sIiVGdW5jdGlvblByb3RvdHlwZSUiOlsiRnVuY3Rpb24iLCJwcm90b3R5cGUiXSwiJUdlbmVyYXRvciUiOlsiR2VuZXJhdG9yRnVuY3Rpb24iLCJwcm90b3R5cGUiXSwiJUdlbmVyYXRvclByb3RvdHlwZSUiOlsiR2VuZXJhdG9yRnVuY3Rpb24iLCJwcm90b3R5cGUiLCJwcm90b3R5cGUiXSwiJUludDhBcnJheVByb3RvdHlwZSUiOlsiSW50OEFycmF5IiwicHJvdG90eXBlIl0sIiVJbnQxNkFycmF5UHJvdG90eXBlJSI6WyJJbnQxNkFycmF5IiwicHJvdG90eXBlIl0sIiVJbnQzMkFycmF5UHJvdG90eXBlJSI6WyJJbnQzMkFycmF5IiwicHJvdG90eXBlIl0sIiVKU09OUGFyc2UlIjpbIkpTT04iLCJwYXJzZSJdLCIlSlNPTlN0cmluZ2lmeSUiOlsiSlNPTiIsInN0cmluZ2lmeSJdLCIlTWFwUHJvdG90eXBlJSI6WyJNYXAiLCJwcm90b3R5cGUiXSwiJU51bWJlclByb3RvdHlwZSUiOlsiTnVtYmVyIiwicHJvdG90eXBlIl0sIiVPYmplY3RQcm90b3R5cGUlIjpbIk9iamVjdCIsInByb3RvdHlwZSJdLCIlT2JqUHJvdG9fdG9TdHJpbmclIjpbIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIl0sIiVPYmpQcm90b192YWx1ZU9mJSI6WyJPYmplY3QiLCJwcm90b3R5cGUiLCJ2YWx1ZU9mIl0sIiVQcm9taXNlUHJvdG90eXBlJSI6WyJQcm9taXNlIiwicHJvdG90eXBlIl0sIiVQcm9taXNlUHJvdG9fdGhlbiUiOlsiUHJvbWlzZSIsInByb3RvdHlwZSIsInRoZW4iXSwiJVByb21pc2VfYWxsJSI6WyJQcm9taXNlIiwiYWxsIl0sIiVQcm9taXNlX3JlamVjdCUiOlsiUHJvbWlzZSIsInJlamVjdCJdLCIlUHJvbWlzZV9yZXNvbHZlJSI6WyJQcm9taXNlIiwicmVzb2x2ZSJdLCIlUmFuZ2VFcnJvclByb3RvdHlwZSUiOlsiUmFuZ2VFcnJvciIsInByb3RvdHlwZSJdLCIlUmVmZXJlbmNlRXJyb3JQcm90b3R5cGUlIjpbIlJlZmVyZW5jZUVycm9yIiwicHJvdG90eXBlIl0sIiVSZWdFeHBQcm90b3R5cGUlIjpbIlJlZ0V4cCIsInByb3RvdHlwZSJdLCIlU2V0UHJvdG90eXBlJSI6WyJTZXQiLCJwcm90b3R5cGUiXSwiJVNoYXJlZEFycmF5QnVmZmVyUHJvdG90eXBlJSI6WyJTaGFyZWRBcnJheUJ1ZmZlciIsInByb3RvdHlwZSJdLCIlU3RyaW5nUHJvdG90eXBlJSI6WyJTdHJpbmciLCJwcm90b3R5cGUiXSwiJVN5bWJvbFByb3RvdHlwZSUiOlsiU3ltYm9sIiwicHJvdG90eXBlIl0sIiVTeW50YXhFcnJvclByb3RvdHlwZSUiOlsiU3ludGF4RXJyb3IiLCJwcm90b3R5cGUiXSwiJVR5cGVkQXJyYXlQcm90b3R5cGUlIjpbIlR5cGVkQXJyYXkiLCJwcm90b3R5cGUiXSwiJVR5cGVFcnJvclByb3RvdHlwZSUiOlsiVHlwZUVycm9yIiwicHJvdG90eXBlIl0sIiVVaW50OEFycmF5UHJvdG90eXBlJSI6WyJVaW50OEFycmF5IiwicHJvdG90eXBlIl0sIiVVaW50OENsYW1wZWRBcnJheVByb3RvdHlwZSUiOlsiVWludDhDbGFtcGVkQXJyYXkiLCJwcm90b3R5cGUiXSwiJVVpbnQxNkFycmF5UHJvdG90eXBlJSI6WyJVaW50MTZBcnJheSIsInByb3RvdHlwZSJdLCIlVWludDMyQXJyYXlQcm90b3R5cGUlIjpbIlVpbnQzMkFycmF5IiwicHJvdG90eXBlIl0sIiVVUklFcnJvclByb3RvdHlwZSUiOlsiVVJJRXJyb3IiLCJwcm90b3R5cGUiXSwiJVdlYWtNYXBQcm90b3R5cGUlIjpbIldlYWtNYXAiLCJwcm90b3R5cGUiXSwiJVdlYWtTZXRQcm90b3R5cGUlIjpbIldlYWtTZXQiLCJwcm90b3R5cGUiXX07dmFyIGJpbmQ9cmVxdWlyZSgiZnVuY3Rpb24tYmluZCIpO3ZhciBoYXNPd249cmVxdWlyZSgiaGFzIik7dmFyICRjb25jYXQ9YmluZC5jYWxsKEZ1bmN0aW9uLmNhbGwsQXJyYXkucHJvdG90eXBlLmNvbmNhdCk7dmFyICRzcGxpY2VBcHBseT1iaW5kLmNhbGwoRnVuY3Rpb24uYXBwbHksQXJyYXkucHJvdG90eXBlLnNwbGljZSk7dmFyICRyZXBsYWNlPWJpbmQuY2FsbChGdW5jdGlvbi5jYWxsLFN0cmluZy5wcm90b3R5cGUucmVwbGFjZSk7dmFyICRzdHJTbGljZT1iaW5kLmNhbGwoRnVuY3Rpb24uY2FsbCxTdHJpbmcucHJvdG90eXBlLnNsaWNlKTt2YXIgJGV4ZWM9YmluZC5jYWxsKEZ1bmN0aW9uLmNhbGwsUmVnRXhwLnByb3RvdHlwZS5leGVjKTt2YXIgcmVQcm9wTmFtZT0vW14lLltcXV0rfFxbKD86KC0/XGQrKD86XC5cZCspPyl8KFsiJ10pKCg/Oig/IVwyKVteXFxdfFxcLikqPylcMilcXXwoPz0oPzpcLnxcW1xdKSg/OlwufFxbXF18JSQpKS9nO3ZhciByZUVzY2FwZUNoYXI9L1xcKFxcKT8vZzt2YXIgc3RyaW5nVG9QYXRoPWZ1bmN0aW9uIHN0cmluZ1RvUGF0aChzdHJpbmcpe3ZhciBmaXJzdD0kc3RyU2xpY2Uoc3RyaW5nLDAsMSk7dmFyIGxhc3Q9JHN0clNsaWNlKHN0cmluZywtMSk7aWYoZmlyc3Q9PT0iJSImJmxhc3QhPT0iJSIpe3Rocm93IG5ldyAkU3ludGF4RXJyb3IoImludmFsaWQgaW50cmluc2ljIHN5bnRheCwgZXhwZWN0ZWQgY2xvc2luZyBgJWAiKX1lbHNlIGlmKGxhc3Q9PT0iJSImJmZpcnN0IT09IiUiKXt0aHJvdyBuZXcgJFN5bnRheEVycm9yKCJpbnZhbGlkIGludHJpbnNpYyBzeW50YXgsIGV4cGVjdGVkIG9wZW5pbmcgYCVgIil9dmFyIHJlc3VsdD1bXTskcmVwbGFjZShzdHJpbmcscmVQcm9wTmFtZSxmdW5jdGlvbihtYXRjaCxudW1iZXIscXVvdGUsc3ViU3RyaW5nKXtyZXN1bHRbcmVzdWx0Lmxlbmd0aF09cXVvdGU/JHJlcGxhY2Uoc3ViU3RyaW5nLHJlRXNjYXBlQ2hhciwiJDEiKTpudW1iZXJ8fG1hdGNofSk7cmV0dXJuIHJlc3VsdH07dmFyIGdldEJhc2VJbnRyaW5zaWM9ZnVuY3Rpb24gZ2V0QmFzZUludHJpbnNpYyhuYW1lLGFsbG93TWlzc2luZyl7dmFyIGludHJpbnNpY05hbWU9bmFtZTt2YXIgYWxpYXM7aWYoaGFzT3duKExFR0FDWV9BTElBU0VTLGludHJpbnNpY05hbWUpKXthbGlhcz1MRUdBQ1lfQUxJQVNFU1tpbnRyaW5zaWNOYW1lXTtpbnRyaW5zaWNOYW1lPSIlIithbGlhc1swXSsiJSJ9aWYoaGFzT3duKElOVFJJTlNJQ1MsaW50cmluc2ljTmFtZSkpe3ZhciB2YWx1ZT1JTlRSSU5TSUNTW2ludHJpbnNpY05hbWVdO2lmKHZhbHVlPT09bmVlZHNFdmFsKXt2YWx1ZT1kb0V2YWwoaW50cmluc2ljTmFtZSl9aWYodHlwZW9mIHZhbHVlPT09InVuZGVmaW5lZCImJiFhbGxvd01pc3Npbmcpe3Rocm93IG5ldyAkVHlwZUVycm9yKCJpbnRyaW5zaWMgIituYW1lKyIgZXhpc3RzLCBidXQgaXMgbm90IGF2YWlsYWJsZS4gUGxlYXNlIGZpbGUgYW4gaXNzdWUhIil9cmV0dXJue2FsaWFzOmFsaWFzLG5hbWU6aW50cmluc2ljTmFtZSx2YWx1ZTp2YWx1ZX19dGhyb3cgbmV3ICRTeW50YXhFcnJvcigiaW50cmluc2ljICIrbmFtZSsiIGRvZXMgbm90IGV4aXN0ISIpfTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBHZXRJbnRyaW5zaWMobmFtZSxhbGxvd01pc3Npbmcpe2lmKHR5cGVvZiBuYW1lIT09InN0cmluZyJ8fG5hbWUubGVuZ3RoPT09MCl7dGhyb3cgbmV3ICRUeXBlRXJyb3IoImludHJpbnNpYyBuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIil9aWYoYXJndW1lbnRzLmxlbmd0aD4xJiZ0eXBlb2YgYWxsb3dNaXNzaW5nIT09ImJvb2xlYW4iKXt0aHJvdyBuZXcgJFR5cGVFcnJvcignImFsbG93TWlzc2luZyIgYXJndW1lbnQgbXVzdCBiZSBhIGJvb2xlYW4nKX1pZigkZXhlYygvXiU/W14lXSolPyQvLG5hbWUpPT09bnVsbCl7dGhyb3cgbmV3ICRTeW50YXhFcnJvcigiYCVgIG1heSBub3QgYmUgcHJlc2VudCBhbnl3aGVyZSBidXQgYXQgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIHRoZSBpbnRyaW5zaWMgbmFtZSIpfXZhciBwYXJ0cz1zdHJpbmdUb1BhdGgobmFtZSk7dmFyIGludHJpbnNpY0Jhc2VOYW1lPXBhcnRzLmxlbmd0aD4wP3BhcnRzWzBdOiIiO3ZhciBpbnRyaW5zaWM9Z2V0QmFzZUludHJpbnNpYygiJSIraW50cmluc2ljQmFzZU5hbWUrIiUiLGFsbG93TWlzc2luZyk7dmFyIGludHJpbnNpY1JlYWxOYW1lPWludHJpbnNpYy5uYW1lO3ZhciB2YWx1ZT1pbnRyaW5zaWMudmFsdWU7dmFyIHNraXBGdXJ0aGVyQ2FjaGluZz1mYWxzZTt2YXIgYWxpYXM9aW50cmluc2ljLmFsaWFzO2lmKGFsaWFzKXtpbnRyaW5zaWNCYXNlTmFtZT1hbGlhc1swXTskc3BsaWNlQXBwbHkocGFydHMsJGNvbmNhdChbMCwxXSxhbGlhcykpfWZvcih2YXIgaT0xLGlzT3duPXRydWU7aTxwYXJ0cy5sZW5ndGg7aSs9MSl7dmFyIHBhcnQ9cGFydHNbaV07dmFyIGZpcnN0PSRzdHJTbGljZShwYXJ0LDAsMSk7dmFyIGxhc3Q9JHN0clNsaWNlKHBhcnQsLTEpO2lmKChmaXJzdD09PSciJ3x8Zmlyc3Q9PT0iJyJ8fGZpcnN0PT09ImAifHwobGFzdD09PSciJ3x8bGFzdD09PSInInx8bGFzdD09PSJgIikpJiZmaXJzdCE9PWxhc3Qpe3Rocm93IG5ldyAkU3ludGF4RXJyb3IoInByb3BlcnR5IG5hbWVzIHdpdGggcXVvdGVzIG11c3QgaGF2ZSBtYXRjaGluZyBxdW90ZXMiKX1pZihwYXJ0PT09ImNvbnN0cnVjdG9yInx8IWlzT3duKXtza2lwRnVydGhlckNhY2hpbmc9dHJ1ZX1pbnRyaW5zaWNCYXNlTmFtZSs9Ii4iK3BhcnQ7aW50cmluc2ljUmVhbE5hbWU9IiUiK2ludHJpbnNpY0Jhc2VOYW1lKyIlIjtpZihoYXNPd24oSU5UUklOU0lDUyxpbnRyaW5zaWNSZWFsTmFtZSkpe3ZhbHVlPUlOVFJJTlNJQ1NbaW50cmluc2ljUmVhbE5hbWVdfWVsc2UgaWYodmFsdWUhPW51bGwpe2lmKCEocGFydCBpbiB2YWx1ZSkpe2lmKCFhbGxvd01pc3Npbmcpe3Rocm93IG5ldyAkVHlwZUVycm9yKCJiYXNlIGludHJpbnNpYyBmb3IgIituYW1lKyIgZXhpc3RzLCBidXQgdGhlIHByb3BlcnR5IGlzIG5vdCBhdmFpbGFibGUuIil9cmV0dXJuIHZvaWQgdW5kZWZpbmVkfWlmKCRnT1BEJiZpKzE+PXBhcnRzLmxlbmd0aCl7dmFyIGRlc2M9JGdPUEQodmFsdWUscGFydCk7aXNPd249ISFkZXNjO2lmKGlzT3duJiYiZ2V0ImluIGRlc2MmJiEoIm9yaWdpbmFsVmFsdWUiaW4gZGVzYy5nZXQpKXt2YWx1ZT1kZXNjLmdldH1lbHNle3ZhbHVlPXZhbHVlW3BhcnRdfX1lbHNle2lzT3duPWhhc093bih2YWx1ZSxwYXJ0KTt2YWx1ZT12YWx1ZVtwYXJ0XX1pZihpc093biYmIXNraXBGdXJ0aGVyQ2FjaGluZyl7SU5UUklOU0lDU1tpbnRyaW5zaWNSZWFsTmFtZV09dmFsdWV9fX1yZXR1cm4gdmFsdWV9fSx7ImZ1bmN0aW9uLWJpbmQiOjE5LGhhczoyNiwiaGFzLXByb3RvIjoyMiwiaGFzLXN5bWJvbHMiOjIzfV0sMjE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgR2V0SW50cmluc2ljPXJlcXVpcmUoImdldC1pbnRyaW5zaWMiKTt2YXIgJGdPUEQ9R2V0SW50cmluc2ljKCIlT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciUiLHRydWUpO2lmKCRnT1BEKXt0cnl7JGdPUEQoW10sImxlbmd0aCIpfWNhdGNoKGUpeyRnT1BEPW51bGx9fW1vZHVsZS5leHBvcnRzPSRnT1BEfSx7ImdldC1pbnRyaW5zaWMiOjIwfV0sMjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgdGVzdD17Zm9vOnt9fTt2YXIgJE9iamVjdD1PYmplY3Q7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gaGFzUHJvdG8oKXtyZXR1cm57X19wcm90b19fOnRlc3R9LmZvbz09PXRlc3QuZm9vJiYhKHtfX3Byb3RvX186bnVsbH1pbnN0YW5jZW9mICRPYmplY3QpfX0se31dLDIzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7dmFyIG9yaWdTeW1ib2w9dHlwZW9mIFN5bWJvbCE9PSJ1bmRlZmluZWQiJiZTeW1ib2w7dmFyIGhhc1N5bWJvbFNoYW09cmVxdWlyZSgiLi9zaGFtcyIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIGhhc05hdGl2ZVN5bWJvbHMoKXtpZih0eXBlb2Ygb3JpZ1N5bWJvbCE9PSJmdW5jdGlvbiIpe3JldHVybiBmYWxzZX1pZih0eXBlb2YgU3ltYm9sIT09ImZ1bmN0aW9uIil7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBvcmlnU3ltYm9sKCJmb28iKSE9PSJzeW1ib2wiKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mIFN5bWJvbCgiYmFyIikhPT0ic3ltYm9sIil7cmV0dXJuIGZhbHNlfXJldHVybiBoYXNTeW1ib2xTaGFtKCl9fSx7Ii4vc2hhbXMiOjI0fV0sMjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBoYXNTeW1ib2xzKCl7aWYodHlwZW9mIFN5bWJvbCE9PSJmdW5jdGlvbiJ8fHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzIT09ImZ1bmN0aW9uIil7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PT0ic3ltYm9sIil7cmV0dXJuIHRydWV9dmFyIG9iaj17fTt2YXIgc3ltPVN5bWJvbCgidGVzdCIpO3ZhciBzeW1PYmo9T2JqZWN0KHN5bSk7aWYodHlwZW9mIHN5bT09PSJzdHJpbmciKXtyZXR1cm4gZmFsc2V9aWYoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHN5bSkhPT0iW29iamVjdCBTeW1ib2xdIil7cmV0dXJuIGZhbHNlfWlmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzeW1PYmopIT09IltvYmplY3QgU3ltYm9sXSIpe3JldHVybiBmYWxzZX12YXIgc3ltVmFsPTQyO29ialtzeW1dPXN5bVZhbDtmb3Ioc3ltIGluIG9iail7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBPYmplY3Qua2V5cz09PSJmdW5jdGlvbiImJk9iamVjdC5rZXlzKG9iaikubGVuZ3RoIT09MCl7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz09PSJmdW5jdGlvbiImJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubGVuZ3RoIT09MCl7cmV0dXJuIGZhbHNlfXZhciBzeW1zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqKTtpZihzeW1zLmxlbmd0aCE9PTF8fHN5bXNbMF0hPT1zeW0pe3JldHVybiBmYWxzZX1pZighT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKG9iaixzeW0pKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I9PT0iZnVuY3Rpb24iKXt2YXIgZGVzY3JpcHRvcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaixzeW0pO2lmKGRlc2NyaXB0b3IudmFsdWUhPT1zeW1WYWx8fGRlc2NyaXB0b3IuZW51bWVyYWJsZSE9PXRydWUpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9fSx7fV0sMjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgaGFzU3ltYm9scz1yZXF1aXJlKCJoYXMtc3ltYm9scy9zaGFtcyIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIGhhc1RvU3RyaW5nVGFnU2hhbXMoKXtyZXR1cm4gaGFzU3ltYm9scygpJiYhIVN5bWJvbC50b1N0cmluZ1RhZ319LHsiaGFzLXN5bWJvbHMvc2hhbXMiOjI0fV0sMjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYmluZD1yZXF1aXJlKCJmdW5jdGlvbi1iaW5kIik7bW9kdWxlLmV4cG9ydHM9YmluZC5jYWxsKEZ1bmN0aW9uLmNhbGwsT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSl9LHsiZnVuY3Rpb24tYmluZCI6MTl9XSwyNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7dmFyIGh0dHA9cmVxdWlyZSgiaHR0cCIpO3ZhciB1cmw9cmVxdWlyZSgidXJsIik7dmFyIGh0dHBzPW1vZHVsZS5leHBvcnRzO2Zvcih2YXIga2V5IGluIGh0dHApe2lmKGh0dHAuaGFzT3duUHJvcGVydHkoa2V5KSlodHRwc1trZXldPWh0dHBba2V5XX1odHRwcy5yZXF1ZXN0PWZ1bmN0aW9uKHBhcmFtcyxjYil7cGFyYW1zPXZhbGlkYXRlUGFyYW1zKHBhcmFtcyk7cmV0dXJuIGh0dHAucmVxdWVzdC5jYWxsKHRoaXMscGFyYW1zLGNiKX07aHR0cHMuZ2V0PWZ1bmN0aW9uKHBhcmFtcyxjYil7cGFyYW1zPXZhbGlkYXRlUGFyYW1zKHBhcmFtcyk7cmV0dXJuIGh0dHAuZ2V0LmNhbGwodGhpcyxwYXJhbXMsY2IpfTtmdW5jdGlvbiB2YWxpZGF0ZVBhcmFtcyhwYXJhbXMpe2lmKHR5cGVvZiBwYXJhbXM9PT0ic3RyaW5nIil7cGFyYW1zPXVybC5wYXJzZShwYXJhbXMpfWlmKCFwYXJhbXMucHJvdG9jb2wpe3BhcmFtcy5wcm90b2NvbD0iaHR0cHM6In1pZihwYXJhbXMucHJvdG9jb2whPT0iaHR0cHM6Iil7dGhyb3cgbmV3IEVycm9yKCdQcm90b2NvbCAiJytwYXJhbXMucHJvdG9jb2wrJyIgbm90IHN1cHBvcnRlZC4gRXhwZWN0ZWQgImh0dHBzOiInKX1yZXR1cm4gcGFyYW1zfX0se2h0dHA6NzMsdXJsOjkzfV0sMjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe2V4cG9ydHMucmVhZD1mdW5jdGlvbihidWZmZXIsb2Zmc2V0LGlzTEUsbUxlbixuQnl0ZXMpe3ZhciBlLG07dmFyIGVMZW49bkJ5dGVzKjgtbUxlbi0xO3ZhciBlTWF4PSgxPDxlTGVuKS0xO3ZhciBlQmlhcz1lTWF4Pj4xO3ZhciBuQml0cz0tNzt2YXIgaT1pc0xFP25CeXRlcy0xOjA7dmFyIGQ9aXNMRT8tMToxO3ZhciBzPWJ1ZmZlcltvZmZzZXQraV07aSs9ZDtlPXMmKDE8PC1uQml0cyktMTtzPj49LW5CaXRzO25CaXRzKz1lTGVuO2Zvcig7bkJpdHM+MDtlPWUqMjU2K2J1ZmZlcltvZmZzZXQraV0saSs9ZCxuQml0cy09OCl7fW09ZSYoMTw8LW5CaXRzKS0xO2U+Pj0tbkJpdHM7bkJpdHMrPW1MZW47Zm9yKDtuQml0cz4wO209bSoyNTYrYnVmZmVyW29mZnNldCtpXSxpKz1kLG5CaXRzLT04KXt9aWYoZT09PTApe2U9MS1lQmlhc31lbHNlIGlmKGU9PT1lTWF4KXtyZXR1cm4gbT9OYU46KHM/LTE6MSkqSW5maW5pdHl9ZWxzZXttPW0rTWF0aC5wb3coMixtTGVuKTtlPWUtZUJpYXN9cmV0dXJuKHM/LTE6MSkqbSpNYXRoLnBvdygyLGUtbUxlbil9O2V4cG9ydHMud3JpdGU9ZnVuY3Rpb24oYnVmZmVyLHZhbHVlLG9mZnNldCxpc0xFLG1MZW4sbkJ5dGVzKXt2YXIgZSxtLGM7dmFyIGVMZW49bkJ5dGVzKjgtbUxlbi0xO3ZhciBlTWF4PSgxPDxlTGVuKS0xO3ZhciBlQmlhcz1lTWF4Pj4xO3ZhciBydD1tTGVuPT09MjM/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowO3ZhciBpPWlzTEU/MDpuQnl0ZXMtMTt2YXIgZD1pc0xFPzE6LTE7dmFyIHM9dmFsdWU8MHx8dmFsdWU9PT0wJiYxL3ZhbHVlPDA/MTowO3ZhbHVlPU1hdGguYWJzKHZhbHVlKTtpZihpc05hTih2YWx1ZSl8fHZhbHVlPT09SW5maW5pdHkpe209aXNOYU4odmFsdWUpPzE6MDtlPWVNYXh9ZWxzZXtlPU1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpL01hdGguTE4yKTtpZih2YWx1ZSooYz1NYXRoLnBvdygyLC1lKSk8MSl7ZS0tO2MqPTJ9aWYoZStlQmlhcz49MSl7dmFsdWUrPXJ0L2N9ZWxzZXt2YWx1ZSs9cnQqTWF0aC5wb3coMiwxLWVCaWFzKX1pZih2YWx1ZSpjPj0yKXtlKys7Yy89Mn1pZihlK2VCaWFzPj1lTWF4KXttPTA7ZT1lTWF4fWVsc2UgaWYoZStlQmlhcz49MSl7bT0odmFsdWUqYy0xKSpNYXRoLnBvdygyLG1MZW4pO2U9ZStlQmlhc31lbHNle209dmFsdWUqTWF0aC5wb3coMixlQmlhcy0xKSpNYXRoLnBvdygyLG1MZW4pO2U9MH19Zm9yKDttTGVuPj04O2J1ZmZlcltvZmZzZXQraV09bSYyNTUsaSs9ZCxtLz0yNTYsbUxlbi09OCl7fWU9ZTw8bUxlbnxtO2VMZW4rPW1MZW47Zm9yKDtlTGVuPjA7YnVmZmVyW29mZnNldCtpXT1lJjI1NSxpKz1kLGUvPTI1NixlTGVuLT04KXt9YnVmZmVyW29mZnNldCtpLWRdfD1zKjEyOH19LHt9XSwyOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7aWYodHlwZW9mIE9iamVjdC5jcmVhdGU9PT0iZnVuY3Rpb24iKXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBpbmhlcml0cyhjdG9yLHN1cGVyQ3Rvcil7aWYoc3VwZXJDdG9yKXtjdG9yLnN1cGVyXz1zdXBlckN0b3I7Y3Rvci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6Y3RvcixlbnVtZXJhYmxlOmZhbHNlLHdyaXRhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWV9fSl9fX1lbHNle21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIGluaGVyaXRzKGN0b3Isc3VwZXJDdG9yKXtpZihzdXBlckN0b3Ipe2N0b3Iuc3VwZXJfPXN1cGVyQ3Rvcjt2YXIgVGVtcEN0b3I9ZnVuY3Rpb24oKXt9O1RlbXBDdG9yLnByb3RvdHlwZT1zdXBlckN0b3IucHJvdG90eXBlO2N0b3IucHJvdG90eXBlPW5ldyBUZW1wQ3RvcjtjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jdG9yfX19fSx7fV0sMzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgaGFzVG9TdHJpbmdUYWc9cmVxdWlyZSgiaGFzLXRvc3RyaW5ndGFnL3NoYW1zIikoKTt2YXIgY2FsbEJvdW5kPXJlcXVpcmUoImNhbGwtYmluZC9jYWxsQm91bmQiKTt2YXIgJHRvU3RyaW5nPWNhbGxCb3VuZCgiT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyIpO3ZhciBpc1N0YW5kYXJkQXJndW1lbnRzPWZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKXtpZihoYXNUb1N0cmluZ1RhZyYmdmFsdWUmJnR5cGVvZiB2YWx1ZT09PSJvYmplY3QiJiZTeW1ib2wudG9TdHJpbmdUYWcgaW4gdmFsdWUpe3JldHVybiBmYWxzZX1yZXR1cm4gJHRvU3RyaW5nKHZhbHVlKT09PSJbb2JqZWN0IEFyZ3VtZW50c10ifTt2YXIgaXNMZWdhY3lBcmd1bWVudHM9ZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpe2lmKGlzU3RhbmRhcmRBcmd1bWVudHModmFsdWUpKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gdmFsdWUhPT1udWxsJiZ0eXBlb2YgdmFsdWU9PT0ib2JqZWN0IiYmdHlwZW9mIHZhbHVlLmxlbmd0aD09PSJudW1iZXIiJiZ2YWx1ZS5sZW5ndGg+PTAmJiR0b1N0cmluZyh2YWx1ZSkhPT0iW29iamVjdCBBcnJheV0iJiYkdG9TdHJpbmcodmFsdWUuY2FsbGVlKT09PSJbb2JqZWN0IEZ1bmN0aW9uXSJ9O3ZhciBzdXBwb3J0c1N0YW5kYXJkQXJndW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIGlzU3RhbmRhcmRBcmd1bWVudHMoYXJndW1lbnRzKX0oKTtpc1N0YW5kYXJkQXJndW1lbnRzLmlzTGVnYWN5QXJndW1lbnRzPWlzTGVnYWN5QXJndW1lbnRzO21vZHVsZS5leHBvcnRzPXN1cHBvcnRzU3RhbmRhcmRBcmd1bWVudHM/aXNTdGFuZGFyZEFyZ3VtZW50czppc0xlZ2FjeUFyZ3VtZW50c30seyJjYWxsLWJpbmQvY2FsbEJvdW5kIjoxMCwiaGFzLXRvc3RyaW5ndGFnL3NoYW1zIjoyNX1dLDMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7dmFyIGZuVG9TdHI9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO3ZhciByZWZsZWN0QXBwbHk9dHlwZW9mIFJlZmxlY3Q9PT0ib2JqZWN0IiYmUmVmbGVjdCE9PW51bGwmJlJlZmxlY3QuYXBwbHk7dmFyIGJhZEFycmF5TGlrZTt2YXIgaXNDYWxsYWJsZU1hcmtlcjtpZih0eXBlb2YgcmVmbGVjdEFwcGx5PT09ImZ1bmN0aW9uIiYmdHlwZW9mIE9iamVjdC5kZWZpbmVQcm9wZXJ0eT09PSJmdW5jdGlvbiIpe3RyeXtiYWRBcnJheUxpa2U9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXt0aHJvdyBpc0NhbGxhYmxlTWFya2VyfX0pO2lzQ2FsbGFibGVNYXJrZXI9e307cmVmbGVjdEFwcGx5KGZ1bmN0aW9uKCl7dGhyb3cgNDJ9LG51bGwsYmFkQXJyYXlMaWtlKX1jYXRjaChfKXtpZihfIT09aXNDYWxsYWJsZU1hcmtlcil7cmVmbGVjdEFwcGx5PW51bGx9fX1lbHNle3JlZmxlY3RBcHBseT1udWxsfXZhciBjb25zdHJ1Y3RvclJlZ2V4PS9eXHMqY2xhc3NcYi87dmFyIGlzRVM2Q2xhc3NGbj1mdW5jdGlvbiBpc0VTNkNsYXNzRnVuY3Rpb24odmFsdWUpe3RyeXt2YXIgZm5TdHI9Zm5Ub1N0ci5jYWxsKHZhbHVlKTtyZXR1cm4gY29uc3RydWN0b3JSZWdleC50ZXN0KGZuU3RyKX1jYXRjaChlKXtyZXR1cm4gZmFsc2V9fTt2YXIgdHJ5RnVuY3Rpb25PYmplY3Q9ZnVuY3Rpb24gdHJ5RnVuY3Rpb25Ub1N0cih2YWx1ZSl7dHJ5e2lmKGlzRVM2Q2xhc3NGbih2YWx1ZSkpe3JldHVybiBmYWxzZX1mblRvU3RyLmNhbGwodmFsdWUpO3JldHVybiB0cnVlfWNhdGNoKGUpe3JldHVybiBmYWxzZX19O3ZhciB0b1N0cj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO3ZhciBvYmplY3RDbGFzcz0iW29iamVjdCBPYmplY3RdIjt2YXIgZm5DbGFzcz0iW29iamVjdCBGdW5jdGlvbl0iO3ZhciBnZW5DbGFzcz0iW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0iO3ZhciBkZGFDbGFzcz0iW29iamVjdCBIVE1MQWxsQ29sbGVjdGlvbl0iO3ZhciBkZGFDbGFzczI9IltvYmplY3QgSFRNTCBkb2N1bWVudC5hbGwgY2xhc3NdIjt2YXIgZGRhQ2xhc3MzPSJbb2JqZWN0IEhUTUxDb2xsZWN0aW9uXSI7dmFyIGhhc1RvU3RyaW5nVGFnPXR5cGVvZiBTeW1ib2w9PT0iZnVuY3Rpb24iJiYhIVN5bWJvbC50b1N0cmluZ1RhZzt2YXIgaXNJRTY4PSEoMCBpblssXSk7dmFyIGlzRERBPWZ1bmN0aW9uIGlzRG9jdW1lbnREb3RBbGwoKXtyZXR1cm4gZmFsc2V9O2lmKHR5cGVvZiBkb2N1bWVudD09PSJvYmplY3QiKXt2YXIgYWxsPWRvY3VtZW50LmFsbDtpZih0b1N0ci5jYWxsKGFsbCk9PT10b1N0ci5jYWxsKGRvY3VtZW50LmFsbCkpe2lzRERBPWZ1bmN0aW9uIGlzRG9jdW1lbnREb3RBbGwodmFsdWUpe2lmKChpc0lFNjh8fCF2YWx1ZSkmJih0eXBlb2YgdmFsdWU9PT0idW5kZWZpbmVkInx8dHlwZW9mIHZhbHVlPT09Im9iamVjdCIpKXt0cnl7dmFyIHN0cj10b1N0ci5jYWxsKHZhbHVlKTtyZXR1cm4oc3RyPT09ZGRhQ2xhc3N8fHN0cj09PWRkYUNsYXNzMnx8c3RyPT09ZGRhQ2xhc3MzfHxzdHI9PT1vYmplY3RDbGFzcykmJnZhbHVlKCIiKT09bnVsbH1jYXRjaChlKXt9fXJldHVybiBmYWxzZX19fW1vZHVsZS5leHBvcnRzPXJlZmxlY3RBcHBseT9mdW5jdGlvbiBpc0NhbGxhYmxlKHZhbHVlKXtpZihpc0REQSh2YWx1ZSkpe3JldHVybiB0cnVlfWlmKCF2YWx1ZSl7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiB2YWx1ZSE9PSJmdW5jdGlvbiImJnR5cGVvZiB2YWx1ZSE9PSJvYmplY3QiKXtyZXR1cm4gZmFsc2V9dHJ5e3JlZmxlY3RBcHBseSh2YWx1ZSxudWxsLGJhZEFycmF5TGlrZSl9Y2F0Y2goZSl7aWYoZSE9PWlzQ2FsbGFibGVNYXJrZXIpe3JldHVybiBmYWxzZX19cmV0dXJuIWlzRVM2Q2xhc3NGbih2YWx1ZSkmJnRyeUZ1bmN0aW9uT2JqZWN0KHZhbHVlKX06ZnVuY3Rpb24gaXNDYWxsYWJsZSh2YWx1ZSl7aWYoaXNEREEodmFsdWUpKXtyZXR1cm4gdHJ1ZX1pZighdmFsdWUpe3JldHVybiBmYWxzZX1pZih0eXBlb2YgdmFsdWUhPT0iZnVuY3Rpb24iJiZ0eXBlb2YgdmFsdWUhPT0ib2JqZWN0Iil7cmV0dXJuIGZhbHNlfWlmKGhhc1RvU3RyaW5nVGFnKXtyZXR1cm4gdHJ5RnVuY3Rpb25PYmplY3QodmFsdWUpfWlmKGlzRVM2Q2xhc3NGbih2YWx1ZSkpe3JldHVybiBmYWxzZX12YXIgc3RyQ2xhc3M9dG9TdHIuY2FsbCh2YWx1ZSk7aWYoc3RyQ2xhc3MhPT1mbkNsYXNzJiZzdHJDbGFzcyE9PWdlbkNsYXNzJiYhL15cW29iamVjdCBIVE1MLy50ZXN0KHN0ckNsYXNzKSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnlGdW5jdGlvbk9iamVjdCh2YWx1ZSl9fSx7fV0sMzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgdG9TdHI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzt2YXIgZm5Ub1N0cj1GdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7dmFyIGlzRm5SZWdleD0vXlxzKig/OmZ1bmN0aW9uKT9cKi87dmFyIGhhc1RvU3RyaW5nVGFnPXJlcXVpcmUoImhhcy10b3N0cmluZ3RhZy9zaGFtcyIpKCk7dmFyIGdldFByb3RvPU9iamVjdC5nZXRQcm90b3R5cGVPZjt2YXIgZ2V0R2VuZXJhdG9yRnVuYz1mdW5jdGlvbigpe2lmKCFoYXNUb1N0cmluZ1RhZyl7cmV0dXJuIGZhbHNlfXRyeXtyZXR1cm4gRnVuY3Rpb24oInJldHVybiBmdW5jdGlvbiooKSB7fSIpKCl9Y2F0Y2goZSl7fX07dmFyIEdlbmVyYXRvckZ1bmN0aW9uO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIGlzR2VuZXJhdG9yRnVuY3Rpb24oZm4pe2lmKHR5cGVvZiBmbiE9PSJmdW5jdGlvbiIpe3JldHVybiBmYWxzZX1pZihpc0ZuUmVnZXgudGVzdChmblRvU3RyLmNhbGwoZm4pKSl7cmV0dXJuIHRydWV9aWYoIWhhc1RvU3RyaW5nVGFnKXt2YXIgc3RyPXRvU3RyLmNhbGwoZm4pO3JldHVybiBzdHI9PT0iW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0ifWlmKCFnZXRQcm90byl7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBHZW5lcmF0b3JGdW5jdGlvbj09PSJ1bmRlZmluZWQiKXt2YXIgZ2VuZXJhdG9yRnVuYz1nZXRHZW5lcmF0b3JGdW5jKCk7R2VuZXJhdG9yRnVuY3Rpb249Z2VuZXJhdG9yRnVuYz9nZXRQcm90byhnZW5lcmF0b3JGdW5jKTpmYWxzZX1yZXR1cm4gZ2V0UHJvdG8oZm4pPT09R2VuZXJhdG9yRnVuY3Rpb259fSx7Imhhcy10b3N0cmluZ3RhZy9zaGFtcyI6MjV9XSwzMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBmb3JFYWNoPXJlcXVpcmUoImZvci1lYWNoIik7dmFyIGF2YWlsYWJsZVR5cGVkQXJyYXlzPXJlcXVpcmUoImF2YWlsYWJsZS10eXBlZC1hcnJheXMiKTt2YXIgY2FsbEJvdW5kPXJlcXVpcmUoImNhbGwtYmluZC9jYWxsQm91bmQiKTt2YXIgJHRvU3RyaW5nPWNhbGxCb3VuZCgiT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyIpO3ZhciBoYXNUb1N0cmluZ1RhZz1yZXF1aXJlKCJoYXMtdG9zdHJpbmd0YWcvc2hhbXMiKSgpO3ZhciBnT1BEPXJlcXVpcmUoImdvcGQiKTt2YXIgZz10eXBlb2YgZ2xvYmFsVGhpcz09PSJ1bmRlZmluZWQiP2dsb2JhbDpnbG9iYWxUaGlzO3ZhciB0eXBlZEFycmF5cz1hdmFpbGFibGVUeXBlZEFycmF5cygpO3ZhciAkaW5kZXhPZj1jYWxsQm91bmQoIkFycmF5LnByb3RvdHlwZS5pbmRleE9mIix0cnVlKXx8ZnVuY3Rpb24gaW5kZXhPZihhcnJheSx2YWx1ZSl7Zm9yKHZhciBpPTA7aTxhcnJheS5sZW5ndGg7aSs9MSl7aWYoYXJyYXlbaV09PT12YWx1ZSl7cmV0dXJuIGl9fXJldHVybi0xfTt2YXIgJHNsaWNlPWNhbGxCb3VuZCgiU3RyaW5nLnByb3RvdHlwZS5zbGljZSIpO3ZhciB0b1N0clRhZ3M9e307dmFyIGdldFByb3RvdHlwZU9mPU9iamVjdC5nZXRQcm90b3R5cGVPZjtpZihoYXNUb1N0cmluZ1RhZyYmZ09QRCYmZ2V0UHJvdG90eXBlT2Ype2ZvckVhY2godHlwZWRBcnJheXMsZnVuY3Rpb24odHlwZWRBcnJheSl7dmFyIGFycj1uZXcgZ1t0eXBlZEFycmF5XTtpZihTeW1ib2wudG9TdHJpbmdUYWcgaW4gYXJyKXt2YXIgcHJvdG89Z2V0UHJvdG90eXBlT2YoYXJyKTt2YXIgZGVzY3JpcHRvcj1nT1BEKHByb3RvLFN5bWJvbC50b1N0cmluZ1RhZyk7aWYoIWRlc2NyaXB0b3Ipe3ZhciBzdXBlclByb3RvPWdldFByb3RvdHlwZU9mKHByb3RvKTtkZXNjcmlwdG9yPWdPUEQoc3VwZXJQcm90byxTeW1ib2wudG9TdHJpbmdUYWcpfXRvU3RyVGFnc1t0eXBlZEFycmF5XT1kZXNjcmlwdG9yLmdldH19KX12YXIgdHJ5VHlwZWRBcnJheXM9ZnVuY3Rpb24gdHJ5QWxsVHlwZWRBcnJheXModmFsdWUpe3ZhciBhbnlUcnVlPWZhbHNlO2ZvckVhY2godG9TdHJUYWdzLGZ1bmN0aW9uKGdldHRlcix0eXBlZEFycmF5KXtpZighYW55VHJ1ZSl7dHJ5e2FueVRydWU9Z2V0dGVyLmNhbGwodmFsdWUpPT09dHlwZWRBcnJheX1jYXRjaChlKXt9fX0pO3JldHVybiBhbnlUcnVlfTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpe2lmKCF2YWx1ZXx8dHlwZW9mIHZhbHVlIT09Im9iamVjdCIpe3JldHVybiBmYWxzZX1pZighaGFzVG9TdHJpbmdUYWd8fCEoU3ltYm9sLnRvU3RyaW5nVGFnIGluIHZhbHVlKSl7dmFyIHRhZz0kc2xpY2UoJHRvU3RyaW5nKHZhbHVlKSw4LC0xKTtyZXR1cm4gJGluZGV4T2YodHlwZWRBcnJheXMsdGFnKT4tMX1pZighZ09QRCl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnlUeXBlZEFycmF5cyh2YWx1ZSl9fSkuY2FsbCh0aGlzKX0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9KX0seyJhdmFpbGFibGUtdHlwZWQtYXJyYXlzIjo1LCJjYWxsLWJpbmQvY2FsbEJvdW5kIjoxMCwiZm9yLWVhY2giOjE3LGdvcGQ6MjEsImhhcy10b3N0cmluZ3RhZy9zaGFtcyI6MjV9XSwzNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKHByb2Nlc3MsZ2xvYmFsKXsoZnVuY3Rpb24oKXsoZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIElOUFVUX0VSUk9SPSJpbnB1dCBpcyBpbnZhbGlkIHR5cGUiO3ZhciBGSU5BTElaRV9FUlJPUj0iZmluYWxpemUgYWxyZWFkeSBjYWxsZWQiO3ZhciBXSU5ET1c9dHlwZW9mIHdpbmRvdz09PSJvYmplY3QiO3ZhciByb290PVdJTkRPVz93aW5kb3c6e307aWYocm9vdC5KU19TSEEzX05PX1dJTkRPVyl7V0lORE9XPWZhbHNlfXZhciBXRUJfV09SS0VSPSFXSU5ET1cmJnR5cGVvZiBzZWxmPT09Im9iamVjdCI7dmFyIE5PREVfSlM9IXJvb3QuSlNfU0hBM19OT19OT0RFX0pTJiZ0eXBlb2YgcHJvY2Vzcz09PSJvYmplY3QiJiZwcm9jZXNzLnZlcnNpb25zJiZwcm9jZXNzLnZlcnNpb25zLm5vZGU7aWYoTk9ERV9KUyl7cm9vdD1nbG9iYWx9ZWxzZSBpZihXRUJfV09SS0VSKXtyb290PXNlbGZ9dmFyIENPTU1PTl9KUz0hcm9vdC5KU19TSEEzX05PX0NPTU1PTl9KUyYmdHlwZW9mIG1vZHVsZT09PSJvYmplY3QiJiZtb2R1bGUuZXhwb3J0czt2YXIgQU1EPXR5cGVvZiBkZWZpbmU9PT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kO3ZhciBBUlJBWV9CVUZGRVI9IXJvb3QuSlNfU0hBM19OT19BUlJBWV9CVUZGRVImJnR5cGVvZiBBcnJheUJ1ZmZlciE9PSJ1bmRlZmluZWQiO3ZhciBIRVhfQ0hBUlM9IjAxMjM0NTY3ODlhYmNkZWYiLnNwbGl0KCIiKTt2YXIgU0hBS0VfUEFERElORz1bMzEsNzkzNiwyMDMxNjE2LDUyMDA5MzY5Nl07dmFyIENTSEFLRV9QQURESU5HPVs0LDEwMjQsMjYyMTQ0LDY3MTA4ODY0XTt2YXIgS0VDQ0FLX1BBRERJTkc9WzEsMjU2LDY1NTM2LDE2Nzc3MjE2XTt2YXIgUEFERElORz1bNiwxNTM2LDM5MzIxNiwxMDA2NjMyOTZdO3ZhciBTSElGVD1bMCw4LDE2LDI0XTt2YXIgUkM9WzEsMCwzMjg5OCwwLDMyOTA2LDIxNDc0ODM2NDgsMjE0NzUxNjQxNiwyMTQ3NDgzNjQ4LDMyOTA3LDAsMjE0NzQ4MzY0OSwwLDIxNDc1MTY1NDUsMjE0NzQ4MzY0OCwzMjc3NywyMTQ3NDgzNjQ4LDEzOCwwLDEzNiwwLDIxNDc1MTY0MjUsMCwyMTQ3NDgzNjU4LDAsMjE0NzUxNjU1NSwwLDEzOSwyMTQ3NDgzNjQ4LDMyOTA1LDIxNDc0ODM2NDgsMzI3NzEsMjE0NzQ4MzY0OCwzMjc3MCwyMTQ3NDgzNjQ4LDEyOCwyMTQ3NDgzNjQ4LDMyNzc4LDAsMjE0NzQ4MzY1OCwyMTQ3NDgzNjQ4LDIxNDc1MTY1NDUsMjE0NzQ4MzY0OCwzMjg5NiwyMTQ3NDgzNjQ4LDIxNDc0ODM2NDksMCwyMTQ3NTE2NDI0LDIxNDc0ODM2NDhdO3ZhciBCSVRTPVsyMjQsMjU2LDM4NCw1MTJdO3ZhciBTSEFLRV9CSVRTPVsxMjgsMjU2XTt2YXIgT1VUUFVUX1RZUEVTPVsiaGV4IiwiYnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJhcnJheSIsImRpZ2VzdCJdO3ZhciBDU0hBS0VfQllURVBBRD17MTI4OjE2OCwyNTY6MTM2fTtpZihyb290LkpTX1NIQTNfTk9fTk9ERV9KU3x8IUFycmF5LmlzQXJyYXkpe0FycmF5LmlzQXJyYXk9ZnVuY3Rpb24ob2JqKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik9PT0iW29iamVjdCBBcnJheV0ifX1pZihBUlJBWV9CVUZGRVImJihyb290LkpTX1NIQTNfTk9fQVJSQVlfQlVGRkVSX0lTX1ZJRVd8fCFBcnJheUJ1ZmZlci5pc1ZpZXcpKXtBcnJheUJ1ZmZlci5pc1ZpZXc9ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iaj09PSJvYmplY3QiJiZvYmouYnVmZmVyJiZvYmouYnVmZmVyLmNvbnN0cnVjdG9yPT09QXJyYXlCdWZmZXJ9fXZhciBjcmVhdGVPdXRwdXRNZXRob2Q9ZnVuY3Rpb24oYml0cyxwYWRkaW5nLG91dHB1dFR5cGUpe3JldHVybiBmdW5jdGlvbihtZXNzYWdlKXtyZXR1cm4gbmV3IEtlY2NhayhiaXRzLHBhZGRpbmcsYml0cykudXBkYXRlKG1lc3NhZ2UpW291dHB1dFR5cGVdKCl9fTt2YXIgY3JlYXRlU2hha2VPdXRwdXRNZXRob2Q9ZnVuY3Rpb24oYml0cyxwYWRkaW5nLG91dHB1dFR5cGUpe3JldHVybiBmdW5jdGlvbihtZXNzYWdlLG91dHB1dEJpdHMpe3JldHVybiBuZXcgS2VjY2FrKGJpdHMscGFkZGluZyxvdXRwdXRCaXRzKS51cGRhdGUobWVzc2FnZSlbb3V0cHV0VHlwZV0oKX19O3ZhciBjcmVhdGVDc2hha2VPdXRwdXRNZXRob2Q9ZnVuY3Rpb24oYml0cyxwYWRkaW5nLG91dHB1dFR5cGUpe3JldHVybiBmdW5jdGlvbihtZXNzYWdlLG91dHB1dEJpdHMsbixzKXtyZXR1cm4gbWV0aG9kc1siY3NoYWtlIitiaXRzXS51cGRhdGUobWVzc2FnZSxvdXRwdXRCaXRzLG4scylbb3V0cHV0VHlwZV0oKX19O3ZhciBjcmVhdGVLbWFjT3V0cHV0TWV0aG9kPWZ1bmN0aW9uKGJpdHMscGFkZGluZyxvdXRwdXRUeXBlKXtyZXR1cm4gZnVuY3Rpb24oa2V5LG1lc3NhZ2Usb3V0cHV0Qml0cyxzKXtyZXR1cm4gbWV0aG9kc1sia21hYyIrYml0c10udXBkYXRlKGtleSxtZXNzYWdlLG91dHB1dEJpdHMscylbb3V0cHV0VHlwZV0oKX19O3ZhciBjcmVhdGVPdXRwdXRNZXRob2RzPWZ1bmN0aW9uKG1ldGhvZCxjcmVhdGVNZXRob2QsYml0cyxwYWRkaW5nKXtmb3IodmFyIGk9MDtpPE9VVFBVVF9UWVBFUy5sZW5ndGg7KytpKXt2YXIgdHlwZT1PVVRQVVRfVFlQRVNbaV07bWV0aG9kW3R5cGVdPWNyZWF0ZU1ldGhvZChiaXRzLHBhZGRpbmcsdHlwZSl9cmV0dXJuIG1ldGhvZH07dmFyIGNyZWF0ZU1ldGhvZD1mdW5jdGlvbihiaXRzLHBhZGRpbmcpe3ZhciBtZXRob2Q9Y3JlYXRlT3V0cHV0TWV0aG9kKGJpdHMscGFkZGluZywiaGV4Iik7bWV0aG9kLmNyZWF0ZT1mdW5jdGlvbigpe3JldHVybiBuZXcgS2VjY2FrKGJpdHMscGFkZGluZyxiaXRzKX07bWV0aG9kLnVwZGF0ZT1mdW5jdGlvbihtZXNzYWdlKXtyZXR1cm4gbWV0aG9kLmNyZWF0ZSgpLnVwZGF0ZShtZXNzYWdlKX07cmV0dXJuIGNyZWF0ZU91dHB1dE1ldGhvZHMobWV0aG9kLGNyZWF0ZU91dHB1dE1ldGhvZCxiaXRzLHBhZGRpbmcpfTt2YXIgY3JlYXRlU2hha2VNZXRob2Q9ZnVuY3Rpb24oYml0cyxwYWRkaW5nKXt2YXIgbWV0aG9kPWNyZWF0ZVNoYWtlT3V0cHV0TWV0aG9kKGJpdHMscGFkZGluZywiaGV4Iik7bWV0aG9kLmNyZWF0ZT1mdW5jdGlvbihvdXRwdXRCaXRzKXtyZXR1cm4gbmV3IEtlY2NhayhiaXRzLHBhZGRpbmcsb3V0cHV0Qml0cyl9O21ldGhvZC51cGRhdGU9ZnVuY3Rpb24obWVzc2FnZSxvdXRwdXRCaXRzKXtyZXR1cm4gbWV0aG9kLmNyZWF0ZShvdXRwdXRCaXRzKS51cGRhdGUobWVzc2FnZSl9O3JldHVybiBjcmVhdGVPdXRwdXRNZXRob2RzKG1ldGhvZCxjcmVhdGVTaGFrZU91dHB1dE1ldGhvZCxiaXRzLHBhZGRpbmcpfTt2YXIgY3JlYXRlQ3NoYWtlTWV0aG9kPWZ1bmN0aW9uKGJpdHMscGFkZGluZyl7dmFyIHc9Q1NIQUtFX0JZVEVQQURbYml0c107dmFyIG1ldGhvZD1jcmVhdGVDc2hha2VPdXRwdXRNZXRob2QoYml0cyxwYWRkaW5nLCJoZXgiKTttZXRob2QuY3JlYXRlPWZ1bmN0aW9uKG91dHB1dEJpdHMsbixzKXtpZighbiYmIXMpe3JldHVybiBtZXRob2RzWyJzaGFrZSIrYml0c10uY3JlYXRlKG91dHB1dEJpdHMpfWVsc2V7cmV0dXJuIG5ldyBLZWNjYWsoYml0cyxwYWRkaW5nLG91dHB1dEJpdHMpLmJ5dGVwYWQoW24sc10sdyl9fTttZXRob2QudXBkYXRlPWZ1bmN0aW9uKG1lc3NhZ2Usb3V0cHV0Qml0cyxuLHMpe3JldHVybiBtZXRob2QuY3JlYXRlKG91dHB1dEJpdHMsbixzKS51cGRhdGUobWVzc2FnZSl9O3JldHVybiBjcmVhdGVPdXRwdXRNZXRob2RzKG1ldGhvZCxjcmVhdGVDc2hha2VPdXRwdXRNZXRob2QsYml0cyxwYWRkaW5nKX07dmFyIGNyZWF0ZUttYWNNZXRob2Q9ZnVuY3Rpb24oYml0cyxwYWRkaW5nKXt2YXIgdz1DU0hBS0VfQllURVBBRFtiaXRzXTt2YXIgbWV0aG9kPWNyZWF0ZUttYWNPdXRwdXRNZXRob2QoYml0cyxwYWRkaW5nLCJoZXgiKTttZXRob2QuY3JlYXRlPWZ1bmN0aW9uKGtleSxvdXRwdXRCaXRzLHMpe3JldHVybiBuZXcgS21hYyhiaXRzLHBhZGRpbmcsb3V0cHV0Qml0cykuYnl0ZXBhZChbIktNQUMiLHNdLHcpLmJ5dGVwYWQoW2tleV0sdyl9O21ldGhvZC51cGRhdGU9ZnVuY3Rpb24oa2V5LG1lc3NhZ2Usb3V0cHV0Qml0cyxzKXtyZXR1cm4gbWV0aG9kLmNyZWF0ZShrZXksb3V0cHV0Qml0cyxzKS51cGRhdGUobWVzc2FnZSl9O3JldHVybiBjcmVhdGVPdXRwdXRNZXRob2RzKG1ldGhvZCxjcmVhdGVLbWFjT3V0cHV0TWV0aG9kLGJpdHMscGFkZGluZyl9O3ZhciBhbGdvcml0aG1zPVt7bmFtZToia2VjY2FrIixwYWRkaW5nOktFQ0NBS19QQURESU5HLGJpdHM6QklUUyxjcmVhdGVNZXRob2Q6Y3JlYXRlTWV0aG9kfSx7bmFtZToic2hhMyIscGFkZGluZzpQQURESU5HLGJpdHM6QklUUyxjcmVhdGVNZXRob2Q6Y3JlYXRlTWV0aG9kfSx7bmFtZToic2hha2UiLHBhZGRpbmc6U0hBS0VfUEFERElORyxiaXRzOlNIQUtFX0JJVFMsY3JlYXRlTWV0aG9kOmNyZWF0ZVNoYWtlTWV0aG9kfSx7bmFtZToiY3NoYWtlIixwYWRkaW5nOkNTSEFLRV9QQURESU5HLGJpdHM6U0hBS0VfQklUUyxjcmVhdGVNZXRob2Q6Y3JlYXRlQ3NoYWtlTWV0aG9kfSx7bmFtZToia21hYyIscGFkZGluZzpDU0hBS0VfUEFERElORyxiaXRzOlNIQUtFX0JJVFMsY3JlYXRlTWV0aG9kOmNyZWF0ZUttYWNNZXRob2R9XTt2YXIgbWV0aG9kcz17fSxtZXRob2ROYW1lcz1bXTtmb3IodmFyIGk9MDtpPGFsZ29yaXRobXMubGVuZ3RoOysraSl7dmFyIGFsZ29yaXRobT1hbGdvcml0aG1zW2ldO3ZhciBiaXRzPWFsZ29yaXRobS5iaXRzO2Zvcih2YXIgaj0wO2o8Yml0cy5sZW5ndGg7KytqKXt2YXIgbWV0aG9kTmFtZT1hbGdvcml0aG0ubmFtZSsiXyIrYml0c1tqXTttZXRob2ROYW1lcy5wdXNoKG1ldGhvZE5hbWUpO21ldGhvZHNbbWV0aG9kTmFtZV09YWxnb3JpdGhtLmNyZWF0ZU1ldGhvZChiaXRzW2pdLGFsZ29yaXRobS5wYWRkaW5nKTtpZihhbGdvcml0aG0ubmFtZSE9PSJzaGEzIil7dmFyIG5ld01ldGhvZE5hbWU9YWxnb3JpdGhtLm5hbWUrYml0c1tqXTttZXRob2ROYW1lcy5wdXNoKG5ld01ldGhvZE5hbWUpO21ldGhvZHNbbmV3TWV0aG9kTmFtZV09bWV0aG9kc1ttZXRob2ROYW1lXX19fWZ1bmN0aW9uIEtlY2NhayhiaXRzLHBhZGRpbmcsb3V0cHV0Qml0cyl7dGhpcy5ibG9ja3M9W107dGhpcy5zPVtdO3RoaXMucGFkZGluZz1wYWRkaW5nO3RoaXMub3V0cHV0Qml0cz1vdXRwdXRCaXRzO3RoaXMucmVzZXQ9dHJ1ZTt0aGlzLmZpbmFsaXplZD1mYWxzZTt0aGlzLmJsb2NrPTA7dGhpcy5zdGFydD0wO3RoaXMuYmxvY2tDb3VudD0xNjAwLShiaXRzPDwxKT4+NTt0aGlzLmJ5dGVDb3VudD10aGlzLmJsb2NrQ291bnQ8PDI7dGhpcy5vdXRwdXRCbG9ja3M9b3V0cHV0Qml0cz4+NTt0aGlzLmV4dHJhQnl0ZXM9KG91dHB1dEJpdHMmMzEpPj4zO2Zvcih2YXIgaT0wO2k8NTA7KytpKXt0aGlzLnNbaV09MH19S2VjY2FrLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24obWVzc2FnZSl7aWYodGhpcy5maW5hbGl6ZWQpe3Rocm93IG5ldyBFcnJvcihGSU5BTElaRV9FUlJPUil9dmFyIG5vdFN0cmluZyx0eXBlPXR5cGVvZiBtZXNzYWdlO2lmKHR5cGUhPT0ic3RyaW5nIil7aWYodHlwZT09PSJvYmplY3QiKXtpZihtZXNzYWdlPT09bnVsbCl7dGhyb3cgbmV3IEVycm9yKElOUFVUX0VSUk9SKX1lbHNlIGlmKEFSUkFZX0JVRkZFUiYmbWVzc2FnZS5jb25zdHJ1Y3Rvcj09PUFycmF5QnVmZmVyKXttZXNzYWdlPW5ldyBVaW50OEFycmF5KG1lc3NhZ2UpfWVsc2UgaWYoIUFycmF5LmlzQXJyYXkobWVzc2FnZSkpe2lmKCFBUlJBWV9CVUZGRVJ8fCFBcnJheUJ1ZmZlci5pc1ZpZXcobWVzc2FnZSkpe3Rocm93IG5ldyBFcnJvcihJTlBVVF9FUlJPUil9fX1lbHNle3Rocm93IG5ldyBFcnJvcihJTlBVVF9FUlJPUil9bm90U3RyaW5nPXRydWV9dmFyIGJsb2Nrcz10aGlzLmJsb2NrcyxieXRlQ291bnQ9dGhpcy5ieXRlQ291bnQsbGVuZ3RoPW1lc3NhZ2UubGVuZ3RoLGJsb2NrQ291bnQ9dGhpcy5ibG9ja0NvdW50LGluZGV4PTAscz10aGlzLnMsaSxjb2RlO3doaWxlKGluZGV4PGxlbmd0aCl7aWYodGhpcy5yZXNldCl7dGhpcy5yZXNldD1mYWxzZTtibG9ja3NbMF09dGhpcy5ibG9jaztmb3IoaT0xO2k8YmxvY2tDb3VudCsxOysraSl7YmxvY2tzW2ldPTB9fWlmKG5vdFN0cmluZyl7Zm9yKGk9dGhpcy5zdGFydDtpbmRleDxsZW5ndGgmJmk8Ynl0ZUNvdW50OysraW5kZXgpe2Jsb2Nrc1tpPj4yXXw9bWVzc2FnZVtpbmRleF08PFNISUZUW2krKyYzXX19ZWxzZXtmb3IoaT10aGlzLnN0YXJ0O2luZGV4PGxlbmd0aCYmaTxieXRlQ291bnQ7KytpbmRleCl7Y29kZT1tZXNzYWdlLmNoYXJDb2RlQXQoaW5kZXgpO2lmKGNvZGU8MTI4KXtibG9ja3NbaT4+Ml18PWNvZGU8PFNISUZUW2krKyYzXX1lbHNlIGlmKGNvZGU8MjA0OCl7YmxvY2tzW2k+PjJdfD0oMTkyfGNvZGU+PjYpPDxTSElGVFtpKysmM107YmxvY2tzW2k+PjJdfD0oMTI4fGNvZGUmNjMpPDxTSElGVFtpKysmM119ZWxzZSBpZihjb2RlPDU1Mjk2fHxjb2RlPj01NzM0NCl7YmxvY2tzW2k+PjJdfD0oMjI0fGNvZGU+PjEyKTw8U0hJRlRbaSsrJjNdO2Jsb2Nrc1tpPj4yXXw9KDEyOHxjb2RlPj42JjYzKTw8U0hJRlRbaSsrJjNdO2Jsb2Nrc1tpPj4yXXw9KDEyOHxjb2RlJjYzKTw8U0hJRlRbaSsrJjNdfWVsc2V7Y29kZT02NTUzNisoKGNvZGUmMTAyMyk8PDEwfG1lc3NhZ2UuY2hhckNvZGVBdCgrK2luZGV4KSYxMDIzKTtibG9ja3NbaT4+Ml18PSgyNDB8Y29kZT4+MTgpPDxTSElGVFtpKysmM107YmxvY2tzW2k+PjJdfD0oMTI4fGNvZGU+PjEyJjYzKTw8U0hJRlRbaSsrJjNdO2Jsb2Nrc1tpPj4yXXw9KDEyOHxjb2RlPj42JjYzKTw8U0hJRlRbaSsrJjNdO2Jsb2Nrc1tpPj4yXXw9KDEyOHxjb2RlJjYzKTw8U0hJRlRbaSsrJjNdfX19dGhpcy5sYXN0Qnl0ZUluZGV4PWk7aWYoaT49Ynl0ZUNvdW50KXt0aGlzLnN0YXJ0PWktYnl0ZUNvdW50O3RoaXMuYmxvY2s9YmxvY2tzW2Jsb2NrQ291bnRdO2ZvcihpPTA7aTxibG9ja0NvdW50OysraSl7c1tpXV49YmxvY2tzW2ldfWYocyk7dGhpcy5yZXNldD10cnVlfWVsc2V7dGhpcy5zdGFydD1pfX1yZXR1cm4gdGhpc307S2VjY2FrLnByb3RvdHlwZS5lbmNvZGU9ZnVuY3Rpb24oeCxyaWdodCl7dmFyIG89eCYyNTUsbj0xO3ZhciBieXRlcz1bb107eD14Pj44O289eCYyNTU7d2hpbGUobz4wKXtieXRlcy51bnNoaWZ0KG8pO3g9eD4+ODtvPXgmMjU1Oysrbn1pZihyaWdodCl7Ynl0ZXMucHVzaChuKX1lbHNle2J5dGVzLnVuc2hpZnQobil9dGhpcy51cGRhdGUoYnl0ZXMpO3JldHVybiBieXRlcy5sZW5ndGh9O0tlY2Nhay5wcm90b3R5cGUuZW5jb2RlU3RyaW5nPWZ1bmN0aW9uKHN0cil7dmFyIG5vdFN0cmluZyx0eXBlPXR5cGVvZiBzdHI7aWYodHlwZSE9PSJzdHJpbmciKXtpZih0eXBlPT09Im9iamVjdCIpe2lmKHN0cj09PW51bGwpe3Rocm93IG5ldyBFcnJvcihJTlBVVF9FUlJPUil9ZWxzZSBpZihBUlJBWV9CVUZGRVImJnN0ci5jb25zdHJ1Y3Rvcj09PUFycmF5QnVmZmVyKXtzdHI9bmV3IFVpbnQ4QXJyYXkoc3RyKX1lbHNlIGlmKCFBcnJheS5pc0FycmF5KHN0cikpe2lmKCFBUlJBWV9CVUZGRVJ8fCFBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyKSl7dGhyb3cgbmV3IEVycm9yKElOUFVUX0VSUk9SKX19fWVsc2V7dGhyb3cgbmV3IEVycm9yKElOUFVUX0VSUk9SKX1ub3RTdHJpbmc9dHJ1ZX12YXIgYnl0ZXM9MCxsZW5ndGg9c3RyLmxlbmd0aDtpZihub3RTdHJpbmcpe2J5dGVzPWxlbmd0aH1lbHNle2Zvcih2YXIgaT0wO2k8c3RyLmxlbmd0aDsrK2kpe3ZhciBjb2RlPXN0ci5jaGFyQ29kZUF0KGkpO2lmKGNvZGU8MTI4KXtieXRlcys9MX1lbHNlIGlmKGNvZGU8MjA0OCl7Ynl0ZXMrPTJ9ZWxzZSBpZihjb2RlPDU1Mjk2fHxjb2RlPj01NzM0NCl7Ynl0ZXMrPTN9ZWxzZXtjb2RlPTY1NTM2KygoY29kZSYxMDIzKTw8MTB8c3RyLmNoYXJDb2RlQXQoKytpKSYxMDIzKTtieXRlcys9NH19fWJ5dGVzKz10aGlzLmVuY29kZShieXRlcyo4KTt0aGlzLnVwZGF0ZShzdHIpO3JldHVybiBieXRlc307S2VjY2FrLnByb3RvdHlwZS5ieXRlcGFkPWZ1bmN0aW9uKHN0cnMsdyl7dmFyIGJ5dGVzPXRoaXMuZW5jb2RlKHcpO2Zvcih2YXIgaT0wO2k8c3Rycy5sZW5ndGg7KytpKXtieXRlcys9dGhpcy5lbmNvZGVTdHJpbmcoc3Ryc1tpXSl9dmFyIHBhZGRpbmdCeXRlcz13LWJ5dGVzJXc7dmFyIHplcm9zPVtdO3plcm9zLmxlbmd0aD1wYWRkaW5nQnl0ZXM7dGhpcy51cGRhdGUoemVyb3MpO3JldHVybiB0aGlzfTtLZWNjYWsucHJvdG90eXBlLmZpbmFsaXplPWZ1bmN0aW9uKCl7aWYodGhpcy5maW5hbGl6ZWQpe3JldHVybn10aGlzLmZpbmFsaXplZD10cnVlO3ZhciBibG9ja3M9dGhpcy5ibG9ja3MsaT10aGlzLmxhc3RCeXRlSW5kZXgsYmxvY2tDb3VudD10aGlzLmJsb2NrQ291bnQscz10aGlzLnM7YmxvY2tzW2k+PjJdfD10aGlzLnBhZGRpbmdbaSYzXTtpZih0aGlzLmxhc3RCeXRlSW5kZXg9PT10aGlzLmJ5dGVDb3VudCl7YmxvY2tzWzBdPWJsb2Nrc1tibG9ja0NvdW50XTtmb3IoaT0xO2k8YmxvY2tDb3VudCsxOysraSl7YmxvY2tzW2ldPTB9fWJsb2Nrc1tibG9ja0NvdW50LTFdfD0yMTQ3NDgzNjQ4O2ZvcihpPTA7aTxibG9ja0NvdW50OysraSl7c1tpXV49YmxvY2tzW2ldfWYocyl9O0tlY2Nhay5wcm90b3R5cGUudG9TdHJpbmc9S2VjY2FrLnByb3RvdHlwZS5oZXg9ZnVuY3Rpb24oKXt0aGlzLmZpbmFsaXplKCk7dmFyIGJsb2NrQ291bnQ9dGhpcy5ibG9ja0NvdW50LHM9dGhpcy5zLG91dHB1dEJsb2Nrcz10aGlzLm91dHB1dEJsb2NrcyxleHRyYUJ5dGVzPXRoaXMuZXh0cmFCeXRlcyxpPTAsaj0wO3ZhciBoZXg9IiIsYmxvY2s7d2hpbGUoajxvdXRwdXRCbG9ja3Mpe2ZvcihpPTA7aTxibG9ja0NvdW50JiZqPG91dHB1dEJsb2NrczsrK2ksKytqKXtibG9jaz1zW2ldO2hleCs9SEVYX0NIQVJTW2Jsb2NrPj40JjE1XStIRVhfQ0hBUlNbYmxvY2smMTVdK0hFWF9DSEFSU1tibG9jaz4+MTImMTVdK0hFWF9DSEFSU1tibG9jaz4+OCYxNV0rSEVYX0NIQVJTW2Jsb2NrPj4yMCYxNV0rSEVYX0NIQVJTW2Jsb2NrPj4xNiYxNV0rSEVYX0NIQVJTW2Jsb2NrPj4yOCYxNV0rSEVYX0NIQVJTW2Jsb2NrPj4yNCYxNV19aWYoaiVibG9ja0NvdW50PT09MCl7ZihzKTtpPTB9fWlmKGV4dHJhQnl0ZXMpe2Jsb2NrPXNbaV07aGV4Kz1IRVhfQ0hBUlNbYmxvY2s+PjQmMTVdK0hFWF9DSEFSU1tibG9jayYxNV07aWYoZXh0cmFCeXRlcz4xKXtoZXgrPUhFWF9DSEFSU1tibG9jaz4+MTImMTVdK0hFWF9DSEFSU1tibG9jaz4+OCYxNV19aWYoZXh0cmFCeXRlcz4yKXtoZXgrPUhFWF9DSEFSU1tibG9jaz4+MjAmMTVdK0hFWF9DSEFSU1tibG9jaz4+MTYmMTVdfX1yZXR1cm4gaGV4fTtLZWNjYWsucHJvdG90eXBlLmFycmF5QnVmZmVyPWZ1bmN0aW9uKCl7dGhpcy5maW5hbGl6ZSgpO3ZhciBibG9ja0NvdW50PXRoaXMuYmxvY2tDb3VudCxzPXRoaXMucyxvdXRwdXRCbG9ja3M9dGhpcy5vdXRwdXRCbG9ja3MsZXh0cmFCeXRlcz10aGlzLmV4dHJhQnl0ZXMsaT0wLGo9MDt2YXIgYnl0ZXM9dGhpcy5vdXRwdXRCaXRzPj4zO3ZhciBidWZmZXI7aWYoZXh0cmFCeXRlcyl7YnVmZmVyPW5ldyBBcnJheUJ1ZmZlcihvdXRwdXRCbG9ja3MrMTw8Mil9ZWxzZXtidWZmZXI9bmV3IEFycmF5QnVmZmVyKGJ5dGVzKX12YXIgYXJyYXk9bmV3IFVpbnQzMkFycmF5KGJ1ZmZlcik7d2hpbGUoajxvdXRwdXRCbG9ja3Mpe2ZvcihpPTA7aTxibG9ja0NvdW50JiZqPG91dHB1dEJsb2NrczsrK2ksKytqKXthcnJheVtqXT1zW2ldfWlmKGolYmxvY2tDb3VudD09PTApe2Yocyl9fWlmKGV4dHJhQnl0ZXMpe2FycmF5W2ldPXNbaV07YnVmZmVyPWJ1ZmZlci5zbGljZSgwLGJ5dGVzKX1yZXR1cm4gYnVmZmVyfTtLZWNjYWsucHJvdG90eXBlLmJ1ZmZlcj1LZWNjYWsucHJvdG90eXBlLmFycmF5QnVmZmVyO0tlY2Nhay5wcm90b3R5cGUuZGlnZXN0PUtlY2Nhay5wcm90b3R5cGUuYXJyYXk9ZnVuY3Rpb24oKXt0aGlzLmZpbmFsaXplKCk7dmFyIGJsb2NrQ291bnQ9dGhpcy5ibG9ja0NvdW50LHM9dGhpcy5zLG91dHB1dEJsb2Nrcz10aGlzLm91dHB1dEJsb2NrcyxleHRyYUJ5dGVzPXRoaXMuZXh0cmFCeXRlcyxpPTAsaj0wO3ZhciBhcnJheT1bXSxvZmZzZXQsYmxvY2s7d2hpbGUoajxvdXRwdXRCbG9ja3Mpe2ZvcihpPTA7aTxibG9ja0NvdW50JiZqPG91dHB1dEJsb2NrczsrK2ksKytqKXtvZmZzZXQ9ajw8MjtibG9jaz1zW2ldO2FycmF5W29mZnNldF09YmxvY2smMjU1O2FycmF5W29mZnNldCsxXT1ibG9jaz4+OCYyNTU7YXJyYXlbb2Zmc2V0KzJdPWJsb2NrPj4xNiYyNTU7YXJyYXlbb2Zmc2V0KzNdPWJsb2NrPj4yNCYyNTV9aWYoaiVibG9ja0NvdW50PT09MCl7ZihzKX19aWYoZXh0cmFCeXRlcyl7b2Zmc2V0PWo8PDI7YmxvY2s9c1tpXTthcnJheVtvZmZzZXRdPWJsb2NrJjI1NTtpZihleHRyYUJ5dGVzPjEpe2FycmF5W29mZnNldCsxXT1ibG9jaz4+OCYyNTV9aWYoZXh0cmFCeXRlcz4yKXthcnJheVtvZmZzZXQrMl09YmxvY2s+PjE2JjI1NX19cmV0dXJuIGFycmF5fTtmdW5jdGlvbiBLbWFjKGJpdHMscGFkZGluZyxvdXRwdXRCaXRzKXtLZWNjYWsuY2FsbCh0aGlzLGJpdHMscGFkZGluZyxvdXRwdXRCaXRzKX1LbWFjLnByb3RvdHlwZT1uZXcgS2VjY2FrO0ttYWMucHJvdG90eXBlLmZpbmFsaXplPWZ1bmN0aW9uKCl7dGhpcy5lbmNvZGUodGhpcy5vdXRwdXRCaXRzLHRydWUpO3JldHVybiBLZWNjYWsucHJvdG90eXBlLmZpbmFsaXplLmNhbGwodGhpcyl9O3ZhciBmPWZ1bmN0aW9uKHMpe3ZhciBoLGwsbixjMCxjMSxjMixjMyxjNCxjNSxjNixjNyxjOCxjOSxiMCxiMSxiMixiMyxiNCxiNSxiNixiNyxiOCxiOSxiMTAsYjExLGIxMixiMTMsYjE0LGIxNSxiMTYsYjE3LGIxOCxiMTksYjIwLGIyMSxiMjIsYjIzLGIyNCxiMjUsYjI2LGIyNyxiMjgsYjI5LGIzMCxiMzEsYjMyLGIzMyxiMzQsYjM1LGIzNixiMzcsYjM4LGIzOSxiNDAsYjQxLGI0MixiNDMsYjQ0LGI0NSxiNDYsYjQ3LGI0OCxiNDk7Zm9yKG49MDtuPDQ4O24rPTIpe2MwPXNbMF1ec1sxMF1ec1syMF1ec1szMF1ec1s0MF07YzE9c1sxXV5zWzExXV5zWzIxXV5zWzMxXV5zWzQxXTtjMj1zWzJdXnNbMTJdXnNbMjJdXnNbMzJdXnNbNDJdO2MzPXNbM11ec1sxM11ec1syM11ec1szM11ec1s0M107YzQ9c1s0XV5zWzE0XV5zWzI0XV5zWzM0XV5zWzQ0XTtjNT1zWzVdXnNbMTVdXnNbMjVdXnNbMzVdXnNbNDVdO2M2PXNbNl1ec1sxNl1ec1syNl1ec1szNl1ec1s0Nl07Yzc9c1s3XV5zWzE3XV5zWzI3XV5zWzM3XV5zWzQ3XTtjOD1zWzhdXnNbMThdXnNbMjhdXnNbMzhdXnNbNDhdO2M5PXNbOV1ec1sxOV1ec1syOV1ec1szOV1ec1s0OV07aD1jOF4oYzI8PDF8YzM+Pj4zMSk7bD1jOV4oYzM8PDF8YzI+Pj4zMSk7c1swXV49aDtzWzFdXj1sO3NbMTBdXj1oO3NbMTFdXj1sO3NbMjBdXj1oO3NbMjFdXj1sO3NbMzBdXj1oO3NbMzFdXj1sO3NbNDBdXj1oO3NbNDFdXj1sO2g9YzBeKGM0PDwxfGM1Pj4+MzEpO2w9YzFeKGM1PDwxfGM0Pj4+MzEpO3NbMl1ePWg7c1szXV49bDtzWzEyXV49aDtzWzEzXV49bDtzWzIyXV49aDtzWzIzXV49bDtzWzMyXV49aDtzWzMzXV49bDtzWzQyXV49aDtzWzQzXV49bDtoPWMyXihjNjw8MXxjNz4+PjMxKTtsPWMzXihjNzw8MXxjNj4+PjMxKTtzWzRdXj1oO3NbNV1ePWw7c1sxNF1ePWg7c1sxNV1ePWw7c1syNF1ePWg7c1syNV1ePWw7c1szNF1ePWg7c1szNV1ePWw7c1s0NF1ePWg7c1s0NV1ePWw7aD1jNF4oYzg8PDF8Yzk+Pj4zMSk7bD1jNV4oYzk8PDF8Yzg+Pj4zMSk7c1s2XV49aDtzWzddXj1sO3NbMTZdXj1oO3NbMTddXj1sO3NbMjZdXj1oO3NbMjddXj1sO3NbMzZdXj1oO3NbMzddXj1sO3NbNDZdXj1oO3NbNDddXj1sO2g9YzZeKGMwPDwxfGMxPj4+MzEpO2w9YzdeKGMxPDwxfGMwPj4+MzEpO3NbOF1ePWg7c1s5XV49bDtzWzE4XV49aDtzWzE5XV49bDtzWzI4XV49aDtzWzI5XV49bDtzWzM4XV49aDtzWzM5XV49bDtzWzQ4XV49aDtzWzQ5XV49bDtiMD1zWzBdO2IxPXNbMV07YjMyPXNbMTFdPDw0fHNbMTBdPj4+Mjg7YjMzPXNbMTBdPDw0fHNbMTFdPj4+Mjg7YjE0PXNbMjBdPDwzfHNbMjFdPj4+Mjk7YjE1PXNbMjFdPDwzfHNbMjBdPj4+Mjk7YjQ2PXNbMzFdPDw5fHNbMzBdPj4+MjM7YjQ3PXNbMzBdPDw5fHNbMzFdPj4+MjM7YjI4PXNbNDBdPDwxOHxzWzQxXT4+PjE0O2IyOT1zWzQxXTw8MTh8c1s0MF0+Pj4xNDtiMjA9c1syXTw8MXxzWzNdPj4+MzE7YjIxPXNbM108PDF8c1syXT4+PjMxO2IyPXNbMTNdPDwxMnxzWzEyXT4+PjIwO2IzPXNbMTJdPDwxMnxzWzEzXT4+PjIwO2IzND1zWzIyXTw8MTB8c1syM10+Pj4yMjtiMzU9c1syM108PDEwfHNbMjJdPj4+MjI7YjE2PXNbMzNdPDwxM3xzWzMyXT4+PjE5O2IxNz1zWzMyXTw8MTN8c1szM10+Pj4xOTtiNDg9c1s0Ml08PDJ8c1s0M10+Pj4zMDtiNDk9c1s0M108PDJ8c1s0Ml0+Pj4zMDtiNDA9c1s1XTw8MzB8c1s0XT4+PjI7YjQxPXNbNF08PDMwfHNbNV0+Pj4yO2IyMj1zWzE0XTw8NnxzWzE1XT4+PjI2O2IyMz1zWzE1XTw8NnxzWzE0XT4+PjI2O2I0PXNbMjVdPDwxMXxzWzI0XT4+PjIxO2I1PXNbMjRdPDwxMXxzWzI1XT4+PjIxO2IzNj1zWzM0XTw8MTV8c1szNV0+Pj4xNztiMzc9c1szNV08PDE1fHNbMzRdPj4+MTc7YjE4PXNbNDVdPDwyOXxzWzQ0XT4+PjM7YjE5PXNbNDRdPDwyOXxzWzQ1XT4+PjM7YjEwPXNbNl08PDI4fHNbN10+Pj40O2IxMT1zWzddPDwyOHxzWzZdPj4+NDtiNDI9c1sxN108PDIzfHNbMTZdPj4+OTtiNDM9c1sxNl08PDIzfHNbMTddPj4+OTtiMjQ9c1syNl08PDI1fHNbMjddPj4+NztiMjU9c1syN108PDI1fHNbMjZdPj4+NztiNj1zWzM2XTw8MjF8c1szN10+Pj4xMTtiNz1zWzM3XTw8MjF8c1szNl0+Pj4xMTtiMzg9c1s0N108PDI0fHNbNDZdPj4+ODtiMzk9c1s0Nl08PDI0fHNbNDddPj4+ODtiMzA9c1s4XTw8Mjd8c1s5XT4+PjU7YjMxPXNbOV08PDI3fHNbOF0+Pj41O2IxMj1zWzE4XTw8MjB8c1sxOV0+Pj4xMjtiMTM9c1sxOV08PDIwfHNbMThdPj4+MTI7YjQ0PXNbMjldPDw3fHNbMjhdPj4+MjU7YjQ1PXNbMjhdPDw3fHNbMjldPj4+MjU7YjI2PXNbMzhdPDw4fHNbMzldPj4+MjQ7YjI3PXNbMzldPDw4fHNbMzhdPj4+MjQ7Yjg9c1s0OF08PDE0fHNbNDldPj4+MTg7Yjk9c1s0OV08PDE0fHNbNDhdPj4+MTg7c1swXT1iMF5+YjImYjQ7c1sxXT1iMV5+YjMmYjU7c1sxMF09YjEwXn5iMTImYjE0O3NbMTFdPWIxMV5+YjEzJmIxNTtzWzIwXT1iMjBefmIyMiZiMjQ7c1syMV09YjIxXn5iMjMmYjI1O3NbMzBdPWIzMF5+YjMyJmIzNDtzWzMxXT1iMzFefmIzMyZiMzU7c1s0MF09YjQwXn5iNDImYjQ0O3NbNDFdPWI0MV5+YjQzJmI0NTtzWzJdPWIyXn5iNCZiNjtzWzNdPWIzXn5iNSZiNztzWzEyXT1iMTJefmIxNCZiMTY7c1sxM109YjEzXn5iMTUmYjE3O3NbMjJdPWIyMl5+YjI0JmIyNjtzWzIzXT1iMjNefmIyNSZiMjc7c1szMl09YjMyXn5iMzQmYjM2O3NbMzNdPWIzM15+YjM1JmIzNztzWzQyXT1iNDJefmI0NCZiNDY7c1s0M109YjQzXn5iNDUmYjQ3O3NbNF09YjRefmI2JmI4O3NbNV09YjVefmI3JmI5O3NbMTRdPWIxNF5+YjE2JmIxODtzWzE1XT1iMTVefmIxNyZiMTk7c1syNF09YjI0Xn5iMjYmYjI4O3NbMjVdPWIyNV5+YjI3JmIyOTtzWzM0XT1iMzRefmIzNiZiMzg7c1szNV09YjM1Xn5iMzcmYjM5O3NbNDRdPWI0NF5+YjQ2JmI0ODtzWzQ1XT1iNDVefmI0NyZiNDk7c1s2XT1iNl5+YjgmYjA7c1s3XT1iN15+YjkmYjE7c1sxNl09YjE2Xn5iMTgmYjEwO3NbMTddPWIxN15+YjE5JmIxMTtzWzI2XT1iMjZefmIyOCZiMjA7c1syN109YjI3Xn5iMjkmYjIxO3NbMzZdPWIzNl5+YjM4JmIzMDtzWzM3XT1iMzdefmIzOSZiMzE7c1s0Nl09YjQ2Xn5iNDgmYjQwO3NbNDddPWI0N15+YjQ5JmI0MTtzWzhdPWI4Xn5iMCZiMjtzWzldPWI5Xn5iMSZiMztzWzE4XT1iMThefmIxMCZiMTI7c1sxOV09YjE5Xn5iMTEmYjEzO3NbMjhdPWIyOF5+YjIwJmIyMjtzWzI5XT1iMjlefmIyMSZiMjM7c1szOF09YjM4Xn5iMzAmYjMyO3NbMzldPWIzOV5+YjMxJmIzMztzWzQ4XT1iNDhefmI0MCZiNDI7c1s0OV09YjQ5Xn5iNDEmYjQzO3NbMF1ePVJDW25dO3NbMV1ePVJDW24rMV19fTtpZihDT01NT05fSlMpe21vZHVsZS5leHBvcnRzPW1ldGhvZHN9ZWxzZXtmb3IoaT0wO2k8bWV0aG9kTmFtZXMubGVuZ3RoOysraSl7cm9vdFttZXRob2ROYW1lc1tpXV09bWV0aG9kc1ttZXRob2ROYW1lc1tpXV19aWYoQU1EKXtkZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gbWV0aG9kc30pfX19KSgpfSkuY2FsbCh0aGlzKX0pLmNhbGwodGhpcyxyZXF1aXJlKCJfcHJvY2VzcyIpLHR5cGVvZiBnbG9iYWwhPT0idW5kZWZpbmVkIj9nbG9iYWw6dHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30pfSx7X3Byb2Nlc3M6Mzl9XSwzNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKEJ1ZmZlcil7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBTVFJFQU09cmVxdWlyZSgic3RyZWFtIiksVVRJTD1yZXF1aXJlKCJ1dGlsIiksU3RyaW5nRGVjb2Rlcj1yZXF1aXJlKCJzdHJpbmdfZGVjb2RlciIpLlN0cmluZ0RlY29kZXI7ZnVuY3Rpb24gTWVtb3J5UmVhZGFibGVTdHJlYW0oZGF0YSxvcHRpb25zKXtpZighKHRoaXMgaW5zdGFuY2VvZiBNZW1vcnlSZWFkYWJsZVN0cmVhbSkpcmV0dXJuIG5ldyBNZW1vcnlSZWFkYWJsZVN0cmVhbShkYXRhLG9wdGlvbnMpO01lbW9yeVJlYWRhYmxlU3RyZWFtLnN1cGVyXy5jYWxsKHRoaXMsb3B0aW9ucyk7dGhpcy5pbml0KGRhdGEsb3B0aW9ucyl9VVRJTC5pbmhlcml0cyhNZW1vcnlSZWFkYWJsZVN0cmVhbSxTVFJFQU0uUmVhZGFibGUpO2Z1bmN0aW9uIE1lbW9yeVdyaXRhYmxlU3RyZWFtKGRhdGEsb3B0aW9ucyl7aWYoISh0aGlzIGluc3RhbmNlb2YgTWVtb3J5V3JpdGFibGVTdHJlYW0pKXJldHVybiBuZXcgTWVtb3J5V3JpdGFibGVTdHJlYW0oZGF0YSxvcHRpb25zKTtNZW1vcnlXcml0YWJsZVN0cmVhbS5zdXBlcl8uY2FsbCh0aGlzLG9wdGlvbnMpO3RoaXMuaW5pdChkYXRhLG9wdGlvbnMpfVVUSUwuaW5oZXJpdHMoTWVtb3J5V3JpdGFibGVTdHJlYW0sU1RSRUFNLldyaXRhYmxlKTtmdW5jdGlvbiBNZW1vcnlEdXBsZXhTdHJlYW0oZGF0YSxvcHRpb25zKXtpZighKHRoaXMgaW5zdGFuY2VvZiBNZW1vcnlEdXBsZXhTdHJlYW0pKXJldHVybiBuZXcgTWVtb3J5RHVwbGV4U3RyZWFtKGRhdGEsb3B0aW9ucyk7TWVtb3J5RHVwbGV4U3RyZWFtLnN1cGVyXy5jYWxsKHRoaXMsb3B0aW9ucyk7dGhpcy5pbml0KGRhdGEsb3B0aW9ucyl9VVRJTC5pbmhlcml0cyhNZW1vcnlEdXBsZXhTdHJlYW0sU1RSRUFNLkR1cGxleCk7TWVtb3J5UmVhZGFibGVTdHJlYW0ucHJvdG90eXBlLmluaXQ9TWVtb3J5V3JpdGFibGVTdHJlYW0ucHJvdG90eXBlLmluaXQ9TWVtb3J5RHVwbGV4U3RyZWFtLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uIGluaXQoZGF0YSxvcHRpb25zKXt2YXIgc2VsZj10aGlzO3RoaXMucXVldWU9W107aWYoZGF0YSl7aWYoIUFycmF5LmlzQXJyYXkoZGF0YSkpe2RhdGE9W2RhdGFdfWRhdGEuZm9yRWFjaChmdW5jdGlvbihjaHVuayl7aWYoIShjaHVuayBpbnN0YW5jZW9mIEJ1ZmZlcikpe2NodW5rPW5ldyBCdWZmZXIoY2h1bmspfXNlbGYucXVldWUucHVzaChjaHVuayl9KX1vcHRpb25zPW9wdGlvbnN8fHt9O3RoaXMubWF4YnVmc2l6ZT1vcHRpb25zLmhhc093blByb3BlcnR5KCJtYXhidWZzaXplIik/b3B0aW9ucy5tYXhidWZzaXplOm51bGw7dGhpcy5idWZvdmVyZmxvdz1vcHRpb25zLmhhc093blByb3BlcnR5KCJidWZvdmVyZmxvdyIpP29wdGlvbnMuYnVmb3ZlcmZsb3c6bnVsbDt0aGlzLmZyZXF1ZW5jZT1vcHRpb25zLmhhc093blByb3BlcnR5KCJmcmVxdWVuY2UiKT9vcHRpb25zLmZyZXF1ZW5jZTpudWxsfTtmdW5jdGlvbiBNZW1vcnlTdHJlYW0oZGF0YSxvcHRpb25zKXtpZighKHRoaXMgaW5zdGFuY2VvZiBNZW1vcnlTdHJlYW0pKXJldHVybiBuZXcgTWVtb3J5U3RyZWFtKGRhdGEsb3B0aW9ucyk7b3B0aW9ucz1vcHRpb25zfHx7fTt2YXIgcmVhZGFibGU9b3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgicmVhZGFibGUiKT9vcHRpb25zLnJlYWRhYmxlOnRydWUsd3JpdGFibGU9b3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgid3JpdGFibGUiKT9vcHRpb25zLndyaXRhYmxlOnRydWU7aWYocmVhZGFibGUmJndyaXRhYmxlKXtyZXR1cm4gbmV3IE1lbW9yeUR1cGxleFN0cmVhbShkYXRhLG9wdGlvbnMpfWVsc2UgaWYocmVhZGFibGUpe3JldHVybiBuZXcgTWVtb3J5UmVhZGFibGVTdHJlYW0oZGF0YSxvcHRpb25zKX1lbHNlIGlmKHdyaXRhYmxlKXtyZXR1cm4gbmV3IE1lbW9yeVdyaXRhYmxlU3RyZWFtKGRhdGEsb3B0aW9ucyl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gc3RyZWFtIHR5cGUgIFJlYWRhYmxlLCBXcml0YWJsZSBvciBEdXBsZXggIil9fU1lbW9yeVN0cmVhbS5jcmVhdGVSZWFkU3RyZWFtPWZ1bmN0aW9uKGRhdGEsb3B0aW9ucyl7b3B0aW9ucz1vcHRpb25zfHx7fTtvcHRpb25zLnJlYWRhYmxlPXRydWU7b3B0aW9ucy53cml0YWJsZT1mYWxzZTtyZXR1cm4gbmV3IE1lbW9yeVN0cmVhbShkYXRhLG9wdGlvbnMpfTtNZW1vcnlTdHJlYW0uY3JlYXRlV3JpdGVTdHJlYW09ZnVuY3Rpb24oZGF0YSxvcHRpb25zKXtvcHRpb25zPW9wdGlvbnN8fHt9O29wdGlvbnMucmVhZGFibGU9ZmFsc2U7b3B0aW9ucy53cml0YWJsZT10cnVlO3JldHVybiBuZXcgTWVtb3J5U3RyZWFtKGRhdGEsb3B0aW9ucyl9O01lbW9yeVJlYWRhYmxlU3RyZWFtLnByb3RvdHlwZS5fcmVhZD1NZW1vcnlEdXBsZXhTdHJlYW0ucHJvdG90eXBlLl9yZWFkPWZ1bmN0aW9uIF9yZWFkKG4pe3ZhciBzZWxmPXRoaXMsZnJlcXVlbmNlPXNlbGYuZnJlcXVlbmNlfHwwLHdhaXRfZGF0YT10aGlzIGluc3RhbmNlb2YgU1RSRUFNLkR1cGxleCYmIXRoaXMuX3dyaXRhYmxlU3RhdGUuZmluaXNoZWQ/dHJ1ZTpmYWxzZTtpZighdGhpcy5xdWV1ZS5sZW5ndGgmJiF3YWl0X2RhdGEpe3RoaXMucHVzaChudWxsKX1lbHNlIGlmKHRoaXMucXVldWUubGVuZ3RoKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoc2VsZi5xdWV1ZS5sZW5ndGgpe3ZhciBjaHVuaz1zZWxmLnF1ZXVlLnNoaWZ0KCk7aWYoY2h1bmsmJiFzZWxmLl9yZWFkYWJsZVN0YXRlLmVuZGVkKXtpZighc2VsZi5wdXNoKGNodW5rKSl7c2VsZi5xdWV1ZS51bnNoaWZ0KGNodW5rKX19fX0sZnJlcXVlbmNlKX19O01lbW9yeVdyaXRhYmxlU3RyZWFtLnByb3RvdHlwZS5fd3JpdGU9TWVtb3J5RHVwbGV4U3RyZWFtLnByb3RvdHlwZS5fd3JpdGU9ZnVuY3Rpb24gX3dyaXRlKGNodW5rLGVuY29kaW5nLGNiKXt2YXIgZGVjb2Rlcj1udWxsO3RyeXtkZWNvZGVyPXRoaXMuZGVjb2RlU3RyaW5ncyYmZW5jb2Rpbmc/bmV3IFN0cmluZ0RlY29kZXIoZW5jb2RpbmcpOm51bGx9Y2F0Y2goZXJyKXtyZXR1cm4gY2IoZXJyKX12YXIgZGVjb2RlZF9jaHVuaz1kZWNvZGVyP2RlY29kZXIud3JpdGUoY2h1bmspOmNodW5rLHF1ZXVlX3NpemU9dGhpcy5fZ2V0UXVldWVTaXplKCksY2h1bmtfc2l6ZT1kZWNvZGVkX2NodW5rLmxlbmd0aDtpZih0aGlzLm1heGJ1ZnNpemUmJnF1ZXVlX3NpemUrY2h1bmtfc2l6ZT50aGlzLm1heGJ1ZnNpemUpe2lmKHRoaXMuYnVmb3ZlcmZsb3cpe3JldHVybiBjYigiQnVmZmVyIG92ZXJmbG93ZWQgKCIrdGhpcy5idWZvdmVyZmxvdysiLyIrcXVldWVfc2l6ZSsiKSIpfWVsc2V7cmV0dXJuIGNiKCl9fWlmKHRoaXMgaW5zdGFuY2VvZiBTVFJFQU0uRHVwbGV4KXt3aGlsZSh0aGlzLnF1ZXVlLmxlbmd0aCl7dGhpcy5wdXNoKHRoaXMucXVldWUuc2hpZnQoKSl9dGhpcy5wdXNoKGRlY29kZWRfY2h1bmspfWVsc2V7dGhpcy5xdWV1ZS5wdXNoKGRlY29kZWRfY2h1bmspfWNiKCl9O01lbW9yeUR1cGxleFN0cmVhbS5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGNodW5rLGVuY29kaW5nLGNiKXt2YXIgc2VsZj10aGlzO3JldHVybiBNZW1vcnlEdXBsZXhTdHJlYW0uc3VwZXJfLnByb3RvdHlwZS5lbmQuY2FsbCh0aGlzLGNodW5rLGVuY29kaW5nLGZ1bmN0aW9uKCl7c2VsZi5wdXNoKG51bGwpO2lmKGNiKWNiKCl9KX07TWVtb3J5UmVhZGFibGVTdHJlYW0ucHJvdG90eXBlLl9nZXRRdWV1ZVNpemU9TWVtb3J5V3JpdGFibGVTdHJlYW0ucHJvdG90eXBlLl9nZXRRdWV1ZVNpemU9TWVtb3J5RHVwbGV4U3RyZWFtLnByb3RvdHlwZS5fZ2V0UXVldWVTaXplPWZ1bmN0aW9uKCl7dmFyIHF1ZXVlc2l6ZT0wLGk7Zm9yKGk9MDtpPHRoaXMucXVldWUubGVuZ3RoO2krKyl7cXVldWVzaXplKz1BcnJheS5pc0FycmF5KHRoaXMucXVldWVbaV0pP3RoaXMucXVldWVbaV1bMF0ubGVuZ3RoOnRoaXMucXVldWVbaV0ubGVuZ3RofXJldHVybiBxdWV1ZXNpemV9O01lbW9yeVdyaXRhYmxlU3RyZWFtLnByb3RvdHlwZS50b1N0cmluZz1NZW1vcnlEdXBsZXhTdHJlYW0ucHJvdG90eXBlLnRvU3RyaW5nPU1lbW9yeVJlYWRhYmxlU3RyZWFtLnByb3RvdHlwZS50b1N0cmluZz1NZW1vcnlXcml0YWJsZVN0cmVhbS5wcm90b3R5cGUuZ2V0QWxsPU1lbW9yeUR1cGxleFN0cmVhbS5wcm90b3R5cGUuZ2V0QWxsPU1lbW9yeVJlYWRhYmxlU3RyZWFtLnByb3RvdHlwZS5nZXRBbGw9ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzLHJldD0iIjt0aGlzLnF1ZXVlLmZvckVhY2goZnVuY3Rpb24oZGF0YSl7cmV0Kz1kYXRhfSk7cmV0dXJuIHJldH07TWVtb3J5V3JpdGFibGVTdHJlYW0ucHJvdG90eXBlLnRvQnVmZmVyPU1lbW9yeUR1cGxleFN0cmVhbS5wcm90b3R5cGUudG9CdWZmZXI9TWVtb3J5UmVhZGFibGVTdHJlYW0ucHJvdG90eXBlLnRvQnVmZmVyPWZ1bmN0aW9uKCl7dmFyIGJ1ZmZlcj1uZXcgQnVmZmVyKHRoaXMuX2dldFF1ZXVlU2l6ZSgpKSxjdXJyZW50T2Zmc2V0PTA7dGhpcy5xdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKGRhdGEpe3ZhciBkYXRhX2J1ZmZlcj1kYXRhIGluc3RhbmNlb2YgQnVmZmVyP2RhdGE6bmV3IEJ1ZmZlcihkYXRhKTtkYXRhX2J1ZmZlci5jb3B5KGJ1ZmZlcixjdXJyZW50T2Zmc2V0KTtjdXJyZW50T2Zmc2V0Kz1kYXRhLmxlbmd0aH0pO3JldHVybiBidWZmZXJ9O21vZHVsZS5leHBvcnRzPU1lbW9yeVN0cmVhbX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKX0se2J1ZmZlcjo4LHN0cmVhbTo1OCxzdHJpbmdfZGVjb2Rlcjo5Mix1dGlsOjk3fV0sMzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBzPTFlMzt2YXIgbT1zKjYwO3ZhciBoPW0qNjA7dmFyIGQ9aCoyNDt2YXIgdz1kKjc7dmFyIHk9ZCozNjUuMjU7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24odmFsLG9wdGlvbnMpe29wdGlvbnM9b3B0aW9uc3x8e307dmFyIHR5cGU9dHlwZW9mIHZhbDtpZih0eXBlPT09InN0cmluZyImJnZhbC5sZW5ndGg+MCl7cmV0dXJuIHBhcnNlKHZhbCl9ZWxzZSBpZih0eXBlPT09Im51bWJlciImJmlzRmluaXRlKHZhbCkpe3JldHVybiBvcHRpb25zLmxvbmc/Zm10TG9uZyh2YWwpOmZtdFNob3J0KHZhbCl9dGhyb3cgbmV3IEVycm9yKCJ2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIHZhbGlkIG51bWJlci4gdmFsPSIrSlNPTi5zdHJpbmdpZnkodmFsKSl9O2Z1bmN0aW9uIHBhcnNlKHN0cil7c3RyPVN0cmluZyhzdHIpO2lmKHN0ci5sZW5ndGg+MTAwKXtyZXR1cm59dmFyIG1hdGNoPS9eKC0/KD86XGQrKT9cLj9cZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhzdHIpO2lmKCFtYXRjaCl7cmV0dXJufXZhciBuPXBhcnNlRmxvYXQobWF0Y2hbMV0pO3ZhciB0eXBlPShtYXRjaFsyXXx8Im1zIikudG9Mb3dlckNhc2UoKTtzd2l0Y2godHlwZSl7Y2FzZSJ5ZWFycyI6Y2FzZSJ5ZWFyIjpjYXNlInlycyI6Y2FzZSJ5ciI6Y2FzZSJ5IjpyZXR1cm4gbip5O2Nhc2Uid2Vla3MiOmNhc2Uid2VlayI6Y2FzZSJ3IjpyZXR1cm4gbip3O2Nhc2UiZGF5cyI6Y2FzZSJkYXkiOmNhc2UiZCI6cmV0dXJuIG4qZDtjYXNlImhvdXJzIjpjYXNlImhvdXIiOmNhc2UiaHJzIjpjYXNlImhyIjpjYXNlImgiOnJldHVybiBuKmg7Y2FzZSJtaW51dGVzIjpjYXNlIm1pbnV0ZSI6Y2FzZSJtaW5zIjpjYXNlIm1pbiI6Y2FzZSJtIjpyZXR1cm4gbiptO2Nhc2Uic2Vjb25kcyI6Y2FzZSJzZWNvbmQiOmNhc2Uic2VjcyI6Y2FzZSJzZWMiOmNhc2UicyI6cmV0dXJuIG4qcztjYXNlIm1pbGxpc2Vjb25kcyI6Y2FzZSJtaWxsaXNlY29uZCI6Y2FzZSJtc2VjcyI6Y2FzZSJtc2VjIjpjYXNlIm1zIjpyZXR1cm4gbjtkZWZhdWx0OnJldHVybiB1bmRlZmluZWR9fWZ1bmN0aW9uIGZtdFNob3J0KG1zKXt2YXIgbXNBYnM9TWF0aC5hYnMobXMpO2lmKG1zQWJzPj1kKXtyZXR1cm4gTWF0aC5yb3VuZChtcy9kKSsiZCJ9aWYobXNBYnM+PWgpe3JldHVybiBNYXRoLnJvdW5kKG1zL2gpKyJoIn1pZihtc0Ficz49bSl7cmV0dXJuIE1hdGgucm91bmQobXMvbSkrIm0ifWlmKG1zQWJzPj1zKXtyZXR1cm4gTWF0aC5yb3VuZChtcy9zKSsicyJ9cmV0dXJuIG1zKyJtcyJ9ZnVuY3Rpb24gZm10TG9uZyhtcyl7dmFyIG1zQWJzPU1hdGguYWJzKG1zKTtpZihtc0Ficz49ZCl7cmV0dXJuIHBsdXJhbChtcyxtc0FicyxkLCJkYXkiKX1pZihtc0Ficz49aCl7cmV0dXJuIHBsdXJhbChtcyxtc0FicyxoLCJob3VyIil9aWYobXNBYnM+PW0pe3JldHVybiBwbHVyYWwobXMsbXNBYnMsbSwibWludXRlIil9aWYobXNBYnM+PXMpe3JldHVybiBwbHVyYWwobXMsbXNBYnMscywic2Vjb25kIil9cmV0dXJuIG1zKyIgbXMifWZ1bmN0aW9uIHBsdXJhbChtcyxtc0FicyxuLG5hbWUpe3ZhciBpc1BsdXJhbD1tc0Ficz49bioxLjU7cmV0dXJuIE1hdGgucm91bmQobXMvbikrIiAiK25hbWUrKGlzUGx1cmFsPyJzIjoiIil9fSx7fV0sMzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyIGhhc093blByb3BlcnR5PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIHByb3BJc0VudW1lcmFibGU9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtmdW5jdGlvbiB0b09iamVjdCh2YWwpe2lmKHZhbD09PW51bGx8fHZhbD09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQiKX1yZXR1cm4gT2JqZWN0KHZhbCl9ZnVuY3Rpb24gc2hvdWxkVXNlTmF0aXZlKCl7dHJ5e2lmKCFPYmplY3QuYXNzaWduKXtyZXR1cm4gZmFsc2V9dmFyIHRlc3QxPW5ldyBTdHJpbmcoImFiYyIpO3Rlc3QxWzVdPSJkZSI7aWYoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDEpWzBdPT09IjUiKXtyZXR1cm4gZmFsc2V9dmFyIHRlc3QyPXt9O2Zvcih2YXIgaT0wO2k8MTA7aSsrKXt0ZXN0MlsiXyIrU3RyaW5nLmZyb21DaGFyQ29kZShpKV09aX12YXIgb3JkZXIyPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QyKS5tYXAoZnVuY3Rpb24obil7cmV0dXJuIHRlc3QyW25dfSk7aWYob3JkZXIyLmpvaW4oIiIpIT09IjAxMjM0NTY3ODkiKXtyZXR1cm4gZmFsc2V9dmFyIHRlc3QzPXt9OyJhYmNkZWZnaGlqa2xtbm9wcXJzdCIuc3BsaXQoIiIpLmZvckVhY2goZnVuY3Rpb24obGV0dGVyKXt0ZXN0M1tsZXR0ZXJdPWxldHRlcn0pO2lmKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sdGVzdDMpKS5qb2luKCIiKSE9PSJhYmNkZWZnaGlqa2xtbm9wcXJzdCIpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX1jYXRjaChlcnIpe3JldHVybiBmYWxzZX19bW9kdWxlLmV4cG9ydHM9c2hvdWxkVXNlTmF0aXZlKCk/T2JqZWN0LmFzc2lnbjpmdW5jdGlvbih0YXJnZXQsc291cmNlKXt2YXIgZnJvbTt2YXIgdG89dG9PYmplY3QodGFyZ2V0KTt2YXIgc3ltYm9scztmb3IodmFyIHM9MTtzPGFyZ3VtZW50cy5sZW5ndGg7cysrKXtmcm9tPU9iamVjdChhcmd1bWVudHNbc10pO2Zvcih2YXIga2V5IGluIGZyb20pe2lmKGhhc093blByb3BlcnR5LmNhbGwoZnJvbSxrZXkpKXt0b1trZXldPWZyb21ba2V5XX19aWYoZ2V0T3duUHJvcGVydHlTeW1ib2xzKXtzeW1ib2xzPWdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTtmb3IodmFyIGk9MDtpPHN5bWJvbHMubGVuZ3RoO2krKyl7aWYocHJvcElzRW51bWVyYWJsZS5jYWxsKGZyb20sc3ltYm9sc1tpXSkpe3RvW3N5bWJvbHNbaV1dPWZyb21bc3ltYm9sc1tpXV19fX19cmV0dXJuIHRvfX0se31dLDM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXt2YXIgaGFzTWFwPXR5cGVvZiBNYXA9PT0iZnVuY3Rpb24iJiZNYXAucHJvdG90eXBlO3ZhciBtYXBTaXplRGVzY3JpcHRvcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJiZoYXNNYXA/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihNYXAucHJvdG90eXBlLCJzaXplIik6bnVsbDt2YXIgbWFwU2l6ZT1oYXNNYXAmJm1hcFNpemVEZXNjcmlwdG9yJiZ0eXBlb2YgbWFwU2l6ZURlc2NyaXB0b3IuZ2V0PT09ImZ1bmN0aW9uIj9tYXBTaXplRGVzY3JpcHRvci5nZXQ6bnVsbDt2YXIgbWFwRm9yRWFjaD1oYXNNYXAmJk1hcC5wcm90b3R5cGUuZm9yRWFjaDt2YXIgaGFzU2V0PXR5cGVvZiBTZXQ9PT0iZnVuY3Rpb24iJiZTZXQucHJvdG90eXBlO3ZhciBzZXRTaXplRGVzY3JpcHRvcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJiZoYXNTZXQ/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihTZXQucHJvdG90eXBlLCJzaXplIik6bnVsbDt2YXIgc2V0U2l6ZT1oYXNTZXQmJnNldFNpemVEZXNjcmlwdG9yJiZ0eXBlb2Ygc2V0U2l6ZURlc2NyaXB0b3IuZ2V0PT09ImZ1bmN0aW9uIj9zZXRTaXplRGVzY3JpcHRvci5nZXQ6bnVsbDt2YXIgc2V0Rm9yRWFjaD1oYXNTZXQmJlNldC5wcm90b3R5cGUuZm9yRWFjaDt2YXIgaGFzV2Vha01hcD10eXBlb2YgV2Vha01hcD09PSJmdW5jdGlvbiImJldlYWtNYXAucHJvdG90eXBlO3ZhciB3ZWFrTWFwSGFzPWhhc1dlYWtNYXA/V2Vha01hcC5wcm90b3R5cGUuaGFzOm51bGw7dmFyIGhhc1dlYWtTZXQ9dHlwZW9mIFdlYWtTZXQ9PT0iZnVuY3Rpb24iJiZXZWFrU2V0LnByb3RvdHlwZTt2YXIgd2Vha1NldEhhcz1oYXNXZWFrU2V0P1dlYWtTZXQucHJvdG90eXBlLmhhczpudWxsO3ZhciBoYXNXZWFrUmVmPXR5cGVvZiBXZWFrUmVmPT09ImZ1bmN0aW9uIiYmV2Vha1JlZi5wcm90b3R5cGU7dmFyIHdlYWtSZWZEZXJlZj1oYXNXZWFrUmVmP1dlYWtSZWYucHJvdG90eXBlLmRlcmVmOm51bGw7dmFyIGJvb2xlYW5WYWx1ZU9mPUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2Y7dmFyIG9iamVjdFRvU3RyaW5nPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dmFyIGZ1bmN0aW9uVG9TdHJpbmc9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO3ZhciAkbWF0Y2g9U3RyaW5nLnByb3RvdHlwZS5tYXRjaDt2YXIgJHNsaWNlPVN0cmluZy5wcm90b3R5cGUuc2xpY2U7dmFyICRyZXBsYWNlPVN0cmluZy5wcm90b3R5cGUucmVwbGFjZTt2YXIgJHRvVXBwZXJDYXNlPVN0cmluZy5wcm90b3R5cGUudG9VcHBlckNhc2U7dmFyICR0b0xvd2VyQ2FzZT1TdHJpbmcucHJvdG90eXBlLnRvTG93ZXJDYXNlO3ZhciAkdGVzdD1SZWdFeHAucHJvdG90eXBlLnRlc3Q7dmFyICRjb25jYXQ9QXJyYXkucHJvdG90eXBlLmNvbmNhdDt2YXIgJGpvaW49QXJyYXkucHJvdG90eXBlLmpvaW47dmFyICRhcnJTbGljZT1BcnJheS5wcm90b3R5cGUuc2xpY2U7dmFyICRmbG9vcj1NYXRoLmZsb29yO3ZhciBiaWdJbnRWYWx1ZU9mPXR5cGVvZiBCaWdJbnQ9PT0iZnVuY3Rpb24iP0JpZ0ludC5wcm90b3R5cGUudmFsdWVPZjpudWxsO3ZhciBnT1BTPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyIHN5bVRvU3RyaW5nPXR5cGVvZiBTeW1ib2w9PT0iZnVuY3Rpb24iJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09InN5bWJvbCI/U3ltYm9sLnByb3RvdHlwZS50b1N0cmluZzpudWxsO3ZhciBoYXNTaGFtbWVkU3ltYm9scz10eXBlb2YgU3ltYm9sPT09ImZ1bmN0aW9uIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PSJvYmplY3QiO3ZhciB0b1N0cmluZ1RhZz10eXBlb2YgU3ltYm9sPT09ImZ1bmN0aW9uIiYmU3ltYm9sLnRvU3RyaW5nVGFnJiYodHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZz09PWhhc1NoYW1tZWRTeW1ib2xzPyJvYmplY3QiOiJzeW1ib2wiKT9TeW1ib2wudG9TdHJpbmdUYWc6bnVsbDt2YXIgaXNFbnVtZXJhYmxlPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7dmFyIGdQTz0odHlwZW9mIFJlZmxlY3Q9PT0iZnVuY3Rpb24iP1JlZmxlY3QuZ2V0UHJvdG90eXBlT2Y6T2JqZWN0LmdldFByb3RvdHlwZU9mKXx8KFtdLl9fcHJvdG9fXz09PUFycmF5LnByb3RvdHlwZT9mdW5jdGlvbihPKXtyZXR1cm4gTy5fX3Byb3RvX199Om51bGwpO2Z1bmN0aW9uIGFkZE51bWVyaWNTZXBhcmF0b3IobnVtLHN0cil7aWYobnVtPT09SW5maW5pdHl8fG51bT09PS1JbmZpbml0eXx8bnVtIT09bnVtfHxudW0mJm51bT4tMWUzJiZudW08MWUzfHwkdGVzdC5jYWxsKC9lLyxzdHIpKXtyZXR1cm4gc3RyfXZhciBzZXBSZWdleD0vWzAtOV0oPz0oPzpbMC05XXszfSkrKD8hWzAtOV0pKS9nO2lmKHR5cGVvZiBudW09PT0ibnVtYmVyIil7dmFyIGludD1udW08MD8tJGZsb29yKC1udW0pOiRmbG9vcihudW0pO2lmKGludCE9PW51bSl7dmFyIGludFN0cj1TdHJpbmcoaW50KTt2YXIgZGVjPSRzbGljZS5jYWxsKHN0cixpbnRTdHIubGVuZ3RoKzEpO3JldHVybiAkcmVwbGFjZS5jYWxsKGludFN0cixzZXBSZWdleCwiJCZfIikrIi4iKyRyZXBsYWNlLmNhbGwoJHJlcGxhY2UuY2FsbChkZWMsLyhbMC05XXszfSkvZywiJCZfIiksL18kLywiIil9fXJldHVybiAkcmVwbGFjZS5jYWxsKHN0cixzZXBSZWdleCwiJCZfIil9dmFyIHV0aWxJbnNwZWN0PXJlcXVpcmUoIi4vdXRpbC5pbnNwZWN0Iik7dmFyIGluc3BlY3RDdXN0b209dXRpbEluc3BlY3QuY3VzdG9tO3ZhciBpbnNwZWN0U3ltYm9sPWlzU3ltYm9sKGluc3BlY3RDdXN0b20pP2luc3BlY3RDdXN0b206bnVsbDttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBpbnNwZWN0XyhvYmosb3B0aW9ucyxkZXB0aCxzZWVuKXt2YXIgb3B0cz1vcHRpb25zfHx7fTtpZihoYXMob3B0cywicXVvdGVTdHlsZSIpJiYob3B0cy5xdW90ZVN0eWxlIT09InNpbmdsZSImJm9wdHMucXVvdGVTdHlsZSE9PSJkb3VibGUiKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICJxdW90ZVN0eWxlIiBtdXN0IGJlICJzaW5nbGUiIG9yICJkb3VibGUiJyl9aWYoaGFzKG9wdHMsIm1heFN0cmluZ0xlbmd0aCIpJiYodHlwZW9mIG9wdHMubWF4U3RyaW5nTGVuZ3RoPT09Im51bWJlciI/b3B0cy5tYXhTdHJpbmdMZW5ndGg8MCYmb3B0cy5tYXhTdHJpbmdMZW5ndGghPT1JbmZpbml0eTpvcHRzLm1heFN0cmluZ0xlbmd0aCE9PW51bGwpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb24gIm1heFN0cmluZ0xlbmd0aCIsIGlmIHByb3ZpZGVkLCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciwgSW5maW5pdHksIG9yIGBudWxsYCcpfXZhciBjdXN0b21JbnNwZWN0PWhhcyhvcHRzLCJjdXN0b21JbnNwZWN0Iik/b3B0cy5jdXN0b21JbnNwZWN0OnRydWU7aWYodHlwZW9mIGN1c3RvbUluc3BlY3QhPT0iYm9vbGVhbiImJmN1c3RvbUluc3BlY3QhPT0ic3ltYm9sIil7dGhyb3cgbmV3IFR5cGVFcnJvcigib3B0aW9uIFwiY3VzdG9tSW5zcGVjdFwiLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBgdHJ1ZWAsIGBmYWxzZWAsIG9yIGAnc3ltYm9sJ2AiKX1pZihoYXMob3B0cywiaW5kZW50IikmJm9wdHMuaW5kZW50IT09bnVsbCYmb3B0cy5pbmRlbnQhPT0iXHQiJiYhKHBhcnNlSW50KG9wdHMuaW5kZW50LDEwKT09PW9wdHMuaW5kZW50JiZvcHRzLmluZGVudD4wKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICJpbmRlbnQiIG11c3QgYmUgIlxcdCIsIGFuIGludGVnZXIgPiAwLCBvciBgbnVsbGAnKX1pZihoYXMob3B0cywibnVtZXJpY1NlcGFyYXRvciIpJiZ0eXBlb2Ygb3B0cy5udW1lcmljU2VwYXJhdG9yIT09ImJvb2xlYW4iKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb24gIm51bWVyaWNTZXBhcmF0b3IiLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBgdHJ1ZWAgb3IgYGZhbHNlYCcpfXZhciBudW1lcmljU2VwYXJhdG9yPW9wdHMubnVtZXJpY1NlcGFyYXRvcjtpZih0eXBlb2Ygb2JqPT09InVuZGVmaW5lZCIpe3JldHVybiJ1bmRlZmluZWQifWlmKG9iaj09PW51bGwpe3JldHVybiJudWxsIn1pZih0eXBlb2Ygb2JqPT09ImJvb2xlYW4iKXtyZXR1cm4gb2JqPyJ0cnVlIjoiZmFsc2UifWlmKHR5cGVvZiBvYmo9PT0ic3RyaW5nIil7cmV0dXJuIGluc3BlY3RTdHJpbmcob2JqLG9wdHMpfWlmKHR5cGVvZiBvYmo9PT0ibnVtYmVyIil7aWYob2JqPT09MCl7cmV0dXJuIEluZmluaXR5L29iaj4wPyIwIjoiLTAifXZhciBzdHI9U3RyaW5nKG9iaik7cmV0dXJuIG51bWVyaWNTZXBhcmF0b3I/YWRkTnVtZXJpY1NlcGFyYXRvcihvYmosc3RyKTpzdHJ9aWYodHlwZW9mIG9iaj09PSJiaWdpbnQiKXt2YXIgYmlnSW50U3RyPVN0cmluZyhvYmopKyJuIjtyZXR1cm4gbnVtZXJpY1NlcGFyYXRvcj9hZGROdW1lcmljU2VwYXJhdG9yKG9iaixiaWdJbnRTdHIpOmJpZ0ludFN0cn12YXIgbWF4RGVwdGg9dHlwZW9mIG9wdHMuZGVwdGg9PT0idW5kZWZpbmVkIj81Om9wdHMuZGVwdGg7aWYodHlwZW9mIGRlcHRoPT09InVuZGVmaW5lZCIpe2RlcHRoPTB9aWYoZGVwdGg+PW1heERlcHRoJiZtYXhEZXB0aD4wJiZ0eXBlb2Ygb2JqPT09Im9iamVjdCIpe3JldHVybiBpc0FycmF5KG9iaik/IltBcnJheV0iOiJbT2JqZWN0XSJ9dmFyIGluZGVudD1nZXRJbmRlbnQob3B0cyxkZXB0aCk7aWYodHlwZW9mIHNlZW49PT0idW5kZWZpbmVkIil7c2Vlbj1bXX1lbHNlIGlmKGluZGV4T2Yoc2VlbixvYmopPj0wKXtyZXR1cm4iW0NpcmN1bGFyXSJ9ZnVuY3Rpb24gaW5zcGVjdCh2YWx1ZSxmcm9tLG5vSW5kZW50KXtpZihmcm9tKXtzZWVuPSRhcnJTbGljZS5jYWxsKHNlZW4pO3NlZW4ucHVzaChmcm9tKX1pZihub0luZGVudCl7dmFyIG5ld09wdHM9e2RlcHRoOm9wdHMuZGVwdGh9O2lmKGhhcyhvcHRzLCJxdW90ZVN0eWxlIikpe25ld09wdHMucXVvdGVTdHlsZT1vcHRzLnF1b3RlU3R5bGV9cmV0dXJuIGluc3BlY3RfKHZhbHVlLG5ld09wdHMsZGVwdGgrMSxzZWVuKX1yZXR1cm4gaW5zcGVjdF8odmFsdWUsb3B0cyxkZXB0aCsxLHNlZW4pfWlmKHR5cGVvZiBvYmo9PT0iZnVuY3Rpb24iJiYhaXNSZWdFeHAob2JqKSl7dmFyIG5hbWU9bmFtZU9mKG9iaik7dmFyIGtleXM9YXJyT2JqS2V5cyhvYmosaW5zcGVjdCk7cmV0dXJuIltGdW5jdGlvbiIrKG5hbWU/IjogIituYW1lOiIgKGFub255bW91cykiKSsiXSIrKGtleXMubGVuZ3RoPjA/IiB7ICIrJGpvaW4uY2FsbChrZXlzLCIsICIpKyIgfSI6IiIpfWlmKGlzU3ltYm9sKG9iaikpe3ZhciBzeW1TdHJpbmc9aGFzU2hhbW1lZFN5bWJvbHM/JHJlcGxhY2UuY2FsbChTdHJpbmcob2JqKSwvXihTeW1ib2xcKC4qXCkpX1teKV0qJC8sIiQxIik6c3ltVG9TdHJpbmcuY2FsbChvYmopO3JldHVybiB0eXBlb2Ygb2JqPT09Im9iamVjdCImJiFoYXNTaGFtbWVkU3ltYm9scz9tYXJrQm94ZWQoc3ltU3RyaW5nKTpzeW1TdHJpbmd9aWYoaXNFbGVtZW50KG9iaikpe3ZhciBzPSI8IiskdG9Mb3dlckNhc2UuY2FsbChTdHJpbmcob2JqLm5vZGVOYW1lKSk7dmFyIGF0dHJzPW9iai5hdHRyaWJ1dGVzfHxbXTtmb3IodmFyIGk9MDtpPGF0dHJzLmxlbmd0aDtpKyspe3MrPSIgIithdHRyc1tpXS5uYW1lKyI9Iit3cmFwUXVvdGVzKHF1b3RlKGF0dHJzW2ldLnZhbHVlKSwiZG91YmxlIixvcHRzKX1zKz0iPiI7aWYob2JqLmNoaWxkTm9kZXMmJm9iai5jaGlsZE5vZGVzLmxlbmd0aCl7cys9Ii4uLiJ9cys9IjwvIiskdG9Mb3dlckNhc2UuY2FsbChTdHJpbmcob2JqLm5vZGVOYW1lKSkrIj4iO3JldHVybiBzfWlmKGlzQXJyYXkob2JqKSl7aWYob2JqLmxlbmd0aD09PTApe3JldHVybiJbXSJ9dmFyIHhzPWFyck9iaktleXMob2JqLGluc3BlY3QpO2lmKGluZGVudCYmIXNpbmdsZUxpbmVWYWx1ZXMoeHMpKXtyZXR1cm4iWyIraW5kZW50ZWRKb2luKHhzLGluZGVudCkrIl0ifXJldHVybiJbICIrJGpvaW4uY2FsbCh4cywiLCAiKSsiIF0ifWlmKGlzRXJyb3Iob2JqKSl7dmFyIHBhcnRzPWFyck9iaktleXMob2JqLGluc3BlY3QpO2lmKCEoImNhdXNlImluIEVycm9yLnByb3RvdHlwZSkmJiJjYXVzZSJpbiBvYmomJiFpc0VudW1lcmFibGUuY2FsbChvYmosImNhdXNlIikpe3JldHVybiJ7IFsiK1N0cmluZyhvYmopKyJdICIrJGpvaW4uY2FsbCgkY29uY2F0LmNhbGwoIltjYXVzZV06ICIraW5zcGVjdChvYmouY2F1c2UpLHBhcnRzKSwiLCAiKSsiIH0ifWlmKHBhcnRzLmxlbmd0aD09PTApe3JldHVybiJbIitTdHJpbmcob2JqKSsiXSJ9cmV0dXJuInsgWyIrU3RyaW5nKG9iaikrIl0gIiskam9pbi5jYWxsKHBhcnRzLCIsICIpKyIgfSJ9aWYodHlwZW9mIG9iaj09PSJvYmplY3QiJiZjdXN0b21JbnNwZWN0KXtpZihpbnNwZWN0U3ltYm9sJiZ0eXBlb2Ygb2JqW2luc3BlY3RTeW1ib2xdPT09ImZ1bmN0aW9uIiYmdXRpbEluc3BlY3Qpe3JldHVybiB1dGlsSW5zcGVjdChvYmose2RlcHRoOm1heERlcHRoLWRlcHRofSl9ZWxzZSBpZihjdXN0b21JbnNwZWN0IT09InN5bWJvbCImJnR5cGVvZiBvYmouaW5zcGVjdD09PSJmdW5jdGlvbiIpe3JldHVybiBvYmouaW5zcGVjdCgpfX1pZihpc01hcChvYmopKXt2YXIgbWFwUGFydHM9W107aWYobWFwRm9yRWFjaCl7bWFwRm9yRWFjaC5jYWxsKG9iaixmdW5jdGlvbih2YWx1ZSxrZXkpe21hcFBhcnRzLnB1c2goaW5zcGVjdChrZXksb2JqLHRydWUpKyIgPT4gIitpbnNwZWN0KHZhbHVlLG9iaikpfSl9cmV0dXJuIGNvbGxlY3Rpb25PZigiTWFwIixtYXBTaXplLmNhbGwob2JqKSxtYXBQYXJ0cyxpbmRlbnQpfWlmKGlzU2V0KG9iaikpe3ZhciBzZXRQYXJ0cz1bXTtpZihzZXRGb3JFYWNoKXtzZXRGb3JFYWNoLmNhbGwob2JqLGZ1bmN0aW9uKHZhbHVlKXtzZXRQYXJ0cy5wdXNoKGluc3BlY3QodmFsdWUsb2JqKSl9KX1yZXR1cm4gY29sbGVjdGlvbk9mKCJTZXQiLHNldFNpemUuY2FsbChvYmopLHNldFBhcnRzLGluZGVudCl9aWYoaXNXZWFrTWFwKG9iaikpe3JldHVybiB3ZWFrQ29sbGVjdGlvbk9mKCJXZWFrTWFwIil9aWYoaXNXZWFrU2V0KG9iaikpe3JldHVybiB3ZWFrQ29sbGVjdGlvbk9mKCJXZWFrU2V0Iil9aWYoaXNXZWFrUmVmKG9iaikpe3JldHVybiB3ZWFrQ29sbGVjdGlvbk9mKCJXZWFrUmVmIil9aWYoaXNOdW1iZXIob2JqKSl7cmV0dXJuIG1hcmtCb3hlZChpbnNwZWN0KE51bWJlcihvYmopKSl9aWYoaXNCaWdJbnQob2JqKSl7cmV0dXJuIG1hcmtCb3hlZChpbnNwZWN0KGJpZ0ludFZhbHVlT2YuY2FsbChvYmopKSl9aWYoaXNCb29sZWFuKG9iaikpe3JldHVybiBtYXJrQm94ZWQoYm9vbGVhblZhbHVlT2YuY2FsbChvYmopKX1pZihpc1N0cmluZyhvYmopKXtyZXR1cm4gbWFya0JveGVkKGluc3BlY3QoU3RyaW5nKG9iaikpKX1pZighaXNEYXRlKG9iaikmJiFpc1JlZ0V4cChvYmopKXt2YXIgeXM9YXJyT2JqS2V5cyhvYmosaW5zcGVjdCk7dmFyIGlzUGxhaW5PYmplY3Q9Z1BPP2dQTyhvYmopPT09T2JqZWN0LnByb3RvdHlwZTpvYmogaW5zdGFuY2VvZiBPYmplY3R8fG9iai5jb25zdHJ1Y3Rvcj09PU9iamVjdDt2YXIgcHJvdG9UYWc9b2JqIGluc3RhbmNlb2YgT2JqZWN0PyIiOiJudWxsIHByb3RvdHlwZSI7dmFyIHN0cmluZ1RhZz0haXNQbGFpbk9iamVjdCYmdG9TdHJpbmdUYWcmJk9iamVjdChvYmopPT09b2JqJiZ0b1N0cmluZ1RhZyBpbiBvYmo/JHNsaWNlLmNhbGwodG9TdHIob2JqKSw4LC0xKTpwcm90b1RhZz8iT2JqZWN0IjoiIjt2YXIgY29uc3RydWN0b3JUYWc9aXNQbGFpbk9iamVjdHx8dHlwZW9mIG9iai5jb25zdHJ1Y3RvciE9PSJmdW5jdGlvbiI/IiI6b2JqLmNvbnN0cnVjdG9yLm5hbWU/b2JqLmNvbnN0cnVjdG9yLm5hbWUrIiAiOiIiO3ZhciB0YWc9Y29uc3RydWN0b3JUYWcrKHN0cmluZ1RhZ3x8cHJvdG9UYWc/IlsiKyRqb2luLmNhbGwoJGNvbmNhdC5jYWxsKFtdLHN0cmluZ1RhZ3x8W10scHJvdG9UYWd8fFtdKSwiOiAiKSsiXSAiOiIiKTtpZih5cy5sZW5ndGg9PT0wKXtyZXR1cm4gdGFnKyJ7fSJ9aWYoaW5kZW50KXtyZXR1cm4gdGFnKyJ7IitpbmRlbnRlZEpvaW4oeXMsaW5kZW50KSsifSJ9cmV0dXJuIHRhZysieyAiKyRqb2luLmNhbGwoeXMsIiwgIikrIiB9In1yZXR1cm4gU3RyaW5nKG9iail9O2Z1bmN0aW9uIHdyYXBRdW90ZXMocyxkZWZhdWx0U3R5bGUsb3B0cyl7dmFyIHF1b3RlQ2hhcj0ob3B0cy5xdW90ZVN0eWxlfHxkZWZhdWx0U3R5bGUpPT09ImRvdWJsZSI/JyInOiInIjtyZXR1cm4gcXVvdGVDaGFyK3MrcXVvdGVDaGFyfWZ1bmN0aW9uIHF1b3RlKHMpe3JldHVybiAkcmVwbGFjZS5jYWxsKFN0cmluZyhzKSwvIi9nLCImcXVvdDsiKX1mdW5jdGlvbiBpc0FycmF5KG9iail7cmV0dXJuIHRvU3RyKG9iaik9PT0iW29iamVjdCBBcnJheV0iJiYoIXRvU3RyaW5nVGFnfHwhKHR5cGVvZiBvYmo9PT0ib2JqZWN0IiYmdG9TdHJpbmdUYWcgaW4gb2JqKSl9ZnVuY3Rpb24gaXNEYXRlKG9iail7cmV0dXJuIHRvU3RyKG9iaik9PT0iW29iamVjdCBEYXRlXSImJighdG9TdHJpbmdUYWd8fCEodHlwZW9mIG9iaj09PSJvYmplY3QiJiZ0b1N0cmluZ1RhZyBpbiBvYmopKX1mdW5jdGlvbiBpc1JlZ0V4cChvYmope3JldHVybiB0b1N0cihvYmopPT09IltvYmplY3QgUmVnRXhwXSImJighdG9TdHJpbmdUYWd8fCEodHlwZW9mIG9iaj09PSJvYmplY3QiJiZ0b1N0cmluZ1RhZyBpbiBvYmopKX1mdW5jdGlvbiBpc0Vycm9yKG9iail7cmV0dXJuIHRvU3RyKG9iaik9PT0iW29iamVjdCBFcnJvcl0iJiYoIXRvU3RyaW5nVGFnfHwhKHR5cGVvZiBvYmo9PT0ib2JqZWN0IiYmdG9TdHJpbmdUYWcgaW4gb2JqKSl9ZnVuY3Rpb24gaXNTdHJpbmcob2JqKXtyZXR1cm4gdG9TdHIob2JqKT09PSJbb2JqZWN0IFN0cmluZ10iJiYoIXRvU3RyaW5nVGFnfHwhKHR5cGVvZiBvYmo9PT0ib2JqZWN0IiYmdG9TdHJpbmdUYWcgaW4gb2JqKSl9ZnVuY3Rpb24gaXNOdW1iZXIob2JqKXtyZXR1cm4gdG9TdHIob2JqKT09PSJbb2JqZWN0IE51bWJlcl0iJiYoIXRvU3RyaW5nVGFnfHwhKHR5cGVvZiBvYmo9PT0ib2JqZWN0IiYmdG9TdHJpbmdUYWcgaW4gb2JqKSl9ZnVuY3Rpb24gaXNCb29sZWFuKG9iail7cmV0dXJuIHRvU3RyKG9iaik9PT0iW29iamVjdCBCb29sZWFuXSImJighdG9TdHJpbmdUYWd8fCEodHlwZW9mIG9iaj09PSJvYmplY3QiJiZ0b1N0cmluZ1RhZyBpbiBvYmopKX1mdW5jdGlvbiBpc1N5bWJvbChvYmope2lmKGhhc1NoYW1tZWRTeW1ib2xzKXtyZXR1cm4gb2JqJiZ0eXBlb2Ygb2JqPT09Im9iamVjdCImJm9iaiBpbnN0YW5jZW9mIFN5bWJvbH1pZih0eXBlb2Ygb2JqPT09InN5bWJvbCIpe3JldHVybiB0cnVlfWlmKCFvYmp8fHR5cGVvZiBvYmohPT0ib2JqZWN0Inx8IXN5bVRvU3RyaW5nKXtyZXR1cm4gZmFsc2V9dHJ5e3N5bVRvU3RyaW5nLmNhbGwob2JqKTtyZXR1cm4gdHJ1ZX1jYXRjaChlKXt9cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIGlzQmlnSW50KG9iail7aWYoIW9ianx8dHlwZW9mIG9iaiE9PSJvYmplY3QifHwhYmlnSW50VmFsdWVPZil7cmV0dXJuIGZhbHNlfXRyeXtiaWdJbnRWYWx1ZU9mLmNhbGwob2JqKTtyZXR1cm4gdHJ1ZX1jYXRjaChlKXt9cmV0dXJuIGZhbHNlfXZhciBoYXNPd249T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eXx8ZnVuY3Rpb24oa2V5KXtyZXR1cm4ga2V5IGluIHRoaXN9O2Z1bmN0aW9uIGhhcyhvYmosa2V5KXtyZXR1cm4gaGFzT3duLmNhbGwob2JqLGtleSl9ZnVuY3Rpb24gdG9TdHIob2JqKXtyZXR1cm4gb2JqZWN0VG9TdHJpbmcuY2FsbChvYmopfWZ1bmN0aW9uIG5hbWVPZihmKXtpZihmLm5hbWUpe3JldHVybiBmLm5hbWV9dmFyIG09JG1hdGNoLmNhbGwoZnVuY3Rpb25Ub1N0cmluZy5jYWxsKGYpLC9eZnVuY3Rpb25ccyooW1x3JF0rKS8pO2lmKG0pe3JldHVybiBtWzFdfXJldHVybiBudWxsfWZ1bmN0aW9uIGluZGV4T2YoeHMseCl7aWYoeHMuaW5kZXhPZil7cmV0dXJuIHhzLmluZGV4T2YoeCl9Zm9yKHZhciBpPTAsbD14cy5sZW5ndGg7aTxsO2krKyl7aWYoeHNbaV09PT14KXtyZXR1cm4gaX19cmV0dXJuLTF9ZnVuY3Rpb24gaXNNYXAoeCl7aWYoIW1hcFNpemV8fCF4fHx0eXBlb2YgeCE9PSJvYmplY3QiKXtyZXR1cm4gZmFsc2V9dHJ5e21hcFNpemUuY2FsbCh4KTt0cnl7c2V0U2l6ZS5jYWxsKHgpfWNhdGNoKHMpe3JldHVybiB0cnVlfXJldHVybiB4IGluc3RhbmNlb2YgTWFwfWNhdGNoKGUpe31yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gaXNXZWFrTWFwKHgpe2lmKCF3ZWFrTWFwSGFzfHwheHx8dHlwZW9mIHghPT0ib2JqZWN0Iil7cmV0dXJuIGZhbHNlfXRyeXt3ZWFrTWFwSGFzLmNhbGwoeCx3ZWFrTWFwSGFzKTt0cnl7d2Vha1NldEhhcy5jYWxsKHgsd2Vha1NldEhhcyl9Y2F0Y2gocyl7cmV0dXJuIHRydWV9cmV0dXJuIHggaW5zdGFuY2VvZiBXZWFrTWFwfWNhdGNoKGUpe31yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gaXNXZWFrUmVmKHgpe2lmKCF3ZWFrUmVmRGVyZWZ8fCF4fHx0eXBlb2YgeCE9PSJvYmplY3QiKXtyZXR1cm4gZmFsc2V9dHJ5e3dlYWtSZWZEZXJlZi5jYWxsKHgpO3JldHVybiB0cnVlfWNhdGNoKGUpe31yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gaXNTZXQoeCl7aWYoIXNldFNpemV8fCF4fHx0eXBlb2YgeCE9PSJvYmplY3QiKXtyZXR1cm4gZmFsc2V9dHJ5e3NldFNpemUuY2FsbCh4KTt0cnl7bWFwU2l6ZS5jYWxsKHgpfWNhdGNoKG0pe3JldHVybiB0cnVlfXJldHVybiB4IGluc3RhbmNlb2YgU2V0fWNhdGNoKGUpe31yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gaXNXZWFrU2V0KHgpe2lmKCF3ZWFrU2V0SGFzfHwheHx8dHlwZW9mIHghPT0ib2JqZWN0Iil7cmV0dXJuIGZhbHNlfXRyeXt3ZWFrU2V0SGFzLmNhbGwoeCx3ZWFrU2V0SGFzKTt0cnl7d2Vha01hcEhhcy5jYWxsKHgsd2Vha01hcEhhcyl9Y2F0Y2gocyl7cmV0dXJuIHRydWV9cmV0dXJuIHggaW5zdGFuY2VvZiBXZWFrU2V0fWNhdGNoKGUpe31yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gaXNFbGVtZW50KHgpe2lmKCF4fHx0eXBlb2YgeCE9PSJvYmplY3QiKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mIEhUTUxFbGVtZW50IT09InVuZGVmaW5lZCImJnggaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl7cmV0dXJuIHRydWV9cmV0dXJuIHR5cGVvZiB4Lm5vZGVOYW1lPT09InN0cmluZyImJnR5cGVvZiB4LmdldEF0dHJpYnV0ZT09PSJmdW5jdGlvbiJ9ZnVuY3Rpb24gaW5zcGVjdFN0cmluZyhzdHIsb3B0cyl7aWYoc3RyLmxlbmd0aD5vcHRzLm1heFN0cmluZ0xlbmd0aCl7dmFyIHJlbWFpbmluZz1zdHIubGVuZ3RoLW9wdHMubWF4U3RyaW5nTGVuZ3RoO3ZhciB0cmFpbGVyPSIuLi4gIityZW1haW5pbmcrIiBtb3JlIGNoYXJhY3RlciIrKHJlbWFpbmluZz4xPyJzIjoiIik7cmV0dXJuIGluc3BlY3RTdHJpbmcoJHNsaWNlLmNhbGwoc3RyLDAsb3B0cy5tYXhTdHJpbmdMZW5ndGgpLG9wdHMpK3RyYWlsZXJ9dmFyIHM9JHJlcGxhY2UuY2FsbCgkcmVwbGFjZS5jYWxsKHN0ciwvKFsnXFxdKS9nLCJcXCQxIiksL1tceDAwLVx4MWZdL2csbG93Ynl0ZSk7cmV0dXJuIHdyYXBRdW90ZXMocywic2luZ2xlIixvcHRzKX1mdW5jdGlvbiBsb3dieXRlKGMpe3ZhciBuPWMuY2hhckNvZGVBdCgwKTt2YXIgeD17ODoiYiIsOToidCIsMTA6Im4iLDEyOiJmIiwxMzoiciJ9W25dO2lmKHgpe3JldHVybiJcXCIreH1yZXR1cm4iXFx4IisobjwxNj8iMCI6IiIpKyR0b1VwcGVyQ2FzZS5jYWxsKG4udG9TdHJpbmcoMTYpKX1mdW5jdGlvbiBtYXJrQm94ZWQoc3RyKXtyZXR1cm4iT2JqZWN0KCIrc3RyKyIpIn1mdW5jdGlvbiB3ZWFrQ29sbGVjdGlvbk9mKHR5cGUpe3JldHVybiB0eXBlKyIgeyA/IH0ifWZ1bmN0aW9uIGNvbGxlY3Rpb25PZih0eXBlLHNpemUsZW50cmllcyxpbmRlbnQpe3ZhciBqb2luZWRFbnRyaWVzPWluZGVudD9pbmRlbnRlZEpvaW4oZW50cmllcyxpbmRlbnQpOiRqb2luLmNhbGwoZW50cmllcywiLCAiKTtyZXR1cm4gdHlwZSsiICgiK3NpemUrIikgeyIram9pbmVkRW50cmllcysifSJ9ZnVuY3Rpb24gc2luZ2xlTGluZVZhbHVlcyh4cyl7Zm9yKHZhciBpPTA7aTx4cy5sZW5ndGg7aSsrKXtpZihpbmRleE9mKHhzW2ldLCJcbiIpPj0wKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfWZ1bmN0aW9uIGdldEluZGVudChvcHRzLGRlcHRoKXt2YXIgYmFzZUluZGVudDtpZihvcHRzLmluZGVudD09PSJcdCIpe2Jhc2VJbmRlbnQ9Ilx0In1lbHNlIGlmKHR5cGVvZiBvcHRzLmluZGVudD09PSJudW1iZXIiJiZvcHRzLmluZGVudD4wKXtiYXNlSW5kZW50PSRqb2luLmNhbGwoQXJyYXkob3B0cy5pbmRlbnQrMSksIiAiKX1lbHNle3JldHVybiBudWxsfXJldHVybntiYXNlOmJhc2VJbmRlbnQscHJldjokam9pbi5jYWxsKEFycmF5KGRlcHRoKzEpLGJhc2VJbmRlbnQpfX1mdW5jdGlvbiBpbmRlbnRlZEpvaW4oeHMsaW5kZW50KXtpZih4cy5sZW5ndGg9PT0wKXtyZXR1cm4iIn12YXIgbGluZUpvaW5lcj0iXG4iK2luZGVudC5wcmV2K2luZGVudC5iYXNlO3JldHVybiBsaW5lSm9pbmVyKyRqb2luLmNhbGwoeHMsIiwiK2xpbmVKb2luZXIpKyJcbiIraW5kZW50LnByZXZ9ZnVuY3Rpb24gYXJyT2JqS2V5cyhvYmosaW5zcGVjdCl7dmFyIGlzQXJyPWlzQXJyYXkob2JqKTt2YXIgeHM9W107aWYoaXNBcnIpe3hzLmxlbmd0aD1vYmoubGVuZ3RoO2Zvcih2YXIgaT0wO2k8b2JqLmxlbmd0aDtpKyspe3hzW2ldPWhhcyhvYmosaSk/aW5zcGVjdChvYmpbaV0sb2JqKToiIn19dmFyIHN5bXM9dHlwZW9mIGdPUFM9PT0iZnVuY3Rpb24iP2dPUFMob2JqKTpbXTt2YXIgc3ltTWFwO2lmKGhhc1NoYW1tZWRTeW1ib2xzKXtzeW1NYXA9e307Zm9yKHZhciBrPTA7azxzeW1zLmxlbmd0aDtrKyspe3N5bU1hcFsiJCIrc3ltc1trXV09c3ltc1trXX19Zm9yKHZhciBrZXkgaW4gb2JqKXtpZighaGFzKG9iaixrZXkpKXtjb250aW51ZX1pZihpc0FyciYmU3RyaW5nKE51bWJlcihrZXkpKT09PWtleSYma2V5PG9iai5sZW5ndGgpe2NvbnRpbnVlfWlmKGhhc1NoYW1tZWRTeW1ib2xzJiZzeW1NYXBbIiQiK2tleV1pbnN0YW5jZW9mIFN5bWJvbCl7Y29udGludWV9ZWxzZSBpZigkdGVzdC5jYWxsKC9bXlx3JF0vLGtleSkpe3hzLnB1c2goaW5zcGVjdChrZXksb2JqKSsiOiAiK2luc3BlY3Qob2JqW2tleV0sb2JqKSl9ZWxzZXt4cy5wdXNoKGtleSsiOiAiK2luc3BlY3Qob2JqW2tleV0sb2JqKSl9fWlmKHR5cGVvZiBnT1BTPT09ImZ1bmN0aW9uIil7Zm9yKHZhciBqPTA7ajxzeW1zLmxlbmd0aDtqKyspe2lmKGlzRW51bWVyYWJsZS5jYWxsKG9iaixzeW1zW2pdKSl7eHMucHVzaCgiWyIraW5zcGVjdChzeW1zW2pdKSsiXTogIitpbnNwZWN0KG9ialtzeW1zW2pdXSxvYmopKX19fXJldHVybiB4c319LHsiLi91dGlsLmluc3BlY3QiOjd9XSwzOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7dmFyIHByb2Nlc3M9bW9kdWxlLmV4cG9ydHM9e307dmFyIGNhY2hlZFNldFRpbWVvdXQ7dmFyIGNhY2hlZENsZWFyVGltZW91dDtmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCl7dGhyb3cgbmV3IEVycm9yKCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIil9ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCgpe3Rocm93IG5ldyBFcnJvcigiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIil9KGZ1bmN0aW9uKCl7dHJ5e2lmKHR5cGVvZiBzZXRUaW1lb3V0PT09ImZ1bmN0aW9uIil7Y2FjaGVkU2V0VGltZW91dD1zZXRUaW1lb3V0fWVsc2V7Y2FjaGVkU2V0VGltZW91dD1kZWZhdWx0U2V0VGltb3V0fX1jYXRjaChlKXtjYWNoZWRTZXRUaW1lb3V0PWRlZmF1bHRTZXRUaW1vdXR9dHJ5e2lmKHR5cGVvZiBjbGVhclRpbWVvdXQ9PT0iZnVuY3Rpb24iKXtjYWNoZWRDbGVhclRpbWVvdXQ9Y2xlYXJUaW1lb3V0fWVsc2V7Y2FjaGVkQ2xlYXJUaW1lb3V0PWRlZmF1bHRDbGVhclRpbWVvdXR9fWNhdGNoKGUpe2NhY2hlZENsZWFyVGltZW91dD1kZWZhdWx0Q2xlYXJUaW1lb3V0fX0pKCk7ZnVuY3Rpb24gcnVuVGltZW91dChmdW4pe2lmKGNhY2hlZFNldFRpbWVvdXQ9PT1zZXRUaW1lb3V0KXtyZXR1cm4gc2V0VGltZW91dChmdW4sMCl9aWYoKGNhY2hlZFNldFRpbWVvdXQ9PT1kZWZhdWx0U2V0VGltb3V0fHwhY2FjaGVkU2V0VGltZW91dCkmJnNldFRpbWVvdXQpe2NhY2hlZFNldFRpbWVvdXQ9c2V0VGltZW91dDtyZXR1cm4gc2V0VGltZW91dChmdW4sMCl9dHJ5e3JldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwwKX1jYXRjaChlKXt0cnl7cmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLGZ1biwwKX1jYXRjaChlKXtyZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsZnVuLDApfX19ZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcil7aWYoY2FjaGVkQ2xlYXJUaW1lb3V0PT09Y2xlYXJUaW1lb3V0KXtyZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcil9aWYoKGNhY2hlZENsZWFyVGltZW91dD09PWRlZmF1bHRDbGVhclRpbWVvdXR8fCFjYWNoZWRDbGVhclRpbWVvdXQpJiZjbGVhclRpbWVvdXQpe2NhY2hlZENsZWFyVGltZW91dD1jbGVhclRpbWVvdXQ7cmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpfXRyeXtyZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcil9Y2F0Y2goZSl7dHJ5e3JldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLG1hcmtlcil9Y2F0Y2goZSl7cmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsbWFya2VyKX19fXZhciBxdWV1ZT1bXTt2YXIgZHJhaW5pbmc9ZmFsc2U7dmFyIGN1cnJlbnRRdWV1ZTt2YXIgcXVldWVJbmRleD0tMTtmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKXtpZighZHJhaW5pbmd8fCFjdXJyZW50UXVldWUpe3JldHVybn1kcmFpbmluZz1mYWxzZTtpZihjdXJyZW50UXVldWUubGVuZ3RoKXtxdWV1ZT1jdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKX1lbHNle3F1ZXVlSW5kZXg9LTF9aWYocXVldWUubGVuZ3RoKXtkcmFpblF1ZXVlKCl9fWZ1bmN0aW9uIGRyYWluUXVldWUoKXtpZihkcmFpbmluZyl7cmV0dXJufXZhciB0aW1lb3V0PXJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtkcmFpbmluZz10cnVlO3ZhciBsZW49cXVldWUubGVuZ3RoO3doaWxlKGxlbil7Y3VycmVudFF1ZXVlPXF1ZXVlO3F1ZXVlPVtdO3doaWxlKCsrcXVldWVJbmRleDxsZW4pe2lmKGN1cnJlbnRRdWV1ZSl7Y3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpfX1xdWV1ZUluZGV4PS0xO2xlbj1xdWV1ZS5sZW5ndGh9Y3VycmVudFF1ZXVlPW51bGw7ZHJhaW5pbmc9ZmFsc2U7cnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpfXByb2Nlc3MubmV4dFRpY2s9ZnVuY3Rpb24oZnVuKXt2YXIgYXJncz1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe2FyZ3NbaS0xXT1hcmd1bWVudHNbaV19fXF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLGFyZ3MpKTtpZihxdWV1ZS5sZW5ndGg9PT0xJiYhZHJhaW5pbmcpe3J1blRpbWVvdXQoZHJhaW5RdWV1ZSl9fTtmdW5jdGlvbiBJdGVtKGZ1bixhcnJheSl7dGhpcy5mdW49ZnVuO3RoaXMuYXJyYXk9YXJyYXl9SXRlbS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX07cHJvY2Vzcy50aXRsZT0iYnJvd3NlciI7cHJvY2Vzcy5icm93c2VyPXRydWU7cHJvY2Vzcy5lbnY9e307cHJvY2Vzcy5hcmd2PVtdO3Byb2Nlc3MudmVyc2lvbj0iIjtwcm9jZXNzLnZlcnNpb25zPXt9O2Z1bmN0aW9uIG5vb3AoKXt9cHJvY2Vzcy5vbj1ub29wO3Byb2Nlc3MuYWRkTGlzdGVuZXI9bm9vcDtwcm9jZXNzLm9uY2U9bm9vcDtwcm9jZXNzLm9mZj1ub29wO3Byb2Nlc3MucmVtb3ZlTGlzdGVuZXI9bm9vcDtwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycz1ub29wO3Byb2Nlc3MuZW1pdD1ub29wO3Byb2Nlc3MucHJlcGVuZExpc3RlbmVyPW5vb3A7cHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyPW5vb3A7cHJvY2Vzcy5saXN0ZW5lcnM9ZnVuY3Rpb24obmFtZSl7cmV0dXJuW119O3Byb2Nlc3MuYmluZGluZz1mdW5jdGlvbihuYW1lKXt0aHJvdyBuZXcgRXJyb3IoInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkIil9O3Byb2Nlc3MuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuIi8ifTtwcm9jZXNzLmNoZGlyPWZ1bmN0aW9uKGRpcil7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKX07cHJvY2Vzcy51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0se31dLDQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXsoZnVuY3Rpb24oKXsoZnVuY3Rpb24ocm9vdCl7dmFyIGZyZWVFeHBvcnRzPXR5cGVvZiBleHBvcnRzPT0ib2JqZWN0IiYmZXhwb3J0cyYmIWV4cG9ydHMubm9kZVR5cGUmJmV4cG9ydHM7dmFyIGZyZWVNb2R1bGU9dHlwZW9mIG1vZHVsZT09Im9iamVjdCImJm1vZHVsZSYmIW1vZHVsZS5ub2RlVHlwZSYmbW9kdWxlO3ZhciBmcmVlR2xvYmFsPXR5cGVvZiBnbG9iYWw9PSJvYmplY3QiJiZnbG9iYWw7aWYoZnJlZUdsb2JhbC5nbG9iYWw9PT1mcmVlR2xvYmFsfHxmcmVlR2xvYmFsLndpbmRvdz09PWZyZWVHbG9iYWx8fGZyZWVHbG9iYWwuc2VsZj09PWZyZWVHbG9iYWwpe3Jvb3Q9ZnJlZUdsb2JhbH12YXIgcHVueWNvZGUsbWF4SW50PTIxNDc0ODM2NDcsYmFzZT0zNix0TWluPTEsdE1heD0yNixza2V3PTM4LGRhbXA9NzAwLGluaXRpYWxCaWFzPTcyLGluaXRpYWxOPTEyOCxkZWxpbWl0ZXI9Ii0iLHJlZ2V4UHVueWNvZGU9L154bi0tLyxyZWdleE5vbkFTQ0lJPS9bXlx4MjAtXHg3RV0vLHJlZ2V4U2VwYXJhdG9ycz0vW1x4MkVcdTMwMDJcdUZGMEVcdUZGNjFdL2csZXJyb3JzPXtvdmVyZmxvdzoiT3ZlcmZsb3c6IGlucHV0IG5lZWRzIHdpZGVyIGludGVnZXJzIHRvIHByb2Nlc3MiLCJub3QtYmFzaWMiOiJJbGxlZ2FsIGlucHV0ID49IDB4ODAgKG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQpIiwiaW52YWxpZC1pbnB1dCI6IkludmFsaWQgaW5wdXQifSxiYXNlTWludXNUTWluPWJhc2UtdE1pbixmbG9vcj1NYXRoLmZsb29yLHN0cmluZ0Zyb21DaGFyQ29kZT1TdHJpbmcuZnJvbUNoYXJDb2RlLGtleTtmdW5jdGlvbiBlcnJvcih0eXBlKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pfWZ1bmN0aW9uIG1hcChhcnJheSxmbil7dmFyIGxlbmd0aD1hcnJheS5sZW5ndGg7dmFyIHJlc3VsdD1bXTt3aGlsZShsZW5ndGgtLSl7cmVzdWx0W2xlbmd0aF09Zm4oYXJyYXlbbGVuZ3RoXSl9cmV0dXJuIHJlc3VsdH1mdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLGZuKXt2YXIgcGFydHM9c3RyaW5nLnNwbGl0KCJAIik7dmFyIHJlc3VsdD0iIjtpZihwYXJ0cy5sZW5ndGg+MSl7cmVzdWx0PXBhcnRzWzBdKyJAIjtzdHJpbmc9cGFydHNbMV19c3RyaW5nPXN0cmluZy5yZXBsYWNlKHJlZ2V4U2VwYXJhdG9ycywiLiIpO3ZhciBsYWJlbHM9c3RyaW5nLnNwbGl0KCIuIik7dmFyIGVuY29kZWQ9bWFwKGxhYmVscyxmbikuam9pbigiLiIpO3JldHVybiByZXN1bHQrZW5jb2RlZH1mdW5jdGlvbiB1Y3MyZGVjb2RlKHN0cmluZyl7dmFyIG91dHB1dD1bXSxjb3VudGVyPTAsbGVuZ3RoPXN0cmluZy5sZW5ndGgsdmFsdWUsZXh0cmE7d2hpbGUoY291bnRlcjxsZW5ndGgpe3ZhbHVlPXN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7aWYodmFsdWU+PTU1Mjk2JiZ2YWx1ZTw9NTYzMTkmJmNvdW50ZXI8bGVuZ3RoKXtleHRyYT1zdHJpbmcuY2hhckNvZGVBdChjb3VudGVyKyspO2lmKChleHRyYSY2NDUxMik9PTU2MzIwKXtvdXRwdXQucHVzaCgoKHZhbHVlJjEwMjMpPDwxMCkrKGV4dHJhJjEwMjMpKzY1NTM2KX1lbHNle291dHB1dC5wdXNoKHZhbHVlKTtjb3VudGVyLS19fWVsc2V7b3V0cHV0LnB1c2godmFsdWUpfX1yZXR1cm4gb3V0cHV0fWZ1bmN0aW9uIHVjczJlbmNvZGUoYXJyYXkpe3JldHVybiBtYXAoYXJyYXksZnVuY3Rpb24odmFsdWUpe3ZhciBvdXRwdXQ9IiI7aWYodmFsdWU+NjU1MzUpe3ZhbHVlLT02NTUzNjtvdXRwdXQrPXN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZT4+PjEwJjEwMjN8NTUyOTYpO3ZhbHVlPTU2MzIwfHZhbHVlJjEwMjN9b3V0cHV0Kz1zdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpO3JldHVybiBvdXRwdXR9KS5qb2luKCIiKX1mdW5jdGlvbiBiYXNpY1RvRGlnaXQoY29kZVBvaW50KXtpZihjb2RlUG9pbnQtNDg8MTApe3JldHVybiBjb2RlUG9pbnQtMjJ9aWYoY29kZVBvaW50LTY1PDI2KXtyZXR1cm4gY29kZVBvaW50LTY1fWlmKGNvZGVQb2ludC05NzwyNil7cmV0dXJuIGNvZGVQb2ludC05N31yZXR1cm4gYmFzZX1mdW5jdGlvbiBkaWdpdFRvQmFzaWMoZGlnaXQsZmxhZyl7cmV0dXJuIGRpZ2l0KzIyKzc1KihkaWdpdDwyNiktKChmbGFnIT0wKTw8NSl9ZnVuY3Rpb24gYWRhcHQoZGVsdGEsbnVtUG9pbnRzLGZpcnN0VGltZSl7dmFyIGs9MDtkZWx0YT1maXJzdFRpbWU/Zmxvb3IoZGVsdGEvZGFtcCk6ZGVsdGE+PjE7ZGVsdGErPWZsb29yKGRlbHRhL251bVBvaW50cyk7Zm9yKDtkZWx0YT5iYXNlTWludXNUTWluKnRNYXg+PjE7ays9YmFzZSl7ZGVsdGE9Zmxvb3IoZGVsdGEvYmFzZU1pbnVzVE1pbil9cmV0dXJuIGZsb29yKGsrKGJhc2VNaW51c1RNaW4rMSkqZGVsdGEvKGRlbHRhK3NrZXcpKX1mdW5jdGlvbiBkZWNvZGUoaW5wdXQpe3ZhciBvdXRwdXQ9W10saW5wdXRMZW5ndGg9aW5wdXQubGVuZ3RoLG91dCxpPTAsbj1pbml0aWFsTixiaWFzPWluaXRpYWxCaWFzLGJhc2ljLGosaW5kZXgsb2xkaSx3LGssZGlnaXQsdCxiYXNlTWludXNUO2Jhc2ljPWlucHV0Lmxhc3RJbmRleE9mKGRlbGltaXRlcik7aWYoYmFzaWM8MCl7YmFzaWM9MH1mb3Ioaj0wO2o8YmFzaWM7KytqKXtpZihpbnB1dC5jaGFyQ29kZUF0KGopPj0xMjgpe2Vycm9yKCJub3QtYmFzaWMiKX1vdXRwdXQucHVzaChpbnB1dC5jaGFyQ29kZUF0KGopKX1mb3IoaW5kZXg9YmFzaWM+MD9iYXNpYysxOjA7aW5kZXg8aW5wdXRMZW5ndGg7KXtmb3Iob2xkaT1pLHc9MSxrPWJhc2U7O2srPWJhc2Upe2lmKGluZGV4Pj1pbnB1dExlbmd0aCl7ZXJyb3IoImludmFsaWQtaW5wdXQiKX1kaWdpdD1iYXNpY1RvRGlnaXQoaW5wdXQuY2hhckNvZGVBdChpbmRleCsrKSk7aWYoZGlnaXQ+PWJhc2V8fGRpZ2l0PmZsb29yKChtYXhJbnQtaSkvdykpe2Vycm9yKCJvdmVyZmxvdyIpfWkrPWRpZ2l0Knc7dD1rPD1iaWFzP3RNaW46az49Ymlhcyt0TWF4P3RNYXg6ay1iaWFzO2lmKGRpZ2l0PHQpe2JyZWFrfWJhc2VNaW51c1Q9YmFzZS10O2lmKHc+Zmxvb3IobWF4SW50L2Jhc2VNaW51c1QpKXtlcnJvcigib3ZlcmZsb3ciKX13Kj1iYXNlTWludXNUfW91dD1vdXRwdXQubGVuZ3RoKzE7Ymlhcz1hZGFwdChpLW9sZGksb3V0LG9sZGk9PTApO2lmKGZsb29yKGkvb3V0KT5tYXhJbnQtbil7ZXJyb3IoIm92ZXJmbG93Iil9bis9Zmxvb3IoaS9vdXQpO2klPW91dDtvdXRwdXQuc3BsaWNlKGkrKywwLG4pfXJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCl9ZnVuY3Rpb24gZW5jb2RlKGlucHV0KXt2YXIgbixkZWx0YSxoYW5kbGVkQ1BDb3VudCxiYXNpY0xlbmd0aCxiaWFzLGosbSxxLGssdCxjdXJyZW50VmFsdWUsb3V0cHV0PVtdLGlucHV0TGVuZ3RoLGhhbmRsZWRDUENvdW50UGx1c09uZSxiYXNlTWludXNULHFNaW51c1Q7aW5wdXQ9dWNzMmRlY29kZShpbnB1dCk7aW5wdXRMZW5ndGg9aW5wdXQubGVuZ3RoO249aW5pdGlhbE47ZGVsdGE9MDtiaWFzPWluaXRpYWxCaWFzO2ZvcihqPTA7ajxpbnB1dExlbmd0aDsrK2ope2N1cnJlbnRWYWx1ZT1pbnB1dFtqXTtpZihjdXJyZW50VmFsdWU8MTI4KXtvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoY3VycmVudFZhbHVlKSl9fWhhbmRsZWRDUENvdW50PWJhc2ljTGVuZ3RoPW91dHB1dC5sZW5ndGg7aWYoYmFzaWNMZW5ndGgpe291dHB1dC5wdXNoKGRlbGltaXRlcil9d2hpbGUoaGFuZGxlZENQQ291bnQ8aW5wdXRMZW5ndGgpe2ZvcihtPW1heEludCxqPTA7ajxpbnB1dExlbmd0aDsrK2ope2N1cnJlbnRWYWx1ZT1pbnB1dFtqXTtpZihjdXJyZW50VmFsdWU+PW4mJmN1cnJlbnRWYWx1ZTxtKXttPWN1cnJlbnRWYWx1ZX19aGFuZGxlZENQQ291bnRQbHVzT25lPWhhbmRsZWRDUENvdW50KzE7aWYobS1uPmZsb29yKChtYXhJbnQtZGVsdGEpL2hhbmRsZWRDUENvdW50UGx1c09uZSkpe2Vycm9yKCJvdmVyZmxvdyIpfWRlbHRhKz0obS1uKSpoYW5kbGVkQ1BDb3VudFBsdXNPbmU7bj1tO2ZvcihqPTA7ajxpbnB1dExlbmd0aDsrK2ope2N1cnJlbnRWYWx1ZT1pbnB1dFtqXTtpZihjdXJyZW50VmFsdWU8biYmKytkZWx0YT5tYXhJbnQpe2Vycm9yKCJvdmVyZmxvdyIpfWlmKGN1cnJlbnRWYWx1ZT09bil7Zm9yKHE9ZGVsdGEsaz1iYXNlOztrKz1iYXNlKXt0PWs8PWJpYXM/dE1pbjprPj1iaWFzK3RNYXg/dE1heDprLWJpYXM7aWYocTx0KXticmVha31xTWludXNUPXEtdDtiYXNlTWludXNUPWJhc2UtdDtvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHQrcU1pbnVzVCViYXNlTWludXNULDApKSk7cT1mbG9vcihxTWludXNUL2Jhc2VNaW51c1QpfW91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWMocSwwKSkpO2JpYXM9YWRhcHQoZGVsdGEsaGFuZGxlZENQQ291bnRQbHVzT25lLGhhbmRsZWRDUENvdW50PT1iYXNpY0xlbmd0aCk7ZGVsdGE9MDsrK2hhbmRsZWRDUENvdW50fX0rK2RlbHRhOysrbn1yZXR1cm4gb3V0cHV0LmpvaW4oIiIpfWZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCl7cmV0dXJuIG1hcERvbWFpbihpbnB1dCxmdW5jdGlvbihzdHJpbmcpe3JldHVybiByZWdleFB1bnljb2RlLnRlc3Qoc3RyaW5nKT9kZWNvZGUoc3RyaW5nLnNsaWNlKDQpLnRvTG93ZXJDYXNlKCkpOnN0cmluZ30pfWZ1bmN0aW9uIHRvQVNDSUkoaW5wdXQpe3JldHVybiBtYXBEb21haW4oaW5wdXQsZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZyk/InhuLS0iK2VuY29kZShzdHJpbmcpOnN0cmluZ30pfXB1bnljb2RlPXt2ZXJzaW9uOiIxLjQuMSIsdWNzMjp7ZGVjb2RlOnVjczJkZWNvZGUsZW5jb2RlOnVjczJlbmNvZGV9LGRlY29kZTpkZWNvZGUsZW5jb2RlOmVuY29kZSx0b0FTQ0lJOnRvQVNDSUksdG9Vbmljb2RlOnRvVW5pY29kZX07aWYodHlwZW9mIGRlZmluZT09ImZ1bmN0aW9uIiYmdHlwZW9mIGRlZmluZS5hbWQ9PSJvYmplY3QiJiZkZWZpbmUuYW1kKXtkZWZpbmUoInB1bnljb2RlIixmdW5jdGlvbigpe3JldHVybiBwdW55Y29kZX0pfWVsc2UgaWYoZnJlZUV4cG9ydHMmJmZyZWVNb2R1bGUpe2lmKG1vZHVsZS5leHBvcnRzPT1mcmVlRXhwb3J0cyl7ZnJlZU1vZHVsZS5leHBvcnRzPXB1bnljb2RlfWVsc2V7Zm9yKGtleSBpbiBwdW55Y29kZSl7cHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSYmKGZyZWVFeHBvcnRzW2tleV09cHVueWNvZGVba2V5XSl9fX1lbHNle3Jvb3QucHVueWNvZGU9cHVueWNvZGV9fSkodGhpcyl9KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwhPT0idW5kZWZpbmVkIj9nbG9iYWw6dHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30pfSx7fV0sNDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgcmVwbGFjZT1TdHJpbmcucHJvdG90eXBlLnJlcGxhY2U7dmFyIHBlcmNlbnRUd2VudGllcz0vJTIwL2c7dmFyIEZvcm1hdD17UkZDMTczODoiUkZDMTczOCIsUkZDMzk4NjoiUkZDMzk4NiJ9O21vZHVsZS5leHBvcnRzPXtkZWZhdWx0OkZvcm1hdC5SRkMzOTg2LGZvcm1hdHRlcnM6e1JGQzE3Mzg6ZnVuY3Rpb24odmFsdWUpe3JldHVybiByZXBsYWNlLmNhbGwodmFsdWUscGVyY2VudFR3ZW50aWVzLCIrIil9LFJGQzM5ODY6ZnVuY3Rpb24odmFsdWUpe3JldHVybiBTdHJpbmcodmFsdWUpfX0sUkZDMTczODpGb3JtYXQuUkZDMTczOCxSRkMzOTg2OkZvcm1hdC5SRkMzOTg2fX0se31dLDQyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7dmFyIHN0cmluZ2lmeT1yZXF1aXJlKCIuL3N0cmluZ2lmeSIpO3ZhciBwYXJzZT1yZXF1aXJlKCIuL3BhcnNlIik7dmFyIGZvcm1hdHM9cmVxdWlyZSgiLi9mb3JtYXRzIik7bW9kdWxlLmV4cG9ydHM9e2Zvcm1hdHM6Zm9ybWF0cyxwYXJzZTpwYXJzZSxzdHJpbmdpZnk6c3RyaW5naWZ5fX0seyIuL2Zvcm1hdHMiOjQxLCIuL3BhcnNlIjo0MywiLi9zdHJpbmdpZnkiOjQ0fV0sNDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgdXRpbHM9cmVxdWlyZSgiLi91dGlscyIpO3ZhciBoYXM9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt2YXIgaXNBcnJheT1BcnJheS5pc0FycmF5O3ZhciBkZWZhdWx0cz17YWxsb3dEb3RzOmZhbHNlLGFsbG93UHJvdG90eXBlczpmYWxzZSxhbGxvd1NwYXJzZTpmYWxzZSxhcnJheUxpbWl0OjIwLGNoYXJzZXQ6InV0Zi04IixjaGFyc2V0U2VudGluZWw6ZmFsc2UsY29tbWE6ZmFsc2UsZGVjb2Rlcjp1dGlscy5kZWNvZGUsZGVsaW1pdGVyOiImIixkZXB0aDo1LGlnbm9yZVF1ZXJ5UHJlZml4OmZhbHNlLGludGVycHJldE51bWVyaWNFbnRpdGllczpmYWxzZSxwYXJhbWV0ZXJMaW1pdDoxZTMscGFyc2VBcnJheXM6dHJ1ZSxwbGFpbk9iamVjdHM6ZmFsc2Usc3RyaWN0TnVsbEhhbmRsaW5nOmZhbHNlfTt2YXIgaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzPWZ1bmN0aW9uKHN0cil7cmV0dXJuIHN0ci5yZXBsYWNlKC8mIyhcZCspOy9nLGZ1bmN0aW9uKCQwLG51bWJlclN0cil7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQobnVtYmVyU3RyLDEwKSl9KX07dmFyIHBhcnNlQXJyYXlWYWx1ZT1mdW5jdGlvbih2YWwsb3B0aW9ucyl7aWYodmFsJiZ0eXBlb2YgdmFsPT09InN0cmluZyImJm9wdGlvbnMuY29tbWEmJnZhbC5pbmRleE9mKCIsIik+LTEpe3JldHVybiB2YWwuc3BsaXQoIiwiKX1yZXR1cm4gdmFsfTt2YXIgaXNvU2VudGluZWw9InV0Zjg9JTI2JTIzMTAwMDMlM0IiO3ZhciBjaGFyc2V0U2VudGluZWw9InV0Zjg9JUUyJTlDJTkzIjt2YXIgcGFyc2VWYWx1ZXM9ZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZ1ZhbHVlcyhzdHIsb3B0aW9ucyl7dmFyIG9iaj17X19wcm90b19fOm51bGx9O3ZhciBjbGVhblN0cj1vcHRpb25zLmlnbm9yZVF1ZXJ5UHJlZml4P3N0ci5yZXBsYWNlKC9eXD8vLCIiKTpzdHI7dmFyIGxpbWl0PW9wdGlvbnMucGFyYW1ldGVyTGltaXQ9PT1JbmZpbml0eT91bmRlZmluZWQ6b3B0aW9ucy5wYXJhbWV0ZXJMaW1pdDt2YXIgcGFydHM9Y2xlYW5TdHIuc3BsaXQob3B0aW9ucy5kZWxpbWl0ZXIsbGltaXQpO3ZhciBza2lwSW5kZXg9LTE7dmFyIGk7dmFyIGNoYXJzZXQ9b3B0aW9ucy5jaGFyc2V0O2lmKG9wdGlvbnMuY2hhcnNldFNlbnRpbmVsKXtmb3IoaT0wO2k8cGFydHMubGVuZ3RoOysraSl7aWYocGFydHNbaV0uaW5kZXhPZigidXRmOD0iKT09PTApe2lmKHBhcnRzW2ldPT09Y2hhcnNldFNlbnRpbmVsKXtjaGFyc2V0PSJ1dGYtOCJ9ZWxzZSBpZihwYXJ0c1tpXT09PWlzb1NlbnRpbmVsKXtjaGFyc2V0PSJpc28tODg1OS0xIn1za2lwSW5kZXg9aTtpPXBhcnRzLmxlbmd0aH19fWZvcihpPTA7aTxwYXJ0cy5sZW5ndGg7KytpKXtpZihpPT09c2tpcEluZGV4KXtjb250aW51ZX12YXIgcGFydD1wYXJ0c1tpXTt2YXIgYnJhY2tldEVxdWFsc1Bvcz1wYXJ0LmluZGV4T2YoIl09Iik7dmFyIHBvcz1icmFja2V0RXF1YWxzUG9zPT09LTE/cGFydC5pbmRleE9mKCI9Iik6YnJhY2tldEVxdWFsc1BvcysxO3ZhciBrZXksdmFsO2lmKHBvcz09PS0xKXtrZXk9b3B0aW9ucy5kZWNvZGVyKHBhcnQsZGVmYXVsdHMuZGVjb2RlcixjaGFyc2V0LCJrZXkiKTt2YWw9b3B0aW9ucy5zdHJpY3ROdWxsSGFuZGxpbmc/bnVsbDoiIn1lbHNle2tleT1vcHRpb25zLmRlY29kZXIocGFydC5zbGljZSgwLHBvcyksZGVmYXVsdHMuZGVjb2RlcixjaGFyc2V0LCJrZXkiKTt2YWw9dXRpbHMubWF5YmVNYXAocGFyc2VBcnJheVZhbHVlKHBhcnQuc2xpY2UocG9zKzEpLG9wdGlvbnMpLGZ1bmN0aW9uKGVuY29kZWRWYWwpe3JldHVybiBvcHRpb25zLmRlY29kZXIoZW5jb2RlZFZhbCxkZWZhdWx0cy5kZWNvZGVyLGNoYXJzZXQsInZhbHVlIil9KX1pZih2YWwmJm9wdGlvbnMuaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzJiZjaGFyc2V0PT09Imlzby04ODU5LTEiKXt2YWw9aW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzKHZhbCl9aWYocGFydC5pbmRleE9mKCJbXT0iKT4tMSl7dmFsPWlzQXJyYXkodmFsKT9bdmFsXTp2YWx9aWYoaGFzLmNhbGwob2JqLGtleSkpe29ialtrZXldPXV0aWxzLmNvbWJpbmUob2JqW2tleV0sdmFsKX1lbHNle29ialtrZXldPXZhbH19cmV0dXJuIG9ian07dmFyIHBhcnNlT2JqZWN0PWZ1bmN0aW9uKGNoYWluLHZhbCxvcHRpb25zLHZhbHVlc1BhcnNlZCl7dmFyIGxlYWY9dmFsdWVzUGFyc2VkP3ZhbDpwYXJzZUFycmF5VmFsdWUodmFsLG9wdGlvbnMpO2Zvcih2YXIgaT1jaGFpbi5sZW5ndGgtMTtpPj0wOy0taSl7dmFyIG9iajt2YXIgcm9vdD1jaGFpbltpXTtpZihyb290PT09IltdIiYmb3B0aW9ucy5wYXJzZUFycmF5cyl7b2JqPVtdLmNvbmNhdChsZWFmKX1lbHNle29iaj1vcHRpb25zLnBsYWluT2JqZWN0cz9PYmplY3QuY3JlYXRlKG51bGwpOnt9O3ZhciBjbGVhblJvb3Q9cm9vdC5jaGFyQXQoMCk9PT0iWyImJnJvb3QuY2hhckF0KHJvb3QubGVuZ3RoLTEpPT09Il0iP3Jvb3Quc2xpY2UoMSwtMSk6cm9vdDt2YXIgaW5kZXg9cGFyc2VJbnQoY2xlYW5Sb290LDEwKTtpZighb3B0aW9ucy5wYXJzZUFycmF5cyYmY2xlYW5Sb290PT09IiIpe29iaj17MDpsZWFmfX1lbHNlIGlmKCFpc05hTihpbmRleCkmJnJvb3QhPT1jbGVhblJvb3QmJlN0cmluZyhpbmRleCk9PT1jbGVhblJvb3QmJmluZGV4Pj0wJiYob3B0aW9ucy5wYXJzZUFycmF5cyYmaW5kZXg8PW9wdGlvbnMuYXJyYXlMaW1pdCkpe29iaj1bXTtvYmpbaW5kZXhdPWxlYWZ9ZWxzZSBpZihjbGVhblJvb3QhPT0iX19wcm90b19fIil7b2JqW2NsZWFuUm9vdF09bGVhZn19bGVhZj1vYmp9cmV0dXJuIGxlYWZ9O3ZhciBwYXJzZUtleXM9ZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZ0tleXMoZ2l2ZW5LZXksdmFsLG9wdGlvbnMsdmFsdWVzUGFyc2VkKXtpZighZ2l2ZW5LZXkpe3JldHVybn12YXIga2V5PW9wdGlvbnMuYWxsb3dEb3RzP2dpdmVuS2V5LnJlcGxhY2UoL1wuKFteLltdKykvZywiWyQxXSIpOmdpdmVuS2V5O3ZhciBicmFja2V0cz0vKFxbW15bXF1dKl0pLzt2YXIgY2hpbGQ9LyhcW1teW1xdXSpdKS9nO3ZhciBzZWdtZW50PW9wdGlvbnMuZGVwdGg+MCYmYnJhY2tldHMuZXhlYyhrZXkpO3ZhciBwYXJlbnQ9c2VnbWVudD9rZXkuc2xpY2UoMCxzZWdtZW50LmluZGV4KTprZXk7dmFyIGtleXM9W107aWYocGFyZW50KXtpZighb3B0aW9ucy5wbGFpbk9iamVjdHMmJmhhcy5jYWxsKE9iamVjdC5wcm90b3R5cGUscGFyZW50KSl7aWYoIW9wdGlvbnMuYWxsb3dQcm90b3R5cGVzKXtyZXR1cm59fWtleXMucHVzaChwYXJlbnQpfXZhciBpPTA7d2hpbGUob3B0aW9ucy5kZXB0aD4wJiYoc2VnbWVudD1jaGlsZC5leGVjKGtleSkpIT09bnVsbCYmaTxvcHRpb25zLmRlcHRoKXtpKz0xO2lmKCFvcHRpb25zLnBsYWluT2JqZWN0cyYmaGFzLmNhbGwoT2JqZWN0LnByb3RvdHlwZSxzZWdtZW50WzFdLnNsaWNlKDEsLTEpKSl7aWYoIW9wdGlvbnMuYWxsb3dQcm90b3R5cGVzKXtyZXR1cm59fWtleXMucHVzaChzZWdtZW50WzFdKX1pZihzZWdtZW50KXtrZXlzLnB1c2goIlsiK2tleS5zbGljZShzZWdtZW50LmluZGV4KSsiXSIpfXJldHVybiBwYXJzZU9iamVjdChrZXlzLHZhbCxvcHRpb25zLHZhbHVlc1BhcnNlZCl9O3ZhciBub3JtYWxpemVQYXJzZU9wdGlvbnM9ZnVuY3Rpb24gbm9ybWFsaXplUGFyc2VPcHRpb25zKG9wdHMpe2lmKCFvcHRzKXtyZXR1cm4gZGVmYXVsdHN9aWYob3B0cy5kZWNvZGVyIT09bnVsbCYmb3B0cy5kZWNvZGVyIT09dW5kZWZpbmVkJiZ0eXBlb2Ygb3B0cy5kZWNvZGVyIT09ImZ1bmN0aW9uIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiRGVjb2RlciBoYXMgdG8gYmUgYSBmdW5jdGlvbi4iKX1pZih0eXBlb2Ygb3B0cy5jaGFyc2V0IT09InVuZGVmaW5lZCImJm9wdHMuY2hhcnNldCE9PSJ1dGYtOCImJm9wdHMuY2hhcnNldCE9PSJpc28tODg1OS0xIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIGNoYXJzZXQgb3B0aW9uIG11c3QgYmUgZWl0aGVyIHV0Zi04LCBpc28tODg1OS0xLCBvciB1bmRlZmluZWQiKX12YXIgY2hhcnNldD10eXBlb2Ygb3B0cy5jaGFyc2V0PT09InVuZGVmaW5lZCI/ZGVmYXVsdHMuY2hhcnNldDpvcHRzLmNoYXJzZXQ7cmV0dXJue2FsbG93RG90czp0eXBlb2Ygb3B0cy5hbGxvd0RvdHM9PT0idW5kZWZpbmVkIj9kZWZhdWx0cy5hbGxvd0RvdHM6ISFvcHRzLmFsbG93RG90cyxhbGxvd1Byb3RvdHlwZXM6dHlwZW9mIG9wdHMuYWxsb3dQcm90b3R5cGVzPT09ImJvb2xlYW4iP29wdHMuYWxsb3dQcm90b3R5cGVzOmRlZmF1bHRzLmFsbG93UHJvdG90eXBlcyxhbGxvd1NwYXJzZTp0eXBlb2Ygb3B0cy5hbGxvd1NwYXJzZT09PSJib29sZWFuIj9vcHRzLmFsbG93U3BhcnNlOmRlZmF1bHRzLmFsbG93U3BhcnNlLGFycmF5TGltaXQ6dHlwZW9mIG9wdHMuYXJyYXlMaW1pdD09PSJudW1iZXIiP29wdHMuYXJyYXlMaW1pdDpkZWZhdWx0cy5hcnJheUxpbWl0LGNoYXJzZXQ6Y2hhcnNldCxjaGFyc2V0U2VudGluZWw6dHlwZW9mIG9wdHMuY2hhcnNldFNlbnRpbmVsPT09ImJvb2xlYW4iP29wdHMuY2hhcnNldFNlbnRpbmVsOmRlZmF1bHRzLmNoYXJzZXRTZW50aW5lbCxjb21tYTp0eXBlb2Ygb3B0cy5jb21tYT09PSJib29sZWFuIj9vcHRzLmNvbW1hOmRlZmF1bHRzLmNvbW1hLGRlY29kZXI6dHlwZW9mIG9wdHMuZGVjb2Rlcj09PSJmdW5jdGlvbiI/b3B0cy5kZWNvZGVyOmRlZmF1bHRzLmRlY29kZXIsZGVsaW1pdGVyOnR5cGVvZiBvcHRzLmRlbGltaXRlcj09PSJzdHJpbmcifHx1dGlscy5pc1JlZ0V4cChvcHRzLmRlbGltaXRlcik/b3B0cy5kZWxpbWl0ZXI6ZGVmYXVsdHMuZGVsaW1pdGVyLGRlcHRoOnR5cGVvZiBvcHRzLmRlcHRoPT09Im51bWJlciJ8fG9wdHMuZGVwdGg9PT1mYWxzZT8rb3B0cy5kZXB0aDpkZWZhdWx0cy5kZXB0aCxpZ25vcmVRdWVyeVByZWZpeDpvcHRzLmlnbm9yZVF1ZXJ5UHJlZml4PT09dHJ1ZSxpbnRlcnByZXROdW1lcmljRW50aXRpZXM6dHlwZW9mIG9wdHMuaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzPT09ImJvb2xlYW4iP29wdHMuaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzOmRlZmF1bHRzLmludGVycHJldE51bWVyaWNFbnRpdGllcyxwYXJhbWV0ZXJMaW1pdDp0eXBlb2Ygb3B0cy5wYXJhbWV0ZXJMaW1pdD09PSJudW1iZXIiP29wdHMucGFyYW1ldGVyTGltaXQ6ZGVmYXVsdHMucGFyYW1ldGVyTGltaXQscGFyc2VBcnJheXM6b3B0cy5wYXJzZUFycmF5cyE9PWZhbHNlLHBsYWluT2JqZWN0czp0eXBlb2Ygb3B0cy5wbGFpbk9iamVjdHM9PT0iYm9vbGVhbiI/b3B0cy5wbGFpbk9iamVjdHM6ZGVmYXVsdHMucGxhaW5PYmplY3RzLHN0cmljdE51bGxIYW5kbGluZzp0eXBlb2Ygb3B0cy5zdHJpY3ROdWxsSGFuZGxpbmc9PT0iYm9vbGVhbiI/b3B0cy5zdHJpY3ROdWxsSGFuZGxpbmc6ZGVmYXVsdHMuc3RyaWN0TnVsbEhhbmRsaW5nfX07bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oc3RyLG9wdHMpe3ZhciBvcHRpb25zPW5vcm1hbGl6ZVBhcnNlT3B0aW9ucyhvcHRzKTtpZihzdHI9PT0iInx8c3RyPT09bnVsbHx8dHlwZW9mIHN0cj09PSJ1bmRlZmluZWQiKXtyZXR1cm4gb3B0aW9ucy5wbGFpbk9iamVjdHM/T2JqZWN0LmNyZWF0ZShudWxsKTp7fX12YXIgdGVtcE9iaj10eXBlb2Ygc3RyPT09InN0cmluZyI/cGFyc2VWYWx1ZXMoc3RyLG9wdGlvbnMpOnN0cjt2YXIgb2JqPW9wdGlvbnMucGxhaW5PYmplY3RzP09iamVjdC5jcmVhdGUobnVsbCk6e307dmFyIGtleXM9T2JqZWN0LmtleXModGVtcE9iaik7Zm9yKHZhciBpPTA7aTxrZXlzLmxlbmd0aDsrK2kpe3ZhciBrZXk9a2V5c1tpXTt2YXIgbmV3T2JqPXBhcnNlS2V5cyhrZXksdGVtcE9ialtrZXldLG9wdGlvbnMsdHlwZW9mIHN0cj09PSJzdHJpbmciKTtvYmo9dXRpbHMubWVyZ2Uob2JqLG5ld09iaixvcHRpb25zKX1pZihvcHRpb25zLmFsbG93U3BhcnNlPT09dHJ1ZSl7cmV0dXJuIG9ian1yZXR1cm4gdXRpbHMuY29tcGFjdChvYmopfX0seyIuL3V0aWxzIjo0NX1dLDQ0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7dmFyIGdldFNpZGVDaGFubmVsPXJlcXVpcmUoInNpZGUtY2hhbm5lbCIpO3ZhciB1dGlscz1yZXF1aXJlKCIuL3V0aWxzIik7dmFyIGZvcm1hdHM9cmVxdWlyZSgiLi9mb3JtYXRzIik7dmFyIGhhcz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciBhcnJheVByZWZpeEdlbmVyYXRvcnM9e2JyYWNrZXRzOmZ1bmN0aW9uIGJyYWNrZXRzKHByZWZpeCl7cmV0dXJuIHByZWZpeCsiW10ifSxjb21tYToiY29tbWEiLGluZGljZXM6ZnVuY3Rpb24gaW5kaWNlcyhwcmVmaXgsa2V5KXtyZXR1cm4gcHJlZml4KyJbIitrZXkrIl0ifSxyZXBlYXQ6ZnVuY3Rpb24gcmVwZWF0KHByZWZpeCl7cmV0dXJuIHByZWZpeH19O3ZhciBpc0FycmF5PUFycmF5LmlzQXJyYXk7dmFyIHB1c2g9QXJyYXkucHJvdG90eXBlLnB1c2g7dmFyIHB1c2hUb0FycmF5PWZ1bmN0aW9uKGFycix2YWx1ZU9yQXJyYXkpe3B1c2guYXBwbHkoYXJyLGlzQXJyYXkodmFsdWVPckFycmF5KT92YWx1ZU9yQXJyYXk6W3ZhbHVlT3JBcnJheV0pfTt2YXIgdG9JU089RGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmc7dmFyIGRlZmF1bHRGb3JtYXQ9Zm9ybWF0c1siZGVmYXVsdCJdO3ZhciBkZWZhdWx0cz17YWRkUXVlcnlQcmVmaXg6ZmFsc2UsYWxsb3dEb3RzOmZhbHNlLGNoYXJzZXQ6InV0Zi04IixjaGFyc2V0U2VudGluZWw6ZmFsc2UsZGVsaW1pdGVyOiImIixlbmNvZGU6dHJ1ZSxlbmNvZGVyOnV0aWxzLmVuY29kZSxlbmNvZGVWYWx1ZXNPbmx5OmZhbHNlLGZvcm1hdDpkZWZhdWx0Rm9ybWF0LGZvcm1hdHRlcjpmb3JtYXRzLmZvcm1hdHRlcnNbZGVmYXVsdEZvcm1hdF0saW5kaWNlczpmYWxzZSxzZXJpYWxpemVEYXRlOmZ1bmN0aW9uIHNlcmlhbGl6ZURhdGUoZGF0ZSl7cmV0dXJuIHRvSVNPLmNhbGwoZGF0ZSl9LHNraXBOdWxsczpmYWxzZSxzdHJpY3ROdWxsSGFuZGxpbmc6ZmFsc2V9O3ZhciBpc05vbk51bGxpc2hQcmltaXRpdmU9ZnVuY3Rpb24gaXNOb25OdWxsaXNoUHJpbWl0aXZlKHYpe3JldHVybiB0eXBlb2Ygdj09PSJzdHJpbmcifHx0eXBlb2Ygdj09PSJudW1iZXIifHx0eXBlb2Ygdj09PSJib29sZWFuInx8dHlwZW9mIHY9PT0ic3ltYm9sInx8dHlwZW9mIHY9PT0iYmlnaW50In07dmFyIHNlbnRpbmVsPXt9O3ZhciBzdHJpbmdpZnk9ZnVuY3Rpb24gc3RyaW5naWZ5KG9iamVjdCxwcmVmaXgsZ2VuZXJhdGVBcnJheVByZWZpeCxjb21tYVJvdW5kVHJpcCxzdHJpY3ROdWxsSGFuZGxpbmcsc2tpcE51bGxzLGVuY29kZXIsZmlsdGVyLHNvcnQsYWxsb3dEb3RzLHNlcmlhbGl6ZURhdGUsZm9ybWF0LGZvcm1hdHRlcixlbmNvZGVWYWx1ZXNPbmx5LGNoYXJzZXQsc2lkZUNoYW5uZWwpe3ZhciBvYmo9b2JqZWN0O3ZhciB0bXBTYz1zaWRlQ2hhbm5lbDt2YXIgc3RlcD0wO3ZhciBmaW5kRmxhZz1mYWxzZTt3aGlsZSgodG1wU2M9dG1wU2MuZ2V0KHNlbnRpbmVsKSkhPT12b2lkIHVuZGVmaW5lZCYmIWZpbmRGbGFnKXt2YXIgcG9zPXRtcFNjLmdldChvYmplY3QpO3N0ZXArPTE7aWYodHlwZW9mIHBvcyE9PSJ1bmRlZmluZWQiKXtpZihwb3M9PT1zdGVwKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ3ljbGljIG9iamVjdCB2YWx1ZSIpfWVsc2V7ZmluZEZsYWc9dHJ1ZX19aWYodHlwZW9mIHRtcFNjLmdldChzZW50aW5lbCk9PT0idW5kZWZpbmVkIil7c3RlcD0wfX1pZih0eXBlb2YgZmlsdGVyPT09ImZ1bmN0aW9uIil7b2JqPWZpbHRlcihwcmVmaXgsb2JqKX1lbHNlIGlmKG9iaiBpbnN0YW5jZW9mIERhdGUpe29iaj1zZXJpYWxpemVEYXRlKG9iail9ZWxzZSBpZihnZW5lcmF0ZUFycmF5UHJlZml4PT09ImNvbW1hIiYmaXNBcnJheShvYmopKXtvYmo9dXRpbHMubWF5YmVNYXAob2JqLGZ1bmN0aW9uKHZhbHVlKXtpZih2YWx1ZSBpbnN0YW5jZW9mIERhdGUpe3JldHVybiBzZXJpYWxpemVEYXRlKHZhbHVlKX1yZXR1cm4gdmFsdWV9KX1pZihvYmo9PT1udWxsKXtpZihzdHJpY3ROdWxsSGFuZGxpbmcpe3JldHVybiBlbmNvZGVyJiYhZW5jb2RlVmFsdWVzT25seT9lbmNvZGVyKHByZWZpeCxkZWZhdWx0cy5lbmNvZGVyLGNoYXJzZXQsImtleSIsZm9ybWF0KTpwcmVmaXh9b2JqPSIifWlmKGlzTm9uTnVsbGlzaFByaW1pdGl2ZShvYmopfHx1dGlscy5pc0J1ZmZlcihvYmopKXtpZihlbmNvZGVyKXt2YXIga2V5VmFsdWU9ZW5jb2RlVmFsdWVzT25seT9wcmVmaXg6ZW5jb2RlcihwcmVmaXgsZGVmYXVsdHMuZW5jb2RlcixjaGFyc2V0LCJrZXkiLGZvcm1hdCk7cmV0dXJuW2Zvcm1hdHRlcihrZXlWYWx1ZSkrIj0iK2Zvcm1hdHRlcihlbmNvZGVyKG9iaixkZWZhdWx0cy5lbmNvZGVyLGNoYXJzZXQsInZhbHVlIixmb3JtYXQpKV19cmV0dXJuW2Zvcm1hdHRlcihwcmVmaXgpKyI9Iitmb3JtYXR0ZXIoU3RyaW5nKG9iaikpXX12YXIgdmFsdWVzPVtdO2lmKHR5cGVvZiBvYmo9PT0idW5kZWZpbmVkIil7cmV0dXJuIHZhbHVlc312YXIgb2JqS2V5cztpZihnZW5lcmF0ZUFycmF5UHJlZml4PT09ImNvbW1hIiYmaXNBcnJheShvYmopKXtpZihlbmNvZGVWYWx1ZXNPbmx5JiZlbmNvZGVyKXtvYmo9dXRpbHMubWF5YmVNYXAob2JqLGVuY29kZXIpfW9iaktleXM9W3t2YWx1ZTpvYmoubGVuZ3RoPjA/b2JqLmpvaW4oIiwiKXx8bnVsbDp2b2lkIHVuZGVmaW5lZH1dfWVsc2UgaWYoaXNBcnJheShmaWx0ZXIpKXtvYmpLZXlzPWZpbHRlcn1lbHNle3ZhciBrZXlzPU9iamVjdC5rZXlzKG9iaik7b2JqS2V5cz1zb3J0P2tleXMuc29ydChzb3J0KTprZXlzfXZhciBhZGp1c3RlZFByZWZpeD1jb21tYVJvdW5kVHJpcCYmaXNBcnJheShvYmopJiZvYmoubGVuZ3RoPT09MT9wcmVmaXgrIltdIjpwcmVmaXg7Zm9yKHZhciBqPTA7ajxvYmpLZXlzLmxlbmd0aDsrK2ope3ZhciBrZXk9b2JqS2V5c1tqXTt2YXIgdmFsdWU9dHlwZW9mIGtleT09PSJvYmplY3QiJiZ0eXBlb2Yga2V5LnZhbHVlIT09InVuZGVmaW5lZCI/a2V5LnZhbHVlOm9ialtrZXldO2lmKHNraXBOdWxscyYmdmFsdWU9PT1udWxsKXtjb250aW51ZX12YXIga2V5UHJlZml4PWlzQXJyYXkob2JqKT90eXBlb2YgZ2VuZXJhdGVBcnJheVByZWZpeD09PSJmdW5jdGlvbiI/Z2VuZXJhdGVBcnJheVByZWZpeChhZGp1c3RlZFByZWZpeCxrZXkpOmFkanVzdGVkUHJlZml4OmFkanVzdGVkUHJlZml4KyhhbGxvd0RvdHM/Ii4iK2tleToiWyIra2V5KyJdIik7c2lkZUNoYW5uZWwuc2V0KG9iamVjdCxzdGVwKTt2YXIgdmFsdWVTaWRlQ2hhbm5lbD1nZXRTaWRlQ2hhbm5lbCgpO3ZhbHVlU2lkZUNoYW5uZWwuc2V0KHNlbnRpbmVsLHNpZGVDaGFubmVsKTtwdXNoVG9BcnJheSh2YWx1ZXMsc3RyaW5naWZ5KHZhbHVlLGtleVByZWZpeCxnZW5lcmF0ZUFycmF5UHJlZml4LGNvbW1hUm91bmRUcmlwLHN0cmljdE51bGxIYW5kbGluZyxza2lwTnVsbHMsZ2VuZXJhdGVBcnJheVByZWZpeD09PSJjb21tYSImJmVuY29kZVZhbHVlc09ubHkmJmlzQXJyYXkob2JqKT9udWxsOmVuY29kZXIsZmlsdGVyLHNvcnQsYWxsb3dEb3RzLHNlcmlhbGl6ZURhdGUsZm9ybWF0LGZvcm1hdHRlcixlbmNvZGVWYWx1ZXNPbmx5LGNoYXJzZXQsdmFsdWVTaWRlQ2hhbm5lbCkpfXJldHVybiB2YWx1ZXN9O3ZhciBub3JtYWxpemVTdHJpbmdpZnlPcHRpb25zPWZ1bmN0aW9uIG5vcm1hbGl6ZVN0cmluZ2lmeU9wdGlvbnMob3B0cyl7aWYoIW9wdHMpe3JldHVybiBkZWZhdWx0c31pZihvcHRzLmVuY29kZXIhPT1udWxsJiZ0eXBlb2Ygb3B0cy5lbmNvZGVyIT09InVuZGVmaW5lZCImJnR5cGVvZiBvcHRzLmVuY29kZXIhPT0iZnVuY3Rpb24iKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJFbmNvZGVyIGhhcyB0byBiZSBhIGZ1bmN0aW9uLiIpfXZhciBjaGFyc2V0PW9wdHMuY2hhcnNldHx8ZGVmYXVsdHMuY2hhcnNldDtpZih0eXBlb2Ygb3B0cy5jaGFyc2V0IT09InVuZGVmaW5lZCImJm9wdHMuY2hhcnNldCE9PSJ1dGYtOCImJm9wdHMuY2hhcnNldCE9PSJpc28tODg1OS0xIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIGNoYXJzZXQgb3B0aW9uIG11c3QgYmUgZWl0aGVyIHV0Zi04LCBpc28tODg1OS0xLCBvciB1bmRlZmluZWQiKX12YXIgZm9ybWF0PWZvcm1hdHNbImRlZmF1bHQiXTtpZih0eXBlb2Ygb3B0cy5mb3JtYXQhPT0idW5kZWZpbmVkIil7aWYoIWhhcy5jYWxsKGZvcm1hdHMuZm9ybWF0dGVycyxvcHRzLmZvcm1hdCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZm9ybWF0IG9wdGlvbiBwcm92aWRlZC4iKX1mb3JtYXQ9b3B0cy5mb3JtYXR9dmFyIGZvcm1hdHRlcj1mb3JtYXRzLmZvcm1hdHRlcnNbZm9ybWF0XTt2YXIgZmlsdGVyPWRlZmF1bHRzLmZpbHRlcjtpZih0eXBlb2Ygb3B0cy5maWx0ZXI9PT0iZnVuY3Rpb24ifHxpc0FycmF5KG9wdHMuZmlsdGVyKSl7ZmlsdGVyPW9wdHMuZmlsdGVyfXJldHVybnthZGRRdWVyeVByZWZpeDp0eXBlb2Ygb3B0cy5hZGRRdWVyeVByZWZpeD09PSJib29sZWFuIj9vcHRzLmFkZFF1ZXJ5UHJlZml4OmRlZmF1bHRzLmFkZFF1ZXJ5UHJlZml4LGFsbG93RG90czp0eXBlb2Ygb3B0cy5hbGxvd0RvdHM9PT0idW5kZWZpbmVkIj9kZWZhdWx0cy5hbGxvd0RvdHM6ISFvcHRzLmFsbG93RG90cyxjaGFyc2V0OmNoYXJzZXQsY2hhcnNldFNlbnRpbmVsOnR5cGVvZiBvcHRzLmNoYXJzZXRTZW50aW5lbD09PSJib29sZWFuIj9vcHRzLmNoYXJzZXRTZW50aW5lbDpkZWZhdWx0cy5jaGFyc2V0U2VudGluZWwsZGVsaW1pdGVyOnR5cGVvZiBvcHRzLmRlbGltaXRlcj09PSJ1bmRlZmluZWQiP2RlZmF1bHRzLmRlbGltaXRlcjpvcHRzLmRlbGltaXRlcixlbmNvZGU6dHlwZW9mIG9wdHMuZW5jb2RlPT09ImJvb2xlYW4iP29wdHMuZW5jb2RlOmRlZmF1bHRzLmVuY29kZSxlbmNvZGVyOnR5cGVvZiBvcHRzLmVuY29kZXI9PT0iZnVuY3Rpb24iP29wdHMuZW5jb2RlcjpkZWZhdWx0cy5lbmNvZGVyLGVuY29kZVZhbHVlc09ubHk6dHlwZW9mIG9wdHMuZW5jb2RlVmFsdWVzT25seT09PSJib29sZWFuIj9vcHRzLmVuY29kZVZhbHVlc09ubHk6ZGVmYXVsdHMuZW5jb2RlVmFsdWVzT25seSxmaWx0ZXI6ZmlsdGVyLGZvcm1hdDpmb3JtYXQsZm9ybWF0dGVyOmZvcm1hdHRlcixzZXJpYWxpemVEYXRlOnR5cGVvZiBvcHRzLnNlcmlhbGl6ZURhdGU9PT0iZnVuY3Rpb24iP29wdHMuc2VyaWFsaXplRGF0ZTpkZWZhdWx0cy5zZXJpYWxpemVEYXRlLHNraXBOdWxsczp0eXBlb2Ygb3B0cy5za2lwTnVsbHM9PT0iYm9vbGVhbiI/b3B0cy5za2lwTnVsbHM6ZGVmYXVsdHMuc2tpcE51bGxzLHNvcnQ6dHlwZW9mIG9wdHMuc29ydD09PSJmdW5jdGlvbiI/b3B0cy5zb3J0Om51bGwsc3RyaWN0TnVsbEhhbmRsaW5nOnR5cGVvZiBvcHRzLnN0cmljdE51bGxIYW5kbGluZz09PSJib29sZWFuIj9vcHRzLnN0cmljdE51bGxIYW5kbGluZzpkZWZhdWx0cy5zdHJpY3ROdWxsSGFuZGxpbmd9fTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihvYmplY3Qsb3B0cyl7dmFyIG9iaj1vYmplY3Q7dmFyIG9wdGlvbnM9bm9ybWFsaXplU3RyaW5naWZ5T3B0aW9ucyhvcHRzKTt2YXIgb2JqS2V5czt2YXIgZmlsdGVyO2lmKHR5cGVvZiBvcHRpb25zLmZpbHRlcj09PSJmdW5jdGlvbiIpe2ZpbHRlcj1vcHRpb25zLmZpbHRlcjtvYmo9ZmlsdGVyKCIiLG9iail9ZWxzZSBpZihpc0FycmF5KG9wdGlvbnMuZmlsdGVyKSl7ZmlsdGVyPW9wdGlvbnMuZmlsdGVyO29iaktleXM9ZmlsdGVyfXZhciBrZXlzPVtdO2lmKHR5cGVvZiBvYmohPT0ib2JqZWN0Inx8b2JqPT09bnVsbCl7cmV0dXJuIiJ9dmFyIGFycmF5Rm9ybWF0O2lmKG9wdHMmJm9wdHMuYXJyYXlGb3JtYXQgaW4gYXJyYXlQcmVmaXhHZW5lcmF0b3JzKXthcnJheUZvcm1hdD1vcHRzLmFycmF5Rm9ybWF0fWVsc2UgaWYob3B0cyYmImluZGljZXMiaW4gb3B0cyl7YXJyYXlGb3JtYXQ9b3B0cy5pbmRpY2VzPyJpbmRpY2VzIjoicmVwZWF0In1lbHNle2FycmF5Rm9ybWF0PSJpbmRpY2VzIn12YXIgZ2VuZXJhdGVBcnJheVByZWZpeD1hcnJheVByZWZpeEdlbmVyYXRvcnNbYXJyYXlGb3JtYXRdO2lmKG9wdHMmJiJjb21tYVJvdW5kVHJpcCJpbiBvcHRzJiZ0eXBlb2Ygb3B0cy5jb21tYVJvdW5kVHJpcCE9PSJib29sZWFuIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiYGNvbW1hUm91bmRUcmlwYCBtdXN0IGJlIGEgYm9vbGVhbiwgb3IgYWJzZW50Iil9dmFyIGNvbW1hUm91bmRUcmlwPWdlbmVyYXRlQXJyYXlQcmVmaXg9PT0iY29tbWEiJiZvcHRzJiZvcHRzLmNvbW1hUm91bmRUcmlwO2lmKCFvYmpLZXlzKXtvYmpLZXlzPU9iamVjdC5rZXlzKG9iail9aWYob3B0aW9ucy5zb3J0KXtvYmpLZXlzLnNvcnQob3B0aW9ucy5zb3J0KX12YXIgc2lkZUNoYW5uZWw9Z2V0U2lkZUNoYW5uZWwoKTtmb3IodmFyIGk9MDtpPG9iaktleXMubGVuZ3RoOysraSl7dmFyIGtleT1vYmpLZXlzW2ldO2lmKG9wdGlvbnMuc2tpcE51bGxzJiZvYmpba2V5XT09PW51bGwpe2NvbnRpbnVlfXB1c2hUb0FycmF5KGtleXMsc3RyaW5naWZ5KG9ialtrZXldLGtleSxnZW5lcmF0ZUFycmF5UHJlZml4LGNvbW1hUm91bmRUcmlwLG9wdGlvbnMuc3RyaWN0TnVsbEhhbmRsaW5nLG9wdGlvbnMuc2tpcE51bGxzLG9wdGlvbnMuZW5jb2RlP29wdGlvbnMuZW5jb2RlcjpudWxsLG9wdGlvbnMuZmlsdGVyLG9wdGlvbnMuc29ydCxvcHRpb25zLmFsbG93RG90cyxvcHRpb25zLnNlcmlhbGl6ZURhdGUsb3B0aW9ucy5mb3JtYXQsb3B0aW9ucy5mb3JtYXR0ZXIsb3B0aW9ucy5lbmNvZGVWYWx1ZXNPbmx5LG9wdGlvbnMuY2hhcnNldCxzaWRlQ2hhbm5lbCkpfXZhciBqb2luZWQ9a2V5cy5qb2luKG9wdGlvbnMuZGVsaW1pdGVyKTt2YXIgcHJlZml4PW9wdGlvbnMuYWRkUXVlcnlQcmVmaXg9PT10cnVlPyI/IjoiIjtpZihvcHRpb25zLmNoYXJzZXRTZW50aW5lbCl7aWYob3B0aW9ucy5jaGFyc2V0PT09Imlzby04ODU5LTEiKXtwcmVmaXgrPSJ1dGY4PSUyNiUyMzEwMDAzJTNCJiJ9ZWxzZXtwcmVmaXgrPSJ1dGY4PSVFMiU5QyU5MyYifX1yZXR1cm4gam9pbmVkLmxlbmd0aD4wP3ByZWZpeCtqb2luZWQ6IiJ9fSx7Ii4vZm9ybWF0cyI6NDEsIi4vdXRpbHMiOjQ1LCJzaWRlLWNoYW5uZWwiOjQ3fV0sNDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgZm9ybWF0cz1yZXF1aXJlKCIuL2Zvcm1hdHMiKTt2YXIgaGFzPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIGlzQXJyYXk9QXJyYXkuaXNBcnJheTt2YXIgaGV4VGFibGU9ZnVuY3Rpb24oKXt2YXIgYXJyYXk9W107Zm9yKHZhciBpPTA7aTwyNTY7KytpKXthcnJheS5wdXNoKCIlIisoKGk8MTY/IjAiOiIiKStpLnRvU3RyaW5nKDE2KSkudG9VcHBlckNhc2UoKSl9cmV0dXJuIGFycmF5fSgpO3ZhciBjb21wYWN0UXVldWU9ZnVuY3Rpb24gY29tcGFjdFF1ZXVlKHF1ZXVlKXt3aGlsZShxdWV1ZS5sZW5ndGg+MSl7dmFyIGl0ZW09cXVldWUucG9wKCk7dmFyIG9iaj1pdGVtLm9ialtpdGVtLnByb3BdO2lmKGlzQXJyYXkob2JqKSl7dmFyIGNvbXBhY3RlZD1bXTtmb3IodmFyIGo9MDtqPG9iai5sZW5ndGg7KytqKXtpZih0eXBlb2Ygb2JqW2pdIT09InVuZGVmaW5lZCIpe2NvbXBhY3RlZC5wdXNoKG9ialtqXSl9fWl0ZW0ub2JqW2l0ZW0ucHJvcF09Y29tcGFjdGVkfX19O3ZhciBhcnJheVRvT2JqZWN0PWZ1bmN0aW9uIGFycmF5VG9PYmplY3Qoc291cmNlLG9wdGlvbnMpe3ZhciBvYmo9b3B0aW9ucyYmb3B0aW9ucy5wbGFpbk9iamVjdHM/T2JqZWN0LmNyZWF0ZShudWxsKTp7fTtmb3IodmFyIGk9MDtpPHNvdXJjZS5sZW5ndGg7KytpKXtpZih0eXBlb2Ygc291cmNlW2ldIT09InVuZGVmaW5lZCIpe29ialtpXT1zb3VyY2VbaV19fXJldHVybiBvYmp9O3ZhciBtZXJnZT1mdW5jdGlvbiBtZXJnZSh0YXJnZXQsc291cmNlLG9wdGlvbnMpe2lmKCFzb3VyY2Upe3JldHVybiB0YXJnZXR9aWYodHlwZW9mIHNvdXJjZSE9PSJvYmplY3QiKXtpZihpc0FycmF5KHRhcmdldCkpe3RhcmdldC5wdXNoKHNvdXJjZSl9ZWxzZSBpZih0YXJnZXQmJnR5cGVvZiB0YXJnZXQ9PT0ib2JqZWN0Iil7aWYob3B0aW9ucyYmKG9wdGlvbnMucGxhaW5PYmplY3RzfHxvcHRpb25zLmFsbG93UHJvdG90eXBlcyl8fCFoYXMuY2FsbChPYmplY3QucHJvdG90eXBlLHNvdXJjZSkpe3RhcmdldFtzb3VyY2VdPXRydWV9fWVsc2V7cmV0dXJuW3RhcmdldCxzb3VyY2VdfXJldHVybiB0YXJnZXR9aWYoIXRhcmdldHx8dHlwZW9mIHRhcmdldCE9PSJvYmplY3QiKXtyZXR1cm5bdGFyZ2V0XS5jb25jYXQoc291cmNlKX12YXIgbWVyZ2VUYXJnZXQ9dGFyZ2V0O2lmKGlzQXJyYXkodGFyZ2V0KSYmIWlzQXJyYXkoc291cmNlKSl7bWVyZ2VUYXJnZXQ9YXJyYXlUb09iamVjdCh0YXJnZXQsb3B0aW9ucyl9aWYoaXNBcnJheSh0YXJnZXQpJiZpc0FycmF5KHNvdXJjZSkpe3NvdXJjZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0saSl7aWYoaGFzLmNhbGwodGFyZ2V0LGkpKXt2YXIgdGFyZ2V0SXRlbT10YXJnZXRbaV07aWYodGFyZ2V0SXRlbSYmdHlwZW9mIHRhcmdldEl0ZW09PT0ib2JqZWN0IiYmaXRlbSYmdHlwZW9mIGl0ZW09PT0ib2JqZWN0Iil7dGFyZ2V0W2ldPW1lcmdlKHRhcmdldEl0ZW0saXRlbSxvcHRpb25zKX1lbHNle3RhcmdldC5wdXNoKGl0ZW0pfX1lbHNle3RhcmdldFtpXT1pdGVtfX0pO3JldHVybiB0YXJnZXR9cmV0dXJuIE9iamVjdC5rZXlzKHNvdXJjZSkucmVkdWNlKGZ1bmN0aW9uKGFjYyxrZXkpe3ZhciB2YWx1ZT1zb3VyY2Vba2V5XTtpZihoYXMuY2FsbChhY2Msa2V5KSl7YWNjW2tleV09bWVyZ2UoYWNjW2tleV0sdmFsdWUsb3B0aW9ucyl9ZWxzZXthY2Nba2V5XT12YWx1ZX1yZXR1cm4gYWNjfSxtZXJnZVRhcmdldCl9O3ZhciBhc3NpZ249ZnVuY3Rpb24gYXNzaWduU2luZ2xlU291cmNlKHRhcmdldCxzb3VyY2Upe3JldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpLnJlZHVjZShmdW5jdGlvbihhY2Msa2V5KXthY2Nba2V5XT1zb3VyY2Vba2V5XTtyZXR1cm4gYWNjfSx0YXJnZXQpfTt2YXIgZGVjb2RlPWZ1bmN0aW9uKHN0cixkZWNvZGVyLGNoYXJzZXQpe3ZhciBzdHJXaXRob3V0UGx1cz1zdHIucmVwbGFjZSgvXCsvZywiICIpO2lmKGNoYXJzZXQ9PT0iaXNvLTg4NTktMSIpe3JldHVybiBzdHJXaXRob3V0UGx1cy5yZXBsYWNlKC8lWzAtOWEtZl17Mn0vZ2ksdW5lc2NhcGUpfXRyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHN0cldpdGhvdXRQbHVzKX1jYXRjaChlKXtyZXR1cm4gc3RyV2l0aG91dFBsdXN9fTt2YXIgZW5jb2RlPWZ1bmN0aW9uIGVuY29kZShzdHIsZGVmYXVsdEVuY29kZXIsY2hhcnNldCxraW5kLGZvcm1hdCl7aWYoc3RyLmxlbmd0aD09PTApe3JldHVybiBzdHJ9dmFyIHN0cmluZz1zdHI7aWYodHlwZW9mIHN0cj09PSJzeW1ib2wiKXtzdHJpbmc9U3ltYm9sLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHN0cil9ZWxzZSBpZih0eXBlb2Ygc3RyIT09InN0cmluZyIpe3N0cmluZz1TdHJpbmcoc3RyKX1pZihjaGFyc2V0PT09Imlzby04ODU5LTEiKXtyZXR1cm4gZXNjYXBlKHN0cmluZykucmVwbGFjZSgvJXVbMC05YS1mXXs0fS9naSxmdW5jdGlvbigkMCl7cmV0dXJuIiUyNiUyMyIrcGFyc2VJbnQoJDAuc2xpY2UoMiksMTYpKyIlM0IifSl9dmFyIG91dD0iIjtmb3IodmFyIGk9MDtpPHN0cmluZy5sZW5ndGg7KytpKXt2YXIgYz1zdHJpbmcuY2hhckNvZGVBdChpKTtpZihjPT09NDV8fGM9PT00Nnx8Yz09PTk1fHxjPT09MTI2fHxjPj00OCYmYzw9NTd8fGM+PTY1JiZjPD05MHx8Yz49OTcmJmM8PTEyMnx8Zm9ybWF0PT09Zm9ybWF0cy5SRkMxNzM4JiYoYz09PTQwfHxjPT09NDEpKXtvdXQrPXN0cmluZy5jaGFyQXQoaSk7Y29udGludWV9aWYoYzwxMjgpe291dD1vdXQraGV4VGFibGVbY107Y29udGludWV9aWYoYzwyMDQ4KXtvdXQ9b3V0KyhoZXhUYWJsZVsxOTJ8Yz4+Nl0raGV4VGFibGVbMTI4fGMmNjNdKTtjb250aW51ZX1pZihjPDU1Mjk2fHxjPj01NzM0NCl7b3V0PW91dCsoaGV4VGFibGVbMjI0fGM+PjEyXStoZXhUYWJsZVsxMjh8Yz4+NiY2M10raGV4VGFibGVbMTI4fGMmNjNdKTtjb250aW51ZX1pKz0xO2M9NjU1MzYrKChjJjEwMjMpPDwxMHxzdHJpbmcuY2hhckNvZGVBdChpKSYxMDIzKTtvdXQrPWhleFRhYmxlWzI0MHxjPj4xOF0raGV4VGFibGVbMTI4fGM+PjEyJjYzXStoZXhUYWJsZVsxMjh8Yz4+NiY2M10raGV4VGFibGVbMTI4fGMmNjNdfXJldHVybiBvdXR9O3ZhciBjb21wYWN0PWZ1bmN0aW9uIGNvbXBhY3QodmFsdWUpe3ZhciBxdWV1ZT1be29iajp7bzp2YWx1ZX0scHJvcDoibyJ9XTt2YXIgcmVmcz1bXTtmb3IodmFyIGk9MDtpPHF1ZXVlLmxlbmd0aDsrK2kpe3ZhciBpdGVtPXF1ZXVlW2ldO3ZhciBvYmo9aXRlbS5vYmpbaXRlbS5wcm9wXTt2YXIga2V5cz1PYmplY3Qua2V5cyhvYmopO2Zvcih2YXIgaj0wO2o8a2V5cy5sZW5ndGg7KytqKXt2YXIga2V5PWtleXNbal07dmFyIHZhbD1vYmpba2V5XTtpZih0eXBlb2YgdmFsPT09Im9iamVjdCImJnZhbCE9PW51bGwmJnJlZnMuaW5kZXhPZih2YWwpPT09LTEpe3F1ZXVlLnB1c2goe29iajpvYmoscHJvcDprZXl9KTtyZWZzLnB1c2godmFsKX19fWNvbXBhY3RRdWV1ZShxdWV1ZSk7cmV0dXJuIHZhbHVlfTt2YXIgaXNSZWdFeHA9ZnVuY3Rpb24gaXNSZWdFeHAob2JqKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik9PT0iW29iamVjdCBSZWdFeHBdIn07dmFyIGlzQnVmZmVyPWZ1bmN0aW9uIGlzQnVmZmVyKG9iail7aWYoIW9ianx8dHlwZW9mIG9iaiE9PSJvYmplY3QiKXtyZXR1cm4gZmFsc2V9cmV0dXJuISEob2JqLmNvbnN0cnVjdG9yJiZvYmouY29uc3RydWN0b3IuaXNCdWZmZXImJm9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihvYmopKX07dmFyIGNvbWJpbmU9ZnVuY3Rpb24gY29tYmluZShhLGIpe3JldHVybltdLmNvbmNhdChhLGIpfTt2YXIgbWF5YmVNYXA9ZnVuY3Rpb24gbWF5YmVNYXAodmFsLGZuKXtpZihpc0FycmF5KHZhbCkpe3ZhciBtYXBwZWQ9W107Zm9yKHZhciBpPTA7aTx2YWwubGVuZ3RoO2krPTEpe21hcHBlZC5wdXNoKGZuKHZhbFtpXSkpfXJldHVybiBtYXBwZWR9cmV0dXJuIGZuKHZhbCl9O21vZHVsZS5leHBvcnRzPXthcnJheVRvT2JqZWN0OmFycmF5VG9PYmplY3QsYXNzaWduOmFzc2lnbixjb21iaW5lOmNvbWJpbmUsY29tcGFjdDpjb21wYWN0LGRlY29kZTpkZWNvZGUsZW5jb2RlOmVuY29kZSxpc0J1ZmZlcjppc0J1ZmZlcixpc1JlZ0V4cDppc1JlZ0V4cCxtYXliZU1hcDptYXliZU1hcCxtZXJnZTptZXJnZX19LHsiLi9mb3JtYXRzIjo0MX1dLDQ2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXt2YXIgYnVmZmVyPXJlcXVpcmUoImJ1ZmZlciIpO3ZhciBCdWZmZXI9YnVmZmVyLkJ1ZmZlcjtmdW5jdGlvbiBjb3B5UHJvcHMoc3JjLGRzdCl7Zm9yKHZhciBrZXkgaW4gc3JjKXtkc3Rba2V5XT1zcmNba2V5XX19aWYoQnVmZmVyLmZyb20mJkJ1ZmZlci5hbGxvYyYmQnVmZmVyLmFsbG9jVW5zYWZlJiZCdWZmZXIuYWxsb2NVbnNhZmVTbG93KXttb2R1bGUuZXhwb3J0cz1idWZmZXJ9ZWxzZXtjb3B5UHJvcHMoYnVmZmVyLGV4cG9ydHMpO2V4cG9ydHMuQnVmZmVyPVNhZmVCdWZmZXJ9ZnVuY3Rpb24gU2FmZUJ1ZmZlcihhcmcsZW5jb2RpbmdPck9mZnNldCxsZW5ndGgpe3JldHVybiBCdWZmZXIoYXJnLGVuY29kaW5nT3JPZmZzZXQsbGVuZ3RoKX1TYWZlQnVmZmVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEJ1ZmZlci5wcm90b3R5cGUpO2NvcHlQcm9wcyhCdWZmZXIsU2FmZUJ1ZmZlcik7U2FmZUJ1ZmZlci5mcm9tPWZ1bmN0aW9uKGFyZyxlbmNvZGluZ09yT2Zmc2V0LGxlbmd0aCl7aWYodHlwZW9mIGFyZz09PSJudW1iZXIiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlciIpfXJldHVybiBCdWZmZXIoYXJnLGVuY29kaW5nT3JPZmZzZXQsbGVuZ3RoKX07U2FmZUJ1ZmZlci5hbGxvYz1mdW5jdGlvbihzaXplLGZpbGwsZW5jb2Rpbmcpe2lmKHR5cGVvZiBzaXplIT09Im51bWJlciIpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXIiKX12YXIgYnVmPUJ1ZmZlcihzaXplKTtpZihmaWxsIT09dW5kZWZpbmVkKXtpZih0eXBlb2YgZW5jb2Rpbmc9PT0ic3RyaW5nIil7YnVmLmZpbGwoZmlsbCxlbmNvZGluZyl9ZWxzZXtidWYuZmlsbChmaWxsKX19ZWxzZXtidWYuZmlsbCgwKX1yZXR1cm4gYnVmfTtTYWZlQnVmZmVyLmFsbG9jVW5zYWZlPWZ1bmN0aW9uKHNpemUpe2lmKHR5cGVvZiBzaXplIT09Im51bWJlciIpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXIiKX1yZXR1cm4gQnVmZmVyKHNpemUpfTtTYWZlQnVmZmVyLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihzaXplKXtpZih0eXBlb2Ygc2l6ZSE9PSJudW1iZXIiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyIil9cmV0dXJuIGJ1ZmZlci5TbG93QnVmZmVyKHNpemUpfX0se2J1ZmZlcjo4fV0sNDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgR2V0SW50cmluc2ljPXJlcXVpcmUoImdldC1pbnRyaW5zaWMiKTt2YXIgY2FsbEJvdW5kPXJlcXVpcmUoImNhbGwtYmluZC9jYWxsQm91bmQiKTt2YXIgaW5zcGVjdD1yZXF1aXJlKCJvYmplY3QtaW5zcGVjdCIpO3ZhciAkVHlwZUVycm9yPUdldEludHJpbnNpYygiJVR5cGVFcnJvciUiKTt2YXIgJFdlYWtNYXA9R2V0SW50cmluc2ljKCIlV2Vha01hcCUiLHRydWUpO3ZhciAkTWFwPUdldEludHJpbnNpYygiJU1hcCUiLHRydWUpO3ZhciAkd2Vha01hcEdldD1jYWxsQm91bmQoIldlYWtNYXAucHJvdG90eXBlLmdldCIsdHJ1ZSk7dmFyICR3ZWFrTWFwU2V0PWNhbGxCb3VuZCgiV2Vha01hcC5wcm90b3R5cGUuc2V0Iix0cnVlKTt2YXIgJHdlYWtNYXBIYXM9Y2FsbEJvdW5kKCJXZWFrTWFwLnByb3RvdHlwZS5oYXMiLHRydWUpO3ZhciAkbWFwR2V0PWNhbGxCb3VuZCgiTWFwLnByb3RvdHlwZS5nZXQiLHRydWUpO3ZhciAkbWFwU2V0PWNhbGxCb3VuZCgiTWFwLnByb3RvdHlwZS5zZXQiLHRydWUpO3ZhciAkbWFwSGFzPWNhbGxCb3VuZCgiTWFwLnByb3RvdHlwZS5oYXMiLHRydWUpO3ZhciBsaXN0R2V0Tm9kZT1mdW5jdGlvbihsaXN0LGtleSl7Zm9yKHZhciBwcmV2PWxpc3QsY3VycjsoY3Vycj1wcmV2Lm5leHQpIT09bnVsbDtwcmV2PWN1cnIpe2lmKGN1cnIua2V5PT09a2V5KXtwcmV2Lm5leHQ9Y3Vyci5uZXh0O2N1cnIubmV4dD1saXN0Lm5leHQ7bGlzdC5uZXh0PWN1cnI7cmV0dXJuIGN1cnJ9fX07dmFyIGxpc3RHZXQ9ZnVuY3Rpb24ob2JqZWN0cyxrZXkpe3ZhciBub2RlPWxpc3RHZXROb2RlKG9iamVjdHMsa2V5KTtyZXR1cm4gbm9kZSYmbm9kZS52YWx1ZX07dmFyIGxpc3RTZXQ9ZnVuY3Rpb24ob2JqZWN0cyxrZXksdmFsdWUpe3ZhciBub2RlPWxpc3RHZXROb2RlKG9iamVjdHMsa2V5KTtpZihub2RlKXtub2RlLnZhbHVlPXZhbHVlfWVsc2V7b2JqZWN0cy5uZXh0PXtrZXk6a2V5LG5leHQ6b2JqZWN0cy5uZXh0LHZhbHVlOnZhbHVlfX19O3ZhciBsaXN0SGFzPWZ1bmN0aW9uKG9iamVjdHMsa2V5KXtyZXR1cm4hIWxpc3RHZXROb2RlKG9iamVjdHMsa2V5KX07bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gZ2V0U2lkZUNoYW5uZWwoKXt2YXIgJHdtO3ZhciAkbTt2YXIgJG87dmFyIGNoYW5uZWw9e2Fzc2VydDpmdW5jdGlvbihrZXkpe2lmKCFjaGFubmVsLmhhcyhrZXkpKXt0aHJvdyBuZXcgJFR5cGVFcnJvcigiU2lkZSBjaGFubmVsIGRvZXMgbm90IGNvbnRhaW4gIitpbnNwZWN0KGtleSkpfX0sZ2V0OmZ1bmN0aW9uKGtleSl7aWYoJFdlYWtNYXAmJmtleSYmKHR5cGVvZiBrZXk9PT0ib2JqZWN0Inx8dHlwZW9mIGtleT09PSJmdW5jdGlvbiIpKXtpZigkd20pe3JldHVybiAkd2Vha01hcEdldCgkd20sa2V5KX19ZWxzZSBpZigkTWFwKXtpZigkbSl7cmV0dXJuICRtYXBHZXQoJG0sa2V5KX19ZWxzZXtpZigkbyl7cmV0dXJuIGxpc3RHZXQoJG8sa2V5KX19fSxoYXM6ZnVuY3Rpb24oa2V5KXtpZigkV2Vha01hcCYma2V5JiYodHlwZW9mIGtleT09PSJvYmplY3QifHx0eXBlb2Yga2V5PT09ImZ1bmN0aW9uIikpe2lmKCR3bSl7cmV0dXJuICR3ZWFrTWFwSGFzKCR3bSxrZXkpfX1lbHNlIGlmKCRNYXApe2lmKCRtKXtyZXR1cm4gJG1hcEhhcygkbSxrZXkpfX1lbHNle2lmKCRvKXtyZXR1cm4gbGlzdEhhcygkbyxrZXkpfX1yZXR1cm4gZmFsc2V9LHNldDpmdW5jdGlvbihrZXksdmFsdWUpe2lmKCRXZWFrTWFwJiZrZXkmJih0eXBlb2Yga2V5PT09Im9iamVjdCJ8fHR5cGVvZiBrZXk9PT0iZnVuY3Rpb24iKSl7aWYoISR3bSl7JHdtPW5ldyAkV2Vha01hcH0kd2Vha01hcFNldCgkd20sa2V5LHZhbHVlKX1lbHNlIGlmKCRNYXApe2lmKCEkbSl7JG09bmV3ICRNYXB9JG1hcFNldCgkbSxrZXksdmFsdWUpfWVsc2V7aWYoISRvKXskbz17a2V5Ont9LG5leHQ6bnVsbH19bGlzdFNldCgkbyxrZXksdmFsdWUpfX19O3JldHVybiBjaGFubmVsfX0seyJjYWxsLWJpbmQvY2FsbEJvdW5kIjoxMCwiZ2V0LWludHJpbnNpYyI6MjAsIm9iamVjdC1pbnNwZWN0IjozOH1dLDQ4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7dmFyIF9faW1wb3J0RGVmYXVsdD10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24obW9kKXtyZXR1cm4gbW9kJiZtb2QuX19lc01vZHVsZT9tb2Q6e2RlZmF1bHQ6bW9kfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5zZXR1cENvbXBpbGU9dm9pZCAwO2NvbnN0IGFzc2VydF8xPV9faW1wb3J0RGVmYXVsdChyZXF1aXJlKCJhc3NlcnQiKSk7Y29uc3QgaGVscGVyc18xPXJlcXVpcmUoIi4uL2NvbW1vbi9oZWxwZXJzIik7Y29uc3QgaGVscGVyc18yPXJlcXVpcmUoIi4vaGVscGVycyIpO2Z1bmN0aW9uIHNldHVwQ29tcGlsZShzb2xKc29uLGNvcmUpe3JldHVybntjb21waWxlSnNvbjpiaW5kQ29tcGlsZUpzb24oc29sSnNvbiksY29tcGlsZUpzb25DYWxsYmFjazpiaW5kQ29tcGlsZUpzb25DYWxsYmFjayhzb2xKc29uLGNvcmUpLGNvbXBpbGVKc29uTXVsdGk6YmluZENvbXBpbGVKc29uTXVsdGkoc29sSnNvbiksY29tcGlsZVN0YW5kYXJkOmJpbmRDb21waWxlU3RhbmRhcmQoc29sSnNvbixjb3JlKX19ZXhwb3J0cy5zZXR1cENvbXBpbGU9c2V0dXBDb21waWxlO2Z1bmN0aW9uIGJpbmRDb21waWxlSnNvbihzb2xKc29uKXtyZXR1cm4oMCxoZWxwZXJzXzIuYmluZFNvbGNNZXRob2QpKHNvbEpzb24sImNvbXBpbGVKU09OIiwic3RyaW5nIixbInN0cmluZyIsIm51bWJlciJdLG51bGwpfWZ1bmN0aW9uIGJpbmRDb21waWxlSnNvbk11bHRpKHNvbEpzb24pe3JldHVybigwLGhlbHBlcnNfMi5iaW5kU29sY01ldGhvZCkoc29sSnNvbiwiY29tcGlsZUpTT05NdWx0aSIsInN0cmluZyIsWyJzdHJpbmciLCJudW1iZXIiXSxudWxsKX1mdW5jdGlvbiBiaW5kQ29tcGlsZUpzb25DYWxsYmFjayhzb2xKc29uLGNvcmVCaW5kaW5ncyl7Y29uc3QgY29tcGlsZUludGVybmFsPSgwLGhlbHBlcnNfMi5iaW5kU29sY01ldGhvZCkoc29sSnNvbiwiY29tcGlsZUpTT05DYWxsYmFjayIsInN0cmluZyIsWyJzdHJpbmciLCJudW1iZXIiLCJudW1iZXIiXSxudWxsKTtpZigoMCxoZWxwZXJzXzEuaXNOaWwpKGNvbXBpbGVJbnRlcm5hbCkpcmV0dXJuIG51bGw7cmV0dXJuIGZ1bmN0aW9uKGlucHV0LG9wdGltaXplLHJlYWRDYWxsYmFjayl7cmV0dXJuIHJ1bldpdGhDYWxsYmFja3Moc29sSnNvbixjb3JlQmluZGluZ3MscmVhZENhbGxiYWNrLGNvbXBpbGVJbnRlcm5hbCxbaW5wdXQsb3B0aW1pemVdKX19ZnVuY3Rpb24gYmluZENvbXBpbGVTdGFuZGFyZChzb2xKc29uLGNvcmVCaW5kaW5ncyl7bGV0IGJvdW5kRnVuY3Rpb25TdGFuZGFyZD1udWxsO2xldCBib3VuZEZ1bmN0aW9uU29saWRpdHk9bnVsbDtjb25zdCBjb21waWxlSW50ZXJuYWw9KDAsaGVscGVyc18yLmJpbmRTb2xjTWV0aG9kKShzb2xKc29uLCJjb21waWxlU3RhbmRhcmQiLCJzdHJpbmciLFsic3RyaW5nIiwibnVtYmVyIl0sbnVsbCk7aWYoY29yZUJpbmRpbmdzLmlzVmVyc2lvbjZPck5ld2VyKXtib3VuZEZ1bmN0aW9uU29saWRpdHk9KDAsaGVscGVyc18yLmJpbmRTb2xjTWV0aG9kKShzb2xKc29uLCJzb2xpZGl0eV9jb21waWxlIiwic3RyaW5nIixbInN0cmluZyIsIm51bWJlciIsIm51bWJlciJdLG51bGwpfWVsc2V7Ym91bmRGdW5jdGlvblNvbGlkaXR5PSgwLGhlbHBlcnNfMi5iaW5kU29sY01ldGhvZCkoc29sSnNvbiwic29saWRpdHlfY29tcGlsZSIsInN0cmluZyIsWyJzdHJpbmciLCJudW1iZXIiXSxudWxsKX1pZighKDAsaGVscGVyc18xLmlzTmlsKShjb21waWxlSW50ZXJuYWwpKXtib3VuZEZ1bmN0aW9uU3RhbmRhcmQ9ZnVuY3Rpb24oaW5wdXQscmVhZENhbGxiYWNrKXtyZXR1cm4gcnVuV2l0aENhbGxiYWNrcyhzb2xKc29uLGNvcmVCaW5kaW5ncyxyZWFkQ2FsbGJhY2ssY29tcGlsZUludGVybmFsLFtpbnB1dF0pfX1pZighKDAsaGVscGVyc18xLmlzTmlsKShib3VuZEZ1bmN0aW9uU29saWRpdHkpKXtib3VuZEZ1bmN0aW9uU3RhbmRhcmQ9ZnVuY3Rpb24oaW5wdXQsY2FsbGJhY2tzKXtyZXR1cm4gcnVuV2l0aENhbGxiYWNrcyhzb2xKc29uLGNvcmVCaW5kaW5ncyxjYWxsYmFja3MsYm91bmRGdW5jdGlvblNvbGlkaXR5LFtpbnB1dF0pfX1yZXR1cm4gYm91bmRGdW5jdGlvblN0YW5kYXJkfWZ1bmN0aW9uIHdyYXBDYWxsYmFjayhjb3JlQmluZGluZ3MsY2FsbGJhY2speygwLGFzc2VydF8xLmRlZmF1bHQpKHR5cGVvZiBjYWxsYmFjaz09PSJmdW5jdGlvbiIsIkludmFsaWQgY2FsbGJhY2sgc3BlY2lmaWVkLiIpO3JldHVybiBmdW5jdGlvbihkYXRhLGNvbnRlbnRzLGVycm9yKXtjb25zdCByZXN1bHQ9Y2FsbGJhY2soY29yZUJpbmRpbmdzLmNvcHlGcm9tQ1N0cmluZyhkYXRhKSk7aWYodHlwZW9mIHJlc3VsdC5jb250ZW50cz09PSJzdHJpbmciKXtjb3JlQmluZGluZ3MuY29weVRvQ1N0cmluZyhyZXN1bHQuY29udGVudHMsY29udGVudHMpfWlmKHR5cGVvZiByZXN1bHQuZXJyb3I9PT0ic3RyaW5nIil7Y29yZUJpbmRpbmdzLmNvcHlUb0NTdHJpbmcocmVzdWx0LmVycm9yLGVycm9yKX19fWZ1bmN0aW9uIHdyYXBDYWxsYmFja1dpdGhLaW5kKGNvcmVCaW5kaW5ncyxjYWxsYmFjayl7KDAsYXNzZXJ0XzEuZGVmYXVsdCkodHlwZW9mIGNhbGxiYWNrPT09ImZ1bmN0aW9uIiwiSW52YWxpZCBjYWxsYmFjayBzcGVjaWZpZWQuIik7cmV0dXJuIGZ1bmN0aW9uKGNvbnRleHQsa2luZCxkYXRhLGNvbnRlbnRzLGVycm9yKXsoMCxhc3NlcnRfMS5kZWZhdWx0KShjb250ZXh0PT09MCwiQ2FsbGJhY2sgY29udGV4dCBtdXN0IGJlIG51bGwuIik7Y29uc3QgcmVzdWx0PWNhbGxiYWNrKGNvcmVCaW5kaW5ncy5jb3B5RnJvbUNTdHJpbmcoa2luZCksY29yZUJpbmRpbmdzLmNvcHlGcm9tQ1N0cmluZyhkYXRhKSk7aWYodHlwZW9mIHJlc3VsdC5jb250ZW50cz09PSJzdHJpbmciKXtjb3JlQmluZGluZ3MuY29weVRvQ1N0cmluZyhyZXN1bHQuY29udGVudHMsY29udGVudHMpfWlmKHR5cGVvZiByZXN1bHQuZXJyb3I9PT0ic3RyaW5nIil7Y29yZUJpbmRpbmdzLmNvcHlUb0NTdHJpbmcocmVzdWx0LmVycm9yLGVycm9yKX19fWZ1bmN0aW9uIHJ1bldpdGhDYWxsYmFja3Moc29sSnNvbixjb3JlQmluZGluZ3MsY2FsbGJhY2tzLGNvbXBpbGUsYXJncyl7aWYoY2FsbGJhY2tzKXsoMCxhc3NlcnRfMS5kZWZhdWx0KSh0eXBlb2YgY2FsbGJhY2tzPT09Im9iamVjdCIsIkludmFsaWQgY2FsbGJhY2sgb2JqZWN0IHNwZWNpZmllZC4iKX1lbHNle2NhbGxiYWNrcz17fX1sZXQgcmVhZENhbGxiYWNrPWNhbGxiYWNrcy5pbXBvcnQ7aWYocmVhZENhbGxiYWNrPT09dW5kZWZpbmVkKXtyZWFkQ2FsbGJhY2s9ZnVuY3Rpb24oZGF0YSl7cmV0dXJue2Vycm9yOiJGaWxlIGltcG9ydCBjYWxsYmFjayBub3Qgc3VwcG9ydGVkIn19fWxldCBzaW5nbGVDYWxsYmFjaztpZihjb3JlQmluZGluZ3MuaXNWZXJzaW9uNk9yTmV3ZXIpe2xldCBzbXRTb2x2ZXJDYWxsYmFjaz1jYWxsYmFja3Muc210U29sdmVyO2lmKHNtdFNvbHZlckNhbGxiYWNrPT09dW5kZWZpbmVkKXtzbXRTb2x2ZXJDYWxsYmFjaz1mdW5jdGlvbihkYXRhKXtyZXR1cm57ZXJyb3I6IlNNVCBzb2x2ZXIgY2FsbGJhY2sgbm90IHN1cHBvcnRlZCJ9fX1zaW5nbGVDYWxsYmFjaz1mdW5jdGlvbihraW5kLGRhdGEpe2lmKGtpbmQ9PT0ic291cmNlIil7cmV0dXJuIHJlYWRDYWxsYmFjayhkYXRhKX1lbHNlIGlmKGtpbmQ9PT0ic210LXF1ZXJ5Iil7cmV0dXJuIHNtdFNvbHZlckNhbGxiYWNrKGRhdGEpfWVsc2V7KDAsYXNzZXJ0XzEuZGVmYXVsdCkoZmFsc2UsIkludmFsaWQgY2FsbGJhY2sga2luZCBzcGVjaWZpZWQuIil9fTtzaW5nbGVDYWxsYmFjaz13cmFwQ2FsbGJhY2tXaXRoS2luZChjb3JlQmluZGluZ3Msc2luZ2xlQ2FsbGJhY2spfWVsc2V7c2luZ2xlQ2FsbGJhY2s9d3JhcENhbGxiYWNrKGNvcmVCaW5kaW5ncyxyZWFkQ2FsbGJhY2spfWNvbnN0IGNiPWNvcmVCaW5kaW5ncy5hZGRGdW5jdGlvbihzaW5nbGVDYWxsYmFjaywidmlpaWlpIik7bGV0IG91dHB1dDt0cnl7YXJncy5wdXNoKGNiKTtpZihjb3JlQmluZGluZ3MuaXNWZXJzaW9uNk9yTmV3ZXIpe2FyZ3MucHVzaChudWxsKX1vdXRwdXQ9Y29tcGlsZSguLi5hcmdzKX1maW5hbGx5e2NvcmVCaW5kaW5ncy5yZW1vdmVGdW5jdGlvbihjYil9aWYoY29yZUJpbmRpbmdzLnJlc2V0KXtjb3JlQmluZGluZ3MucmVzZXQoKX1yZXR1cm4gb3V0cHV0fX0seyIuLi9jb21tb24vaGVscGVycyI6NTIsIi4vaGVscGVycyI6NTAsYXNzZXJ0OjF9XSw0OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO3ZhciBfX2NyZWF0ZUJpbmRpbmc9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKG8sbSxrLGsyKXtpZihrMj09PXVuZGVmaW5lZClrMj1rO3ZhciBkZXNjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSxrKTtpZighZGVzY3x8KCJnZXQiaW4gZGVzYz8hbS5fX2VzTW9kdWxlOmRlc2Mud3JpdGFibGV8fGRlc2MuY29uZmlndXJhYmxlKSl7ZGVzYz17ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbigpe3JldHVybiBtW2tdfX19T2JqZWN0LmRlZmluZVByb3BlcnR5KG8sazIsZGVzYyl9OmZ1bmN0aW9uKG8sbSxrLGsyKXtpZihrMj09PXVuZGVmaW5lZClrMj1rO29bazJdPW1ba119KTt2YXIgX19zZXRNb2R1bGVEZWZhdWx0PXRoaXMmJnRoaXMuX19zZXRNb2R1bGVEZWZhdWx0fHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihvLHYpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCJkZWZhdWx0Iix7ZW51bWVyYWJsZTp0cnVlLHZhbHVlOnZ9KX06ZnVuY3Rpb24obyx2KXtvWyJkZWZhdWx0Il09dn0pO3ZhciBfX2ltcG9ydFN0YXI9dGhpcyYmdGhpcy5fX2ltcG9ydFN0YXJ8fGZ1bmN0aW9uKG1vZCl7aWYobW9kJiZtb2QuX19lc01vZHVsZSlyZXR1cm4gbW9kO3ZhciByZXN1bHQ9e307aWYobW9kIT1udWxsKWZvcih2YXIgayBpbiBtb2QpaWYoayE9PSJkZWZhdWx0IiYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCxrKSlfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LG1vZCxrKTtfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LG1vZCk7cmV0dXJuIHJlc3VsdH07dmFyIF9faW1wb3J0RGVmYXVsdD10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24obW9kKXtyZXR1cm4gbW9kJiZtb2QuX19lc01vZHVsZT9tb2Q6e2RlZmF1bHQ6bW9kfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5zZXR1cENvcmU9dm9pZCAwO2NvbnN0IGhlbHBlcnNfMT1yZXF1aXJlKCIuL2hlbHBlcnMiKTtjb25zdCB0cmFuc2xhdGVfMT1fX2ltcG9ydERlZmF1bHQocmVxdWlyZSgiLi4vdHJhbnNsYXRlIikpO2NvbnN0IHNlbXZlcj1fX2ltcG9ydFN0YXIocmVxdWlyZSgic2VtdmVyIikpO2NvbnN0IGhlbHBlcnNfMj1yZXF1aXJlKCIuLi9jb21tb24vaGVscGVycyIpO2Z1bmN0aW9uIHNldHVwQ29yZShzb2xKc29uKXtjb25zdCBjb3JlPXthbGxvYzpiaW5kQWxsb2Moc29sSnNvbiksbGljZW5zZTpiaW5kTGljZW5zZShzb2xKc29uKSx2ZXJzaW9uOmJpbmRWZXJzaW9uKHNvbEpzb24pLHJlc2V0OmJpbmRSZXNldChzb2xKc29uKX07Y29uc3QgaGVscGVycz17YWRkRnVuY3Rpb246dW5ib3VuZEFkZEZ1bmN0aW9uLmJpbmQodGhpcyxzb2xKc29uKSxyZW1vdmVGdW5jdGlvbjp1bmJvdW5kUmVtb3ZlRnVuY3Rpb24uYmluZCh0aGlzLHNvbEpzb24pLGNvcHlGcm9tQ1N0cmluZzp1bmJvdW5kQ29weUZyb21DU3RyaW5nLmJpbmQodGhpcyxzb2xKc29uKSxjb3B5VG9DU3RyaW5nOnVuYm91bmRDb3B5VG9DU3RyaW5nLmJpbmQodGhpcyxzb2xKc29uLGNvcmUuYWxsb2MpLHZlcnNpb25Ub1NlbXZlcjp2ZXJzaW9uVG9TZW12ZXIoY29yZS52ZXJzaW9uKCkpfTtyZXR1cm57Li4uY29yZSwuLi5oZWxwZXJzLGlzVmVyc2lvbjZPck5ld2VyOnNlbXZlci5ndChoZWxwZXJzLnZlcnNpb25Ub1NlbXZlcigpLCIwLjUuOTkiKX19ZXhwb3J0cy5zZXR1cENvcmU9c2V0dXBDb3JlO2Z1bmN0aW9uIGJpbmRBbGxvYyhzb2xKc29uKXtjb25zdCBhbGxvY0JpbmRpbmc9KDAsaGVscGVyc18xLmJpbmRTb2xjTWV0aG9kKShzb2xKc29uLCJzb2xpZGl0eV9hbGxvYyIsIm51bWJlciIsWyJudW1iZXIiXSxudWxsKTtpZigoMCxoZWxwZXJzXzIuaXNOaWwpKGFsbG9jQmluZGluZykpe3JldHVybiBzb2xKc29uLl9tYWxsb2N9cmV0dXJuIGFsbG9jQmluZGluZ31mdW5jdGlvbiBiaW5kVmVyc2lvbihzb2xKc29uKXtyZXR1cm4oMCxoZWxwZXJzXzEuYmluZFNvbGNNZXRob2RXaXRoRmFsbGJhY2tGdW5jKShzb2xKc29uLCJzb2xpZGl0eV92ZXJzaW9uIiwic3RyaW5nIixbXSwidmVyc2lvbiIpfWZ1bmN0aW9uIHZlcnNpb25Ub1NlbXZlcih2ZXJzaW9uKXtyZXR1cm4gdHJhbnNsYXRlXzEuZGVmYXVsdC52ZXJzaW9uVG9TZW12ZXIuYmluZCh0aGlzLHZlcnNpb24pfWZ1bmN0aW9uIGJpbmRMaWNlbnNlKHNvbEpzb24pe3JldHVybigwLGhlbHBlcnNfMS5iaW5kU29sY01ldGhvZFdpdGhGYWxsYmFja0Z1bmMpKHNvbEpzb24sInNvbGlkaXR5X2xpY2Vuc2UiLCJzdHJpbmciLFtdLCJsaWNlbnNlIiwoKT0+e30pfWZ1bmN0aW9uIGJpbmRSZXNldChzb2xKc29uKXtyZXR1cm4oMCxoZWxwZXJzXzEuYmluZFNvbGNNZXRob2QpKHNvbEpzb24sInNvbGlkaXR5X3Jlc2V0IixudWxsLFtdLG51bGwpfWZ1bmN0aW9uIHVuYm91bmRDb3B5VG9DU3RyaW5nKHNvbEpzb24sYWxsb2Msc3RyLHB0cil7Y29uc3QgbGVuZ3RoPXNvbEpzb24ubGVuZ3RoQnl0ZXNVVEY4KHN0cik7Y29uc3QgYnVmZmVyPWFsbG9jKGxlbmd0aCsxKTtzb2xKc29uLnN0cmluZ1RvVVRGOChzdHIsYnVmZmVyLGxlbmd0aCsxKTtzb2xKc29uLnNldFZhbHVlKHB0cixidWZmZXIsIioiKX1mdW5jdGlvbiB1bmJvdW5kQ29weUZyb21DU3RyaW5nKHNvbEpzb24scHRyKXtjb25zdCBjb3B5RnJvbUNTdHJpbmc9c29sSnNvbi5VVEY4VG9TdHJpbmd8fHNvbEpzb24uUG9pbnRlcl9zdHJpbmdpZnk7cmV0dXJuIGNvcHlGcm9tQ1N0cmluZyhwdHIpfWZ1bmN0aW9uIHVuYm91bmRBZGRGdW5jdGlvbihzb2xKc29uLGZ1bmMsc2lnbmF0dXJlKXtyZXR1cm4oc29sSnNvbi5hZGRGdW5jdGlvbnx8c29sSnNvbi5SdW50aW1lLmFkZEZ1bmN0aW9uKShmdW5jLHNpZ25hdHVyZSl9ZnVuY3Rpb24gdW5ib3VuZFJlbW92ZUZ1bmN0aW9uKHNvbEpzb24scHRyKXtyZXR1cm4oc29sSnNvbi5yZW1vdmVGdW5jdGlvbnx8c29sSnNvbi5SdW50aW1lLnJlbW92ZUZ1bmN0aW9uKShwdHIpfX0seyIuLi9jb21tb24vaGVscGVycyI6NTIsIi4uL3RyYW5zbGF0ZSI6NTYsIi4vaGVscGVycyI6NTAsc2VtdmVyOjU1fV0sNTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmdldFN1cHBvcnRlZE1ldGhvZHM9ZXhwb3J0cy5iaW5kU29sY01ldGhvZFdpdGhGYWxsYmFja0Z1bmM9ZXhwb3J0cy5iaW5kU29sY01ldGhvZD12b2lkIDA7Y29uc3QgaGVscGVyc18xPXJlcXVpcmUoIi4uL2NvbW1vbi9oZWxwZXJzIik7ZnVuY3Rpb24gYmluZFNvbGNNZXRob2Qoc29sSnNvbixtZXRob2QscmV0dXJuVHlwZSxhcmdzLGRlZmF1bHRWYWx1ZSl7aWYoKDAsaGVscGVyc18xLmlzTmlsKShzb2xKc29uW2BfJHttZXRob2R9YF0pJiZkZWZhdWx0VmFsdWUhPT11bmRlZmluZWQpe3JldHVybiBkZWZhdWx0VmFsdWV9cmV0dXJuIHNvbEpzb24uY3dyYXAobWV0aG9kLHJldHVyblR5cGUsYXJncyl9ZXhwb3J0cy5iaW5kU29sY01ldGhvZD1iaW5kU29sY01ldGhvZDtmdW5jdGlvbiBiaW5kU29sY01ldGhvZFdpdGhGYWxsYmFja0Z1bmMoc29sSnNvbixtZXRob2QscmV0dXJuVHlwZSxhcmdzLGZhbGxiYWNrTWV0aG9kLGZpbmFsRmFsbGJhY2s9dW5kZWZpbmVkKXtjb25zdCBtZXRob2RGdW5jPWJpbmRTb2xjTWV0aG9kKHNvbEpzb24sbWV0aG9kLHJldHVyblR5cGUsYXJncyxudWxsKTtpZighKDAsaGVscGVyc18xLmlzTmlsKShtZXRob2RGdW5jKSl7cmV0dXJuIG1ldGhvZEZ1bmN9cmV0dXJuIGJpbmRTb2xjTWV0aG9kKHNvbEpzb24sZmFsbGJhY2tNZXRob2QscmV0dXJuVHlwZSxhcmdzLGZpbmFsRmFsbGJhY2spfWV4cG9ydHMuYmluZFNvbGNNZXRob2RXaXRoRmFsbGJhY2tGdW5jPWJpbmRTb2xjTWV0aG9kV2l0aEZhbGxiYWNrRnVuYztmdW5jdGlvbiBnZXRTdXBwb3J0ZWRNZXRob2RzKHNvbEpzb24pe3JldHVybntsaWNlbnNlU3VwcG9ydGVkOmFueU1ldGhvZEV4aXN0cyhzb2xKc29uLCJzb2xpZGl0eV9saWNlbnNlIiksdmVyc2lvblN1cHBvcnRlZDphbnlNZXRob2RFeGlzdHMoc29sSnNvbiwic29saWRpdHlfdmVyc2lvbiIpLGFsbG9jU3VwcG9ydGVkOmFueU1ldGhvZEV4aXN0cyhzb2xKc29uLCJzb2xpZGl0eV9hbGxvYyIpLHJlc2V0U3VwcG9ydGVkOmFueU1ldGhvZEV4aXN0cyhzb2xKc29uLCJzb2xpZGl0eV9yZXNldCIpLGNvbXBpbGVKc29uU3VwcG9ydGVkOmFueU1ldGhvZEV4aXN0cyhzb2xKc29uLCJjb21waWxlSlNPTiIpLGNvbXBpbGVKc29uTXVsdGlTdXBwb3J0ZWQ6YW55TWV0aG9kRXhpc3RzKHNvbEpzb24sImNvbXBpbGVKU09OTXVsdGkiKSxjb21waWxlSnNvbkNhbGxiYWNrU3VwcHBvcnRlZDphbnlNZXRob2RFeGlzdHMoc29sSnNvbiwiY29tcGlsZUpTT05DYWxsYmFjayIpLGNvbXBpbGVKc29uU3RhbmRhcmRTdXBwb3J0ZWQ6YW55TWV0aG9kRXhpc3RzKHNvbEpzb24sImNvbXBpbGVTdGFuZGFyZCIsInNvbGlkaXR5X2NvbXBpbGUiKX19ZXhwb3J0cy5nZXRTdXBwb3J0ZWRNZXRob2RzPWdldFN1cHBvcnRlZE1ldGhvZHM7ZnVuY3Rpb24gYW55TWV0aG9kRXhpc3RzKHNvbEpzb24sLi4ubmFtZXMpe3JldHVybiBuYW1lcy5zb21lKG5hbWU9PiEoMCxoZWxwZXJzXzEuaXNOaWwpKHNvbEpzb25bYF8ke25hbWV9YF0pKX19LHsiLi4vY29tbW9uL2hlbHBlcnMiOjUyfV0sNTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOnRydWV9KTtjb25zdCBjb3JlXzE9cmVxdWlyZSgiLi9jb3JlIik7Y29uc3QgaGVscGVyc18xPXJlcXVpcmUoIi4vaGVscGVycyIpO2NvbnN0IGNvbXBpbGVfMT1yZXF1aXJlKCIuL2NvbXBpbGUiKTtmdW5jdGlvbiBzZXR1cEJpbmRpbmdzKHNvbEpzb24pe2NvbnN0IGNvcmVCaW5kaW5ncz0oMCxjb3JlXzEuc2V0dXBDb3JlKShzb2xKc29uKTtjb25zdCBjb21waWxlQmluZGluZ3M9KDAsY29tcGlsZV8xLnNldHVwQ29tcGlsZSkoc29sSnNvbixjb3JlQmluZGluZ3MpO2NvbnN0IG1ldGhvZEZsYWdzPSgwLGhlbHBlcnNfMS5nZXRTdXBwb3J0ZWRNZXRob2RzKShzb2xKc29uKTtyZXR1cm57bWV0aG9kRmxhZ3M6bWV0aG9kRmxhZ3MsY29yZUJpbmRpbmdzOmNvcmVCaW5kaW5ncyxjb21waWxlQmluZGluZ3M6Y29tcGlsZUJpbmRpbmdzfX1leHBvcnRzLmRlZmF1bHQ9c2V0dXBCaW5kaW5nc30seyIuL2NvbXBpbGUiOjQ4LCIuL2NvcmUiOjQ5LCIuL2hlbHBlcnMiOjUwfV0sNTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmlzT2JqZWN0PWV4cG9ydHMuaXNOaWw9dm9pZCAwO2Z1bmN0aW9uIGlzTmlsKHZhbHVlKXtyZXR1cm4gdmFsdWU9PW51bGx9ZXhwb3J0cy5pc05pbD1pc05pbDtmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZT09PSJvYmplY3QiJiYhQXJyYXkuaXNBcnJheSh2YWx1ZSl9ZXhwb3J0cy5pc09iamVjdD1pc09iamVjdH0se31dLDUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5mb3JtYXRGYXRhbEVycm9yPXZvaWQgMDtmdW5jdGlvbiBmb3JtYXRGYXRhbEVycm9yKG1lc3NhZ2Upe3JldHVybiBKU09OLnN0cmluZ2lmeSh7ZXJyb3JzOlt7dHlwZToiSlNPTkVycm9yIixjb21wb25lbnQ6InNvbGNqcyIsc2V2ZXJpdHk6ImVycm9yIixtZXNzYWdlOm1lc3NhZ2UsZm9ybWF0dGVkTWVzc2FnZToiRXJyb3I6ICIrbWVzc2FnZX1dfSl9ZXhwb3J0cy5mb3JtYXRGYXRhbEVycm9yPWZvcm1hdEZhdGFsRXJyb3J9LHt9XSw1NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO3ZhciBfX2ltcG9ydERlZmF1bHQ9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKG1vZCl7cmV0dXJuIG1vZCYmbW9kLl9fZXNNb2R1bGU/bW9kOntkZWZhdWx0Om1vZH19O2NvbnN0IGFzc2VydF8xPV9faW1wb3J0RGVmYXVsdChyZXF1aXJlKCJhc3NlcnQiKSk7Y29uc3QganNfc2hhM18xPXJlcXVpcmUoImpzLXNoYTMiKTtjb25zdCBoZWxwZXJzXzE9cmVxdWlyZSgiLi9jb21tb24vaGVscGVycyIpO2Z1bmN0aW9uIGxpYnJhcnlIYXNoUGxhY2Vob2xkZXIoZnVsbHlRdWFsaWZpZWRMaWJyYXJ5TmFtZSl7cmV0dXJuYCQkeygwLGpzX3NoYTNfMS5rZWNjYWsyNTYpKGZ1bGx5UXVhbGlmaWVkTGlicmFyeU5hbWUpLnNsaWNlKDAsMzQpfSRgfWZ1bmN0aW9uIHJlcGxhY2VQbGFjZWhvbGRlcihieXRlY29kZSxsYWJlbCxhZGRyZXNzKXtjb25zdCB0cnVuY2F0ZWROYW1lPWxhYmVsLnNsaWNlKDAsMzYpO2NvbnN0IGxpYkxhYmVsPWBfXyR7dHJ1bmNhdGVkTmFtZS5wYWRFbmQoMzYsIl8iKX1fX2A7d2hpbGUoYnl0ZWNvZGUuaW5kZXhPZihsaWJMYWJlbCk+PTApe2J5dGVjb2RlPWJ5dGVjb2RlLnJlcGxhY2UobGliTGFiZWwsYWRkcmVzcyl9cmV0dXJuIGJ5dGVjb2RlfWZ1bmN0aW9uIGxpbmtCeXRlY29kZShieXRlY29kZSxsaWJyYXJpZXMpeygwLGFzc2VydF8xLmRlZmF1bHQpKHR5cGVvZiBieXRlY29kZT09PSJzdHJpbmciKTsoMCxhc3NlcnRfMS5kZWZhdWx0KSh0eXBlb2YgbGlicmFyaWVzPT09Im9iamVjdCIpO2NvbnN0IGxpYnJhcmllc0NvbXBsZXRlPXt9O2Zvcihjb25zdFtmdWxseVF1YWxpZmllZExpYnJhcnlOYW1lLGxpYnJhcnlPYmplY3RPckFkZHJlc3Ndb2YgT2JqZWN0LmVudHJpZXMobGlicmFyaWVzKSl7aWYoKDAsaGVscGVyc18xLmlzTmlsKShsaWJyYXJ5T2JqZWN0T3JBZGRyZXNzKSl7dGhyb3cgbmV3IEVycm9yKGBObyBhZGRyZXNzIHByb3ZpZGVkIGZvciBsaWJyYXJ5ICR7ZnVsbHlRdWFsaWZpZWRMaWJyYXJ5TmFtZX1gKX1pZigoMCxoZWxwZXJzXzEuaXNPYmplY3QpKGxpYnJhcnlPYmplY3RPckFkZHJlc3MpKXtmb3IoY29uc3RbdW5xdWFsaWZpZWRMaWJyYXJ5TmFtZSxhZGRyZXNzXW9mIE9iamVjdC5lbnRyaWVzKGxpYnJhcnlPYmplY3RPckFkZHJlc3MpKXtsaWJyYXJpZXNDb21wbGV0ZVt1bnF1YWxpZmllZExpYnJhcnlOYW1lXT1hZGRyZXNzO2xpYnJhcmllc0NvbXBsZXRlW2Ake2Z1bGx5UXVhbGlmaWVkTGlicmFyeU5hbWV9OiR7dW5xdWFsaWZpZWRMaWJyYXJ5TmFtZX1gXT1hZGRyZXNzfWNvbnRpbnVlfWNvbnN0IHBhcnNlZD1mdWxseVF1YWxpZmllZExpYnJhcnlOYW1lLm1hdGNoKC9eKD88c291cmNlVW5pdE5hbWU+W146XSspOig/PHVucXVhbGlmaWVkTGlicmFyeU5hbWU+LispJC8pO2NvbnN0IGxpYnJhcnlBZGRyZXNzPWxpYnJhcnlPYmplY3RPckFkZHJlc3M7aWYoISgwLGhlbHBlcnNfMS5pc05pbCkocGFyc2VkKSl7Y29uc3R7dW5xdWFsaWZpZWRMaWJyYXJ5TmFtZX09cGFyc2VkLmdyb3VwcztsaWJyYXJpZXNDb21wbGV0ZVt1bnF1YWxpZmllZExpYnJhcnlOYW1lXT1saWJyYXJ5QWRkcmVzc31saWJyYXJpZXNDb21wbGV0ZVtmdWxseVF1YWxpZmllZExpYnJhcnlOYW1lXT1saWJyYXJ5QWRkcmVzc31mb3IoY29uc3QgbGlicmFyeU5hbWUgaW4gbGlicmFyaWVzQ29tcGxldGUpe2xldCBoZXhBZGRyZXNzPWxpYnJhcmllc0NvbXBsZXRlW2xpYnJhcnlOYW1lXTtpZighaGV4QWRkcmVzcy5zdGFydHNXaXRoKCIweCIpfHxoZXhBZGRyZXNzLmxlbmd0aD40Mil7dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFkZHJlc3Mgc3BlY2lmaWVkIGZvciAke2xpYnJhcnlOYW1lfWApfWhleEFkZHJlc3M9aGV4QWRkcmVzcy5zbGljZSgyKS5wYWRTdGFydCg0MCwiMCIpO2J5dGVjb2RlPXJlcGxhY2VQbGFjZWhvbGRlcihieXRlY29kZSxsaWJyYXJ5TmFtZSxoZXhBZGRyZXNzKTtieXRlY29kZT1yZXBsYWNlUGxhY2Vob2xkZXIoYnl0ZWNvZGUsbGlicmFyeUhhc2hQbGFjZWhvbGRlcihsaWJyYXJ5TmFtZSksaGV4QWRkcmVzcyl9cmV0dXJuIGJ5dGVjb2RlfWZ1bmN0aW9uIGZpbmRMaW5rUmVmZXJlbmNlcyhieXRlY29kZSl7KDAsYXNzZXJ0XzEuZGVmYXVsdCkodHlwZW9mIGJ5dGVjb2RlPT09InN0cmluZyIpO2NvbnN0IGxpbmtSZWZlcmVuY2VzPXt9O2xldCBvZmZzZXQ9MDt3aGlsZSh0cnVlKXtjb25zdCBmb3VuZD1ieXRlY29kZS5tYXRjaCgvX18oLnszNn0pX18vKTtpZighZm91bmQpe2JyZWFrfWNvbnN0IHN0YXJ0PWZvdW5kLmluZGV4O2NvbnN0IGxpYnJhcnlOYW1lPWZvdW5kWzFdLnJlcGxhY2UoL18rJC9nbSwiIik7aWYoIWxpbmtSZWZlcmVuY2VzW2xpYnJhcnlOYW1lXSl7bGlua1JlZmVyZW5jZXNbbGlicmFyeU5hbWVdPVtdfWxpbmtSZWZlcmVuY2VzW2xpYnJhcnlOYW1lXS5wdXNoKHtzdGFydDoob2Zmc2V0K3N0YXJ0KS8yLGxlbmd0aDoyMH0pO29mZnNldCs9c3RhcnQrMjA7Ynl0ZWNvZGU9Ynl0ZWNvZGUuc2xpY2Uoc3RhcnQrMjApfXJldHVybiBsaW5rUmVmZXJlbmNlc31tb2R1bGUuZXhwb3J0cz17bGlua0J5dGVjb2RlOmxpbmtCeXRlY29kZSxmaW5kTGlua1JlZmVyZW5jZXM6ZmluZExpbmtSZWZlcmVuY2VzfX0seyIuL2NvbW1vbi9oZWxwZXJzIjo1Mixhc3NlcnQ6MSwianMtc2hhMyI6MzR9XSw1NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKHByb2Nlc3MpeyhmdW5jdGlvbigpe2V4cG9ydHM9bW9kdWxlLmV4cG9ydHM9U2VtVmVyO3ZhciBkZWJ1ZztpZih0eXBlb2YgcHJvY2Vzcz09PSJvYmplY3QiJiZwcm9jZXNzLmVudiYmcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyYmL1xic2VtdmVyXGIvaS50ZXN0KHByb2Nlc3MuZW52Lk5PREVfREVCVUcpKXtkZWJ1Zz1mdW5jdGlvbigpe3ZhciBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTthcmdzLnVuc2hpZnQoIlNFTVZFUiIpO2NvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsYXJncyl9fWVsc2V7ZGVidWc9ZnVuY3Rpb24oKXt9fWV4cG9ydHMuU0VNVkVSX1NQRUNfVkVSU0lPTj0iMi4wLjAiO3ZhciBNQVhfTEVOR1RIPTI1Njt2YXIgTUFYX1NBRkVfSU5URUdFUj1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUnx8OTAwNzE5OTI1NDc0MDk5MTt2YXIgTUFYX1NBRkVfQ09NUE9ORU5UX0xFTkdUSD0xNjt2YXIgcmU9ZXhwb3J0cy5yZT1bXTt2YXIgc3JjPWV4cG9ydHMuc3JjPVtdO3ZhciBSPTA7dmFyIE5VTUVSSUNJREVOVElGSUVSPVIrKztzcmNbTlVNRVJJQ0lERU5USUZJRVJdPSIwfFsxLTldXFxkKiI7dmFyIE5VTUVSSUNJREVOVElGSUVSTE9PU0U9UisrO3NyY1tOVU1FUklDSURFTlRJRklFUkxPT1NFXT0iWzAtOV0rIjt2YXIgTk9OTlVNRVJJQ0lERU5USUZJRVI9UisrO3NyY1tOT05OVU1FUklDSURFTlRJRklFUl09IlxcZCpbYS16QS1aLV1bYS16QS1aMC05LV0qIjt2YXIgTUFJTlZFUlNJT049UisrO3NyY1tNQUlOVkVSU0lPTl09IigiK3NyY1tOVU1FUklDSURFTlRJRklFUl0rIilcXC4iKyIoIitzcmNbTlVNRVJJQ0lERU5USUZJRVJdKyIpXFwuIisiKCIrc3JjW05VTUVSSUNJREVOVElGSUVSXSsiKSI7dmFyIE1BSU5WRVJTSU9OTE9PU0U9UisrO3NyY1tNQUlOVkVSU0lPTkxPT1NFXT0iKCIrc3JjW05VTUVSSUNJREVOVElGSUVSTE9PU0VdKyIpXFwuIisiKCIrc3JjW05VTUVSSUNJREVOVElGSUVSTE9PU0VdKyIpXFwuIisiKCIrc3JjW05VTUVSSUNJREVOVElGSUVSTE9PU0VdKyIpIjt2YXIgUFJFUkVMRUFTRUlERU5USUZJRVI9UisrO3NyY1tQUkVSRUxFQVNFSURFTlRJRklFUl09Iig/OiIrc3JjW05VTUVSSUNJREVOVElGSUVSXSsifCIrc3JjW05PTk5VTUVSSUNJREVOVElGSUVSXSsiKSI7dmFyIFBSRVJFTEVBU0VJREVOVElGSUVSTE9PU0U9UisrO3NyY1tQUkVSRUxFQVNFSURFTlRJRklFUkxPT1NFXT0iKD86IitzcmNbTlVNRVJJQ0lERU5USUZJRVJMT09TRV0rInwiK3NyY1tOT05OVU1FUklDSURFTlRJRklFUl0rIikiO3ZhciBQUkVSRUxFQVNFPVIrKztzcmNbUFJFUkVMRUFTRV09Iig/Oi0oIitzcmNbUFJFUkVMRUFTRUlERU5USUZJRVJdKyIoPzpcXC4iK3NyY1tQUkVSRUxFQVNFSURFTlRJRklFUl0rIikqKSkiO3ZhciBQUkVSRUxFQVNFTE9PU0U9UisrO3NyY1tQUkVSRUxFQVNFTE9PU0VdPSIoPzotPygiK3NyY1tQUkVSRUxFQVNFSURFTlRJRklFUkxPT1NFXSsiKD86XFwuIitzcmNbUFJFUkVMRUFTRUlERU5USUZJRVJMT09TRV0rIikqKSkiO3ZhciBCVUlMRElERU5USUZJRVI9UisrO3NyY1tCVUlMRElERU5USUZJRVJdPSJbMC05QS1aYS16LV0rIjt2YXIgQlVJTEQ9UisrO3NyY1tCVUlMRF09Iig/OlxcKygiK3NyY1tCVUlMRElERU5USUZJRVJdKyIoPzpcXC4iK3NyY1tCVUlMRElERU5USUZJRVJdKyIpKikpIjt2YXIgRlVMTD1SKys7dmFyIEZVTExQTEFJTj0idj8iK3NyY1tNQUlOVkVSU0lPTl0rc3JjW1BSRVJFTEVBU0VdKyI/IitzcmNbQlVJTERdKyI/IjtzcmNbRlVMTF09Il4iK0ZVTExQTEFJTisiJCI7dmFyIExPT1NFUExBSU49Ilt2PVxcc10qIitzcmNbTUFJTlZFUlNJT05MT09TRV0rc3JjW1BSRVJFTEVBU0VMT09TRV0rIj8iK3NyY1tCVUlMRF0rIj8iO3ZhciBMT09TRT1SKys7c3JjW0xPT1NFXT0iXiIrTE9PU0VQTEFJTisiJCI7dmFyIEdUTFQ9UisrO3NyY1tHVExUXT0iKCg/Ojx8Pik/PT8pIjt2YXIgWFJBTkdFSURFTlRJRklFUkxPT1NFPVIrKztzcmNbWFJBTkdFSURFTlRJRklFUkxPT1NFXT1zcmNbTlVNRVJJQ0lERU5USUZJRVJMT09TRV0rInx4fFh8XFwqIjt2YXIgWFJBTkdFSURFTlRJRklFUj1SKys7c3JjW1hSQU5HRUlERU5USUZJRVJdPXNyY1tOVU1FUklDSURFTlRJRklFUl0rInx4fFh8XFwqIjt2YXIgWFJBTkdFUExBSU49UisrO3NyY1tYUkFOR0VQTEFJTl09Ilt2PVxcc10qKCIrc3JjW1hSQU5HRUlERU5USUZJRVJdKyIpIisiKD86XFwuKCIrc3JjW1hSQU5HRUlERU5USUZJRVJdKyIpIisiKD86XFwuKCIrc3JjW1hSQU5HRUlERU5USUZJRVJdKyIpIisiKD86IitzcmNbUFJFUkVMRUFTRV0rIik/IitzcmNbQlVJTERdKyI/IisiKT8pPyI7dmFyIFhSQU5HRVBMQUlOTE9PU0U9UisrO3NyY1tYUkFOR0VQTEFJTkxPT1NFXT0iW3Y9XFxzXSooIitzcmNbWFJBTkdFSURFTlRJRklFUkxPT1NFXSsiKSIrIig/OlxcLigiK3NyY1tYUkFOR0VJREVOVElGSUVSTE9PU0VdKyIpIisiKD86XFwuKCIrc3JjW1hSQU5HRUlERU5USUZJRVJMT09TRV0rIikiKyIoPzoiK3NyY1tQUkVSRUxFQVNFTE9PU0VdKyIpPyIrc3JjW0JVSUxEXSsiPyIrIik/KT8iO3ZhciBYUkFOR0U9UisrO3NyY1tYUkFOR0VdPSJeIitzcmNbR1RMVF0rIlxccyoiK3NyY1tYUkFOR0VQTEFJTl0rIiQiO3ZhciBYUkFOR0VMT09TRT1SKys7c3JjW1hSQU5HRUxPT1NFXT0iXiIrc3JjW0dUTFRdKyJcXHMqIitzcmNbWFJBTkdFUExBSU5MT09TRV0rIiQiO3ZhciBDT0VSQ0U9UisrO3NyY1tDT0VSQ0VdPSIoPzpefFteXFxkXSkiKyIoXFxkezEsIitNQVhfU0FGRV9DT01QT05FTlRfTEVOR1RIKyJ9KSIrIig/OlxcLihcXGR7MSwiK01BWF9TQUZFX0NPTVBPTkVOVF9MRU5HVEgrIn0pKT8iKyIoPzpcXC4oXFxkezEsIitNQVhfU0FGRV9DT01QT05FTlRfTEVOR1RIKyJ9KSk/IisiKD86JHxbXlxcZF0pIjt2YXIgTE9ORVRJTERFPVIrKztzcmNbTE9ORVRJTERFXT0iKD86fj4/KSI7dmFyIFRJTERFVFJJTT1SKys7c3JjW1RJTERFVFJJTV09IihcXHMqKSIrc3JjW0xPTkVUSUxERV0rIlxccysiO3JlW1RJTERFVFJJTV09bmV3IFJlZ0V4cChzcmNbVElMREVUUklNXSwiZyIpO3ZhciB0aWxkZVRyaW1SZXBsYWNlPSIkMX4iO3ZhciBUSUxERT1SKys7c3JjW1RJTERFXT0iXiIrc3JjW0xPTkVUSUxERV0rc3JjW1hSQU5HRVBMQUlOXSsiJCI7dmFyIFRJTERFTE9PU0U9UisrO3NyY1tUSUxERUxPT1NFXT0iXiIrc3JjW0xPTkVUSUxERV0rc3JjW1hSQU5HRVBMQUlOTE9PU0VdKyIkIjt2YXIgTE9ORUNBUkVUPVIrKztzcmNbTE9ORUNBUkVUXT0iKD86XFxeKSI7dmFyIENBUkVUVFJJTT1SKys7c3JjW0NBUkVUVFJJTV09IihcXHMqKSIrc3JjW0xPTkVDQVJFVF0rIlxccysiO3JlW0NBUkVUVFJJTV09bmV3IFJlZ0V4cChzcmNbQ0FSRVRUUklNXSwiZyIpO3ZhciBjYXJldFRyaW1SZXBsYWNlPSIkMV4iO3ZhciBDQVJFVD1SKys7c3JjW0NBUkVUXT0iXiIrc3JjW0xPTkVDQVJFVF0rc3JjW1hSQU5HRVBMQUlOXSsiJCI7dmFyIENBUkVUTE9PU0U9UisrO3NyY1tDQVJFVExPT1NFXT0iXiIrc3JjW0xPTkVDQVJFVF0rc3JjW1hSQU5HRVBMQUlOTE9PU0VdKyIkIjt2YXIgQ09NUEFSQVRPUkxPT1NFPVIrKztzcmNbQ09NUEFSQVRPUkxPT1NFXT0iXiIrc3JjW0dUTFRdKyJcXHMqKCIrTE9PU0VQTEFJTisiKSR8XiQiO3ZhciBDT01QQVJBVE9SPVIrKztzcmNbQ09NUEFSQVRPUl09Il4iK3NyY1tHVExUXSsiXFxzKigiK0ZVTExQTEFJTisiKSR8XiQiO3ZhciBDT01QQVJBVE9SVFJJTT1SKys7c3JjW0NPTVBBUkFUT1JUUklNXT0iKFxccyopIitzcmNbR1RMVF0rIlxccyooIitMT09TRVBMQUlOKyJ8IitzcmNbWFJBTkdFUExBSU5dKyIpIjtyZVtDT01QQVJBVE9SVFJJTV09bmV3IFJlZ0V4cChzcmNbQ09NUEFSQVRPUlRSSU1dLCJnIik7dmFyIGNvbXBhcmF0b3JUcmltUmVwbGFjZT0iJDEkMiQzIjt2YXIgSFlQSEVOUkFOR0U9UisrO3NyY1tIWVBIRU5SQU5HRV09Il5cXHMqKCIrc3JjW1hSQU5HRVBMQUlOXSsiKSIrIlxccystXFxzKyIrIigiK3NyY1tYUkFOR0VQTEFJTl0rIikiKyJcXHMqJCI7dmFyIEhZUEhFTlJBTkdFTE9PU0U9UisrO3NyY1tIWVBIRU5SQU5HRUxPT1NFXT0iXlxccyooIitzcmNbWFJBTkdFUExBSU5MT09TRV0rIikiKyJcXHMrLVxccysiKyIoIitzcmNbWFJBTkdFUExBSU5MT09TRV0rIikiKyJcXHMqJCI7dmFyIFNUQVI9UisrO3NyY1tTVEFSXT0iKDx8Pik/PT9cXHMqXFwqIjtmb3IodmFyIGk9MDtpPFI7aSsrKXtkZWJ1ZyhpLHNyY1tpXSk7aWYoIXJlW2ldKXtyZVtpXT1uZXcgUmVnRXhwKHNyY1tpXSl9fWV4cG9ydHMucGFyc2U9cGFyc2U7ZnVuY3Rpb24gcGFyc2UodmVyc2lvbixvcHRpb25zKXtpZighb3B0aW9uc3x8dHlwZW9mIG9wdGlvbnMhPT0ib2JqZWN0Iil7b3B0aW9ucz17bG9vc2U6ISFvcHRpb25zLGluY2x1ZGVQcmVyZWxlYXNlOmZhbHNlfX1pZih2ZXJzaW9uIGluc3RhbmNlb2YgU2VtVmVyKXtyZXR1cm4gdmVyc2lvbn1pZih0eXBlb2YgdmVyc2lvbiE9PSJzdHJpbmciKXtyZXR1cm4gbnVsbH1pZih2ZXJzaW9uLmxlbmd0aD5NQVhfTEVOR1RIKXtyZXR1cm4gbnVsbH12YXIgcj1vcHRpb25zLmxvb3NlP3JlW0xPT1NFXTpyZVtGVUxMXTtpZighci50ZXN0KHZlcnNpb24pKXtyZXR1cm4gbnVsbH10cnl7cmV0dXJuIG5ldyBTZW1WZXIodmVyc2lvbixvcHRpb25zKX1jYXRjaChlcil7cmV0dXJuIG51bGx9fWV4cG9ydHMudmFsaWQ9dmFsaWQ7ZnVuY3Rpb24gdmFsaWQodmVyc2lvbixvcHRpb25zKXt2YXIgdj1wYXJzZSh2ZXJzaW9uLG9wdGlvbnMpO3JldHVybiB2P3YudmVyc2lvbjpudWxsfWV4cG9ydHMuY2xlYW49Y2xlYW47ZnVuY3Rpb24gY2xlYW4odmVyc2lvbixvcHRpb25zKXt2YXIgcz1wYXJzZSh2ZXJzaW9uLnRyaW0oKS5yZXBsYWNlKC9eWz12XSsvLCIiKSxvcHRpb25zKTtyZXR1cm4gcz9zLnZlcnNpb246bnVsbH1leHBvcnRzLlNlbVZlcj1TZW1WZXI7ZnVuY3Rpb24gU2VtVmVyKHZlcnNpb24sb3B0aW9ucyl7aWYoIW9wdGlvbnN8fHR5cGVvZiBvcHRpb25zIT09Im9iamVjdCIpe29wdGlvbnM9e2xvb3NlOiEhb3B0aW9ucyxpbmNsdWRlUHJlcmVsZWFzZTpmYWxzZX19aWYodmVyc2lvbiBpbnN0YW5jZW9mIFNlbVZlcil7aWYodmVyc2lvbi5sb29zZT09PW9wdGlvbnMubG9vc2Upe3JldHVybiB2ZXJzaW9ufWVsc2V7dmVyc2lvbj12ZXJzaW9uLnZlcnNpb259fWVsc2UgaWYodHlwZW9mIHZlcnNpb24hPT0ic3RyaW5nIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBWZXJzaW9uOiAiK3ZlcnNpb24pfWlmKHZlcnNpb24ubGVuZ3RoPk1BWF9MRU5HVEgpe3Rocm93IG5ldyBUeXBlRXJyb3IoInZlcnNpb24gaXMgbG9uZ2VyIHRoYW4gIitNQVhfTEVOR1RIKyIgY2hhcmFjdGVycyIpfWlmKCEodGhpcyBpbnN0YW5jZW9mIFNlbVZlcikpe3JldHVybiBuZXcgU2VtVmVyKHZlcnNpb24sb3B0aW9ucyl9ZGVidWcoIlNlbVZlciIsdmVyc2lvbixvcHRpb25zKTt0aGlzLm9wdGlvbnM9b3B0aW9uczt0aGlzLmxvb3NlPSEhb3B0aW9ucy5sb29zZTt2YXIgbT12ZXJzaW9uLnRyaW0oKS5tYXRjaChvcHRpb25zLmxvb3NlP3JlW0xPT1NFXTpyZVtGVUxMXSk7aWYoIW0pe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgVmVyc2lvbjogIit2ZXJzaW9uKX10aGlzLnJhdz12ZXJzaW9uO3RoaXMubWFqb3I9K21bMV07dGhpcy5taW5vcj0rbVsyXTt0aGlzLnBhdGNoPSttWzNdO2lmKHRoaXMubWFqb3I+TUFYX1NBRkVfSU5URUdFUnx8dGhpcy5tYWpvcjwwKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIG1ham9yIHZlcnNpb24iKX1pZih0aGlzLm1pbm9yPk1BWF9TQUZFX0lOVEVHRVJ8fHRoaXMubWlub3I8MCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBtaW5vciB2ZXJzaW9uIil9aWYodGhpcy5wYXRjaD5NQVhfU0FGRV9JTlRFR0VSfHx0aGlzLnBhdGNoPDApe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgcGF0Y2ggdmVyc2lvbiIpfWlmKCFtWzRdKXt0aGlzLnByZXJlbGVhc2U9W119ZWxzZXt0aGlzLnByZXJlbGVhc2U9bVs0XS5zcGxpdCgiLiIpLm1hcChmdW5jdGlvbihpZCl7aWYoL15bMC05XSskLy50ZXN0KGlkKSl7dmFyIG51bT0raWQ7aWYobnVtPj0wJiZudW08TUFYX1NBRkVfSU5URUdFUil7cmV0dXJuIG51bX19cmV0dXJuIGlkfSl9dGhpcy5idWlsZD1tWzVdP21bNV0uc3BsaXQoIi4iKTpbXTt0aGlzLmZvcm1hdCgpfVNlbVZlci5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKCl7dGhpcy52ZXJzaW9uPXRoaXMubWFqb3IrIi4iK3RoaXMubWlub3IrIi4iK3RoaXMucGF0Y2g7aWYodGhpcy5wcmVyZWxlYXNlLmxlbmd0aCl7dGhpcy52ZXJzaW9uKz0iLSIrdGhpcy5wcmVyZWxlYXNlLmpvaW4oIi4iKX1yZXR1cm4gdGhpcy52ZXJzaW9ufTtTZW1WZXIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmVyc2lvbn07U2VtVmVyLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKG90aGVyKXtkZWJ1ZygiU2VtVmVyLmNvbXBhcmUiLHRoaXMudmVyc2lvbix0aGlzLm9wdGlvbnMsb3RoZXIpO2lmKCEob3RoZXIgaW5zdGFuY2VvZiBTZW1WZXIpKXtvdGhlcj1uZXcgU2VtVmVyKG90aGVyLHRoaXMub3B0aW9ucyl9cmV0dXJuIHRoaXMuY29tcGFyZU1haW4ob3RoZXIpfHx0aGlzLmNvbXBhcmVQcmUob3RoZXIpfTtTZW1WZXIucHJvdG90eXBlLmNvbXBhcmVNYWluPWZ1bmN0aW9uKG90aGVyKXtpZighKG90aGVyIGluc3RhbmNlb2YgU2VtVmVyKSl7b3RoZXI9bmV3IFNlbVZlcihvdGhlcix0aGlzLm9wdGlvbnMpfXJldHVybiBjb21wYXJlSWRlbnRpZmllcnModGhpcy5tYWpvcixvdGhlci5tYWpvcil8fGNvbXBhcmVJZGVudGlmaWVycyh0aGlzLm1pbm9yLG90aGVyLm1pbm9yKXx8Y29tcGFyZUlkZW50aWZpZXJzKHRoaXMucGF0Y2gsb3RoZXIucGF0Y2gpfTtTZW1WZXIucHJvdG90eXBlLmNvbXBhcmVQcmU9ZnVuY3Rpb24ob3RoZXIpe2lmKCEob3RoZXIgaW5zdGFuY2VvZiBTZW1WZXIpKXtvdGhlcj1uZXcgU2VtVmVyKG90aGVyLHRoaXMub3B0aW9ucyl9aWYodGhpcy5wcmVyZWxlYXNlLmxlbmd0aCYmIW90aGVyLnByZXJlbGVhc2UubGVuZ3RoKXtyZXR1cm4tMX1lbHNlIGlmKCF0aGlzLnByZXJlbGVhc2UubGVuZ3RoJiZvdGhlci5wcmVyZWxlYXNlLmxlbmd0aCl7cmV0dXJuIDF9ZWxzZSBpZighdGhpcy5wcmVyZWxlYXNlLmxlbmd0aCYmIW90aGVyLnByZXJlbGVhc2UubGVuZ3RoKXtyZXR1cm4gMH12YXIgaT0wO2Rve3ZhciBhPXRoaXMucHJlcmVsZWFzZVtpXTt2YXIgYj1vdGhlci5wcmVyZWxlYXNlW2ldO2RlYnVnKCJwcmVyZWxlYXNlIGNvbXBhcmUiLGksYSxiKTtpZihhPT09dW5kZWZpbmVkJiZiPT09dW5kZWZpbmVkKXtyZXR1cm4gMH1lbHNlIGlmKGI9PT11bmRlZmluZWQpe3JldHVybiAxfWVsc2UgaWYoYT09PXVuZGVmaW5lZCl7cmV0dXJuLTF9ZWxzZSBpZihhPT09Yil7Y29udGludWV9ZWxzZXtyZXR1cm4gY29tcGFyZUlkZW50aWZpZXJzKGEsYil9fXdoaWxlKCsraSl9O1NlbVZlci5wcm90b3R5cGUuaW5jPWZ1bmN0aW9uKHJlbGVhc2UsaWRlbnRpZmllcil7c3dpdGNoKHJlbGVhc2Upe2Nhc2UicHJlbWFqb3IiOnRoaXMucHJlcmVsZWFzZS5sZW5ndGg9MDt0aGlzLnBhdGNoPTA7dGhpcy5taW5vcj0wO3RoaXMubWFqb3IrKzt0aGlzLmluYygicHJlIixpZGVudGlmaWVyKTticmVhaztjYXNlInByZW1pbm9yIjp0aGlzLnByZXJlbGVhc2UubGVuZ3RoPTA7dGhpcy5wYXRjaD0wO3RoaXMubWlub3IrKzt0aGlzLmluYygicHJlIixpZGVudGlmaWVyKTticmVhaztjYXNlInByZXBhdGNoIjp0aGlzLnByZXJlbGVhc2UubGVuZ3RoPTA7dGhpcy5pbmMoInBhdGNoIixpZGVudGlmaWVyKTt0aGlzLmluYygicHJlIixpZGVudGlmaWVyKTticmVhaztjYXNlInByZXJlbGVhc2UiOmlmKHRoaXMucHJlcmVsZWFzZS5sZW5ndGg9PT0wKXt0aGlzLmluYygicGF0Y2giLGlkZW50aWZpZXIpfXRoaXMuaW5jKCJwcmUiLGlkZW50aWZpZXIpO2JyZWFrO2Nhc2UibWFqb3IiOmlmKHRoaXMubWlub3IhPT0wfHx0aGlzLnBhdGNoIT09MHx8dGhpcy5wcmVyZWxlYXNlLmxlbmd0aD09PTApe3RoaXMubWFqb3IrK310aGlzLm1pbm9yPTA7dGhpcy5wYXRjaD0wO3RoaXMucHJlcmVsZWFzZT1bXTticmVhaztjYXNlIm1pbm9yIjppZih0aGlzLnBhdGNoIT09MHx8dGhpcy5wcmVyZWxlYXNlLmxlbmd0aD09PTApe3RoaXMubWlub3IrK310aGlzLnBhdGNoPTA7dGhpcy5wcmVyZWxlYXNlPVtdO2JyZWFrO2Nhc2UicGF0Y2giOmlmKHRoaXMucHJlcmVsZWFzZS5sZW5ndGg9PT0wKXt0aGlzLnBhdGNoKyt9dGhpcy5wcmVyZWxlYXNlPVtdO2JyZWFrO2Nhc2UicHJlIjppZih0aGlzLnByZXJlbGVhc2UubGVuZ3RoPT09MCl7dGhpcy5wcmVyZWxlYXNlPVswXX1lbHNle3ZhciBpPXRoaXMucHJlcmVsZWFzZS5sZW5ndGg7d2hpbGUoLS1pPj0wKXtpZih0eXBlb2YgdGhpcy5wcmVyZWxlYXNlW2ldPT09Im51bWJlciIpe3RoaXMucHJlcmVsZWFzZVtpXSsrO2k9LTJ9fWlmKGk9PT0tMSl7dGhpcy5wcmVyZWxlYXNlLnB1c2goMCl9fWlmKGlkZW50aWZpZXIpe2lmKHRoaXMucHJlcmVsZWFzZVswXT09PWlkZW50aWZpZXIpe2lmKGlzTmFOKHRoaXMucHJlcmVsZWFzZVsxXSkpe3RoaXMucHJlcmVsZWFzZT1baWRlbnRpZmllciwwXX19ZWxzZXt0aGlzLnByZXJlbGVhc2U9W2lkZW50aWZpZXIsMF19fWJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkIGluY3JlbWVudCBhcmd1bWVudDogIityZWxlYXNlKX10aGlzLmZvcm1hdCgpO3RoaXMucmF3PXRoaXMudmVyc2lvbjtyZXR1cm4gdGhpc307ZXhwb3J0cy5pbmM9aW5jO2Z1bmN0aW9uIGluYyh2ZXJzaW9uLHJlbGVhc2UsbG9vc2UsaWRlbnRpZmllcil7aWYodHlwZW9mIGxvb3NlPT09InN0cmluZyIpe2lkZW50aWZpZXI9bG9vc2U7bG9vc2U9dW5kZWZpbmVkfXRyeXtyZXR1cm4gbmV3IFNlbVZlcih2ZXJzaW9uLGxvb3NlKS5pbmMocmVsZWFzZSxpZGVudGlmaWVyKS52ZXJzaW9ufWNhdGNoKGVyKXtyZXR1cm4gbnVsbH19ZXhwb3J0cy5kaWZmPWRpZmY7ZnVuY3Rpb24gZGlmZih2ZXJzaW9uMSx2ZXJzaW9uMil7aWYoZXEodmVyc2lvbjEsdmVyc2lvbjIpKXtyZXR1cm4gbnVsbH1lbHNle3ZhciB2MT1wYXJzZSh2ZXJzaW9uMSk7dmFyIHYyPXBhcnNlKHZlcnNpb24yKTt2YXIgcHJlZml4PSIiO2lmKHYxLnByZXJlbGVhc2UubGVuZ3RofHx2Mi5wcmVyZWxlYXNlLmxlbmd0aCl7cHJlZml4PSJwcmUiO3ZhciBkZWZhdWx0UmVzdWx0PSJwcmVyZWxlYXNlIn1mb3IodmFyIGtleSBpbiB2MSl7aWYoa2V5PT09Im1ham9yInx8a2V5PT09Im1pbm9yInx8a2V5PT09InBhdGNoIil7aWYodjFba2V5XSE9PXYyW2tleV0pe3JldHVybiBwcmVmaXgra2V5fX19cmV0dXJuIGRlZmF1bHRSZXN1bHR9fWV4cG9ydHMuY29tcGFyZUlkZW50aWZpZXJzPWNvbXBhcmVJZGVudGlmaWVyczt2YXIgbnVtZXJpYz0vXlswLTldKyQvO2Z1bmN0aW9uIGNvbXBhcmVJZGVudGlmaWVycyhhLGIpe3ZhciBhbnVtPW51bWVyaWMudGVzdChhKTt2YXIgYm51bT1udW1lcmljLnRlc3QoYik7aWYoYW51bSYmYm51bSl7YT0rYTtiPStifXJldHVybiBhPT09Yj8wOmFudW0mJiFibnVtPy0xOmJudW0mJiFhbnVtPzE6YTxiPy0xOjF9ZXhwb3J0cy5yY29tcGFyZUlkZW50aWZpZXJzPXJjb21wYXJlSWRlbnRpZmllcnM7ZnVuY3Rpb24gcmNvbXBhcmVJZGVudGlmaWVycyhhLGIpe3JldHVybiBjb21wYXJlSWRlbnRpZmllcnMoYixhKX1leHBvcnRzLm1ham9yPW1ham9yO2Z1bmN0aW9uIG1ham9yKGEsbG9vc2Upe3JldHVybiBuZXcgU2VtVmVyKGEsbG9vc2UpLm1ham9yfWV4cG9ydHMubWlub3I9bWlub3I7ZnVuY3Rpb24gbWlub3IoYSxsb29zZSl7cmV0dXJuIG5ldyBTZW1WZXIoYSxsb29zZSkubWlub3J9ZXhwb3J0cy5wYXRjaD1wYXRjaDtmdW5jdGlvbiBwYXRjaChhLGxvb3NlKXtyZXR1cm4gbmV3IFNlbVZlcihhLGxvb3NlKS5wYXRjaH1leHBvcnRzLmNvbXBhcmU9Y29tcGFyZTtmdW5jdGlvbiBjb21wYXJlKGEsYixsb29zZSl7cmV0dXJuIG5ldyBTZW1WZXIoYSxsb29zZSkuY29tcGFyZShuZXcgU2VtVmVyKGIsbG9vc2UpKX1leHBvcnRzLmNvbXBhcmVMb29zZT1jb21wYXJlTG9vc2U7ZnVuY3Rpb24gY29tcGFyZUxvb3NlKGEsYil7cmV0dXJuIGNvbXBhcmUoYSxiLHRydWUpfWV4cG9ydHMucmNvbXBhcmU9cmNvbXBhcmU7ZnVuY3Rpb24gcmNvbXBhcmUoYSxiLGxvb3NlKXtyZXR1cm4gY29tcGFyZShiLGEsbG9vc2UpfWV4cG9ydHMuc29ydD1zb3J0O2Z1bmN0aW9uIHNvcnQobGlzdCxsb29zZSl7cmV0dXJuIGxpc3Quc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBleHBvcnRzLmNvbXBhcmUoYSxiLGxvb3NlKX0pfWV4cG9ydHMucnNvcnQ9cnNvcnQ7ZnVuY3Rpb24gcnNvcnQobGlzdCxsb29zZSl7cmV0dXJuIGxpc3Quc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBleHBvcnRzLnJjb21wYXJlKGEsYixsb29zZSl9KX1leHBvcnRzLmd0PWd0O2Z1bmN0aW9uIGd0KGEsYixsb29zZSl7cmV0dXJuIGNvbXBhcmUoYSxiLGxvb3NlKT4wfWV4cG9ydHMubHQ9bHQ7ZnVuY3Rpb24gbHQoYSxiLGxvb3NlKXtyZXR1cm4gY29tcGFyZShhLGIsbG9vc2UpPDB9ZXhwb3J0cy5lcT1lcTtmdW5jdGlvbiBlcShhLGIsbG9vc2Upe3JldHVybiBjb21wYXJlKGEsYixsb29zZSk9PT0wfWV4cG9ydHMubmVxPW5lcTtmdW5jdGlvbiBuZXEoYSxiLGxvb3NlKXtyZXR1cm4gY29tcGFyZShhLGIsbG9vc2UpIT09MH1leHBvcnRzLmd0ZT1ndGU7ZnVuY3Rpb24gZ3RlKGEsYixsb29zZSl7cmV0dXJuIGNvbXBhcmUoYSxiLGxvb3NlKT49MH1leHBvcnRzLmx0ZT1sdGU7ZnVuY3Rpb24gbHRlKGEsYixsb29zZSl7cmV0dXJuIGNvbXBhcmUoYSxiLGxvb3NlKTw9MH1leHBvcnRzLmNtcD1jbXA7ZnVuY3Rpb24gY21wKGEsb3AsYixsb29zZSl7c3dpdGNoKG9wKXtjYXNlIj09PSI6aWYodHlwZW9mIGE9PT0ib2JqZWN0IilhPWEudmVyc2lvbjtpZih0eXBlb2YgYj09PSJvYmplY3QiKWI9Yi52ZXJzaW9uO3JldHVybiBhPT09YjtjYXNlIiE9PSI6aWYodHlwZW9mIGE9PT0ib2JqZWN0IilhPWEudmVyc2lvbjtpZih0eXBlb2YgYj09PSJvYmplY3QiKWI9Yi52ZXJzaW9uO3JldHVybiBhIT09YjtjYXNlIiI6Y2FzZSI9IjpjYXNlIj09IjpyZXR1cm4gZXEoYSxiLGxvb3NlKTtjYXNlIiE9IjpyZXR1cm4gbmVxKGEsYixsb29zZSk7Y2FzZSI+IjpyZXR1cm4gZ3QoYSxiLGxvb3NlKTtjYXNlIj49IjpyZXR1cm4gZ3RlKGEsYixsb29zZSk7Y2FzZSI8IjpyZXR1cm4gbHQoYSxiLGxvb3NlKTtjYXNlIjw9IjpyZXR1cm4gbHRlKGEsYixsb29zZSk7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIG9wZXJhdG9yOiAiK29wKX19ZXhwb3J0cy5Db21wYXJhdG9yPUNvbXBhcmF0b3I7ZnVuY3Rpb24gQ29tcGFyYXRvcihjb21wLG9wdGlvbnMpe2lmKCFvcHRpb25zfHx0eXBlb2Ygb3B0aW9ucyE9PSJvYmplY3QiKXtvcHRpb25zPXtsb29zZTohIW9wdGlvbnMsaW5jbHVkZVByZXJlbGVhc2U6ZmFsc2V9fWlmKGNvbXAgaW5zdGFuY2VvZiBDb21wYXJhdG9yKXtpZihjb21wLmxvb3NlPT09ISFvcHRpb25zLmxvb3NlKXtyZXR1cm4gY29tcH1lbHNle2NvbXA9Y29tcC52YWx1ZX19aWYoISh0aGlzIGluc3RhbmNlb2YgQ29tcGFyYXRvcikpe3JldHVybiBuZXcgQ29tcGFyYXRvcihjb21wLG9wdGlvbnMpfWRlYnVnKCJjb21wYXJhdG9yIixjb21wLG9wdGlvbnMpO3RoaXMub3B0aW9ucz1vcHRpb25zO3RoaXMubG9vc2U9ISFvcHRpb25zLmxvb3NlO3RoaXMucGFyc2UoY29tcCk7aWYodGhpcy5zZW12ZXI9PT1BTlkpe3RoaXMudmFsdWU9IiJ9ZWxzZXt0aGlzLnZhbHVlPXRoaXMub3BlcmF0b3IrdGhpcy5zZW12ZXIudmVyc2lvbn1kZWJ1ZygiY29tcCIsdGhpcyl9dmFyIEFOWT17fTtDb21wYXJhdG9yLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihjb21wKXt2YXIgcj10aGlzLm9wdGlvbnMubG9vc2U/cmVbQ09NUEFSQVRPUkxPT1NFXTpyZVtDT01QQVJBVE9SXTt2YXIgbT1jb21wLm1hdGNoKHIpO2lmKCFtKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGNvbXBhcmF0b3I6ICIrY29tcCl9dGhpcy5vcGVyYXRvcj1tWzFdO2lmKHRoaXMub3BlcmF0b3I9PT0iPSIpe3RoaXMub3BlcmF0b3I9IiJ9aWYoIW1bMl0pe3RoaXMuc2VtdmVyPUFOWX1lbHNle3RoaXMuc2VtdmVyPW5ldyBTZW1WZXIobVsyXSx0aGlzLm9wdGlvbnMubG9vc2UpfX07Q29tcGFyYXRvci5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZX07Q29tcGFyYXRvci5wcm90b3R5cGUudGVzdD1mdW5jdGlvbih2ZXJzaW9uKXtkZWJ1ZygiQ29tcGFyYXRvci50ZXN0Iix2ZXJzaW9uLHRoaXMub3B0aW9ucy5sb29zZSk7aWYodGhpcy5zZW12ZXI9PT1BTlkpe3JldHVybiB0cnVlfWlmKHR5cGVvZiB2ZXJzaW9uPT09InN0cmluZyIpe3ZlcnNpb249bmV3IFNlbVZlcih2ZXJzaW9uLHRoaXMub3B0aW9ucyl9cmV0dXJuIGNtcCh2ZXJzaW9uLHRoaXMub3BlcmF0b3IsdGhpcy5zZW12ZXIsdGhpcy5vcHRpb25zKX07Q29tcGFyYXRvci5wcm90b3R5cGUuaW50ZXJzZWN0cz1mdW5jdGlvbihjb21wLG9wdGlvbnMpe2lmKCEoY29tcCBpbnN0YW5jZW9mIENvbXBhcmF0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJhIENvbXBhcmF0b3IgaXMgcmVxdWlyZWQiKX1pZighb3B0aW9uc3x8dHlwZW9mIG9wdGlvbnMhPT0ib2JqZWN0Iil7b3B0aW9ucz17bG9vc2U6ISFvcHRpb25zLGluY2x1ZGVQcmVyZWxlYXNlOmZhbHNlfX12YXIgcmFuZ2VUbXA7aWYodGhpcy5vcGVyYXRvcj09PSIiKXtyYW5nZVRtcD1uZXcgUmFuZ2UoY29tcC52YWx1ZSxvcHRpb25zKTtyZXR1cm4gc2F0aXNmaWVzKHRoaXMudmFsdWUscmFuZ2VUbXAsb3B0aW9ucyl9ZWxzZSBpZihjb21wLm9wZXJhdG9yPT09IiIpe3JhbmdlVG1wPW5ldyBSYW5nZSh0aGlzLnZhbHVlLG9wdGlvbnMpO3JldHVybiBzYXRpc2ZpZXMoY29tcC5zZW12ZXIscmFuZ2VUbXAsb3B0aW9ucyl9dmFyIHNhbWVEaXJlY3Rpb25JbmNyZWFzaW5nPSh0aGlzLm9wZXJhdG9yPT09Ij49Inx8dGhpcy5vcGVyYXRvcj09PSI+IikmJihjb21wLm9wZXJhdG9yPT09Ij49Inx8Y29tcC5vcGVyYXRvcj09PSI+Iik7dmFyIHNhbWVEaXJlY3Rpb25EZWNyZWFzaW5nPSh0aGlzLm9wZXJhdG9yPT09Ijw9Inx8dGhpcy5vcGVyYXRvcj09PSI8IikmJihjb21wLm9wZXJhdG9yPT09Ijw9Inx8Y29tcC5vcGVyYXRvcj09PSI8Iik7dmFyIHNhbWVTZW1WZXI9dGhpcy5zZW12ZXIudmVyc2lvbj09PWNvbXAuc2VtdmVyLnZlcnNpb247dmFyIGRpZmZlcmVudERpcmVjdGlvbnNJbmNsdXNpdmU9KHRoaXMub3BlcmF0b3I9PT0iPj0ifHx0aGlzLm9wZXJhdG9yPT09Ijw9IikmJihjb21wLm9wZXJhdG9yPT09Ij49Inx8Y29tcC5vcGVyYXRvcj09PSI8PSIpO3ZhciBvcHBvc2l0ZURpcmVjdGlvbnNMZXNzVGhhbj1jbXAodGhpcy5zZW12ZXIsIjwiLGNvbXAuc2VtdmVyLG9wdGlvbnMpJiYoKHRoaXMub3BlcmF0b3I9PT0iPj0ifHx0aGlzLm9wZXJhdG9yPT09Ij4iKSYmKGNvbXAub3BlcmF0b3I9PT0iPD0ifHxjb21wLm9wZXJhdG9yPT09IjwiKSk7dmFyIG9wcG9zaXRlRGlyZWN0aW9uc0dyZWF0ZXJUaGFuPWNtcCh0aGlzLnNlbXZlciwiPiIsY29tcC5zZW12ZXIsb3B0aW9ucykmJigodGhpcy5vcGVyYXRvcj09PSI8PSJ8fHRoaXMub3BlcmF0b3I9PT0iPCIpJiYoY29tcC5vcGVyYXRvcj09PSI+PSJ8fGNvbXAub3BlcmF0b3I9PT0iPiIpKTtyZXR1cm4gc2FtZURpcmVjdGlvbkluY3JlYXNpbmd8fHNhbWVEaXJlY3Rpb25EZWNyZWFzaW5nfHxzYW1lU2VtVmVyJiZkaWZmZXJlbnREaXJlY3Rpb25zSW5jbHVzaXZlfHxvcHBvc2l0ZURpcmVjdGlvbnNMZXNzVGhhbnx8b3Bwb3NpdGVEaXJlY3Rpb25zR3JlYXRlclRoYW59O2V4cG9ydHMuUmFuZ2U9UmFuZ2U7ZnVuY3Rpb24gUmFuZ2UocmFuZ2Usb3B0aW9ucyl7aWYoIW9wdGlvbnN8fHR5cGVvZiBvcHRpb25zIT09Im9iamVjdCIpe29wdGlvbnM9e2xvb3NlOiEhb3B0aW9ucyxpbmNsdWRlUHJlcmVsZWFzZTpmYWxzZX19aWYocmFuZ2UgaW5zdGFuY2VvZiBSYW5nZSl7aWYocmFuZ2UubG9vc2U9PT0hIW9wdGlvbnMubG9vc2UmJnJhbmdlLmluY2x1ZGVQcmVyZWxlYXNlPT09ISFvcHRpb25zLmluY2x1ZGVQcmVyZWxlYXNlKXtyZXR1cm4gcmFuZ2V9ZWxzZXtyZXR1cm4gbmV3IFJhbmdlKHJhbmdlLnJhdyxvcHRpb25zKX19aWYocmFuZ2UgaW5zdGFuY2VvZiBDb21wYXJhdG9yKXtyZXR1cm4gbmV3IFJhbmdlKHJhbmdlLnZhbHVlLG9wdGlvbnMpfWlmKCEodGhpcyBpbnN0YW5jZW9mIFJhbmdlKSl7cmV0dXJuIG5ldyBSYW5nZShyYW5nZSxvcHRpb25zKX10aGlzLm9wdGlvbnM9b3B0aW9uczt0aGlzLmxvb3NlPSEhb3B0aW9ucy5sb29zZTt0aGlzLmluY2x1ZGVQcmVyZWxlYXNlPSEhb3B0aW9ucy5pbmNsdWRlUHJlcmVsZWFzZTt0aGlzLnJhdz1yYW5nZTt0aGlzLnNldD1yYW5nZS5zcGxpdCgvXHMqXHxcfFxzKi8pLm1hcChmdW5jdGlvbihyYW5nZSl7cmV0dXJuIHRoaXMucGFyc2VSYW5nZShyYW5nZS50cmltKCkpfSx0aGlzKS5maWx0ZXIoZnVuY3Rpb24oYyl7cmV0dXJuIGMubGVuZ3RofSk7aWYoIXRoaXMuc2V0Lmxlbmd0aCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBTZW1WZXIgUmFuZ2U6ICIrcmFuZ2UpfXRoaXMuZm9ybWF0KCl9UmFuZ2UucHJvdG90eXBlLmZvcm1hdD1mdW5jdGlvbigpe3RoaXMucmFuZ2U9dGhpcy5zZXQubWFwKGZ1bmN0aW9uKGNvbXBzKXtyZXR1cm4gY29tcHMuam9pbigiICIpLnRyaW0oKX0pLmpvaW4oInx8IikudHJpbSgpO3JldHVybiB0aGlzLnJhbmdlfTtSYW5nZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZX07UmFuZ2UucHJvdG90eXBlLnBhcnNlUmFuZ2U9ZnVuY3Rpb24ocmFuZ2Upe3ZhciBsb29zZT10aGlzLm9wdGlvbnMubG9vc2U7cmFuZ2U9cmFuZ2UudHJpbSgpO3ZhciBocj1sb29zZT9yZVtIWVBIRU5SQU5HRUxPT1NFXTpyZVtIWVBIRU5SQU5HRV07cmFuZ2U9cmFuZ2UucmVwbGFjZShocixoeXBoZW5SZXBsYWNlKTtkZWJ1ZygiaHlwaGVuIHJlcGxhY2UiLHJhbmdlKTtyYW5nZT1yYW5nZS5yZXBsYWNlKHJlW0NPTVBBUkFUT1JUUklNXSxjb21wYXJhdG9yVHJpbVJlcGxhY2UpO2RlYnVnKCJjb21wYXJhdG9yIHRyaW0iLHJhbmdlLHJlW0NPTVBBUkFUT1JUUklNXSk7cmFuZ2U9cmFuZ2UucmVwbGFjZShyZVtUSUxERVRSSU1dLHRpbGRlVHJpbVJlcGxhY2UpO3JhbmdlPXJhbmdlLnJlcGxhY2UocmVbQ0FSRVRUUklNXSxjYXJldFRyaW1SZXBsYWNlKTtyYW5nZT1yYW5nZS5zcGxpdCgvXHMrLykuam9pbigiICIpO3ZhciBjb21wUmU9bG9vc2U/cmVbQ09NUEFSQVRPUkxPT1NFXTpyZVtDT01QQVJBVE9SXTt2YXIgc2V0PXJhbmdlLnNwbGl0KCIgIikubWFwKGZ1bmN0aW9uKGNvbXApe3JldHVybiBwYXJzZUNvbXBhcmF0b3IoY29tcCx0aGlzLm9wdGlvbnMpfSx0aGlzKS5qb2luKCIgIikuc3BsaXQoL1xzKy8pO2lmKHRoaXMub3B0aW9ucy5sb29zZSl7c2V0PXNldC5maWx0ZXIoZnVuY3Rpb24oY29tcCl7cmV0dXJuISFjb21wLm1hdGNoKGNvbXBSZSl9KX1zZXQ9c2V0Lm1hcChmdW5jdGlvbihjb21wKXtyZXR1cm4gbmV3IENvbXBhcmF0b3IoY29tcCx0aGlzLm9wdGlvbnMpfSx0aGlzKTtyZXR1cm4gc2V0fTtSYW5nZS5wcm90b3R5cGUuaW50ZXJzZWN0cz1mdW5jdGlvbihyYW5nZSxvcHRpb25zKXtpZighKHJhbmdlIGluc3RhbmNlb2YgUmFuZ2UpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJhIFJhbmdlIGlzIHJlcXVpcmVkIil9cmV0dXJuIHRoaXMuc2V0LnNvbWUoZnVuY3Rpb24odGhpc0NvbXBhcmF0b3JzKXtyZXR1cm4gdGhpc0NvbXBhcmF0b3JzLmV2ZXJ5KGZ1bmN0aW9uKHRoaXNDb21wYXJhdG9yKXtyZXR1cm4gcmFuZ2Uuc2V0LnNvbWUoZnVuY3Rpb24ocmFuZ2VDb21wYXJhdG9ycyl7cmV0dXJuIHJhbmdlQ29tcGFyYXRvcnMuZXZlcnkoZnVuY3Rpb24ocmFuZ2VDb21wYXJhdG9yKXtyZXR1cm4gdGhpc0NvbXBhcmF0b3IuaW50ZXJzZWN0cyhyYW5nZUNvbXBhcmF0b3Isb3B0aW9ucyl9KX0pfSl9KX07ZXhwb3J0cy50b0NvbXBhcmF0b3JzPXRvQ29tcGFyYXRvcnM7ZnVuY3Rpb24gdG9Db21wYXJhdG9ycyhyYW5nZSxvcHRpb25zKXtyZXR1cm4gbmV3IFJhbmdlKHJhbmdlLG9wdGlvbnMpLnNldC5tYXAoZnVuY3Rpb24oY29tcCl7cmV0dXJuIGNvbXAubWFwKGZ1bmN0aW9uKGMpe3JldHVybiBjLnZhbHVlfSkuam9pbigiICIpLnRyaW0oKS5zcGxpdCgiICIpfSl9ZnVuY3Rpb24gcGFyc2VDb21wYXJhdG9yKGNvbXAsb3B0aW9ucyl7ZGVidWcoImNvbXAiLGNvbXAsb3B0aW9ucyk7Y29tcD1yZXBsYWNlQ2FyZXRzKGNvbXAsb3B0aW9ucyk7ZGVidWcoImNhcmV0Iixjb21wKTtjb21wPXJlcGxhY2VUaWxkZXMoY29tcCxvcHRpb25zKTtkZWJ1ZygidGlsZGVzIixjb21wKTtjb21wPXJlcGxhY2VYUmFuZ2VzKGNvbXAsb3B0aW9ucyk7ZGVidWcoInhyYW5nZSIsY29tcCk7Y29tcD1yZXBsYWNlU3RhcnMoY29tcCxvcHRpb25zKTtkZWJ1Zygic3RhcnMiLGNvbXApO3JldHVybiBjb21wfWZ1bmN0aW9uIGlzWChpZCl7cmV0dXJuIWlkfHxpZC50b0xvd2VyQ2FzZSgpPT09IngifHxpZD09PSIqIn1mdW5jdGlvbiByZXBsYWNlVGlsZGVzKGNvbXAsb3B0aW9ucyl7cmV0dXJuIGNvbXAudHJpbSgpLnNwbGl0KC9ccysvKS5tYXAoZnVuY3Rpb24oY29tcCl7cmV0dXJuIHJlcGxhY2VUaWxkZShjb21wLG9wdGlvbnMpfSkuam9pbigiICIpfWZ1bmN0aW9uIHJlcGxhY2VUaWxkZShjb21wLG9wdGlvbnMpe3ZhciByPW9wdGlvbnMubG9vc2U/cmVbVElMREVMT09TRV06cmVbVElMREVdO3JldHVybiBjb21wLnJlcGxhY2UocixmdW5jdGlvbihfLE0sbSxwLHByKXtkZWJ1ZygidGlsZGUiLGNvbXAsXyxNLG0scCxwcik7dmFyIHJldDtpZihpc1goTSkpe3JldD0iIn1lbHNlIGlmKGlzWChtKSl7cmV0PSI+PSIrTSsiLjAuMCA8IisoK00rMSkrIi4wLjAifWVsc2UgaWYoaXNYKHApKXtyZXQ9Ij49IitNKyIuIittKyIuMCA8IitNKyIuIisoK20rMSkrIi4wIn1lbHNlIGlmKHByKXtkZWJ1ZygicmVwbGFjZVRpbGRlIHByIixwcik7cmV0PSI+PSIrTSsiLiIrbSsiLiIrcCsiLSIrcHIrIiA8IitNKyIuIisoK20rMSkrIi4wIn1lbHNle3JldD0iPj0iK00rIi4iK20rIi4iK3ArIiA8IitNKyIuIisoK20rMSkrIi4wIn1kZWJ1ZygidGlsZGUgcmV0dXJuIixyZXQpO3JldHVybiByZXR9KX1mdW5jdGlvbiByZXBsYWNlQ2FyZXRzKGNvbXAsb3B0aW9ucyl7cmV0dXJuIGNvbXAudHJpbSgpLnNwbGl0KC9ccysvKS5tYXAoZnVuY3Rpb24oY29tcCl7cmV0dXJuIHJlcGxhY2VDYXJldChjb21wLG9wdGlvbnMpfSkuam9pbigiICIpfWZ1bmN0aW9uIHJlcGxhY2VDYXJldChjb21wLG9wdGlvbnMpe2RlYnVnKCJjYXJldCIsY29tcCxvcHRpb25zKTt2YXIgcj1vcHRpb25zLmxvb3NlP3JlW0NBUkVUTE9PU0VdOnJlW0NBUkVUXTtyZXR1cm4gY29tcC5yZXBsYWNlKHIsZnVuY3Rpb24oXyxNLG0scCxwcil7ZGVidWcoImNhcmV0Iixjb21wLF8sTSxtLHAscHIpO3ZhciByZXQ7aWYoaXNYKE0pKXtyZXQ9IiJ9ZWxzZSBpZihpc1gobSkpe3JldD0iPj0iK00rIi4wLjAgPCIrKCtNKzEpKyIuMC4wIn1lbHNlIGlmKGlzWChwKSl7aWYoTT09PSIwIil7cmV0PSI+PSIrTSsiLiIrbSsiLjAgPCIrTSsiLiIrKCttKzEpKyIuMCJ9ZWxzZXtyZXQ9Ij49IitNKyIuIittKyIuMCA8IisoK00rMSkrIi4wLjAifX1lbHNlIGlmKHByKXtkZWJ1ZygicmVwbGFjZUNhcmV0IHByIixwcik7aWYoTT09PSIwIil7aWYobT09PSIwIil7cmV0PSI+PSIrTSsiLiIrbSsiLiIrcCsiLSIrcHIrIiA8IitNKyIuIittKyIuIisoK3ArMSl9ZWxzZXtyZXQ9Ij49IitNKyIuIittKyIuIitwKyItIitwcisiIDwiK00rIi4iKygrbSsxKSsiLjAifX1lbHNle3JldD0iPj0iK00rIi4iK20rIi4iK3ArIi0iK3ByKyIgPCIrKCtNKzEpKyIuMC4wIn19ZWxzZXtkZWJ1Zygibm8gcHIiKTtpZihNPT09IjAiKXtpZihtPT09IjAiKXtyZXQ9Ij49IitNKyIuIittKyIuIitwKyIgPCIrTSsiLiIrbSsiLiIrKCtwKzEpfWVsc2V7cmV0PSI+PSIrTSsiLiIrbSsiLiIrcCsiIDwiK00rIi4iKygrbSsxKSsiLjAifX1lbHNle3JldD0iPj0iK00rIi4iK20rIi4iK3ArIiA8IisoK00rMSkrIi4wLjAifX1kZWJ1ZygiY2FyZXQgcmV0dXJuIixyZXQpO3JldHVybiByZXR9KX1mdW5jdGlvbiByZXBsYWNlWFJhbmdlcyhjb21wLG9wdGlvbnMpe2RlYnVnKCJyZXBsYWNlWFJhbmdlcyIsY29tcCxvcHRpb25zKTtyZXR1cm4gY29tcC5zcGxpdCgvXHMrLykubWFwKGZ1bmN0aW9uKGNvbXApe3JldHVybiByZXBsYWNlWFJhbmdlKGNvbXAsb3B0aW9ucyl9KS5qb2luKCIgIil9ZnVuY3Rpb24gcmVwbGFjZVhSYW5nZShjb21wLG9wdGlvbnMpe2NvbXA9Y29tcC50cmltKCk7dmFyIHI9b3B0aW9ucy5sb29zZT9yZVtYUkFOR0VMT09TRV06cmVbWFJBTkdFXTtyZXR1cm4gY29tcC5yZXBsYWNlKHIsZnVuY3Rpb24ocmV0LGd0bHQsTSxtLHAscHIpe2RlYnVnKCJ4UmFuZ2UiLGNvbXAscmV0LGd0bHQsTSxtLHAscHIpO3ZhciB4TT1pc1goTSk7dmFyIHhtPXhNfHxpc1gobSk7dmFyIHhwPXhtfHxpc1gocCk7dmFyIGFueVg9eHA7aWYoZ3RsdD09PSI9IiYmYW55WCl7Z3RsdD0iIn1pZih4TSl7aWYoZ3RsdD09PSI+Inx8Z3RsdD09PSI8Iil7cmV0PSI8MC4wLjAifWVsc2V7cmV0PSIqIn19ZWxzZSBpZihndGx0JiZhbnlYKXtpZih4bSl7bT0wfXA9MDtpZihndGx0PT09Ij4iKXtndGx0PSI+PSI7aWYoeG0pe009K00rMTttPTA7cD0wfWVsc2V7bT0rbSsxO3A9MH19ZWxzZSBpZihndGx0PT09Ijw9Iil7Z3RsdD0iPCI7aWYoeG0pe009K00rMX1lbHNle209K20rMX19cmV0PWd0bHQrTSsiLiIrbSsiLiIrcH1lbHNlIGlmKHhtKXtyZXQ9Ij49IitNKyIuMC4wIDwiKygrTSsxKSsiLjAuMCJ9ZWxzZSBpZih4cCl7cmV0PSI+PSIrTSsiLiIrbSsiLjAgPCIrTSsiLiIrKCttKzEpKyIuMCJ9ZGVidWcoInhSYW5nZSByZXR1cm4iLHJldCk7cmV0dXJuIHJldH0pfWZ1bmN0aW9uIHJlcGxhY2VTdGFycyhjb21wLG9wdGlvbnMpe2RlYnVnKCJyZXBsYWNlU3RhcnMiLGNvbXAsb3B0aW9ucyk7cmV0dXJuIGNvbXAudHJpbSgpLnJlcGxhY2UocmVbU1RBUl0sIiIpfWZ1bmN0aW9uIGh5cGhlblJlcGxhY2UoJDAsZnJvbSxmTSxmbSxmcCxmcHIsZmIsdG8sdE0sdG0sdHAsdHByLHRiKXtpZihpc1goZk0pKXtmcm9tPSIifWVsc2UgaWYoaXNYKGZtKSl7ZnJvbT0iPj0iK2ZNKyIuMC4wIn1lbHNlIGlmKGlzWChmcCkpe2Zyb209Ij49IitmTSsiLiIrZm0rIi4wIn1lbHNle2Zyb209Ij49Iitmcm9tfWlmKGlzWCh0TSkpe3RvPSIifWVsc2UgaWYoaXNYKHRtKSl7dG89IjwiKygrdE0rMSkrIi4wLjAifWVsc2UgaWYoaXNYKHRwKSl7dG89IjwiK3RNKyIuIisoK3RtKzEpKyIuMCJ9ZWxzZSBpZih0cHIpe3RvPSI8PSIrdE0rIi4iK3RtKyIuIit0cCsiLSIrdHByfWVsc2V7dG89Ijw9Iit0b31yZXR1cm4oZnJvbSsiICIrdG8pLnRyaW0oKX1SYW5nZS5wcm90b3R5cGUudGVzdD1mdW5jdGlvbih2ZXJzaW9uKXtpZighdmVyc2lvbil7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiB2ZXJzaW9uPT09InN0cmluZyIpe3ZlcnNpb249bmV3IFNlbVZlcih2ZXJzaW9uLHRoaXMub3B0aW9ucyl9Zm9yKHZhciBpPTA7aTx0aGlzLnNldC5sZW5ndGg7aSsrKXtpZih0ZXN0U2V0KHRoaXMuc2V0W2ldLHZlcnNpb24sdGhpcy5vcHRpb25zKSl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX07ZnVuY3Rpb24gdGVzdFNldChzZXQsdmVyc2lvbixvcHRpb25zKXtmb3IodmFyIGk9MDtpPHNldC5sZW5ndGg7aSsrKXtpZighc2V0W2ldLnRlc3QodmVyc2lvbikpe3JldHVybiBmYWxzZX19aWYodmVyc2lvbi5wcmVyZWxlYXNlLmxlbmd0aCYmIW9wdGlvbnMuaW5jbHVkZVByZXJlbGVhc2Upe2ZvcihpPTA7aTxzZXQubGVuZ3RoO2krKyl7ZGVidWcoc2V0W2ldLnNlbXZlcik7aWYoc2V0W2ldLnNlbXZlcj09PUFOWSl7Y29udGludWV9aWYoc2V0W2ldLnNlbXZlci5wcmVyZWxlYXNlLmxlbmd0aD4wKXt2YXIgYWxsb3dlZD1zZXRbaV0uc2VtdmVyO2lmKGFsbG93ZWQubWFqb3I9PT12ZXJzaW9uLm1ham9yJiZhbGxvd2VkLm1pbm9yPT09dmVyc2lvbi5taW5vciYmYWxsb3dlZC5wYXRjaD09PXZlcnNpb24ucGF0Y2gpe3JldHVybiB0cnVlfX19cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfWV4cG9ydHMuc2F0aXNmaWVzPXNhdGlzZmllcztmdW5jdGlvbiBzYXRpc2ZpZXModmVyc2lvbixyYW5nZSxvcHRpb25zKXt0cnl7cmFuZ2U9bmV3IFJhbmdlKHJhbmdlLG9wdGlvbnMpfWNhdGNoKGVyKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHJhbmdlLnRlc3QodmVyc2lvbil9ZXhwb3J0cy5tYXhTYXRpc2Z5aW5nPW1heFNhdGlzZnlpbmc7ZnVuY3Rpb24gbWF4U2F0aXNmeWluZyh2ZXJzaW9ucyxyYW5nZSxvcHRpb25zKXt2YXIgbWF4PW51bGw7dmFyIG1heFNWPW51bGw7dHJ5e3ZhciByYW5nZU9iaj1uZXcgUmFuZ2UocmFuZ2Usb3B0aW9ucyl9Y2F0Y2goZXIpe3JldHVybiBudWxsfXZlcnNpb25zLmZvckVhY2goZnVuY3Rpb24odil7aWYocmFuZ2VPYmoudGVzdCh2KSl7aWYoIW1heHx8bWF4U1YuY29tcGFyZSh2KT09PS0xKXttYXg9djttYXhTVj1uZXcgU2VtVmVyKG1heCxvcHRpb25zKX19fSk7cmV0dXJuIG1heH1leHBvcnRzLm1pblNhdGlzZnlpbmc9bWluU2F0aXNmeWluZztmdW5jdGlvbiBtaW5TYXRpc2Z5aW5nKHZlcnNpb25zLHJhbmdlLG9wdGlvbnMpe3ZhciBtaW49bnVsbDt2YXIgbWluU1Y9bnVsbDt0cnl7dmFyIHJhbmdlT2JqPW5ldyBSYW5nZShyYW5nZSxvcHRpb25zKX1jYXRjaChlcil7cmV0dXJuIG51bGx9dmVyc2lvbnMuZm9yRWFjaChmdW5jdGlvbih2KXtpZihyYW5nZU9iai50ZXN0KHYpKXtpZighbWlufHxtaW5TVi5jb21wYXJlKHYpPT09MSl7bWluPXY7bWluU1Y9bmV3IFNlbVZlcihtaW4sb3B0aW9ucyl9fX0pO3JldHVybiBtaW59ZXhwb3J0cy5taW5WZXJzaW9uPW1pblZlcnNpb247ZnVuY3Rpb24gbWluVmVyc2lvbihyYW5nZSxsb29zZSl7cmFuZ2U9bmV3IFJhbmdlKHJhbmdlLGxvb3NlKTt2YXIgbWludmVyPW5ldyBTZW1WZXIoIjAuMC4wIik7aWYocmFuZ2UudGVzdChtaW52ZXIpKXtyZXR1cm4gbWludmVyfW1pbnZlcj1uZXcgU2VtVmVyKCIwLjAuMC0wIik7aWYocmFuZ2UudGVzdChtaW52ZXIpKXtyZXR1cm4gbWludmVyfW1pbnZlcj1udWxsO2Zvcih2YXIgaT0wO2k8cmFuZ2Uuc2V0Lmxlbmd0aDsrK2kpe3ZhciBjb21wYXJhdG9ycz1yYW5nZS5zZXRbaV07Y29tcGFyYXRvcnMuZm9yRWFjaChmdW5jdGlvbihjb21wYXJhdG9yKXt2YXIgY29tcHZlcj1uZXcgU2VtVmVyKGNvbXBhcmF0b3Iuc2VtdmVyLnZlcnNpb24pO3N3aXRjaChjb21wYXJhdG9yLm9wZXJhdG9yKXtjYXNlIj4iOmlmKGNvbXB2ZXIucHJlcmVsZWFzZS5sZW5ndGg9PT0wKXtjb21wdmVyLnBhdGNoKyt9ZWxzZXtjb21wdmVyLnByZXJlbGVhc2UucHVzaCgwKX1jb21wdmVyLnJhdz1jb21wdmVyLmZvcm1hdCgpO2Nhc2UiIjpjYXNlIj49IjppZighbWludmVyfHxndChtaW52ZXIsY29tcHZlcikpe21pbnZlcj1jb21wdmVyfWJyZWFrO2Nhc2UiPCI6Y2FzZSI8PSI6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgb3BlcmF0aW9uOiAiK2NvbXBhcmF0b3Iub3BlcmF0b3IpfX0pfWlmKG1pbnZlciYmcmFuZ2UudGVzdChtaW52ZXIpKXtyZXR1cm4gbWludmVyfXJldHVybiBudWxsfWV4cG9ydHMudmFsaWRSYW5nZT12YWxpZFJhbmdlO2Z1bmN0aW9uIHZhbGlkUmFuZ2UocmFuZ2Usb3B0aW9ucyl7dHJ5e3JldHVybiBuZXcgUmFuZ2UocmFuZ2Usb3B0aW9ucykucmFuZ2V8fCIqIn1jYXRjaChlcil7cmV0dXJuIG51bGx9fWV4cG9ydHMubHRyPWx0cjtmdW5jdGlvbiBsdHIodmVyc2lvbixyYW5nZSxvcHRpb25zKXtyZXR1cm4gb3V0c2lkZSh2ZXJzaW9uLHJhbmdlLCI8IixvcHRpb25zKX1leHBvcnRzLmd0cj1ndHI7ZnVuY3Rpb24gZ3RyKHZlcnNpb24scmFuZ2Usb3B0aW9ucyl7cmV0dXJuIG91dHNpZGUodmVyc2lvbixyYW5nZSwiPiIsb3B0aW9ucyl9ZXhwb3J0cy5vdXRzaWRlPW91dHNpZGU7ZnVuY3Rpb24gb3V0c2lkZSh2ZXJzaW9uLHJhbmdlLGhpbG8sb3B0aW9ucyl7dmVyc2lvbj1uZXcgU2VtVmVyKHZlcnNpb24sb3B0aW9ucyk7cmFuZ2U9bmV3IFJhbmdlKHJhbmdlLG9wdGlvbnMpO3ZhciBndGZuLGx0ZWZuLGx0Zm4sY29tcCxlY29tcDtzd2l0Y2goaGlsbyl7Y2FzZSI+IjpndGZuPWd0O2x0ZWZuPWx0ZTtsdGZuPWx0O2NvbXA9Ij4iO2Vjb21wPSI+PSI7YnJlYWs7Y2FzZSI8IjpndGZuPWx0O2x0ZWZuPWd0ZTtsdGZuPWd0O2NvbXA9IjwiO2Vjb21wPSI8PSI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCdNdXN0IHByb3ZpZGUgYSBoaWxvIHZhbCBvZiAiPCIgb3IgIj4iJyl9aWYoc2F0aXNmaWVzKHZlcnNpb24scmFuZ2Usb3B0aW9ucykpe3JldHVybiBmYWxzZX1mb3IodmFyIGk9MDtpPHJhbmdlLnNldC5sZW5ndGg7KytpKXt2YXIgY29tcGFyYXRvcnM9cmFuZ2Uuc2V0W2ldO3ZhciBoaWdoPW51bGw7dmFyIGxvdz1udWxsO2NvbXBhcmF0b3JzLmZvckVhY2goZnVuY3Rpb24oY29tcGFyYXRvcil7aWYoY29tcGFyYXRvci5zZW12ZXI9PT1BTlkpe2NvbXBhcmF0b3I9bmV3IENvbXBhcmF0b3IoIj49MC4wLjAiKX1oaWdoPWhpZ2h8fGNvbXBhcmF0b3I7bG93PWxvd3x8Y29tcGFyYXRvcjtpZihndGZuKGNvbXBhcmF0b3Iuc2VtdmVyLGhpZ2guc2VtdmVyLG9wdGlvbnMpKXtoaWdoPWNvbXBhcmF0b3J9ZWxzZSBpZihsdGZuKGNvbXBhcmF0b3Iuc2VtdmVyLGxvdy5zZW12ZXIsb3B0aW9ucykpe2xvdz1jb21wYXJhdG9yfX0pO2lmKGhpZ2gub3BlcmF0b3I9PT1jb21wfHxoaWdoLm9wZXJhdG9yPT09ZWNvbXApe3JldHVybiBmYWxzZX1pZigoIWxvdy5vcGVyYXRvcnx8bG93Lm9wZXJhdG9yPT09Y29tcCkmJmx0ZWZuKHZlcnNpb24sbG93LnNlbXZlcikpe3JldHVybiBmYWxzZX1lbHNlIGlmKGxvdy5vcGVyYXRvcj09PWVjb21wJiZsdGZuKHZlcnNpb24sbG93LnNlbXZlcikpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9ZXhwb3J0cy5wcmVyZWxlYXNlPXByZXJlbGVhc2U7ZnVuY3Rpb24gcHJlcmVsZWFzZSh2ZXJzaW9uLG9wdGlvbnMpe3ZhciBwYXJzZWQ9cGFyc2UodmVyc2lvbixvcHRpb25zKTtyZXR1cm4gcGFyc2VkJiZwYXJzZWQucHJlcmVsZWFzZS5sZW5ndGg/cGFyc2VkLnByZXJlbGVhc2U6bnVsbH1leHBvcnRzLmludGVyc2VjdHM9aW50ZXJzZWN0cztmdW5jdGlvbiBpbnRlcnNlY3RzKHIxLHIyLG9wdGlvbnMpe3IxPW5ldyBSYW5nZShyMSxvcHRpb25zKTtyMj1uZXcgUmFuZ2UocjIsb3B0aW9ucyk7cmV0dXJuIHIxLmludGVyc2VjdHMocjIpfWV4cG9ydHMuY29lcmNlPWNvZXJjZTtmdW5jdGlvbiBjb2VyY2UodmVyc2lvbil7aWYodmVyc2lvbiBpbnN0YW5jZW9mIFNlbVZlcil7cmV0dXJuIHZlcnNpb259aWYodHlwZW9mIHZlcnNpb24hPT0ic3RyaW5nIil7cmV0dXJuIG51bGx9dmFyIG1hdGNoPXZlcnNpb24ubWF0Y2gocmVbQ09FUkNFXSk7aWYobWF0Y2g9PW51bGwpe3JldHVybiBudWxsfXJldHVybiBwYXJzZShtYXRjaFsxXSsiLiIrKG1hdGNoWzJdfHwiMCIpKyIuIisobWF0Y2hbM118fCIwIikpfX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMscmVxdWlyZSgiX3Byb2Nlc3MiKSl9LHtfcHJvY2VzczozOX1dLDU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7dmFyIF9faW1wb3J0RGVmYXVsdD10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24obW9kKXtyZXR1cm4gbW9kJiZtb2QuX19lc01vZHVsZT9tb2Q6e2RlZmF1bHQ6bW9kfX07Y29uc3QgbGlua2VyXzE9X19pbXBvcnREZWZhdWx0KHJlcXVpcmUoIi4vbGlua2VyIikpO2Z1bmN0aW9uIHZlcnNpb25Ub1NlbXZlcih2ZXJzaW9uKXtjb25zdCBwYXJzZWQ9dmVyc2lvbi5tYXRjaCgvXihbMC05XStcLlswLTldK1wuWzAtOV0rKS0oWzAtOWEtZl17OH0pWy8qXS4qJC8pO2lmKHBhcnNlZCl7cmV0dXJuIHBhcnNlZFsxXSsiK2NvbW1pdC4iK3BhcnNlZFsyXX1pZih2ZXJzaW9uLmluZGV4T2YoIjAuMS4zLTAiKSE9PS0xKXtyZXR1cm4iMC4xLjMifWlmKHZlcnNpb24uaW5kZXhPZigiMC4zLjUtMCIpIT09LTEpe3JldHVybiIwLjMuNSJ9cmV0dXJuIHZlcnNpb259ZnVuY3Rpb24gdHJhbnNsYXRlRXJyb3JzKHJldCxlcnJvcnMpe2Zvcihjb25zdCBlcnJvciBpbiBlcnJvcnMpe2xldCB0eXBlPSJlcnJvciI7bGV0IGV4dHJhY3RUeXBlPS9eKC4qKTooXGQrKTooXGQrKTooLiopOi87ZXh0cmFjdFR5cGU9ZXh0cmFjdFR5cGUuZXhlYyhlcnJvcnNbZXJyb3JdKTtpZihleHRyYWN0VHlwZSl7dHlwZT1leHRyYWN0VHlwZVs0XS50cmltKCl9ZWxzZSBpZihlcnJvcnNbZXJyb3JdLmluZGV4T2YoIjogV2FybmluZzoiKSl7dHlwZT0iV2FybmluZyJ9ZWxzZSBpZihlcnJvcnNbZXJyb3JdLmluZGV4T2YoIjogRXJyb3I6Iikpe3R5cGU9IkVycm9yIn1yZXQucHVzaCh7dHlwZTp0eXBlLGNvbXBvbmVudDoiZ2VuZXJhbCIsc2V2ZXJpdHk6dHlwZT09PSJXYXJuaW5nIj8id2FybmluZyI6ImVycm9yIixtZXNzYWdlOmVycm9yc1tlcnJvcl0sZm9ybWF0dGVkTWVzc2FnZTplcnJvcnNbZXJyb3JdfSl9fWZ1bmN0aW9uIHRyYW5zbGF0ZUdhc0VzdGltYXRlcyhnYXNFc3RpbWF0ZXMpe2lmKGdhc0VzdGltYXRlcz09PW51bGwpe3JldHVybiJpbmZpbml0ZSJ9aWYodHlwZW9mIGdhc0VzdGltYXRlcz09PSJudW1iZXIiKXtyZXR1cm4gZ2FzRXN0aW1hdGVzLnRvU3RyaW5nKCl9Y29uc3QgZ2FzRXN0aW1hdGVzVHJhbnNsYXRlZD17fTtmb3IoY29uc3QgZnVuYyBpbiBnYXNFc3RpbWF0ZXMpe2dhc0VzdGltYXRlc1RyYW5zbGF0ZWRbZnVuY109dHJhbnNsYXRlR2FzRXN0aW1hdGVzKGdhc0VzdGltYXRlc1tmdW5jXSl9cmV0dXJuIGdhc0VzdGltYXRlc1RyYW5zbGF0ZWR9ZnVuY3Rpb24gdHJhbnNsYXRlSnNvbkNvbXBpbGVyT3V0cHV0KG91dHB1dCxsaWJyYXJpZXMpe2NvbnN0IHJldD17fTtyZXQuZXJyb3JzPVtdO2xldCBlcnJvcnM7aWYob3V0cHV0LmVycm9yKXtlcnJvcnM9W291dHB1dC5lcnJvcl19ZWxzZXtlcnJvcnM9b3V0cHV0LmVycm9yc310cmFuc2xhdGVFcnJvcnMocmV0LmVycm9ycyxlcnJvcnMpO3JldC5jb250cmFjdHM9e307Zm9yKGNvbnN0IGNvbnRyYWN0IGluIG91dHB1dC5jb250cmFjdHMpe2NvbnN0IHRtcD1jb250cmFjdC5tYXRjaCgvXigoLiopOik/KFteOl0rKSQvKTtpZih0bXAubGVuZ3RoIT09NCl7cmV0dXJuIG51bGx9bGV0IGZpbGVOYW1lPXRtcFsyXTtpZihmaWxlTmFtZT09PXVuZGVmaW5lZCl7ZmlsZU5hbWU9IiJ9Y29uc3QgY29udHJhY3ROYW1lPXRtcFszXTtjb25zdCBjb250cmFjdElucHV0PW91dHB1dC5jb250cmFjdHNbY29udHJhY3RdO2NvbnN0IGdhc0VzdGltYXRlcz1jb250cmFjdElucHV0Lmdhc0VzdGltYXRlcztjb25zdCB0cmFuc2xhdGVkR2FzRXN0aW1hdGVzPXt9O2lmKGdhc0VzdGltYXRlcy5jcmVhdGlvbil7dHJhbnNsYXRlZEdhc0VzdGltYXRlcy5jcmVhdGlvbj17Y29kZURlcG9zaXRDb3N0OnRyYW5zbGF0ZUdhc0VzdGltYXRlcyhnYXNFc3RpbWF0ZXMuY3JlYXRpb25bMV0pLGV4ZWN1dGlvbkNvc3Q6dHJhbnNsYXRlR2FzRXN0aW1hdGVzKGdhc0VzdGltYXRlcy5jcmVhdGlvblswXSl9fWlmKGdhc0VzdGltYXRlcy5pbnRlcm5hbCl7dHJhbnNsYXRlZEdhc0VzdGltYXRlcy5pbnRlcm5hbD10cmFuc2xhdGVHYXNFc3RpbWF0ZXMoZ2FzRXN0aW1hdGVzLmludGVybmFsKX1pZihnYXNFc3RpbWF0ZXMuZXh0ZXJuYWwpe3RyYW5zbGF0ZWRHYXNFc3RpbWF0ZXMuZXh0ZXJuYWw9dHJhbnNsYXRlR2FzRXN0aW1hdGVzKGdhc0VzdGltYXRlcy5leHRlcm5hbCl9Y29uc3QgY29udHJhY3RPdXRwdXQ9e2FiaTpKU09OLnBhcnNlKGNvbnRyYWN0SW5wdXQuaW50ZXJmYWNlKSxtZXRhZGF0YTpjb250cmFjdElucHV0Lm1ldGFkYXRhLGV2bTp7bGVnYWN5QXNzZW1ibHk6Y29udHJhY3RJbnB1dC5hc3NlbWJseSxieXRlY29kZTp7b2JqZWN0OmNvbnRyYWN0SW5wdXQuYnl0ZWNvZGUmJmxpbmtlcl8xLmRlZmF1bHQubGlua0J5dGVjb2RlKGNvbnRyYWN0SW5wdXQuYnl0ZWNvZGUsbGlicmFyaWVzfHx7fSksb3Bjb2Rlczpjb250cmFjdElucHV0Lm9wY29kZXMsc291cmNlTWFwOmNvbnRyYWN0SW5wdXQuc3JjbWFwLGxpbmtSZWZlcmVuY2VzOmNvbnRyYWN0SW5wdXQuYnl0ZWNvZGUmJmxpbmtlcl8xLmRlZmF1bHQuZmluZExpbmtSZWZlcmVuY2VzKGNvbnRyYWN0SW5wdXQuYnl0ZWNvZGUpfSxkZXBsb3llZEJ5dGVjb2RlOntvYmplY3Q6Y29udHJhY3RJbnB1dC5ydW50aW1lQnl0ZWNvZGUmJmxpbmtlcl8xLmRlZmF1bHQubGlua0J5dGVjb2RlKGNvbnRyYWN0SW5wdXQucnVudGltZUJ5dGVjb2RlLGxpYnJhcmllc3x8e30pLHNvdXJjZU1hcDpjb250cmFjdElucHV0LnNyY21hcFJ1bnRpbWUsbGlua1JlZmVyZW5jZXM6Y29udHJhY3RJbnB1dC5ydW50aW1lQnl0ZWNvZGUmJmxpbmtlcl8xLmRlZmF1bHQuZmluZExpbmtSZWZlcmVuY2VzKGNvbnRyYWN0SW5wdXQucnVudGltZUJ5dGVjb2RlKX0sbWV0aG9kSWRlbnRpZmllcnM6Y29udHJhY3RJbnB1dC5mdW5jdGlvbkhhc2hlcyxnYXNFc3RpbWF0ZXM6dHJhbnNsYXRlZEdhc0VzdGltYXRlc319O2lmKCFyZXQuY29udHJhY3RzW2ZpbGVOYW1lXSl7cmV0LmNvbnRyYWN0c1tmaWxlTmFtZV09e319cmV0LmNvbnRyYWN0c1tmaWxlTmFtZV1bY29udHJhY3ROYW1lXT1jb250cmFjdE91dHB1dH1jb25zdCBzb3VyY2VNYXA9e307Zm9yKGNvbnN0IHNvdXJjZUlkIGluIG91dHB1dC5zb3VyY2VMaXN0KXtzb3VyY2VNYXBbb3V0cHV0LnNvdXJjZUxpc3Rbc291cmNlSWRdXT1zb3VyY2VJZH1yZXQuc291cmNlcz17fTtmb3IoY29uc3Qgc291cmNlIGluIG91dHB1dC5zb3VyY2VzKXtyZXQuc291cmNlc1tzb3VyY2VdPXtpZDpzb3VyY2VNYXBbc291cmNlXSxsZWdhY3lBU1Q6b3V0cHV0LnNvdXJjZXNbc291cmNlXS5BU1R9fXJldHVybiByZXR9ZnVuY3Rpb24gZXNjYXBlU3RyaW5nKHRleHQpe3JldHVybiB0ZXh0LnJlcGxhY2UoL1xuL2csIlxcbiIpLnJlcGxhY2UoL1xyL2csIlxcciIpLnJlcGxhY2UoL1x0L2csIlxcdCIpfWZ1bmN0aW9uIGZvcm1hdEFzc2VtYmx5VGV4dChhc20scHJlZml4LHNvdXJjZSl7aWYodHlwZW9mIGFzbT09PSJzdHJpbmcifHxhc209PT1udWxsfHxhc209PT11bmRlZmluZWQpe3JldHVybiBwcmVmaXgrKGFzbXx8IiIpKyJcbiJ9bGV0IHRleHQ9cHJlZml4KyIuY29kZVxuIjthc21bIi5jb2RlIl0uZm9yRWFjaChmdW5jdGlvbihpdGVtLGkpe2NvbnN0IHY9aXRlbS52YWx1ZT09PXVuZGVmaW5lZD8iIjppdGVtLnZhbHVlO2xldCBzcmM9IiI7aWYoc291cmNlIT09dW5kZWZpbmVkJiZpdGVtLmJlZ2luIT09dW5kZWZpbmVkJiZpdGVtLmVuZCE9PXVuZGVmaW5lZCl7c3JjPWVzY2FwZVN0cmluZyhzb3VyY2Uuc2xpY2UoaXRlbS5iZWdpbixpdGVtLmVuZCkpfWlmKHNyYy5sZW5ndGg+MzApe3NyYz1zcmMuc2xpY2UoMCwzMCkrIi4uLiJ9aWYoaXRlbS5uYW1lIT09InRhZyIpe3RleHQrPSIgICJ9dGV4dCs9cHJlZml4K2l0ZW0ubmFtZSsiICIrdisiXHRcdFx0IitzcmMrIlxuIn0pO3RleHQrPXByZWZpeCsiLmRhdGFcbiI7Y29uc3QgYXNtRGF0YT1hc21bIi5kYXRhIl18fFtdO2Zvcihjb25zdCBpIGluIGFzbURhdGEpe2NvbnN0IGl0ZW09YXNtRGF0YVtpXTt0ZXh0Kz0iICAiK3ByZWZpeCsiIitpKyI6XG4iO3RleHQrPWZvcm1hdEFzc2VtYmx5VGV4dChpdGVtLHByZWZpeCsiICAgICIsc291cmNlKX1yZXR1cm4gdGV4dH1mdW5jdGlvbiBwcmV0dHlQcmludExlZ2FjeUFzc2VtYmx5SlNPTihhc3NlbWJseSxzb3VyY2Upe3JldHVybiBmb3JtYXRBc3NlbWJseVRleHQoYXNzZW1ibHksIiIsc291cmNlKX1tb2R1bGUuZXhwb3J0cz17dmVyc2lvblRvU2VtdmVyOnZlcnNpb25Ub1NlbXZlcix0cmFuc2xhdGVKc29uQ29tcGlsZXJPdXRwdXQ6dHJhbnNsYXRlSnNvbkNvbXBpbGVyT3V0cHV0LHByZXR0eVByaW50TGVnYWN5QXNzZW1ibHlKU09OOnByZXR0eVByaW50TGVnYWN5QXNzZW1ibHlKU09OfX0seyIuL2xpbmtlciI6NTR9XSw1NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO3ZhciBfX2ltcG9ydERlZmF1bHQ9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKG1vZCl7cmV0dXJuIG1vZCYmbW9kLl9fZXNNb2R1bGU/bW9kOntkZWZhdWx0Om1vZH19O2NvbnN0IG1lbW9yeXN0cmVhbV8xPV9faW1wb3J0RGVmYXVsdChyZXF1aXJlKCJtZW1vcnlzdHJlYW0iKSk7Y29uc3QgZm9sbG93X3JlZGlyZWN0c18xPXJlcXVpcmUoImZvbGxvdy1yZWRpcmVjdHMiKTtjb25zdCBmb3JtYXR0ZXJzXzE9cmVxdWlyZSgiLi9mb3JtYXR0ZXJzIik7Y29uc3QgaGVscGVyc18xPXJlcXVpcmUoIi4vY29tbW9uL2hlbHBlcnMiKTtjb25zdCBiaW5kaW5nc18xPV9faW1wb3J0RGVmYXVsdChyZXF1aXJlKCIuL2JpbmRpbmdzIikpO2NvbnN0IHRyYW5zbGF0ZV8xPV9faW1wb3J0RGVmYXVsdChyZXF1aXJlKCIuL3RyYW5zbGF0ZSIpKTtjb25zdCBNb2R1bGU9bW9kdWxlLmNvbnN0cnVjdG9yO2Z1bmN0aW9uIHdyYXBwZXIoc29sanNvbil7Y29uc3R7Y29yZUJpbmRpbmdzLGNvbXBpbGVCaW5kaW5ncyxtZXRob2RGbGFnc309KDAsYmluZGluZ3NfMS5kZWZhdWx0KShzb2xqc29uKTtyZXR1cm57dmVyc2lvbjpjb3JlQmluZGluZ3MudmVyc2lvbixzZW12ZXI6Y29yZUJpbmRpbmdzLnZlcnNpb25Ub1NlbXZlcixsaWNlbnNlOmNvcmVCaW5kaW5ncy5saWNlbnNlLGxvd2xldmVsOntjb21waWxlU2luZ2xlOmNvbXBpbGVCaW5kaW5ncy5jb21waWxlSnNvbixjb21waWxlTXVsdGk6Y29tcGlsZUJpbmRpbmdzLmNvbXBpbGVKc29uTXVsdGksY29tcGlsZUNhbGxiYWNrOmNvbXBpbGVCaW5kaW5ncy5jb21waWxlSnNvbkNhbGxiYWNrLGNvbXBpbGVTdGFuZGFyZDpjb21waWxlQmluZGluZ3MuY29tcGlsZVN0YW5kYXJkfSxmZWF0dXJlczp7bGVnYWN5U2luZ2xlSW5wdXQ6bWV0aG9kRmxhZ3MuY29tcGlsZUpzb25TdGFuZGFyZFN1cHBvcnRlZCxtdWx0aXBsZUlucHV0czptZXRob2RGbGFncy5jb21waWxlSnNvbk11bHRpU3VwcG9ydGVkfHxtZXRob2RGbGFncy5jb21waWxlSnNvblN0YW5kYXJkU3VwcG9ydGVkLGltcG9ydENhbGxiYWNrOm1ldGhvZEZsYWdzLmNvbXBpbGVKc29uQ2FsbGJhY2tTdXBwcG9ydGVkfHxtZXRob2RGbGFncy5jb21waWxlSnNvblN0YW5kYXJkU3VwcG9ydGVkLG5hdGl2ZVN0YW5kYXJkSlNPTjptZXRob2RGbGFncy5jb21waWxlSnNvblN0YW5kYXJkU3VwcG9ydGVkfSxjb21waWxlOmNvbXBpbGVTdGFuZGFyZFdyYXBwZXIuYmluZCh0aGlzLGNvbXBpbGVCaW5kaW5ncyksbG9hZFJlbW90ZVZlcnNpb246bG9hZFJlbW90ZVZlcnNpb24sc2V0dXBNZXRob2RzOndyYXBwZXJ9fWZ1bmN0aW9uIGxvYWRSZW1vdGVWZXJzaW9uKHZlcnNpb25TdHJpbmcsY2FsbGJhY2spe2NvbnN0IG1lbW9yeVN0cmVhbT1uZXcgbWVtb3J5c3RyZWFtXzEuZGVmYXVsdChudWxsLHtyZWFkYWJsZTpmYWxzZX0pO2NvbnN0IHVybD1gaHR0cHM6Ly9iaW5hcmllcy5zb2xpZGl0eWxhbmcub3JnL2Jpbi9zb2xqc29uLSR7dmVyc2lvblN0cmluZ30uanNgO2ZvbGxvd19yZWRpcmVjdHNfMS5odHRwcy5nZXQodXJsLHJlc3BvbnNlPT57aWYocmVzcG9uc2Uuc3RhdHVzQ29kZSE9PTIwMCl7Y2FsbGJhY2sobmV3IEVycm9yKGBFcnJvciByZXRyaWV2aW5nIGJpbmFyeTogJHtyZXNwb25zZS5zdGF0dXNNZXNzYWdlfWApKX1lbHNle3Jlc3BvbnNlLnBpcGUobWVtb3J5U3RyZWFtKTtyZXNwb25zZS5vbigiZW5kIiwoKT0+e2NvbnN0IHNvbGpzb249bmV3IE1vZHVsZTtzb2xqc29uLl9jb21waWxlKG1lbW9yeVN0cmVhbS50b1N0cmluZygpLGBzb2xqc29uLSR7dmVyc2lvblN0cmluZ30uanNgKTtpZihtb2R1bGUucGFyZW50JiZtb2R1bGUucGFyZW50LmNoaWxkcmVuKXttb2R1bGUucGFyZW50LmNoaWxkcmVuLnNwbGljZShtb2R1bGUucGFyZW50LmNoaWxkcmVuLmluZGV4T2Yoc29sanNvbiksMSl9Y2FsbGJhY2sobnVsbCx3cmFwcGVyKHNvbGpzb24uZXhwb3J0cykpfSl9fSkub24oImVycm9yIixmdW5jdGlvbihlcnJvcil7Y2FsbGJhY2soZXJyb3IpfSl9ZnVuY3Rpb24gY29tcGlsZVN0YW5kYXJkV3JhcHBlcihjb21waWxlLGlucHV0UmF3LHJlYWRDYWxsYmFjayl7aWYoISgwLGhlbHBlcnNfMS5pc05pbCkoY29tcGlsZS5jb21waWxlU3RhbmRhcmQpKXtyZXR1cm4gY29tcGlsZS5jb21waWxlU3RhbmRhcmQoaW5wdXRSYXcscmVhZENhbGxiYWNrKX1sZXQgaW5wdXQ7dHJ5e2lucHV0PUpTT04ucGFyc2UoaW5wdXRSYXcpfWNhdGNoKGUpe3JldHVybigwLGZvcm1hdHRlcnNfMS5mb3JtYXRGYXRhbEVycm9yKShgSW52YWxpZCBKU09OIHN1cHBsaWVkOiAke2UubWVzc2FnZX1gKX1pZihpbnB1dC5sYW5ndWFnZSE9PSJTb2xpZGl0eSIpe3JldHVybigwLGZvcm1hdHRlcnNfMS5mb3JtYXRGYXRhbEVycm9yKSgnT25seSAiU29saWRpdHkiIGlzIHN1cHBvcnRlZCBhcyBhIGxhbmd1YWdlLicpfWlmKCgwLGhlbHBlcnNfMS5pc05pbCkoaW5wdXQuc291cmNlcyl8fGlucHV0LnNvdXJjZXMubGVuZ3RoPT09MCl7cmV0dXJuKDAsZm9ybWF0dGVyc18xLmZvcm1hdEZhdGFsRXJyb3IpKCJObyBpbnB1dCBzb3VyY2VzIHNwZWNpZmllZC4iKX1jb25zdCBzb3VyY2VzPXRyYW5zbGF0ZVNvdXJjZXMoaW5wdXQpO2NvbnN0IG9wdGltaXplPWlzT3B0aW1pemVyRW5hYmxlZChpbnB1dCk7Y29uc3QgbGlicmFyaWVzPWxpYnJhcmllc1N1cHBsaWVkKGlucHV0KTtpZigoMCxoZWxwZXJzXzEuaXNOaWwpKHNvdXJjZXMpfHxPYmplY3Qua2V5cyhzb3VyY2VzKS5sZW5ndGg9PT0wKXtyZXR1cm4oMCxmb3JtYXR0ZXJzXzEuZm9ybWF0RmF0YWxFcnJvcikoIkZhaWxlZCB0byBwcm9jZXNzIHNvdXJjZXMuIil9aWYoISgwLGhlbHBlcnNfMS5pc05pbCkoY29tcGlsZS5jb21waWxlSnNvbkNhbGxiYWNrKSl7Y29uc3QgaW5wdXRKc29uPUpTT04uc3RyaW5naWZ5KHtzb3VyY2VzOnNvdXJjZXN9KTtjb25zdCBvdXRwdXQ9Y29tcGlsZS5jb21waWxlSnNvbkNhbGxiYWNrKGlucHV0SnNvbixvcHRpbWl6ZSxyZWFkQ2FsbGJhY2spO3JldHVybiB0cmFuc2xhdGVPdXRwdXQob3V0cHV0LGxpYnJhcmllcyl9aWYoISgwLGhlbHBlcnNfMS5pc05pbCkoY29tcGlsZS5jb21waWxlSnNvbk11bHRpKSl7Y29uc3Qgb3V0cHV0PWNvbXBpbGUuY29tcGlsZUpzb25NdWx0aShKU09OLnN0cmluZ2lmeSh7c291cmNlczpzb3VyY2VzfSksb3B0aW1pemUpO3JldHVybiB0cmFuc2xhdGVPdXRwdXQob3V0cHV0LGxpYnJhcmllcyl9aWYoISgwLGhlbHBlcnNfMS5pc05pbCkoY29tcGlsZS5jb21waWxlSnNvbikpe2lmKE9iamVjdC5rZXlzKHNvdXJjZXMpLmxlbmd0aD4xKXtyZXR1cm4oMCxmb3JtYXR0ZXJzXzEuZm9ybWF0RmF0YWxFcnJvcikoIk11bHRpcGxlIHNvdXJjZXMgcHJvdmlkZWQsIGJ1dCBjb21waWxlciBvbmx5IHN1cHBvcnRzIHNpbmdsZSBpbnB1dC4iKX1jb25zdCBpbnB1dD1zb3VyY2VzW09iamVjdC5rZXlzKHNvdXJjZXMpWzBdXTtjb25zdCBvdXRwdXQ9Y29tcGlsZS5jb21waWxlSnNvbihpbnB1dCxvcHRpbWl6ZSk7cmV0dXJuIHRyYW5zbGF0ZU91dHB1dChvdXRwdXQsbGlicmFyaWVzKX1yZXR1cm4oMCxmb3JtYXR0ZXJzXzEuZm9ybWF0RmF0YWxFcnJvcikoIkNvbXBpbGVyIGRvZXMgbm90IHN1cHBvcnQgYW55IGtub3duIGludGVyZmFjZS4iKX1mdW5jdGlvbiBpc09wdGltaXplckVuYWJsZWQoaW5wdXQpe3JldHVybiBpbnB1dC5zZXR0aW5ncyYmaW5wdXQuc2V0dGluZ3Mub3B0aW1pemVyJiZpbnB1dC5zZXR0aW5ncy5vcHRpbWl6ZXIuZW5hYmxlZH1mdW5jdGlvbiB0cmFuc2xhdGVTb3VyY2VzKGlucHV0KXtjb25zdCBzb3VyY2VzPXt9O2Zvcihjb25zdCBzb3VyY2UgaW4gaW5wdXQuc291cmNlcyl7aWYoaW5wdXQuc291cmNlc1tzb3VyY2VdLmNvbnRlbnQhPT1udWxsKXtzb3VyY2VzW3NvdXJjZV09aW5wdXQuc291cmNlc1tzb3VyY2VdLmNvbnRlbnR9ZWxzZXtyZXR1cm4gbnVsbH19cmV0dXJuIHNvdXJjZXN9ZnVuY3Rpb24gbGlicmFyaWVzU3VwcGxpZWQoaW5wdXQpe2lmKCEoMCxoZWxwZXJzXzEuaXNOaWwpKGlucHV0LnNldHRpbmdzKSlyZXR1cm4gaW5wdXQuc2V0dGluZ3MubGlicmFyaWVzfWZ1bmN0aW9uIHRyYW5zbGF0ZU91dHB1dChvdXRwdXRSYXcsbGlicmFyaWVzKXtsZXQgcGFyc2VkT3V0cHV0O3RyeXtwYXJzZWRPdXRwdXQ9SlNPTi5wYXJzZShvdXRwdXRSYXcpfWNhdGNoKGUpe3JldHVybigwLGZvcm1hdHRlcnNfMS5mb3JtYXRGYXRhbEVycm9yKShgQ29tcGlsZXIgcmV0dXJuZWQgaW52YWxpZCBKU09OOiAke2UubWVzc2FnZX1gKX1jb25zdCBvdXRwdXQ9dHJhbnNsYXRlXzEuZGVmYXVsdC50cmFuc2xhdGVKc29uQ29tcGlsZXJPdXRwdXQocGFyc2VkT3V0cHV0LGxpYnJhcmllcyk7aWYoKDAsaGVscGVyc18xLmlzTmlsKShvdXRwdXQpKXtyZXR1cm4oMCxmb3JtYXR0ZXJzXzEuZm9ybWF0RmF0YWxFcnJvcikoIkZhaWxlZCB0byBwcm9jZXNzIG91dHB1dC4iKX1yZXR1cm4gSlNPTi5zdHJpbmdpZnkob3V0cHV0KX1tb2R1bGUuZXhwb3J0cz13cmFwcGVyfSx7Ii4vYmluZGluZ3MiOjUxLCIuL2NvbW1vbi9oZWxwZXJzIjo1MiwiLi9mb3JtYXR0ZXJzIjo1MywiLi90cmFuc2xhdGUiOjU2LCJmb2xsb3ctcmVkaXJlY3RzIjoxNixtZW1vcnlzdHJlYW06MzV9XSw1ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9U3RyZWFtO3ZhciBFRT1yZXF1aXJlKCJldmVudHMiKS5FdmVudEVtaXR0ZXI7dmFyIGluaGVyaXRzPXJlcXVpcmUoImluaGVyaXRzIik7aW5oZXJpdHMoU3RyZWFtLEVFKTtTdHJlYW0uUmVhZGFibGU9cmVxdWlyZSgicmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzIik7U3RyZWFtLldyaXRhYmxlPXJlcXVpcmUoInJlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV93cml0YWJsZS5qcyIpO1N0cmVhbS5EdXBsZXg9cmVxdWlyZSgicmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX2R1cGxleC5qcyIpO1N0cmVhbS5UcmFuc2Zvcm09cmVxdWlyZSgicmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyIpO1N0cmVhbS5QYXNzVGhyb3VnaD1yZXF1aXJlKCJyZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiKTtTdHJlYW0uZmluaXNoZWQ9cmVxdWlyZSgicmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL2VuZC1vZi1zdHJlYW0uanMiKTtTdHJlYW0ucGlwZWxpbmU9cmVxdWlyZSgicmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL3BpcGVsaW5lLmpzIik7U3RyZWFtLlN0cmVhbT1TdHJlYW07ZnVuY3Rpb24gU3RyZWFtKCl7RUUuY2FsbCh0aGlzKX1TdHJlYW0ucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oZGVzdCxvcHRpb25zKXt2YXIgc291cmNlPXRoaXM7ZnVuY3Rpb24gb25kYXRhKGNodW5rKXtpZihkZXN0LndyaXRhYmxlKXtpZihmYWxzZT09PWRlc3Qud3JpdGUoY2h1bmspJiZzb3VyY2UucGF1c2Upe3NvdXJjZS5wYXVzZSgpfX19c291cmNlLm9uKCJkYXRhIixvbmRhdGEpO2Z1bmN0aW9uIG9uZHJhaW4oKXtpZihzb3VyY2UucmVhZGFibGUmJnNvdXJjZS5yZXN1bWUpe3NvdXJjZS5yZXN1bWUoKX19ZGVzdC5vbigiZHJhaW4iLG9uZHJhaW4pO2lmKCFkZXN0Ll9pc1N0ZGlvJiYoIW9wdGlvbnN8fG9wdGlvbnMuZW5kIT09ZmFsc2UpKXtzb3VyY2Uub24oImVuZCIsb25lbmQpO3NvdXJjZS5vbigiY2xvc2UiLG9uY2xvc2UpfXZhciBkaWRPbkVuZD1mYWxzZTtmdW5jdGlvbiBvbmVuZCgpe2lmKGRpZE9uRW5kKXJldHVybjtkaWRPbkVuZD10cnVlO2Rlc3QuZW5kKCl9ZnVuY3Rpb24gb25jbG9zZSgpe2lmKGRpZE9uRW5kKXJldHVybjtkaWRPbkVuZD10cnVlO2lmKHR5cGVvZiBkZXN0LmRlc3Ryb3k9PT0iZnVuY3Rpb24iKWRlc3QuZGVzdHJveSgpfWZ1bmN0aW9uIG9uZXJyb3IoZXIpe2NsZWFudXAoKTtpZihFRS5saXN0ZW5lckNvdW50KHRoaXMsImVycm9yIik9PT0wKXt0aHJvdyBlcn19c291cmNlLm9uKCJlcnJvciIsb25lcnJvcik7ZGVzdC5vbigiZXJyb3IiLG9uZXJyb3IpO2Z1bmN0aW9uIGNsZWFudXAoKXtzb3VyY2UucmVtb3ZlTGlzdGVuZXIoImRhdGEiLG9uZGF0YSk7ZGVzdC5yZW1vdmVMaXN0ZW5lcigiZHJhaW4iLG9uZHJhaW4pO3NvdXJjZS5yZW1vdmVMaXN0ZW5lcigiZW5kIixvbmVuZCk7c291cmNlLnJlbW92ZUxpc3RlbmVyKCJjbG9zZSIsb25jbG9zZSk7c291cmNlLnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsb25lcnJvcik7ZGVzdC5yZW1vdmVMaXN0ZW5lcigiZXJyb3IiLG9uZXJyb3IpO3NvdXJjZS5yZW1vdmVMaXN0ZW5lcigiZW5kIixjbGVhbnVwKTtzb3VyY2UucmVtb3ZlTGlzdGVuZXIoImNsb3NlIixjbGVhbnVwKTtkZXN0LnJlbW92ZUxpc3RlbmVyKCJjbG9zZSIsY2xlYW51cCl9c291cmNlLm9uKCJlbmQiLGNsZWFudXApO3NvdXJjZS5vbigiY2xvc2UiLGNsZWFudXApO2Rlc3Qub24oImNsb3NlIixjbGVhbnVwKTtkZXN0LmVtaXQoInBpcGUiLHNvdXJjZSk7cmV0dXJuIGRlc3R9fSx7ZXZlbnRzOjE0LGluaGVyaXRzOjI5LCJyZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fZHVwbGV4LmpzIjo2MCwicmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzIjo2MSwicmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzIjo2MiwicmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyI6NjMsInJlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV93cml0YWJsZS5qcyI6NjQsInJlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9lbmQtb2Ytc3RyZWFtLmpzIjo2OCwicmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL3BpcGVsaW5lLmpzIjo3MH1dLDU5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3Msc3VwZXJDbGFzcyl7c3ViQ2xhc3MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO3N1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1zdWJDbGFzcztzdWJDbGFzcy5fX3Byb3RvX189c3VwZXJDbGFzc312YXIgY29kZXM9e307ZnVuY3Rpb24gY3JlYXRlRXJyb3JUeXBlKGNvZGUsbWVzc2FnZSxCYXNlKXtpZighQmFzZSl7QmFzZT1FcnJvcn1mdW5jdGlvbiBnZXRNZXNzYWdlKGFyZzEsYXJnMixhcmczKXtpZih0eXBlb2YgbWVzc2FnZT09PSJzdHJpbmciKXtyZXR1cm4gbWVzc2FnZX1lbHNle3JldHVybiBtZXNzYWdlKGFyZzEsYXJnMixhcmczKX19dmFyIE5vZGVFcnJvcj1mdW5jdGlvbihfQmFzZSl7X2luaGVyaXRzTG9vc2UoTm9kZUVycm9yLF9CYXNlKTtmdW5jdGlvbiBOb2RlRXJyb3IoYXJnMSxhcmcyLGFyZzMpe3JldHVybiBfQmFzZS5jYWxsKHRoaXMsZ2V0TWVzc2FnZShhcmcxLGFyZzIsYXJnMykpfHx0aGlzfXJldHVybiBOb2RlRXJyb3J9KEJhc2UpO05vZGVFcnJvci5wcm90b3R5cGUubmFtZT1CYXNlLm5hbWU7Tm9kZUVycm9yLnByb3RvdHlwZS5jb2RlPWNvZGU7Y29kZXNbY29kZV09Tm9kZUVycm9yfWZ1bmN0aW9uIG9uZU9mKGV4cGVjdGVkLHRoaW5nKXtpZihBcnJheS5pc0FycmF5KGV4cGVjdGVkKSl7dmFyIGxlbj1leHBlY3RlZC5sZW5ndGg7ZXhwZWN0ZWQ9ZXhwZWN0ZWQubWFwKGZ1bmN0aW9uKGkpe3JldHVybiBTdHJpbmcoaSl9KTtpZihsZW4+Mil7cmV0dXJuIm9uZSBvZiAiLmNvbmNhdCh0aGluZywiICIpLmNvbmNhdChleHBlY3RlZC5zbGljZSgwLGxlbi0xKS5qb2luKCIsICIpLCIsIG9yICIpK2V4cGVjdGVkW2xlbi0xXX1lbHNlIGlmKGxlbj09PTIpe3JldHVybiJvbmUgb2YgIi5jb25jYXQodGhpbmcsIiAiKS5jb25jYXQoZXhwZWN0ZWRbMF0sIiBvciAiKS5jb25jYXQoZXhwZWN0ZWRbMV0pfWVsc2V7cmV0dXJuIm9mICIuY29uY2F0KHRoaW5nLCIgIikuY29uY2F0KGV4cGVjdGVkWzBdKX19ZWxzZXtyZXR1cm4ib2YgIi5jb25jYXQodGhpbmcsIiAiKS5jb25jYXQoU3RyaW5nKGV4cGVjdGVkKSl9fWZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyLHNlYXJjaCxwb3Mpe3JldHVybiBzdHIuc3Vic3RyKCFwb3N8fHBvczwwPzA6K3BvcyxzZWFyY2gubGVuZ3RoKT09PXNlYXJjaH1mdW5jdGlvbiBlbmRzV2l0aChzdHIsc2VhcmNoLHRoaXNfbGVuKXtpZih0aGlzX2xlbj09PXVuZGVmaW5lZHx8dGhpc19sZW4+c3RyLmxlbmd0aCl7dGhpc19sZW49c3RyLmxlbmd0aH1yZXR1cm4gc3RyLnN1YnN0cmluZyh0aGlzX2xlbi1zZWFyY2gubGVuZ3RoLHRoaXNfbGVuKT09PXNlYXJjaH1mdW5jdGlvbiBpbmNsdWRlcyhzdHIsc2VhcmNoLHN0YXJ0KXtpZih0eXBlb2Ygc3RhcnQhPT0ibnVtYmVyIil7c3RhcnQ9MH1pZihzdGFydCtzZWFyY2gubGVuZ3RoPnN0ci5sZW5ndGgpe3JldHVybiBmYWxzZX1lbHNle3JldHVybiBzdHIuaW5kZXhPZihzZWFyY2gsc3RhcnQpIT09LTF9fWNyZWF0ZUVycm9yVHlwZSgiRVJSX0lOVkFMSURfT1BUX1ZBTFVFIixmdW5jdGlvbihuYW1lLHZhbHVlKXtyZXR1cm4nVGhlIHZhbHVlICInK3ZhbHVlKyciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAiJytuYW1lKyciJ30sVHlwZUVycm9yKTtjcmVhdGVFcnJvclR5cGUoIkVSUl9JTlZBTElEX0FSR19UWVBFIixmdW5jdGlvbihuYW1lLGV4cGVjdGVkLGFjdHVhbCl7dmFyIGRldGVybWluZXI7aWYodHlwZW9mIGV4cGVjdGVkPT09InN0cmluZyImJnN0YXJ0c1dpdGgoZXhwZWN0ZWQsIm5vdCAiKSl7ZGV0ZXJtaW5lcj0ibXVzdCBub3QgYmUiO2V4cGVjdGVkPWV4cGVjdGVkLnJlcGxhY2UoL15ub3QgLywiIil9ZWxzZXtkZXRlcm1pbmVyPSJtdXN0IGJlIn12YXIgbXNnO2lmKGVuZHNXaXRoKG5hbWUsIiBhcmd1bWVudCIpKXttc2c9IlRoZSAiLmNvbmNhdChuYW1lLCIgIikuY29uY2F0KGRldGVybWluZXIsIiAiKS5jb25jYXQob25lT2YoZXhwZWN0ZWQsInR5cGUiKSl9ZWxzZXt2YXIgdHlwZT1pbmNsdWRlcyhuYW1lLCIuIik/InByb3BlcnR5IjoiYXJndW1lbnQiO21zZz0nVGhlICInLmNvbmNhdChuYW1lLCciICcpLmNvbmNhdCh0eXBlLCIgIikuY29uY2F0KGRldGVybWluZXIsIiAiKS5jb25jYXQob25lT2YoZXhwZWN0ZWQsInR5cGUiKSl9bXNnKz0iLiBSZWNlaXZlZCB0eXBlICIuY29uY2F0KHR5cGVvZiBhY3R1YWwpO3JldHVybiBtc2d9LFR5cGVFcnJvcik7Y3JlYXRlRXJyb3JUeXBlKCJFUlJfU1RSRUFNX1BVU0hfQUZURVJfRU9GIiwic3RyZWFtLnB1c2goKSBhZnRlciBFT0YiKTtjcmVhdGVFcnJvclR5cGUoIkVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEIixmdW5jdGlvbihuYW1lKXtyZXR1cm4iVGhlICIrbmFtZSsiIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQifSk7Y3JlYXRlRXJyb3JUeXBlKCJFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRSIsIlByZW1hdHVyZSBjbG9zZSIpO2NyZWF0ZUVycm9yVHlwZSgiRVJSX1NUUkVBTV9ERVNUUk9ZRUQiLGZ1bmN0aW9uKG5hbWUpe3JldHVybiJDYW5ub3QgY2FsbCAiK25hbWUrIiBhZnRlciBhIHN0cmVhbSB3YXMgZGVzdHJveWVkIn0pO2NyZWF0ZUVycm9yVHlwZSgiRVJSX01VTFRJUExFX0NBTExCQUNLIiwiQ2FsbGJhY2sgY2FsbGVkIG11bHRpcGxlIHRpbWVzIik7Y3JlYXRlRXJyb3JUeXBlKCJFUlJfU1RSRUFNX0NBTk5PVF9QSVBFIiwiQ2Fubm90IHBpcGUsIG5vdCByZWFkYWJsZSIpO2NyZWF0ZUVycm9yVHlwZSgiRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQiLCJ3cml0ZSBhZnRlciBlbmQiKTtjcmVhdGVFcnJvclR5cGUoIkVSUl9TVFJFQU1fTlVMTF9WQUxVRVMiLCJNYXkgbm90IHdyaXRlIG51bGwgdmFsdWVzIHRvIHN0cmVhbSIsVHlwZUVycm9yKTtjcmVhdGVFcnJvclR5cGUoIkVSUl9VTktOT1dOX0VOQ09ESU5HIixmdW5jdGlvbihhcmcpe3JldHVybiJVbmtub3duIGVuY29kaW5nOiAiK2FyZ30sVHlwZUVycm9yKTtjcmVhdGVFcnJvclR5cGUoIkVSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlQiLCJzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudCIpO21vZHVsZS5leHBvcnRzLmNvZGVzPWNvZGVzfSx7fV0sNjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzKXsoZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIG9iamVjdEtleXM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKG9iail7dmFyIGtleXM9W107Zm9yKHZhciBrZXkgaW4gb2JqKWtleXMucHVzaChrZXkpO3JldHVybiBrZXlzfTttb2R1bGUuZXhwb3J0cz1EdXBsZXg7dmFyIFJlYWRhYmxlPXJlcXVpcmUoIi4vX3N0cmVhbV9yZWFkYWJsZSIpO3ZhciBXcml0YWJsZT1yZXF1aXJlKCIuL19zdHJlYW1fd3JpdGFibGUiKTtyZXF1aXJlKCJpbmhlcml0cyIpKER1cGxleCxSZWFkYWJsZSk7e3ZhciBrZXlzPW9iamVjdEtleXMoV3JpdGFibGUucHJvdG90eXBlKTtmb3IodmFyIHY9MDt2PGtleXMubGVuZ3RoO3YrKyl7dmFyIG1ldGhvZD1rZXlzW3ZdO2lmKCFEdXBsZXgucHJvdG90eXBlW21ldGhvZF0pRHVwbGV4LnByb3RvdHlwZVttZXRob2RdPVdyaXRhYmxlLnByb3RvdHlwZVttZXRob2RdfX1mdW5jdGlvbiBEdXBsZXgob3B0aW9ucyl7aWYoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSlyZXR1cm4gbmV3IER1cGxleChvcHRpb25zKTtSZWFkYWJsZS5jYWxsKHRoaXMsb3B0aW9ucyk7V3JpdGFibGUuY2FsbCh0aGlzLG9wdGlvbnMpO3RoaXMuYWxsb3dIYWxmT3Blbj10cnVlO2lmKG9wdGlvbnMpe2lmKG9wdGlvbnMucmVhZGFibGU9PT1mYWxzZSl0aGlzLnJlYWRhYmxlPWZhbHNlO2lmKG9wdGlvbnMud3JpdGFibGU9PT1mYWxzZSl0aGlzLndyaXRhYmxlPWZhbHNlO2lmKG9wdGlvbnMuYWxsb3dIYWxmT3Blbj09PWZhbHNlKXt0aGlzLmFsbG93SGFsZk9wZW49ZmFsc2U7dGhpcy5vbmNlKCJlbmQiLG9uZW5kKX19fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCJ3cml0YWJsZUhpZ2hXYXRlck1hcmsiLHtlbnVtZXJhYmxlOmZhbHNlLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCJ3cml0YWJsZUJ1ZmZlciIse2VudW1lcmFibGU6ZmFsc2UsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLl93cml0YWJsZVN0YXRlJiZ0aGlzLl93cml0YWJsZVN0YXRlLmdldEJ1ZmZlcigpfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCJ3cml0YWJsZUxlbmd0aCIse2VudW1lcmFibGU6ZmFsc2UsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmxlbmd0aH19KTtmdW5jdGlvbiBvbmVuZCgpe2lmKHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQpcmV0dXJuO3Byb2Nlc3MubmV4dFRpY2sob25FbmROVCx0aGlzKX1mdW5jdGlvbiBvbkVuZE5UKHNlbGYpe3NlbGYuZW5kKCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleC5wcm90b3R5cGUsImRlc3Ryb3llZCIse2VudW1lcmFibGU6ZmFsc2UsZ2V0OmZ1bmN0aW9uIGdldCgpe2lmKHRoaXMuX3JlYWRhYmxlU3RhdGU9PT11bmRlZmluZWR8fHRoaXMuX3dyaXRhYmxlU3RhdGU9PT11bmRlZmluZWQpe3JldHVybiBmYWxzZX1yZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQmJnRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkfSxzZXQ6ZnVuY3Rpb24gc2V0KHZhbHVlKXtpZih0aGlzLl9yZWFkYWJsZVN0YXRlPT09dW5kZWZpbmVkfHx0aGlzLl93cml0YWJsZVN0YXRlPT09dW5kZWZpbmVkKXtyZXR1cm59dGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ9dmFsdWU7dGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQ9dmFsdWV9fSl9KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHJlcXVpcmUoIl9wcm9jZXNzIikpfSx7Ii4vX3N0cmVhbV9yZWFkYWJsZSI6NjIsIi4vX3N0cmVhbV93cml0YWJsZSI6NjQsX3Byb2Nlc3M6MzksaW5oZXJpdHM6Mjl9XSw2MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO21vZHVsZS5leHBvcnRzPVBhc3NUaHJvdWdoO3ZhciBUcmFuc2Zvcm09cmVxdWlyZSgiLi9fc3RyZWFtX3RyYW5zZm9ybSIpO3JlcXVpcmUoImluaGVyaXRzIikoUGFzc1Rocm91Z2gsVHJhbnNmb3JtKTtmdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKXtpZighKHRoaXMgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaCkpcmV0dXJuIG5ldyBQYXNzVGhyb3VnaChvcHRpb25zKTtUcmFuc2Zvcm0uY2FsbCh0aGlzLG9wdGlvbnMpfVBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtPWZ1bmN0aW9uKGNodW5rLGVuY29kaW5nLGNiKXtjYihudWxsLGNodW5rKX19LHsiLi9fc3RyZWFtX3RyYW5zZm9ybSI6NjMsaW5oZXJpdHM6Mjl9XSw2MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKHByb2Nlc3MsZ2xvYmFsKXsoZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7bW9kdWxlLmV4cG9ydHM9UmVhZGFibGU7dmFyIER1cGxleDtSZWFkYWJsZS5SZWFkYWJsZVN0YXRlPVJlYWRhYmxlU3RhdGU7dmFyIEVFPXJlcXVpcmUoImV2ZW50cyIpLkV2ZW50RW1pdHRlcjt2YXIgRUVsaXN0ZW5lckNvdW50PWZ1bmN0aW9uIEVFbGlzdGVuZXJDb3VudChlbWl0dGVyLHR5cGUpe3JldHVybiBlbWl0dGVyLmxpc3RlbmVycyh0eXBlKS5sZW5ndGh9O3ZhciBTdHJlYW09cmVxdWlyZSgiLi9pbnRlcm5hbC9zdHJlYW1zL3N0cmVhbSIpO3ZhciBCdWZmZXI9cmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyO3ZhciBPdXJVaW50OEFycmF5PSh0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCI/Z2xvYmFsOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6dHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnt9KS5VaW50OEFycmF5fHxmdW5jdGlvbigpe307ZnVuY3Rpb24gX3VpbnQ4QXJyYXlUb0J1ZmZlcihjaHVuayl7cmV0dXJuIEJ1ZmZlci5mcm9tKGNodW5rKX1mdW5jdGlvbiBfaXNVaW50OEFycmF5KG9iail7cmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihvYmopfHxvYmogaW5zdGFuY2VvZiBPdXJVaW50OEFycmF5fXZhciBkZWJ1Z1V0aWw9cmVxdWlyZSgidXRpbCIpO3ZhciBkZWJ1ZztpZihkZWJ1Z1V0aWwmJmRlYnVnVXRpbC5kZWJ1Z2xvZyl7ZGVidWc9ZGVidWdVdGlsLmRlYnVnbG9nKCJzdHJlYW0iKX1lbHNle2RlYnVnPWZ1bmN0aW9uIGRlYnVnKCl7fX12YXIgQnVmZmVyTGlzdD1yZXF1aXJlKCIuL2ludGVybmFsL3N0cmVhbXMvYnVmZmVyX2xpc3QiKTt2YXIgZGVzdHJveUltcGw9cmVxdWlyZSgiLi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3kiKTt2YXIgX3JlcXVpcmU9cmVxdWlyZSgiLi9pbnRlcm5hbC9zdHJlYW1zL3N0YXRlIiksZ2V0SGlnaFdhdGVyTWFyaz1fcmVxdWlyZS5nZXRIaWdoV2F0ZXJNYXJrO3ZhciBfcmVxdWlyZSRjb2Rlcz1yZXF1aXJlKCIuLi9lcnJvcnMiKS5jb2RlcyxFUlJfSU5WQUxJRF9BUkdfVFlQRT1fcmVxdWlyZSRjb2Rlcy5FUlJfSU5WQUxJRF9BUkdfVFlQRSxFUlJfU1RSRUFNX1BVU0hfQUZURVJfRU9GPV9yZXF1aXJlJGNvZGVzLkVSUl9TVFJFQU1fUFVTSF9BRlRFUl9FT0YsRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQ9X3JlcXVpcmUkY29kZXMuRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQsRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVD1fcmVxdWlyZSRjb2Rlcy5FUlJfU1RSRUFNX1VOU0hJRlRfQUZURVJfRU5EX0VWRU5UO3ZhciBTdHJpbmdEZWNvZGVyO3ZhciBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I7dmFyIGZyb207cmVxdWlyZSgiaW5oZXJpdHMiKShSZWFkYWJsZSxTdHJlYW0pO3ZhciBlcnJvck9yRGVzdHJveT1kZXN0cm95SW1wbC5lcnJvck9yRGVzdHJveTt2YXIga1Byb3h5RXZlbnRzPVsiZXJyb3IiLCJjbG9zZSIsImRlc3Ryb3kiLCJwYXVzZSIsInJlc3VtZSJdO2Z1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcihlbWl0dGVyLGV2ZW50LGZuKXtpZih0eXBlb2YgZW1pdHRlci5wcmVwZW5kTGlzdGVuZXI9PT0iZnVuY3Rpb24iKXJldHVybiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lcihldmVudCxmbik7aWYoIWVtaXR0ZXIuX2V2ZW50c3x8IWVtaXR0ZXIuX2V2ZW50c1tldmVudF0pZW1pdHRlci5vbihldmVudCxmbik7ZWxzZSBpZihBcnJheS5pc0FycmF5KGVtaXR0ZXIuX2V2ZW50c1tldmVudF0pKWVtaXR0ZXIuX2V2ZW50c1tldmVudF0udW5zaGlmdChmbik7ZWxzZSBlbWl0dGVyLl9ldmVudHNbZXZlbnRdPVtmbixlbWl0dGVyLl9ldmVudHNbZXZlbnRdXX1mdW5jdGlvbiBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsc3RyZWFtLGlzRHVwbGV4KXtEdXBsZXg9RHVwbGV4fHxyZXF1aXJlKCIuL19zdHJlYW1fZHVwbGV4Iik7b3B0aW9ucz1vcHRpb25zfHx7fTtpZih0eXBlb2YgaXNEdXBsZXghPT0iYm9vbGVhbiIpaXNEdXBsZXg9c3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4O3RoaXMub2JqZWN0TW9kZT0hIW9wdGlvbnMub2JqZWN0TW9kZTtpZihpc0R1cGxleCl0aGlzLm9iamVjdE1vZGU9dGhpcy5vYmplY3RNb2RlfHwhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlO3RoaXMuaGlnaFdhdGVyTWFyaz1nZXRIaWdoV2F0ZXJNYXJrKHRoaXMsb3B0aW9ucywicmVhZGFibGVIaWdoV2F0ZXJNYXJrIixpc0R1cGxleCk7dGhpcy5idWZmZXI9bmV3IEJ1ZmZlckxpc3Q7dGhpcy5sZW5ndGg9MDt0aGlzLnBpcGVzPW51bGw7dGhpcy5waXBlc0NvdW50PTA7dGhpcy5mbG93aW5nPW51bGw7dGhpcy5lbmRlZD1mYWxzZTt0aGlzLmVuZEVtaXR0ZWQ9ZmFsc2U7dGhpcy5yZWFkaW5nPWZhbHNlO3RoaXMuc3luYz10cnVlO3RoaXMubmVlZFJlYWRhYmxlPWZhbHNlO3RoaXMuZW1pdHRlZFJlYWRhYmxlPWZhbHNlO3RoaXMucmVhZGFibGVMaXN0ZW5pbmc9ZmFsc2U7dGhpcy5yZXN1bWVTY2hlZHVsZWQ9ZmFsc2U7dGhpcy5wYXVzZWQ9dHJ1ZTt0aGlzLmVtaXRDbG9zZT1vcHRpb25zLmVtaXRDbG9zZSE9PWZhbHNlO3RoaXMuYXV0b0Rlc3Ryb3k9ISFvcHRpb25zLmF1dG9EZXN0cm95O3RoaXMuZGVzdHJveWVkPWZhbHNlO3RoaXMuZGVmYXVsdEVuY29kaW5nPW9wdGlvbnMuZGVmYXVsdEVuY29kaW5nfHwidXRmOCI7dGhpcy5hd2FpdERyYWluPTA7dGhpcy5yZWFkaW5nTW9yZT1mYWxzZTt0aGlzLmRlY29kZXI9bnVsbDt0aGlzLmVuY29kaW5nPW51bGw7aWYob3B0aW9ucy5lbmNvZGluZyl7aWYoIVN0cmluZ0RlY29kZXIpU3RyaW5nRGVjb2Rlcj1yZXF1aXJlKCJzdHJpbmdfZGVjb2Rlci8iKS5TdHJpbmdEZWNvZGVyO3RoaXMuZGVjb2Rlcj1uZXcgU3RyaW5nRGVjb2RlcihvcHRpb25zLmVuY29kaW5nKTt0aGlzLmVuY29kaW5nPW9wdGlvbnMuZW5jb2Rpbmd9fWZ1bmN0aW9uIFJlYWRhYmxlKG9wdGlvbnMpe0R1cGxleD1EdXBsZXh8fHJlcXVpcmUoIi4vX3N0cmVhbV9kdXBsZXgiKTtpZighKHRoaXMgaW5zdGFuY2VvZiBSZWFkYWJsZSkpcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTt2YXIgaXNEdXBsZXg9dGhpcyBpbnN0YW5jZW9mIER1cGxleDt0aGlzLl9yZWFkYWJsZVN0YXRlPW5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsdGhpcyxpc0R1cGxleCk7dGhpcy5yZWFkYWJsZT10cnVlO2lmKG9wdGlvbnMpe2lmKHR5cGVvZiBvcHRpb25zLnJlYWQ9PT0iZnVuY3Rpb24iKXRoaXMuX3JlYWQ9b3B0aW9ucy5yZWFkO2lmKHR5cGVvZiBvcHRpb25zLmRlc3Ryb3k9PT0iZnVuY3Rpb24iKXRoaXMuX2Rlc3Ryb3k9b3B0aW9ucy5kZXN0cm95fVN0cmVhbS5jYWxsKHRoaXMpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZS5wcm90b3R5cGUsImRlc3Ryb3llZCIse2VudW1lcmFibGU6ZmFsc2UsZ2V0OmZ1bmN0aW9uIGdldCgpe2lmKHRoaXMuX3JlYWRhYmxlU3RhdGU9PT11bmRlZmluZWQpe3JldHVybiBmYWxzZX1yZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWR9LHNldDpmdW5jdGlvbiBzZXQodmFsdWUpe2lmKCF0aGlzLl9yZWFkYWJsZVN0YXRlKXtyZXR1cm59dGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ9dmFsdWV9fSk7UmVhZGFibGUucHJvdG90eXBlLmRlc3Ryb3k9ZGVzdHJveUltcGwuZGVzdHJveTtSZWFkYWJsZS5wcm90b3R5cGUuX3VuZGVzdHJveT1kZXN0cm95SW1wbC51bmRlc3Ryb3k7UmVhZGFibGUucHJvdG90eXBlLl9kZXN0cm95PWZ1bmN0aW9uKGVycixjYil7Y2IoZXJyKX07UmVhZGFibGUucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oY2h1bmssZW5jb2Rpbmcpe3ZhciBzdGF0ZT10aGlzLl9yZWFkYWJsZVN0YXRlO3ZhciBza2lwQ2h1bmtDaGVjaztpZighc3RhdGUub2JqZWN0TW9kZSl7aWYodHlwZW9mIGNodW5rPT09InN0cmluZyIpe2VuY29kaW5nPWVuY29kaW5nfHxzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7aWYoZW5jb2RpbmchPT1zdGF0ZS5lbmNvZGluZyl7Y2h1bms9QnVmZmVyLmZyb20oY2h1bmssZW5jb2RpbmcpO2VuY29kaW5nPSIifXNraXBDaHVua0NoZWNrPXRydWV9fWVsc2V7c2tpcENodW5rQ2hlY2s9dHJ1ZX1yZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLGNodW5rLGVuY29kaW5nLGZhbHNlLHNraXBDaHVua0NoZWNrKX07UmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQ9ZnVuY3Rpb24oY2h1bmspe3JldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsY2h1bmssbnVsbCx0cnVlLGZhbHNlKX07ZnVuY3Rpb24gcmVhZGFibGVBZGRDaHVuayhzdHJlYW0sY2h1bmssZW5jb2RpbmcsYWRkVG9Gcm9udCxza2lwQ2h1bmtDaGVjayl7ZGVidWcoInJlYWRhYmxlQWRkQ2h1bmsiLGNodW5rKTt2YXIgc3RhdGU9c3RyZWFtLl9yZWFkYWJsZVN0YXRlO2lmKGNodW5rPT09bnVsbCl7c3RhdGUucmVhZGluZz1mYWxzZTtvbkVvZkNodW5rKHN0cmVhbSxzdGF0ZSl9ZWxzZXt2YXIgZXI7aWYoIXNraXBDaHVua0NoZWNrKWVyPWNodW5rSW52YWxpZChzdGF0ZSxjaHVuayk7aWYoZXIpe2Vycm9yT3JEZXN0cm95KHN0cmVhbSxlcil9ZWxzZSBpZihzdGF0ZS5vYmplY3RNb2RlfHxjaHVuayYmY2h1bmsubGVuZ3RoPjApe2lmKHR5cGVvZiBjaHVuayE9PSJzdHJpbmciJiYhc3RhdGUub2JqZWN0TW9kZSYmT2JqZWN0LmdldFByb3RvdHlwZU9mKGNodW5rKSE9PUJ1ZmZlci5wcm90b3R5cGUpe2NodW5rPV91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspfWlmKGFkZFRvRnJvbnQpe2lmKHN0YXRlLmVuZEVtaXR0ZWQpZXJyb3JPckRlc3Ryb3koc3RyZWFtLG5ldyBFUlJfU1RSRUFNX1VOU0hJRlRfQUZURVJfRU5EX0VWRU5UKTtlbHNlIGFkZENodW5rKHN0cmVhbSxzdGF0ZSxjaHVuayx0cnVlKX1lbHNlIGlmKHN0YXRlLmVuZGVkKXtlcnJvck9yRGVzdHJveShzdHJlYW0sbmV3IEVSUl9TVFJFQU1fUFVTSF9BRlRFUl9FT0YpfWVsc2UgaWYoc3RhdGUuZGVzdHJveWVkKXtyZXR1cm4gZmFsc2V9ZWxzZXtzdGF0ZS5yZWFkaW5nPWZhbHNlO2lmKHN0YXRlLmRlY29kZXImJiFlbmNvZGluZyl7Y2h1bms9c3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7aWYoc3RhdGUub2JqZWN0TW9kZXx8Y2h1bmsubGVuZ3RoIT09MClhZGRDaHVuayhzdHJlYW0sc3RhdGUsY2h1bmssZmFsc2UpO2Vsc2UgbWF5YmVSZWFkTW9yZShzdHJlYW0sc3RhdGUpfWVsc2V7YWRkQ2h1bmsoc3RyZWFtLHN0YXRlLGNodW5rLGZhbHNlKX19fWVsc2UgaWYoIWFkZFRvRnJvbnQpe3N0YXRlLnJlYWRpbmc9ZmFsc2U7bWF5YmVSZWFkTW9yZShzdHJlYW0sc3RhdGUpfX1yZXR1cm4hc3RhdGUuZW5kZWQmJihzdGF0ZS5sZW5ndGg8c3RhdGUuaGlnaFdhdGVyTWFya3x8c3RhdGUubGVuZ3RoPT09MCl9ZnVuY3Rpb24gYWRkQ2h1bmsoc3RyZWFtLHN0YXRlLGNodW5rLGFkZFRvRnJvbnQpe2lmKHN0YXRlLmZsb3dpbmcmJnN0YXRlLmxlbmd0aD09PTAmJiFzdGF0ZS5zeW5jKXtzdGF0ZS5hd2FpdERyYWluPTA7c3RyZWFtLmVtaXQoImRhdGEiLGNodW5rKX1lbHNle3N0YXRlLmxlbmd0aCs9c3RhdGUub2JqZWN0TW9kZT8xOmNodW5rLmxlbmd0aDtpZihhZGRUb0Zyb250KXN0YXRlLmJ1ZmZlci51bnNoaWZ0KGNodW5rKTtlbHNlIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTtpZihzdGF0ZS5uZWVkUmVhZGFibGUpZW1pdFJlYWRhYmxlKHN0cmVhbSl9bWF5YmVSZWFkTW9yZShzdHJlYW0sc3RhdGUpfWZ1bmN0aW9uIGNodW5rSW52YWxpZChzdGF0ZSxjaHVuayl7dmFyIGVyO2lmKCFfaXNVaW50OEFycmF5KGNodW5rKSYmdHlwZW9mIGNodW5rIT09InN0cmluZyImJmNodW5rIT09dW5kZWZpbmVkJiYhc3RhdGUub2JqZWN0TW9kZSl7ZXI9bmV3IEVSUl9JTlZBTElEX0FSR19UWVBFKCJjaHVuayIsWyJzdHJpbmciLCJCdWZmZXIiLCJVaW50OEFycmF5Il0sY2h1bmspfXJldHVybiBlcn1SZWFkYWJsZS5wcm90b3R5cGUuaXNQYXVzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nPT09ZmFsc2V9O1JlYWRhYmxlLnByb3RvdHlwZS5zZXRFbmNvZGluZz1mdW5jdGlvbihlbmMpe2lmKCFTdHJpbmdEZWNvZGVyKVN0cmluZ0RlY29kZXI9cmVxdWlyZSgic3RyaW5nX2RlY29kZXIvIikuU3RyaW5nRGVjb2Rlcjt2YXIgZGVjb2Rlcj1uZXcgU3RyaW5nRGVjb2RlcihlbmMpO3RoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2Rlcj1kZWNvZGVyO3RoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2Rpbmc9dGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyLmVuY29kaW5nO3ZhciBwPXRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLmhlYWQ7dmFyIGNvbnRlbnQ9IiI7d2hpbGUocCE9PW51bGwpe2NvbnRlbnQrPWRlY29kZXIud3JpdGUocC5kYXRhKTtwPXAubmV4dH10aGlzLl9yZWFkYWJsZVN0YXRlLmJ1ZmZlci5jbGVhcigpO2lmKGNvbnRlbnQhPT0iIil0aGlzLl9yZWFkYWJsZVN0YXRlLmJ1ZmZlci5wdXNoKGNvbnRlbnQpO3RoaXMuX3JlYWRhYmxlU3RhdGUubGVuZ3RoPWNvbnRlbnQubGVuZ3RoO3JldHVybiB0aGlzfTt2YXIgTUFYX0hXTT0xMDczNzQxODI0O2Z1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pe2lmKG4+PU1BWF9IV00pe249TUFYX0hXTX1lbHNle24tLTtufD1uPj4+MTtufD1uPj4+MjtufD1uPj4+NDtufD1uPj4+ODtufD1uPj4+MTY7bisrfXJldHVybiBufWZ1bmN0aW9uIGhvd011Y2hUb1JlYWQobixzdGF0ZSl7aWYobjw9MHx8c3RhdGUubGVuZ3RoPT09MCYmc3RhdGUuZW5kZWQpcmV0dXJuIDA7aWYoc3RhdGUub2JqZWN0TW9kZSlyZXR1cm4gMTtpZihuIT09bil7aWYoc3RhdGUuZmxvd2luZyYmc3RhdGUubGVuZ3RoKXJldHVybiBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhLmxlbmd0aDtlbHNlIHJldHVybiBzdGF0ZS5sZW5ndGh9aWYobj5zdGF0ZS5oaWdoV2F0ZXJNYXJrKXN0YXRlLmhpZ2hXYXRlck1hcms9Y29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobik7aWYobjw9c3RhdGUubGVuZ3RoKXJldHVybiBuO2lmKCFzdGF0ZS5lbmRlZCl7c3RhdGUubmVlZFJlYWRhYmxlPXRydWU7cmV0dXJuIDB9cmV0dXJuIHN0YXRlLmxlbmd0aH1SZWFkYWJsZS5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihuKXtkZWJ1ZygicmVhZCIsbik7bj1wYXJzZUludChuLDEwKTt2YXIgc3RhdGU9dGhpcy5fcmVhZGFibGVTdGF0ZTt2YXIgbk9yaWc9bjtpZihuIT09MClzdGF0ZS5lbWl0dGVkUmVhZGFibGU9ZmFsc2U7aWYobj09PTAmJnN0YXRlLm5lZWRSZWFkYWJsZSYmKChzdGF0ZS5oaWdoV2F0ZXJNYXJrIT09MD9zdGF0ZS5sZW5ndGg+PXN0YXRlLmhpZ2hXYXRlck1hcms6c3RhdGUubGVuZ3RoPjApfHxzdGF0ZS5lbmRlZCkpe2RlYnVnKCJyZWFkOiBlbWl0UmVhZGFibGUiLHN0YXRlLmxlbmd0aCxzdGF0ZS5lbmRlZCk7aWYoc3RhdGUubGVuZ3RoPT09MCYmc3RhdGUuZW5kZWQpZW5kUmVhZGFibGUodGhpcyk7ZWxzZSBlbWl0UmVhZGFibGUodGhpcyk7cmV0dXJuIG51bGx9bj1ob3dNdWNoVG9SZWFkKG4sc3RhdGUpO2lmKG49PT0wJiZzdGF0ZS5lbmRlZCl7aWYoc3RhdGUubGVuZ3RoPT09MCllbmRSZWFkYWJsZSh0aGlzKTtyZXR1cm4gbnVsbH12YXIgZG9SZWFkPXN0YXRlLm5lZWRSZWFkYWJsZTtkZWJ1ZygibmVlZCByZWFkYWJsZSIsZG9SZWFkKTtpZihzdGF0ZS5sZW5ndGg9PT0wfHxzdGF0ZS5sZW5ndGgtbjxzdGF0ZS5oaWdoV2F0ZXJNYXJrKXtkb1JlYWQ9dHJ1ZTtkZWJ1ZygibGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsiLGRvUmVhZCl9aWYoc3RhdGUuZW5kZWR8fHN0YXRlLnJlYWRpbmcpe2RvUmVhZD1mYWxzZTtkZWJ1ZygicmVhZGluZyBvciBlbmRlZCIsZG9SZWFkKX1lbHNlIGlmKGRvUmVhZCl7ZGVidWcoImRvIHJlYWQiKTtzdGF0ZS5yZWFkaW5nPXRydWU7c3RhdGUuc3luYz10cnVlO2lmKHN0YXRlLmxlbmd0aD09PTApc3RhdGUubmVlZFJlYWRhYmxlPXRydWU7dGhpcy5fcmVhZChzdGF0ZS5oaWdoV2F0ZXJNYXJrKTtzdGF0ZS5zeW5jPWZhbHNlO2lmKCFzdGF0ZS5yZWFkaW5nKW49aG93TXVjaFRvUmVhZChuT3JpZyxzdGF0ZSl9dmFyIHJldDtpZihuPjApcmV0PWZyb21MaXN0KG4sc3RhdGUpO2Vsc2UgcmV0PW51bGw7aWYocmV0PT09bnVsbCl7c3RhdGUubmVlZFJlYWRhYmxlPXN0YXRlLmxlbmd0aDw9c3RhdGUuaGlnaFdhdGVyTWFyaztuPTB9ZWxzZXtzdGF0ZS5sZW5ndGgtPW47c3RhdGUuYXdhaXREcmFpbj0wfWlmKHN0YXRlLmxlbmd0aD09PTApe2lmKCFzdGF0ZS5lbmRlZClzdGF0ZS5uZWVkUmVhZGFibGU9dHJ1ZTtpZihuT3JpZyE9PW4mJnN0YXRlLmVuZGVkKWVuZFJlYWRhYmxlKHRoaXMpfWlmKHJldCE9PW51bGwpdGhpcy5lbWl0KCJkYXRhIixyZXQpO3JldHVybiByZXR9O2Z1bmN0aW9uIG9uRW9mQ2h1bmsoc3RyZWFtLHN0YXRlKXtkZWJ1Zygib25Fb2ZDaHVuayIpO2lmKHN0YXRlLmVuZGVkKXJldHVybjtpZihzdGF0ZS5kZWNvZGVyKXt2YXIgY2h1bms9c3RhdGUuZGVjb2Rlci5lbmQoKTtpZihjaHVuayYmY2h1bmsubGVuZ3RoKXtzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7c3RhdGUubGVuZ3RoKz1zdGF0ZS5vYmplY3RNb2RlPzE6Y2h1bmsubGVuZ3RofX1zdGF0ZS5lbmRlZD10cnVlO2lmKHN0YXRlLnN5bmMpe2VtaXRSZWFkYWJsZShzdHJlYW0pfWVsc2V7c3RhdGUubmVlZFJlYWRhYmxlPWZhbHNlO2lmKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpe3N0YXRlLmVtaXR0ZWRSZWFkYWJsZT10cnVlO2VtaXRSZWFkYWJsZV8oc3RyZWFtKX19fWZ1bmN0aW9uIGVtaXRSZWFkYWJsZShzdHJlYW0pe3ZhciBzdGF0ZT1zdHJlYW0uX3JlYWRhYmxlU3RhdGU7ZGVidWcoImVtaXRSZWFkYWJsZSIsc3RhdGUubmVlZFJlYWRhYmxlLHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSk7c3RhdGUubmVlZFJlYWRhYmxlPWZhbHNlO2lmKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpe2RlYnVnKCJlbWl0UmVhZGFibGUiLHN0YXRlLmZsb3dpbmcpO3N0YXRlLmVtaXR0ZWRSZWFkYWJsZT10cnVlO3Byb2Nlc3MubmV4dFRpY2soZW1pdFJlYWRhYmxlXyxzdHJlYW0pfX1mdW5jdGlvbiBlbWl0UmVhZGFibGVfKHN0cmVhbSl7dmFyIHN0YXRlPXN0cmVhbS5fcmVhZGFibGVTdGF0ZTtkZWJ1ZygiZW1pdFJlYWRhYmxlXyIsc3RhdGUuZGVzdHJveWVkLHN0YXRlLmxlbmd0aCxzdGF0ZS5lbmRlZCk7aWYoIXN0YXRlLmRlc3Ryb3llZCYmKHN0YXRlLmxlbmd0aHx8c3RhdGUuZW5kZWQpKXtzdHJlYW0uZW1pdCgicmVhZGFibGUiKTtzdGF0ZS5lbWl0dGVkUmVhZGFibGU9ZmFsc2V9c3RhdGUubmVlZFJlYWRhYmxlPSFzdGF0ZS5mbG93aW5nJiYhc3RhdGUuZW5kZWQmJnN0YXRlLmxlbmd0aDw9c3RhdGUuaGlnaFdhdGVyTWFyaztmbG93KHN0cmVhbSl9ZnVuY3Rpb24gbWF5YmVSZWFkTW9yZShzdHJlYW0sc3RhdGUpe2lmKCFzdGF0ZS5yZWFkaW5nTW9yZSl7c3RhdGUucmVhZGluZ01vcmU9dHJ1ZTtwcm9jZXNzLm5leHRUaWNrKG1heWJlUmVhZE1vcmVfLHN0cmVhbSxzdGF0ZSl9fWZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSxzdGF0ZSl7d2hpbGUoIXN0YXRlLnJlYWRpbmcmJiFzdGF0ZS5lbmRlZCYmKHN0YXRlLmxlbmd0aDxzdGF0ZS5oaWdoV2F0ZXJNYXJrfHxzdGF0ZS5mbG93aW5nJiZzdGF0ZS5sZW5ndGg9PT0wKSl7dmFyIGxlbj1zdGF0ZS5sZW5ndGg7ZGVidWcoIm1heWJlUmVhZE1vcmUgcmVhZCAwIik7c3RyZWFtLnJlYWQoMCk7aWYobGVuPT09c3RhdGUubGVuZ3RoKWJyZWFrfXN0YXRlLnJlYWRpbmdNb3JlPWZhbHNlfVJlYWRhYmxlLnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbihuKXtlcnJvck9yRGVzdHJveSh0aGlzLG5ldyBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCgiX3JlYWQoKSIpKX07UmVhZGFibGUucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oZGVzdCxwaXBlT3B0cyl7dmFyIHNyYz10aGlzO3ZhciBzdGF0ZT10aGlzLl9yZWFkYWJsZVN0YXRlO3N3aXRjaChzdGF0ZS5waXBlc0NvdW50KXtjYXNlIDA6c3RhdGUucGlwZXM9ZGVzdDticmVhaztjYXNlIDE6c3RhdGUucGlwZXM9W3N0YXRlLnBpcGVzLGRlc3RdO2JyZWFrO2RlZmF1bHQ6c3RhdGUucGlwZXMucHVzaChkZXN0KTticmVha31zdGF0ZS5waXBlc0NvdW50Kz0xO2RlYnVnKCJwaXBlIGNvdW50PSVkIG9wdHM9JWoiLHN0YXRlLnBpcGVzQ291bnQscGlwZU9wdHMpO3ZhciBkb0VuZD0oIXBpcGVPcHRzfHxwaXBlT3B0cy5lbmQhPT1mYWxzZSkmJmRlc3QhPT1wcm9jZXNzLnN0ZG91dCYmZGVzdCE9PXByb2Nlc3Muc3RkZXJyO3ZhciBlbmRGbj1kb0VuZD9vbmVuZDp1bnBpcGU7aWYoc3RhdGUuZW5kRW1pdHRlZClwcm9jZXNzLm5leHRUaWNrKGVuZEZuKTtlbHNlIHNyYy5vbmNlKCJlbmQiLGVuZEZuKTtkZXN0Lm9uKCJ1bnBpcGUiLG9udW5waXBlKTtmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSx1bnBpcGVJbmZvKXtkZWJ1Zygib251bnBpcGUiKTtpZihyZWFkYWJsZT09PXNyYyl7aWYodW5waXBlSW5mbyYmdW5waXBlSW5mby5oYXNVbnBpcGVkPT09ZmFsc2Upe3VucGlwZUluZm8uaGFzVW5waXBlZD10cnVlO2NsZWFudXAoKX19fWZ1bmN0aW9uIG9uZW5kKCl7ZGVidWcoIm9uZW5kIik7ZGVzdC5lbmQoKX12YXIgb25kcmFpbj1waXBlT25EcmFpbihzcmMpO2Rlc3Qub24oImRyYWluIixvbmRyYWluKTt2YXIgY2xlYW5lZFVwPWZhbHNlO2Z1bmN0aW9uIGNsZWFudXAoKXtkZWJ1ZygiY2xlYW51cCIpO2Rlc3QucmVtb3ZlTGlzdGVuZXIoImNsb3NlIixvbmNsb3NlKTtkZXN0LnJlbW92ZUxpc3RlbmVyKCJmaW5pc2giLG9uZmluaXNoKTtkZXN0LnJlbW92ZUxpc3RlbmVyKCJkcmFpbiIsb25kcmFpbik7ZGVzdC5yZW1vdmVMaXN0ZW5lcigiZXJyb3IiLG9uZXJyb3IpO2Rlc3QucmVtb3ZlTGlzdGVuZXIoInVucGlwZSIsb251bnBpcGUpO3NyYy5yZW1vdmVMaXN0ZW5lcigiZW5kIixvbmVuZCk7c3JjLnJlbW92ZUxpc3RlbmVyKCJlbmQiLHVucGlwZSk7c3JjLnJlbW92ZUxpc3RlbmVyKCJkYXRhIixvbmRhdGEpO2NsZWFuZWRVcD10cnVlO2lmKHN0YXRlLmF3YWl0RHJhaW4mJighZGVzdC5fd3JpdGFibGVTdGF0ZXx8ZGVzdC5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW4pKW9uZHJhaW4oKX1zcmMub24oImRhdGEiLG9uZGF0YSk7ZnVuY3Rpb24gb25kYXRhKGNodW5rKXtkZWJ1Zygib25kYXRhIik7dmFyIHJldD1kZXN0LndyaXRlKGNodW5rKTtkZWJ1ZygiZGVzdC53cml0ZSIscmV0KTtpZihyZXQ9PT1mYWxzZSl7aWYoKHN0YXRlLnBpcGVzQ291bnQ9PT0xJiZzdGF0ZS5waXBlcz09PWRlc3R8fHN0YXRlLnBpcGVzQ291bnQ+MSYmaW5kZXhPZihzdGF0ZS5waXBlcyxkZXN0KSE9PS0xKSYmIWNsZWFuZWRVcCl7ZGVidWcoImZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZSIsc3RhdGUuYXdhaXREcmFpbik7c3RhdGUuYXdhaXREcmFpbisrfXNyYy5wYXVzZSgpfX1mdW5jdGlvbiBvbmVycm9yKGVyKXtkZWJ1Zygib25lcnJvciIsZXIpO3VucGlwZSgpO2Rlc3QucmVtb3ZlTGlzdGVuZXIoImVycm9yIixvbmVycm9yKTtpZihFRWxpc3RlbmVyQ291bnQoZGVzdCwiZXJyb3IiKT09PTApZXJyb3JPckRlc3Ryb3koZGVzdCxlcil9cHJlcGVuZExpc3RlbmVyKGRlc3QsImVycm9yIixvbmVycm9yKTtmdW5jdGlvbiBvbmNsb3NlKCl7ZGVzdC5yZW1vdmVMaXN0ZW5lcigiZmluaXNoIixvbmZpbmlzaCk7dW5waXBlKCl9ZGVzdC5vbmNlKCJjbG9zZSIsb25jbG9zZSk7ZnVuY3Rpb24gb25maW5pc2goKXtkZWJ1Zygib25maW5pc2giKTtkZXN0LnJlbW92ZUxpc3RlbmVyKCJjbG9zZSIsb25jbG9zZSk7dW5waXBlKCl9ZGVzdC5vbmNlKCJmaW5pc2giLG9uZmluaXNoKTtmdW5jdGlvbiB1bnBpcGUoKXtkZWJ1ZygidW5waXBlIik7c3JjLnVucGlwZShkZXN0KX1kZXN0LmVtaXQoInBpcGUiLHNyYyk7aWYoIXN0YXRlLmZsb3dpbmcpe2RlYnVnKCJwaXBlIHJlc3VtZSIpO3NyYy5yZXN1bWUoKX1yZXR1cm4gZGVzdH07ZnVuY3Rpb24gcGlwZU9uRHJhaW4oc3JjKXtyZXR1cm4gZnVuY3Rpb24gcGlwZU9uRHJhaW5GdW5jdGlvblJlc3VsdCgpe3ZhciBzdGF0ZT1zcmMuX3JlYWRhYmxlU3RhdGU7ZGVidWcoInBpcGVPbkRyYWluIixzdGF0ZS5hd2FpdERyYWluKTtpZihzdGF0ZS5hd2FpdERyYWluKXN0YXRlLmF3YWl0RHJhaW4tLTtpZihzdGF0ZS5hd2FpdERyYWluPT09MCYmRUVsaXN0ZW5lckNvdW50KHNyYywiZGF0YSIpKXtzdGF0ZS5mbG93aW5nPXRydWU7ZmxvdyhzcmMpfX19UmVhZGFibGUucHJvdG90eXBlLnVucGlwZT1mdW5jdGlvbihkZXN0KXt2YXIgc3RhdGU9dGhpcy5fcmVhZGFibGVTdGF0ZTt2YXIgdW5waXBlSW5mbz17aGFzVW5waXBlZDpmYWxzZX07aWYoc3RhdGUucGlwZXNDb3VudD09PTApcmV0dXJuIHRoaXM7aWYoc3RhdGUucGlwZXNDb3VudD09PTEpe2lmKGRlc3QmJmRlc3QhPT1zdGF0ZS5waXBlcylyZXR1cm4gdGhpcztpZighZGVzdClkZXN0PXN0YXRlLnBpcGVzO3N0YXRlLnBpcGVzPW51bGw7c3RhdGUucGlwZXNDb3VudD0wO3N0YXRlLmZsb3dpbmc9ZmFsc2U7aWYoZGVzdClkZXN0LmVtaXQoInVucGlwZSIsdGhpcyx1bnBpcGVJbmZvKTtyZXR1cm4gdGhpc31pZighZGVzdCl7dmFyIGRlc3RzPXN0YXRlLnBpcGVzO3ZhciBsZW49c3RhdGUucGlwZXNDb3VudDtzdGF0ZS5waXBlcz1udWxsO3N0YXRlLnBpcGVzQ291bnQ9MDtzdGF0ZS5mbG93aW5nPWZhbHNlO2Zvcih2YXIgaT0wO2k8bGVuO2krKylkZXN0c1tpXS5lbWl0KCJ1bnBpcGUiLHRoaXMse2hhc1VucGlwZWQ6ZmFsc2V9KTtyZXR1cm4gdGhpc312YXIgaW5kZXg9aW5kZXhPZihzdGF0ZS5waXBlcyxkZXN0KTtpZihpbmRleD09PS0xKXJldHVybiB0aGlzO3N0YXRlLnBpcGVzLnNwbGljZShpbmRleCwxKTtzdGF0ZS5waXBlc0NvdW50LT0xO2lmKHN0YXRlLnBpcGVzQ291bnQ9PT0xKXN0YXRlLnBpcGVzPXN0YXRlLnBpcGVzWzBdO2Rlc3QuZW1pdCgidW5waXBlIix0aGlzLHVucGlwZUluZm8pO3JldHVybiB0aGlzfTtSZWFkYWJsZS5wcm90b3R5cGUub249ZnVuY3Rpb24oZXYsZm4pe3ZhciByZXM9U3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsZXYsZm4pO3ZhciBzdGF0ZT10aGlzLl9yZWFkYWJsZVN0YXRlO2lmKGV2PT09ImRhdGEiKXtzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZz10aGlzLmxpc3RlbmVyQ291bnQoInJlYWRhYmxlIik+MDtpZihzdGF0ZS5mbG93aW5nIT09ZmFsc2UpdGhpcy5yZXN1bWUoKX1lbHNlIGlmKGV2PT09InJlYWRhYmxlIil7aWYoIXN0YXRlLmVuZEVtaXR0ZWQmJiFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyl7c3RhdGUucmVhZGFibGVMaXN0ZW5pbmc9c3RhdGUubmVlZFJlYWRhYmxlPXRydWU7c3RhdGUuZmxvd2luZz1mYWxzZTtzdGF0ZS5lbWl0dGVkUmVhZGFibGU9ZmFsc2U7ZGVidWcoIm9uIHJlYWRhYmxlIixzdGF0ZS5sZW5ndGgsc3RhdGUucmVhZGluZyk7aWYoc3RhdGUubGVuZ3RoKXtlbWl0UmVhZGFibGUodGhpcyl9ZWxzZSBpZighc3RhdGUucmVhZGluZyl7cHJvY2Vzcy5uZXh0VGljayhuUmVhZGluZ05leHRUaWNrLHRoaXMpfX19cmV0dXJuIHJlc307UmVhZGFibGUucHJvdG90eXBlLmFkZExpc3RlbmVyPVJlYWRhYmxlLnByb3RvdHlwZS5vbjtSZWFkYWJsZS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZXYsZm4pe3ZhciByZXM9U3RyZWFtLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lci5jYWxsKHRoaXMsZXYsZm4pO2lmKGV2PT09InJlYWRhYmxlIil7cHJvY2Vzcy5uZXh0VGljayh1cGRhdGVSZWFkYWJsZUxpc3RlbmluZyx0aGlzKX1yZXR1cm4gcmVzfTtSZWFkYWJsZS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGV2KXt2YXIgcmVzPVN0cmVhbS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihldj09PSJyZWFkYWJsZSJ8fGV2PT09dW5kZWZpbmVkKXtwcm9jZXNzLm5leHRUaWNrKHVwZGF0ZVJlYWRhYmxlTGlzdGVuaW5nLHRoaXMpfXJldHVybiByZXN9O2Z1bmN0aW9uIHVwZGF0ZVJlYWRhYmxlTGlzdGVuaW5nKHNlbGYpe3ZhciBzdGF0ZT1zZWxmLl9yZWFkYWJsZVN0YXRlO3N0YXRlLnJlYWRhYmxlTGlzdGVuaW5nPXNlbGYubGlzdGVuZXJDb3VudCgicmVhZGFibGUiKT4wO2lmKHN0YXRlLnJlc3VtZVNjaGVkdWxlZCYmIXN0YXRlLnBhdXNlZCl7c3RhdGUuZmxvd2luZz10cnVlfWVsc2UgaWYoc2VsZi5saXN0ZW5lckNvdW50KCJkYXRhIik+MCl7c2VsZi5yZXN1bWUoKX19ZnVuY3Rpb24gblJlYWRpbmdOZXh0VGljayhzZWxmKXtkZWJ1ZygicmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwIik7c2VsZi5yZWFkKDApfVJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXt2YXIgc3RhdGU9dGhpcy5fcmVhZGFibGVTdGF0ZTtpZighc3RhdGUuZmxvd2luZyl7ZGVidWcoInJlc3VtZSIpO3N0YXRlLmZsb3dpbmc9IXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nO3Jlc3VtZSh0aGlzLHN0YXRlKX1zdGF0ZS5wYXVzZWQ9ZmFsc2U7cmV0dXJuIHRoaXN9O2Z1bmN0aW9uIHJlc3VtZShzdHJlYW0sc3RhdGUpe2lmKCFzdGF0ZS5yZXN1bWVTY2hlZHVsZWQpe3N0YXRlLnJlc3VtZVNjaGVkdWxlZD10cnVlO3Byb2Nlc3MubmV4dFRpY2socmVzdW1lXyxzdHJlYW0sc3RhdGUpfX1mdW5jdGlvbiByZXN1bWVfKHN0cmVhbSxzdGF0ZSl7ZGVidWcoInJlc3VtZSIsc3RhdGUucmVhZGluZyk7aWYoIXN0YXRlLnJlYWRpbmcpe3N0cmVhbS5yZWFkKDApfXN0YXRlLnJlc3VtZVNjaGVkdWxlZD1mYWxzZTtzdHJlYW0uZW1pdCgicmVzdW1lIik7ZmxvdyhzdHJlYW0pO2lmKHN0YXRlLmZsb3dpbmcmJiFzdGF0ZS5yZWFkaW5nKXN0cmVhbS5yZWFkKDApfVJlYWRhYmxlLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe2RlYnVnKCJjYWxsIHBhdXNlIGZsb3dpbmc9JWoiLHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyk7aWYodGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nIT09ZmFsc2Upe2RlYnVnKCJwYXVzZSIpO3RoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZz1mYWxzZTt0aGlzLmVtaXQoInBhdXNlIil9dGhpcy5fcmVhZGFibGVTdGF0ZS5wYXVzZWQ9dHJ1ZTtyZXR1cm4gdGhpc307ZnVuY3Rpb24gZmxvdyhzdHJlYW0pe3ZhciBzdGF0ZT1zdHJlYW0uX3JlYWRhYmxlU3RhdGU7ZGVidWcoImZsb3ciLHN0YXRlLmZsb3dpbmcpO3doaWxlKHN0YXRlLmZsb3dpbmcmJnN0cmVhbS5yZWFkKCkhPT1udWxsKTt9UmVhZGFibGUucHJvdG90eXBlLndyYXA9ZnVuY3Rpb24oc3RyZWFtKXt2YXIgX3RoaXM9dGhpczt2YXIgc3RhdGU9dGhpcy5fcmVhZGFibGVTdGF0ZTt2YXIgcGF1c2VkPWZhbHNlO3N0cmVhbS5vbigiZW5kIixmdW5jdGlvbigpe2RlYnVnKCJ3cmFwcGVkIGVuZCIpO2lmKHN0YXRlLmRlY29kZXImJiFzdGF0ZS5lbmRlZCl7dmFyIGNodW5rPXN0YXRlLmRlY29kZXIuZW5kKCk7aWYoY2h1bmsmJmNodW5rLmxlbmd0aClfdGhpcy5wdXNoKGNodW5rKX1fdGhpcy5wdXNoKG51bGwpfSk7c3RyZWFtLm9uKCJkYXRhIixmdW5jdGlvbihjaHVuayl7ZGVidWcoIndyYXBwZWQgZGF0YSIpO2lmKHN0YXRlLmRlY29kZXIpY2h1bms9c3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7aWYoc3RhdGUub2JqZWN0TW9kZSYmKGNodW5rPT09bnVsbHx8Y2h1bms9PT11bmRlZmluZWQpKXJldHVybjtlbHNlIGlmKCFzdGF0ZS5vYmplY3RNb2RlJiYoIWNodW5rfHwhY2h1bmsubGVuZ3RoKSlyZXR1cm47dmFyIHJldD1fdGhpcy5wdXNoKGNodW5rKTtpZighcmV0KXtwYXVzZWQ9dHJ1ZTtzdHJlYW0ucGF1c2UoKX19KTtmb3IodmFyIGkgaW4gc3RyZWFtKXtpZih0aGlzW2ldPT09dW5kZWZpbmVkJiZ0eXBlb2Ygc3RyZWFtW2ldPT09ImZ1bmN0aW9uIil7dGhpc1tpXT1mdW5jdGlvbiBtZXRob2RXcmFwKG1ldGhvZCl7cmV0dXJuIGZ1bmN0aW9uIG1ldGhvZFdyYXBSZXR1cm5GdW5jdGlvbigpe3JldHVybiBzdHJlYW1bbWV0aG9kXS5hcHBseShzdHJlYW0sYXJndW1lbnRzKX19KGkpfX1mb3IodmFyIG49MDtuPGtQcm94eUV2ZW50cy5sZW5ndGg7bisrKXtzdHJlYW0ub24oa1Byb3h5RXZlbnRzW25dLHRoaXMuZW1pdC5iaW5kKHRoaXMsa1Byb3h5RXZlbnRzW25dKSl9dGhpcy5fcmVhZD1mdW5jdGlvbihuKXtkZWJ1Zygid3JhcHBlZCBfcmVhZCIsbik7aWYocGF1c2VkKXtwYXVzZWQ9ZmFsc2U7c3RyZWFtLnJlc3VtZSgpfX07cmV0dXJuIHRoaXN9O2lmKHR5cGVvZiBTeW1ib2w9PT0iZnVuY3Rpb24iKXtSZWFkYWJsZS5wcm90b3R5cGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdPWZ1bmN0aW9uKCl7aWYoY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yPT09dW5kZWZpbmVkKXtjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I9cmVxdWlyZSgiLi9pbnRlcm5hbC9zdHJlYW1zL2FzeW5jX2l0ZXJhdG9yIil9cmV0dXJuIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcih0aGlzKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwicmVhZGFibGVIaWdoV2F0ZXJNYXJrIix7ZW51bWVyYWJsZTpmYWxzZSxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuaGlnaFdhdGVyTWFya319KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCJyZWFkYWJsZUJ1ZmZlciIse2VudW1lcmFibGU6ZmFsc2UsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlJiZ0aGlzLl9yZWFkYWJsZVN0YXRlLmJ1ZmZlcn19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCJyZWFkYWJsZUZsb3dpbmciLHtlbnVtZXJhYmxlOmZhbHNlLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nfSxzZXQ6ZnVuY3Rpb24gc2V0KHN0YXRlKXtpZih0aGlzLl9yZWFkYWJsZVN0YXRlKXt0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmc9c3RhdGV9fX0pO1JlYWRhYmxlLl9mcm9tTGlzdD1mcm9tTGlzdDtPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCJyZWFkYWJsZUxlbmd0aCIse2VudW1lcmFibGU6ZmFsc2UsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmxlbmd0aH19KTtmdW5jdGlvbiBmcm9tTGlzdChuLHN0YXRlKXtpZihzdGF0ZS5sZW5ndGg9PT0wKXJldHVybiBudWxsO3ZhciByZXQ7aWYoc3RhdGUub2JqZWN0TW9kZSlyZXQ9c3RhdGUuYnVmZmVyLnNoaWZ0KCk7ZWxzZSBpZighbnx8bj49c3RhdGUubGVuZ3RoKXtpZihzdGF0ZS5kZWNvZGVyKXJldD1zdGF0ZS5idWZmZXIuam9pbigiIik7ZWxzZSBpZihzdGF0ZS5idWZmZXIubGVuZ3RoPT09MSlyZXQ9c3RhdGUuYnVmZmVyLmZpcnN0KCk7ZWxzZSByZXQ9c3RhdGUuYnVmZmVyLmNvbmNhdChzdGF0ZS5sZW5ndGgpO3N0YXRlLmJ1ZmZlci5jbGVhcigpfWVsc2V7cmV0PXN0YXRlLmJ1ZmZlci5jb25zdW1lKG4sc3RhdGUuZGVjb2Rlcil9cmV0dXJuIHJldH1mdW5jdGlvbiBlbmRSZWFkYWJsZShzdHJlYW0pe3ZhciBzdGF0ZT1zdHJlYW0uX3JlYWRhYmxlU3RhdGU7ZGVidWcoImVuZFJlYWRhYmxlIixzdGF0ZS5lbmRFbWl0dGVkKTtpZighc3RhdGUuZW5kRW1pdHRlZCl7c3RhdGUuZW5kZWQ9dHJ1ZTtwcm9jZXNzLm5leHRUaWNrKGVuZFJlYWRhYmxlTlQsc3RhdGUsc3RyZWFtKX19ZnVuY3Rpb24gZW5kUmVhZGFibGVOVChzdGF0ZSxzdHJlYW0pe2RlYnVnKCJlbmRSZWFkYWJsZU5UIixzdGF0ZS5lbmRFbWl0dGVkLHN0YXRlLmxlbmd0aCk7aWYoIXN0YXRlLmVuZEVtaXR0ZWQmJnN0YXRlLmxlbmd0aD09PTApe3N0YXRlLmVuZEVtaXR0ZWQ9dHJ1ZTtzdHJlYW0ucmVhZGFibGU9ZmFsc2U7c3RyZWFtLmVtaXQoImVuZCIpO2lmKHN0YXRlLmF1dG9EZXN0cm95KXt2YXIgd1N0YXRlPXN0cmVhbS5fd3JpdGFibGVTdGF0ZTtpZighd1N0YXRlfHx3U3RhdGUuYXV0b0Rlc3Ryb3kmJndTdGF0ZS5maW5pc2hlZCl7c3RyZWFtLmRlc3Ryb3koKX19fX1pZih0eXBlb2YgU3ltYm9sPT09ImZ1bmN0aW9uIil7UmVhZGFibGUuZnJvbT1mdW5jdGlvbihpdGVyYWJsZSxvcHRzKXtpZihmcm9tPT09dW5kZWZpbmVkKXtmcm9tPXJlcXVpcmUoIi4vaW50ZXJuYWwvc3RyZWFtcy9mcm9tIil9cmV0dXJuIGZyb20oUmVhZGFibGUsaXRlcmFibGUsb3B0cyl9fWZ1bmN0aW9uIGluZGV4T2YoeHMseCl7Zm9yKHZhciBpPTAsbD14cy5sZW5ndGg7aTxsO2krKyl7aWYoeHNbaV09PT14KXJldHVybiBpfXJldHVybi0xfX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMscmVxdWlyZSgiX3Byb2Nlc3MiKSx0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9KX0seyIuLi9lcnJvcnMiOjU5LCIuL19zdHJlYW1fZHVwbGV4Ijo2MCwiLi9pbnRlcm5hbC9zdHJlYW1zL2FzeW5jX2l0ZXJhdG9yIjo2NSwiLi9pbnRlcm5hbC9zdHJlYW1zL2J1ZmZlcl9saXN0Ijo2NiwiLi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3kiOjY3LCIuL2ludGVybmFsL3N0cmVhbXMvZnJvbSI6NjksIi4vaW50ZXJuYWwvc3RyZWFtcy9zdGF0ZSI6NzEsIi4vaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0iOjcyLF9wcm9jZXNzOjM5LGJ1ZmZlcjo4LGV2ZW50czoxNCxpbmhlcml0czoyOSwic3RyaW5nX2RlY29kZXIvIjo5Mix1dGlsOjd9XSw2MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO21vZHVsZS5leHBvcnRzPVRyYW5zZm9ybTt2YXIgX3JlcXVpcmUkY29kZXM9cmVxdWlyZSgiLi4vZXJyb3JzIikuY29kZXMsRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQ9X3JlcXVpcmUkY29kZXMuRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQsRVJSX01VTFRJUExFX0NBTExCQUNLPV9yZXF1aXJlJGNvZGVzLkVSUl9NVUxUSVBMRV9DQUxMQkFDSyxFUlJfVFJBTlNGT1JNX0FMUkVBRFlfVFJBTlNGT1JNSU5HPV9yZXF1aXJlJGNvZGVzLkVSUl9UUkFOU0ZPUk1fQUxSRUFEWV9UUkFOU0ZPUk1JTkcsRVJSX1RSQU5TRk9STV9XSVRIX0xFTkdUSF8wPV9yZXF1aXJlJGNvZGVzLkVSUl9UUkFOU0ZPUk1fV0lUSF9MRU5HVEhfMDt2YXIgRHVwbGV4PXJlcXVpcmUoIi4vX3N0cmVhbV9kdXBsZXgiKTtyZXF1aXJlKCJpbmhlcml0cyIpKFRyYW5zZm9ybSxEdXBsZXgpO2Z1bmN0aW9uIGFmdGVyVHJhbnNmb3JtKGVyLGRhdGEpe3ZhciB0cz10aGlzLl90cmFuc2Zvcm1TdGF0ZTt0cy50cmFuc2Zvcm1pbmc9ZmFsc2U7dmFyIGNiPXRzLndyaXRlY2I7aWYoY2I9PT1udWxsKXtyZXR1cm4gdGhpcy5lbWl0KCJlcnJvciIsbmV3IEVSUl9NVUxUSVBMRV9DQUxMQkFDSyl9dHMud3JpdGVjaHVuaz1udWxsO3RzLndyaXRlY2I9bnVsbDtpZihkYXRhIT1udWxsKXRoaXMucHVzaChkYXRhKTtjYihlcik7dmFyIHJzPXRoaXMuX3JlYWRhYmxlU3RhdGU7cnMucmVhZGluZz1mYWxzZTtpZihycy5uZWVkUmVhZGFibGV8fHJzLmxlbmd0aDxycy5oaWdoV2F0ZXJNYXJrKXt0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspfX1mdW5jdGlvbiBUcmFuc2Zvcm0ob3B0aW9ucyl7aWYoISh0aGlzIGluc3RhbmNlb2YgVHJhbnNmb3JtKSlyZXR1cm4gbmV3IFRyYW5zZm9ybShvcHRpb25zKTtEdXBsZXguY2FsbCh0aGlzLG9wdGlvbnMpO3RoaXMuX3RyYW5zZm9ybVN0YXRlPXthZnRlclRyYW5zZm9ybTphZnRlclRyYW5zZm9ybS5iaW5kKHRoaXMpLG5lZWRUcmFuc2Zvcm06ZmFsc2UsdHJhbnNmb3JtaW5nOmZhbHNlLHdyaXRlY2I6bnVsbCx3cml0ZWNodW5rOm51bGwsd3JpdGVlbmNvZGluZzpudWxsfTt0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZT10cnVlO3RoaXMuX3JlYWRhYmxlU3RhdGUuc3luYz1mYWxzZTtpZihvcHRpb25zKXtpZih0eXBlb2Ygb3B0aW9ucy50cmFuc2Zvcm09PT0iZnVuY3Rpb24iKXRoaXMuX3RyYW5zZm9ybT1vcHRpb25zLnRyYW5zZm9ybTtpZih0eXBlb2Ygb3B0aW9ucy5mbHVzaD09PSJmdW5jdGlvbiIpdGhpcy5fZmx1c2g9b3B0aW9ucy5mbHVzaH10aGlzLm9uKCJwcmVmaW5pc2giLHByZWZpbmlzaCl9ZnVuY3Rpb24gcHJlZmluaXNoKCl7dmFyIF90aGlzPXRoaXM7aWYodHlwZW9mIHRoaXMuX2ZsdXNoPT09ImZ1bmN0aW9uIiYmIXRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkKXt0aGlzLl9mbHVzaChmdW5jdGlvbihlcixkYXRhKXtkb25lKF90aGlzLGVyLGRhdGEpfSl9ZWxzZXtkb25lKHRoaXMsbnVsbCxudWxsKX19VHJhbnNmb3JtLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGNodW5rLGVuY29kaW5nKXt0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtPWZhbHNlO3JldHVybiBEdXBsZXgucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLGNodW5rLGVuY29kaW5nKX07VHJhbnNmb3JtLnByb3RvdHlwZS5fdHJhbnNmb3JtPWZ1bmN0aW9uKGNodW5rLGVuY29kaW5nLGNiKXtjYihuZXcgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQoIl90cmFuc2Zvcm0oKSIpKX07VHJhbnNmb3JtLnByb3RvdHlwZS5fd3JpdGU9ZnVuY3Rpb24oY2h1bmssZW5jb2RpbmcsY2Ipe3ZhciB0cz10aGlzLl90cmFuc2Zvcm1TdGF0ZTt0cy53cml0ZWNiPWNiO3RzLndyaXRlY2h1bms9Y2h1bms7dHMud3JpdGVlbmNvZGluZz1lbmNvZGluZztpZighdHMudHJhbnNmb3JtaW5nKXt2YXIgcnM9dGhpcy5fcmVhZGFibGVTdGF0ZTtpZih0cy5uZWVkVHJhbnNmb3JtfHxycy5uZWVkUmVhZGFibGV8fHJzLmxlbmd0aDxycy5oaWdoV2F0ZXJNYXJrKXRoaXMuX3JlYWQocnMuaGlnaFdhdGVyTWFyayl9fTtUcmFuc2Zvcm0ucHJvdG90eXBlLl9yZWFkPWZ1bmN0aW9uKG4pe3ZhciB0cz10aGlzLl90cmFuc2Zvcm1TdGF0ZTtpZih0cy53cml0ZWNodW5rIT09bnVsbCYmIXRzLnRyYW5zZm9ybWluZyl7dHMudHJhbnNmb3JtaW5nPXRydWU7dGhpcy5fdHJhbnNmb3JtKHRzLndyaXRlY2h1bmssdHMud3JpdGVlbmNvZGluZyx0cy5hZnRlclRyYW5zZm9ybSl9ZWxzZXt0cy5uZWVkVHJhbnNmb3JtPXRydWV9fTtUcmFuc2Zvcm0ucHJvdG90eXBlLl9kZXN0cm95PWZ1bmN0aW9uKGVycixjYil7RHVwbGV4LnByb3RvdHlwZS5fZGVzdHJveS5jYWxsKHRoaXMsZXJyLGZ1bmN0aW9uKGVycjIpe2NiKGVycjIpfSl9O2Z1bmN0aW9uIGRvbmUoc3RyZWFtLGVyLGRhdGEpe2lmKGVyKXJldHVybiBzdHJlYW0uZW1pdCgiZXJyb3IiLGVyKTtpZihkYXRhIT1udWxsKXN0cmVhbS5wdXNoKGRhdGEpO2lmKHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5sZW5ndGgpdGhyb3cgbmV3IEVSUl9UUkFOU0ZPUk1fV0lUSF9MRU5HVEhfMDtpZihzdHJlYW0uX3RyYW5zZm9ybVN0YXRlLnRyYW5zZm9ybWluZyl0aHJvdyBuZXcgRVJSX1RSQU5TRk9STV9BTFJFQURZX1RSQU5TRk9STUlORztyZXR1cm4gc3RyZWFtLnB1c2gobnVsbCl9fSx7Ii4uL2Vycm9ycyI6NTksIi4vX3N0cmVhbV9kdXBsZXgiOjYwLGluaGVyaXRzOjI5fV0sNjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCl7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO21vZHVsZS5leHBvcnRzPVdyaXRhYmxlO2Z1bmN0aW9uIFdyaXRlUmVxKGNodW5rLGVuY29kaW5nLGNiKXt0aGlzLmNodW5rPWNodW5rO3RoaXMuZW5jb2Rpbmc9ZW5jb2Rpbmc7dGhpcy5jYWxsYmFjaz1jYjt0aGlzLm5leHQ9bnVsbH1mdW5jdGlvbiBDb3JrZWRSZXF1ZXN0KHN0YXRlKXt2YXIgX3RoaXM9dGhpczt0aGlzLm5leHQ9bnVsbDt0aGlzLmVudHJ5PW51bGw7dGhpcy5maW5pc2g9ZnVuY3Rpb24oKXtvbkNvcmtlZEZpbmlzaChfdGhpcyxzdGF0ZSl9fXZhciBEdXBsZXg7V3JpdGFibGUuV3JpdGFibGVTdGF0ZT1Xcml0YWJsZVN0YXRlO3ZhciBpbnRlcm5hbFV0aWw9e2RlcHJlY2F0ZTpyZXF1aXJlKCJ1dGlsLWRlcHJlY2F0ZSIpfTt2YXIgU3RyZWFtPXJlcXVpcmUoIi4vaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0iKTt2YXIgQnVmZmVyPXJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcjt2YXIgT3VyVWludDhBcnJheT0odHlwZW9mIGdsb2JhbCE9PSJ1bmRlZmluZWQiP2dsb2JhbDp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93OnR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp7fSkuVWludDhBcnJheXx8ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspe3JldHVybiBCdWZmZXIuZnJvbShjaHVuayl9ZnVuY3Rpb24gX2lzVWludDhBcnJheShvYmope3JldHVybiBCdWZmZXIuaXNCdWZmZXIob2JqKXx8b2JqIGluc3RhbmNlb2YgT3VyVWludDhBcnJheX12YXIgZGVzdHJveUltcGw9cmVxdWlyZSgiLi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3kiKTt2YXIgX3JlcXVpcmU9cmVxdWlyZSgiLi9pbnRlcm5hbC9zdHJlYW1zL3N0YXRlIiksZ2V0SGlnaFdhdGVyTWFyaz1fcmVxdWlyZS5nZXRIaWdoV2F0ZXJNYXJrO3ZhciBfcmVxdWlyZSRjb2Rlcz1yZXF1aXJlKCIuLi9lcnJvcnMiKS5jb2RlcyxFUlJfSU5WQUxJRF9BUkdfVFlQRT1fcmVxdWlyZSRjb2Rlcy5FUlJfSU5WQUxJRF9BUkdfVFlQRSxFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRD1fcmVxdWlyZSRjb2Rlcy5FUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCxFUlJfTVVMVElQTEVfQ0FMTEJBQ0s9X3JlcXVpcmUkY29kZXMuRVJSX01VTFRJUExFX0NBTExCQUNLLEVSUl9TVFJFQU1fQ0FOTk9UX1BJUEU9X3JlcXVpcmUkY29kZXMuRVJSX1NUUkVBTV9DQU5OT1RfUElQRSxFUlJfU1RSRUFNX0RFU1RST1lFRD1fcmVxdWlyZSRjb2Rlcy5FUlJfU1RSRUFNX0RFU1RST1lFRCxFUlJfU1RSRUFNX05VTExfVkFMVUVTPV9yZXF1aXJlJGNvZGVzLkVSUl9TVFJFQU1fTlVMTF9WQUxVRVMsRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQ9X3JlcXVpcmUkY29kZXMuRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQsRVJSX1VOS05PV05fRU5DT0RJTkc9X3JlcXVpcmUkY29kZXMuRVJSX1VOS05PV05fRU5DT0RJTkc7dmFyIGVycm9yT3JEZXN0cm95PWRlc3Ryb3lJbXBsLmVycm9yT3JEZXN0cm95O3JlcXVpcmUoImluaGVyaXRzIikoV3JpdGFibGUsU3RyZWFtKTtmdW5jdGlvbiBub3AoKXt9ZnVuY3Rpb24gV3JpdGFibGVTdGF0ZShvcHRpb25zLHN0cmVhbSxpc0R1cGxleCl7RHVwbGV4PUR1cGxleHx8cmVxdWlyZSgiLi9fc3RyZWFtX2R1cGxleCIpO29wdGlvbnM9b3B0aW9uc3x8e307aWYodHlwZW9mIGlzRHVwbGV4IT09ImJvb2xlYW4iKWlzRHVwbGV4PXN0cmVhbSBpbnN0YW5jZW9mIER1cGxleDt0aGlzLm9iamVjdE1vZGU9ISFvcHRpb25zLm9iamVjdE1vZGU7aWYoaXNEdXBsZXgpdGhpcy5vYmplY3RNb2RlPXRoaXMub2JqZWN0TW9kZXx8ISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTt0aGlzLmhpZ2hXYXRlck1hcms9Z2V0SGlnaFdhdGVyTWFyayh0aGlzLG9wdGlvbnMsIndyaXRhYmxlSGlnaFdhdGVyTWFyayIsaXNEdXBsZXgpO3RoaXMuZmluYWxDYWxsZWQ9ZmFsc2U7dGhpcy5uZWVkRHJhaW49ZmFsc2U7dGhpcy5lbmRpbmc9ZmFsc2U7dGhpcy5lbmRlZD1mYWxzZTt0aGlzLmZpbmlzaGVkPWZhbHNlO3RoaXMuZGVzdHJveWVkPWZhbHNlO3ZhciBub0RlY29kZT1vcHRpb25zLmRlY29kZVN0cmluZ3M9PT1mYWxzZTt0aGlzLmRlY29kZVN0cmluZ3M9IW5vRGVjb2RlO3RoaXMuZGVmYXVsdEVuY29kaW5nPW9wdGlvbnMuZGVmYXVsdEVuY29kaW5nfHwidXRmOCI7dGhpcy5sZW5ndGg9MDt0aGlzLndyaXRpbmc9ZmFsc2U7dGhpcy5jb3JrZWQ9MDt0aGlzLnN5bmM9dHJ1ZTt0aGlzLmJ1ZmZlclByb2Nlc3Npbmc9ZmFsc2U7dGhpcy5vbndyaXRlPWZ1bmN0aW9uKGVyKXtvbndyaXRlKHN0cmVhbSxlcil9O3RoaXMud3JpdGVjYj1udWxsO3RoaXMud3JpdGVsZW49MDt0aGlzLmJ1ZmZlcmVkUmVxdWVzdD1udWxsO3RoaXMubGFzdEJ1ZmZlcmVkUmVxdWVzdD1udWxsO3RoaXMucGVuZGluZ2NiPTA7dGhpcy5wcmVmaW5pc2hlZD1mYWxzZTt0aGlzLmVycm9yRW1pdHRlZD1mYWxzZTt0aGlzLmVtaXRDbG9zZT1vcHRpb25zLmVtaXRDbG9zZSE9PWZhbHNlO3RoaXMuYXV0b0Rlc3Ryb3k9ISFvcHRpb25zLmF1dG9EZXN0cm95O3RoaXMuYnVmZmVyZWRSZXF1ZXN0Q291bnQ9MDt0aGlzLmNvcmtlZFJlcXVlc3RzRnJlZT1uZXcgQ29ya2VkUmVxdWVzdCh0aGlzKX1Xcml0YWJsZVN0YXRlLnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24gZ2V0QnVmZmVyKCl7dmFyIGN1cnJlbnQ9dGhpcy5idWZmZXJlZFJlcXVlc3Q7dmFyIG91dD1bXTt3aGlsZShjdXJyZW50KXtvdXQucHVzaChjdXJyZW50KTtjdXJyZW50PWN1cnJlbnQubmV4dH1yZXR1cm4gb3V0fTsoZnVuY3Rpb24oKXt0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlU3RhdGUucHJvdG90eXBlLCJidWZmZXIiLHtnZXQ6aW50ZXJuYWxVdGlsLmRlcHJlY2F0ZShmdW5jdGlvbiB3cml0YWJsZVN0YXRlQnVmZmVyR2V0dGVyKCl7cmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCl9LCJfd3JpdGFibGVTdGF0ZS5idWZmZXIgaXMgZGVwcmVjYXRlZC4gVXNlIF93cml0YWJsZVN0YXRlLmdldEJ1ZmZlciAiKyJpbnN0ZWFkLiIsIkRFUDAwMDMiKX0pfWNhdGNoKF8pe319KSgpO3ZhciByZWFsSGFzSW5zdGFuY2U7aWYodHlwZW9mIFN5bWJvbD09PSJmdW5jdGlvbiImJlN5bWJvbC5oYXNJbnN0YW5jZSYmdHlwZW9mIEZ1bmN0aW9uLnByb3RvdHlwZVtTeW1ib2wuaGFzSW5zdGFuY2VdPT09ImZ1bmN0aW9uIil7cmVhbEhhc0luc3RhbmNlPUZ1bmN0aW9uLnByb3RvdHlwZVtTeW1ib2wuaGFzSW5zdGFuY2VdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSxTeW1ib2wuaGFzSW5zdGFuY2Use3ZhbHVlOmZ1bmN0aW9uIHZhbHVlKG9iamVjdCl7aWYocmVhbEhhc0luc3RhbmNlLmNhbGwodGhpcyxvYmplY3QpKXJldHVybiB0cnVlO2lmKHRoaXMhPT1Xcml0YWJsZSlyZXR1cm4gZmFsc2U7cmV0dXJuIG9iamVjdCYmb2JqZWN0Ll93cml0YWJsZVN0YXRlIGluc3RhbmNlb2YgV3JpdGFibGVTdGF0ZX19KX1lbHNle3JlYWxIYXNJbnN0YW5jZT1mdW5jdGlvbiByZWFsSGFzSW5zdGFuY2Uob2JqZWN0KXtyZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgdGhpc319ZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucyl7RHVwbGV4PUR1cGxleHx8cmVxdWlyZSgiLi9fc3RyZWFtX2R1cGxleCIpO3ZhciBpc0R1cGxleD10aGlzIGluc3RhbmNlb2YgRHVwbGV4O2lmKCFpc0R1cGxleCYmIXJlYWxIYXNJbnN0YW5jZS5jYWxsKFdyaXRhYmxlLHRoaXMpKXJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7dGhpcy5fd3JpdGFibGVTdGF0ZT1uZXcgV3JpdGFibGVTdGF0ZShvcHRpb25zLHRoaXMsaXNEdXBsZXgpO3RoaXMud3JpdGFibGU9dHJ1ZTtpZihvcHRpb25zKXtpZih0eXBlb2Ygb3B0aW9ucy53cml0ZT09PSJmdW5jdGlvbiIpdGhpcy5fd3JpdGU9b3B0aW9ucy53cml0ZTtpZih0eXBlb2Ygb3B0aW9ucy53cml0ZXY9PT0iZnVuY3Rpb24iKXRoaXMuX3dyaXRldj1vcHRpb25zLndyaXRldjtpZih0eXBlb2Ygb3B0aW9ucy5kZXN0cm95PT09ImZ1bmN0aW9uIil0aGlzLl9kZXN0cm95PW9wdGlvbnMuZGVzdHJveTtpZih0eXBlb2Ygb3B0aW9ucy5maW5hbD09PSJmdW5jdGlvbiIpdGhpcy5fZmluYWw9b3B0aW9ucy5maW5hbH1TdHJlYW0uY2FsbCh0aGlzKX1Xcml0YWJsZS5wcm90b3R5cGUucGlwZT1mdW5jdGlvbigpe2Vycm9yT3JEZXN0cm95KHRoaXMsbmV3IEVSUl9TVFJFQU1fQ0FOTk9UX1BJUEUpfTtmdW5jdGlvbiB3cml0ZUFmdGVyRW5kKHN0cmVhbSxjYil7dmFyIGVyPW5ldyBFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORDtlcnJvck9yRGVzdHJveShzdHJlYW0sZXIpO3Byb2Nlc3MubmV4dFRpY2soY2IsZXIpfWZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLHN0YXRlLGNodW5rLGNiKXt2YXIgZXI7aWYoY2h1bms9PT1udWxsKXtlcj1uZXcgRVJSX1NUUkVBTV9OVUxMX1ZBTFVFU31lbHNlIGlmKHR5cGVvZiBjaHVuayE9PSJzdHJpbmciJiYhc3RhdGUub2JqZWN0TW9kZSl7ZXI9bmV3IEVSUl9JTlZBTElEX0FSR19UWVBFKCJjaHVuayIsWyJzdHJpbmciLCJCdWZmZXIiXSxjaHVuayl9aWYoZXIpe2Vycm9yT3JEZXN0cm95KHN0cmVhbSxlcik7cHJvY2Vzcy5uZXh0VGljayhjYixlcik7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfVdyaXRhYmxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihjaHVuayxlbmNvZGluZyxjYil7dmFyIHN0YXRlPXRoaXMuX3dyaXRhYmxlU3RhdGU7dmFyIHJldD1mYWxzZTt2YXIgaXNCdWY9IXN0YXRlLm9iamVjdE1vZGUmJl9pc1VpbnQ4QXJyYXkoY2h1bmspO2lmKGlzQnVmJiYhQnVmZmVyLmlzQnVmZmVyKGNodW5rKSl7Y2h1bms9X3VpbnQ4QXJyYXlUb0J1ZmZlcihjaHVuayl9aWYodHlwZW9mIGVuY29kaW5nPT09ImZ1bmN0aW9uIil7Y2I9ZW5jb2Rpbmc7ZW5jb2Rpbmc9bnVsbH1pZihpc0J1ZillbmNvZGluZz0iYnVmZmVyIjtlbHNlIGlmKCFlbmNvZGluZyllbmNvZGluZz1zdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7aWYodHlwZW9mIGNiIT09ImZ1bmN0aW9uIiljYj1ub3A7aWYoc3RhdGUuZW5kaW5nKXdyaXRlQWZ0ZXJFbmQodGhpcyxjYik7ZWxzZSBpZihpc0J1Znx8dmFsaWRDaHVuayh0aGlzLHN0YXRlLGNodW5rLGNiKSl7c3RhdGUucGVuZGluZ2NiKys7cmV0PXdyaXRlT3JCdWZmZXIodGhpcyxzdGF0ZSxpc0J1ZixjaHVuayxlbmNvZGluZyxjYil9cmV0dXJuIHJldH07V3JpdGFibGUucHJvdG90eXBlLmNvcms9ZnVuY3Rpb24oKXt0aGlzLl93cml0YWJsZVN0YXRlLmNvcmtlZCsrfTtXcml0YWJsZS5wcm90b3R5cGUudW5jb3JrPWZ1bmN0aW9uKCl7dmFyIHN0YXRlPXRoaXMuX3dyaXRhYmxlU3RhdGU7aWYoc3RhdGUuY29ya2VkKXtzdGF0ZS5jb3JrZWQtLTtpZighc3RhdGUud3JpdGluZyYmIXN0YXRlLmNvcmtlZCYmIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcmJnN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCljbGVhckJ1ZmZlcih0aGlzLHN0YXRlKX19O1dyaXRhYmxlLnByb3RvdHlwZS5zZXREZWZhdWx0RW5jb2Rpbmc9ZnVuY3Rpb24gc2V0RGVmYXVsdEVuY29kaW5nKGVuY29kaW5nKXtpZih0eXBlb2YgZW5jb2Rpbmc9PT0ic3RyaW5nIillbmNvZGluZz1lbmNvZGluZy50b0xvd2VyQ2FzZSgpO2lmKCEoWyJoZXgiLCJ1dGY4IiwidXRmLTgiLCJhc2NpaSIsImJpbmFyeSIsImJhc2U2NCIsInVjczIiLCJ1Y3MtMiIsInV0ZjE2bGUiLCJ1dGYtMTZsZSIsInJhdyJdLmluZGV4T2YoKGVuY29kaW5nKyIiKS50b0xvd2VyQ2FzZSgpKT4tMSkpdGhyb3cgbmV3IEVSUl9VTktOT1dOX0VOQ09ESU5HKGVuY29kaW5nKTt0aGlzLl93cml0YWJsZVN0YXRlLmRlZmF1bHRFbmNvZGluZz1lbmNvZGluZztyZXR1cm4gdGhpc307T2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLnByb3RvdHlwZSwid3JpdGFibGVCdWZmZXIiLHtlbnVtZXJhYmxlOmZhbHNlLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZSYmdGhpcy5fd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIoKX19KTtmdW5jdGlvbiBkZWNvZGVDaHVuayhzdGF0ZSxjaHVuayxlbmNvZGluZyl7aWYoIXN0YXRlLm9iamVjdE1vZGUmJnN0YXRlLmRlY29kZVN0cmluZ3MhPT1mYWxzZSYmdHlwZW9mIGNodW5rPT09InN0cmluZyIpe2NodW5rPUJ1ZmZlci5mcm9tKGNodW5rLGVuY29kaW5nKX1yZXR1cm4gY2h1bmt9T2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLnByb3RvdHlwZSwid3JpdGFibGVIaWdoV2F0ZXJNYXJrIix7ZW51bWVyYWJsZTpmYWxzZSxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUuaGlnaFdhdGVyTWFya319KTtmdW5jdGlvbiB3cml0ZU9yQnVmZmVyKHN0cmVhbSxzdGF0ZSxpc0J1ZixjaHVuayxlbmNvZGluZyxjYil7aWYoIWlzQnVmKXt2YXIgbmV3Q2h1bms9ZGVjb2RlQ2h1bmsoc3RhdGUsY2h1bmssZW5jb2RpbmcpO2lmKGNodW5rIT09bmV3Q2h1bmspe2lzQnVmPXRydWU7ZW5jb2Rpbmc9ImJ1ZmZlciI7Y2h1bms9bmV3Q2h1bmt9fXZhciBsZW49c3RhdGUub2JqZWN0TW9kZT8xOmNodW5rLmxlbmd0aDtzdGF0ZS5sZW5ndGgrPWxlbjt2YXIgcmV0PXN0YXRlLmxlbmd0aDxzdGF0ZS5oaWdoV2F0ZXJNYXJrO2lmKCFyZXQpc3RhdGUubmVlZERyYWluPXRydWU7aWYoc3RhdGUud3JpdGluZ3x8c3RhdGUuY29ya2VkKXt2YXIgbGFzdD1zdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0O3N0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q9e2NodW5rOmNodW5rLGVuY29kaW5nOmVuY29kaW5nLGlzQnVmOmlzQnVmLGNhbGxiYWNrOmNiLG5leHQ6bnVsbH07aWYobGFzdCl7bGFzdC5uZXh0PXN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3R9ZWxzZXtzdGF0ZS5idWZmZXJlZFJlcXVlc3Q9c3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdH1zdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudCs9MX1lbHNle2RvV3JpdGUoc3RyZWFtLHN0YXRlLGZhbHNlLGxlbixjaHVuayxlbmNvZGluZyxjYil9cmV0dXJuIHJldH1mdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSxzdGF0ZSx3cml0ZXYsbGVuLGNodW5rLGVuY29kaW5nLGNiKXtzdGF0ZS53cml0ZWxlbj1sZW47c3RhdGUud3JpdGVjYj1jYjtzdGF0ZS53cml0aW5nPXRydWU7c3RhdGUuc3luYz10cnVlO2lmKHN0YXRlLmRlc3Ryb3llZClzdGF0ZS5vbndyaXRlKG5ldyBFUlJfU1RSRUFNX0RFU1RST1lFRCgid3JpdGUiKSk7ZWxzZSBpZih3cml0ZXYpc3RyZWFtLl93cml0ZXYoY2h1bmssc3RhdGUub253cml0ZSk7ZWxzZSBzdHJlYW0uX3dyaXRlKGNodW5rLGVuY29kaW5nLHN0YXRlLm9ud3JpdGUpO3N0YXRlLnN5bmM9ZmFsc2V9ZnVuY3Rpb24gb253cml0ZUVycm9yKHN0cmVhbSxzdGF0ZSxzeW5jLGVyLGNiKXstLXN0YXRlLnBlbmRpbmdjYjtpZihzeW5jKXtwcm9jZXNzLm5leHRUaWNrKGNiLGVyKTtwcm9jZXNzLm5leHRUaWNrKGZpbmlzaE1heWJlLHN0cmVhbSxzdGF0ZSk7c3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZD10cnVlO2Vycm9yT3JEZXN0cm95KHN0cmVhbSxlcil9ZWxzZXtjYihlcik7c3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZD10cnVlO2Vycm9yT3JEZXN0cm95KHN0cmVhbSxlcik7ZmluaXNoTWF5YmUoc3RyZWFtLHN0YXRlKX19ZnVuY3Rpb24gb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlKXtzdGF0ZS53cml0aW5nPWZhbHNlO3N0YXRlLndyaXRlY2I9bnVsbDtzdGF0ZS5sZW5ndGgtPXN0YXRlLndyaXRlbGVuO3N0YXRlLndyaXRlbGVuPTB9ZnVuY3Rpb24gb253cml0ZShzdHJlYW0sZXIpe3ZhciBzdGF0ZT1zdHJlYW0uX3dyaXRhYmxlU3RhdGU7dmFyIHN5bmM9c3RhdGUuc3luYzt2YXIgY2I9c3RhdGUud3JpdGVjYjtpZih0eXBlb2YgY2IhPT0iZnVuY3Rpb24iKXRocm93IG5ldyBFUlJfTVVMVElQTEVfQ0FMTEJBQ0s7b253cml0ZVN0YXRlVXBkYXRlKHN0YXRlKTtpZihlcilvbndyaXRlRXJyb3Ioc3RyZWFtLHN0YXRlLHN5bmMsZXIsY2IpO2Vsc2V7dmFyIGZpbmlzaGVkPW5lZWRGaW5pc2goc3RhdGUpfHxzdHJlYW0uZGVzdHJveWVkO2lmKCFmaW5pc2hlZCYmIXN0YXRlLmNvcmtlZCYmIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcmJnN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCl7Y2xlYXJCdWZmZXIoc3RyZWFtLHN0YXRlKX1pZihzeW5jKXtwcm9jZXNzLm5leHRUaWNrKGFmdGVyV3JpdGUsc3RyZWFtLHN0YXRlLGZpbmlzaGVkLGNiKX1lbHNle2FmdGVyV3JpdGUoc3RyZWFtLHN0YXRlLGZpbmlzaGVkLGNiKX19fWZ1bmN0aW9uIGFmdGVyV3JpdGUoc3RyZWFtLHN0YXRlLGZpbmlzaGVkLGNiKXtpZighZmluaXNoZWQpb253cml0ZURyYWluKHN0cmVhbSxzdGF0ZSk7c3RhdGUucGVuZGluZ2NiLS07Y2IoKTtmaW5pc2hNYXliZShzdHJlYW0sc3RhdGUpfWZ1bmN0aW9uIG9ud3JpdGVEcmFpbihzdHJlYW0sc3RhdGUpe2lmKHN0YXRlLmxlbmd0aD09PTAmJnN0YXRlLm5lZWREcmFpbil7c3RhdGUubmVlZERyYWluPWZhbHNlO3N0cmVhbS5lbWl0KCJkcmFpbiIpfX1mdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sc3RhdGUpe3N0YXRlLmJ1ZmZlclByb2Nlc3Npbmc9dHJ1ZTt2YXIgZW50cnk9c3RhdGUuYnVmZmVyZWRSZXF1ZXN0O2lmKHN0cmVhbS5fd3JpdGV2JiZlbnRyeSYmZW50cnkubmV4dCl7dmFyIGw9c3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQ7dmFyIGJ1ZmZlcj1uZXcgQXJyYXkobCk7dmFyIGhvbGRlcj1zdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWU7aG9sZGVyLmVudHJ5PWVudHJ5O3ZhciBjb3VudD0wO3ZhciBhbGxCdWZmZXJzPXRydWU7d2hpbGUoZW50cnkpe2J1ZmZlcltjb3VudF09ZW50cnk7aWYoIWVudHJ5LmlzQnVmKWFsbEJ1ZmZlcnM9ZmFsc2U7ZW50cnk9ZW50cnkubmV4dDtjb3VudCs9MX1idWZmZXIuYWxsQnVmZmVycz1hbGxCdWZmZXJzO2RvV3JpdGUoc3RyZWFtLHN0YXRlLHRydWUsc3RhdGUubGVuZ3RoLGJ1ZmZlciwiIixob2xkZXIuZmluaXNoKTtzdGF0ZS5wZW5kaW5nY2IrKztzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0PW51bGw7aWYoaG9sZGVyLm5leHQpe3N0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZT1ob2xkZXIubmV4dDtob2xkZXIubmV4dD1udWxsfWVsc2V7c3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlPW5ldyBDb3JrZWRSZXF1ZXN0KHN0YXRlKX1zdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudD0wfWVsc2V7d2hpbGUoZW50cnkpe3ZhciBjaHVuaz1lbnRyeS5jaHVuazt2YXIgZW5jb2Rpbmc9ZW50cnkuZW5jb2Rpbmc7dmFyIGNiPWVudHJ5LmNhbGxiYWNrO3ZhciBsZW49c3RhdGUub2JqZWN0TW9kZT8xOmNodW5rLmxlbmd0aDtkb1dyaXRlKHN0cmVhbSxzdGF0ZSxmYWxzZSxsZW4sY2h1bmssZW5jb2RpbmcsY2IpO2VudHJ5PWVudHJ5Lm5leHQ7c3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQtLTtpZihzdGF0ZS53cml0aW5nKXticmVha319aWYoZW50cnk9PT1udWxsKXN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q9bnVsbH1zdGF0ZS5idWZmZXJlZFJlcXVlc3Q9ZW50cnk7c3RhdGUuYnVmZmVyUHJvY2Vzc2luZz1mYWxzZX1Xcml0YWJsZS5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKGNodW5rLGVuY29kaW5nLGNiKXtjYihuZXcgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQoIl93cml0ZSgpIikpfTtXcml0YWJsZS5wcm90b3R5cGUuX3dyaXRldj1udWxsO1dyaXRhYmxlLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oY2h1bmssZW5jb2RpbmcsY2Ipe3ZhciBzdGF0ZT10aGlzLl93cml0YWJsZVN0YXRlO2lmKHR5cGVvZiBjaHVuaz09PSJmdW5jdGlvbiIpe2NiPWNodW5rO2NodW5rPW51bGw7ZW5jb2Rpbmc9bnVsbH1lbHNlIGlmKHR5cGVvZiBlbmNvZGluZz09PSJmdW5jdGlvbiIpe2NiPWVuY29kaW5nO2VuY29kaW5nPW51bGx9aWYoY2h1bmshPT1udWxsJiZjaHVuayE9PXVuZGVmaW5lZCl0aGlzLndyaXRlKGNodW5rLGVuY29kaW5nKTtpZihzdGF0ZS5jb3JrZWQpe3N0YXRlLmNvcmtlZD0xO3RoaXMudW5jb3JrKCl9aWYoIXN0YXRlLmVuZGluZyllbmRXcml0YWJsZSh0aGlzLHN0YXRlLGNiKTtyZXR1cm4gdGhpc307T2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLnByb3RvdHlwZSwid3JpdGFibGVMZW5ndGgiLHtlbnVtZXJhYmxlOmZhbHNlLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5sZW5ndGh9fSk7ZnVuY3Rpb24gbmVlZEZpbmlzaChzdGF0ZSl7cmV0dXJuIHN0YXRlLmVuZGluZyYmc3RhdGUubGVuZ3RoPT09MCYmc3RhdGUuYnVmZmVyZWRSZXF1ZXN0PT09bnVsbCYmIXN0YXRlLmZpbmlzaGVkJiYhc3RhdGUud3JpdGluZ31mdW5jdGlvbiBjYWxsRmluYWwoc3RyZWFtLHN0YXRlKXtzdHJlYW0uX2ZpbmFsKGZ1bmN0aW9uKGVycil7c3RhdGUucGVuZGluZ2NiLS07aWYoZXJyKXtlcnJvck9yRGVzdHJveShzdHJlYW0sZXJyKX1zdGF0ZS5wcmVmaW5pc2hlZD10cnVlO3N0cmVhbS5lbWl0KCJwcmVmaW5pc2giKTtmaW5pc2hNYXliZShzdHJlYW0sc3RhdGUpfSl9ZnVuY3Rpb24gcHJlZmluaXNoKHN0cmVhbSxzdGF0ZSl7aWYoIXN0YXRlLnByZWZpbmlzaGVkJiYhc3RhdGUuZmluYWxDYWxsZWQpe2lmKHR5cGVvZiBzdHJlYW0uX2ZpbmFsPT09ImZ1bmN0aW9uIiYmIXN0YXRlLmRlc3Ryb3llZCl7c3RhdGUucGVuZGluZ2NiKys7c3RhdGUuZmluYWxDYWxsZWQ9dHJ1ZTtwcm9jZXNzLm5leHRUaWNrKGNhbGxGaW5hbCxzdHJlYW0sc3RhdGUpfWVsc2V7c3RhdGUucHJlZmluaXNoZWQ9dHJ1ZTtzdHJlYW0uZW1pdCgicHJlZmluaXNoIil9fX1mdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sc3RhdGUpe3ZhciBuZWVkPW5lZWRGaW5pc2goc3RhdGUpO2lmKG5lZWQpe3ByZWZpbmlzaChzdHJlYW0sc3RhdGUpO2lmKHN0YXRlLnBlbmRpbmdjYj09PTApe3N0YXRlLmZpbmlzaGVkPXRydWU7c3RyZWFtLmVtaXQoImZpbmlzaCIpO2lmKHN0YXRlLmF1dG9EZXN0cm95KXt2YXIgclN0YXRlPXN0cmVhbS5fcmVhZGFibGVTdGF0ZTtpZighclN0YXRlfHxyU3RhdGUuYXV0b0Rlc3Ryb3kmJnJTdGF0ZS5lbmRFbWl0dGVkKXtzdHJlYW0uZGVzdHJveSgpfX19fXJldHVybiBuZWVkfWZ1bmN0aW9uIGVuZFdyaXRhYmxlKHN0cmVhbSxzdGF0ZSxjYil7c3RhdGUuZW5kaW5nPXRydWU7ZmluaXNoTWF5YmUoc3RyZWFtLHN0YXRlKTtpZihjYil7aWYoc3RhdGUuZmluaXNoZWQpcHJvY2Vzcy5uZXh0VGljayhjYik7ZWxzZSBzdHJlYW0ub25jZSgiZmluaXNoIixjYil9c3RhdGUuZW5kZWQ9dHJ1ZTtzdHJlYW0ud3JpdGFibGU9ZmFsc2V9ZnVuY3Rpb24gb25Db3JrZWRGaW5pc2goY29ya1JlcSxzdGF0ZSxlcnIpe3ZhciBlbnRyeT1jb3JrUmVxLmVudHJ5O2NvcmtSZXEuZW50cnk9bnVsbDt3aGlsZShlbnRyeSl7dmFyIGNiPWVudHJ5LmNhbGxiYWNrO3N0YXRlLnBlbmRpbmdjYi0tO2NiKGVycik7ZW50cnk9ZW50cnkubmV4dH1zdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUubmV4dD1jb3JrUmVxfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsImRlc3Ryb3llZCIse2VudW1lcmFibGU6ZmFsc2UsZ2V0OmZ1bmN0aW9uIGdldCgpe2lmKHRoaXMuX3dyaXRhYmxlU3RhdGU9PT11bmRlZmluZWQpe3JldHVybiBmYWxzZX1yZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWR9LHNldDpmdW5jdGlvbiBzZXQodmFsdWUpe2lmKCF0aGlzLl93cml0YWJsZVN0YXRlKXtyZXR1cm59dGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQ9dmFsdWV9fSk7V3JpdGFibGUucHJvdG90eXBlLmRlc3Ryb3k9ZGVzdHJveUltcGwuZGVzdHJveTtXcml0YWJsZS5wcm90b3R5cGUuX3VuZGVzdHJveT1kZXN0cm95SW1wbC51bmRlc3Ryb3k7V3JpdGFibGUucHJvdG90eXBlLl9kZXN0cm95PWZ1bmN0aW9uKGVycixjYil7Y2IoZXJyKX19KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHJlcXVpcmUoIl9wcm9jZXNzIiksdHlwZW9mIGdsb2JhbCE9PSJ1bmRlZmluZWQiP2dsb2JhbDp0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSl9LHsiLi4vZXJyb3JzIjo1OSwiLi9fc3RyZWFtX2R1cGxleCI6NjAsIi4vaW50ZXJuYWwvc3RyZWFtcy9kZXN0cm95Ijo2NywiLi9pbnRlcm5hbC9zdHJlYW1zL3N0YXRlIjo3MSwiLi9pbnRlcm5hbC9zdHJlYW1zL3N0cmVhbSI6NzIsX3Byb2Nlc3M6MzksYnVmZmVyOjgsaW5oZXJpdHM6MjksInV0aWwtZGVwcmVjYXRlIjo5NH1dLDY1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2Vzcyl7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBfT2JqZWN0JHNldFByb3RvdHlwZU87ZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaixrZXksdmFsdWUpe2tleT1fdG9Qcm9wZXJ0eUtleShrZXkpO2lmKGtleSBpbiBvYmope09iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHt2YWx1ZTp2YWx1ZSxlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pfWVsc2V7b2JqW2tleV09dmFsdWV9cmV0dXJuIG9ian1mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpe3ZhciBrZXk9X3RvUHJpbWl0aXZlKGFyZywic3RyaW5nIik7cmV0dXJuIHR5cGVvZiBrZXk9PT0ic3ltYm9sIj9rZXk6U3RyaW5nKGtleSl9ZnVuY3Rpb24gX3RvUHJpbWl0aXZlKGlucHV0LGhpbnQpe2lmKHR5cGVvZiBpbnB1dCE9PSJvYmplY3QifHxpbnB1dD09PW51bGwpcmV0dXJuIGlucHV0O3ZhciBwcmltPWlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07aWYocHJpbSE9PXVuZGVmaW5lZCl7dmFyIHJlcz1wcmltLmNhbGwoaW5wdXQsaGludHx8ImRlZmF1bHQiKTtpZih0eXBlb2YgcmVzIT09Im9iamVjdCIpcmV0dXJuIHJlczt0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpfXJldHVybihoaW50PT09InN0cmluZyI/U3RyaW5nOk51bWJlcikoaW5wdXQpfXZhciBmaW5pc2hlZD1yZXF1aXJlKCIuL2VuZC1vZi1zdHJlYW0iKTt2YXIga0xhc3RSZXNvbHZlPVN5bWJvbCgibGFzdFJlc29sdmUiKTt2YXIga0xhc3RSZWplY3Q9U3ltYm9sKCJsYXN0UmVqZWN0Iik7dmFyIGtFcnJvcj1TeW1ib2woImVycm9yIik7dmFyIGtFbmRlZD1TeW1ib2woImVuZGVkIik7dmFyIGtMYXN0UHJvbWlzZT1TeW1ib2woImxhc3RQcm9taXNlIik7dmFyIGtIYW5kbGVQcm9taXNlPVN5bWJvbCgiaGFuZGxlUHJvbWlzZSIpO3ZhciBrU3RyZWFtPVN5bWJvbCgic3RyZWFtIik7ZnVuY3Rpb24gY3JlYXRlSXRlclJlc3VsdCh2YWx1ZSxkb25lKXtyZXR1cm57dmFsdWU6dmFsdWUsZG9uZTpkb25lfX1mdW5jdGlvbiByZWFkQW5kUmVzb2x2ZShpdGVyKXt2YXIgcmVzb2x2ZT1pdGVyW2tMYXN0UmVzb2x2ZV07aWYocmVzb2x2ZSE9PW51bGwpe3ZhciBkYXRhPWl0ZXJba1N0cmVhbV0ucmVhZCgpO2lmKGRhdGEhPT1udWxsKXtpdGVyW2tMYXN0UHJvbWlzZV09bnVsbDtpdGVyW2tMYXN0UmVzb2x2ZV09bnVsbDtpdGVyW2tMYXN0UmVqZWN0XT1udWxsO3Jlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLGZhbHNlKSl9fX1mdW5jdGlvbiBvblJlYWRhYmxlKGl0ZXIpe3Byb2Nlc3MubmV4dFRpY2socmVhZEFuZFJlc29sdmUsaXRlcil9ZnVuY3Rpb24gd3JhcEZvck5leHQobGFzdFByb21pc2UsaXRlcil7cmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtsYXN0UHJvbWlzZS50aGVuKGZ1bmN0aW9uKCl7aWYoaXRlcltrRW5kZWRdKXtyZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQodW5kZWZpbmVkLHRydWUpKTtyZXR1cm59aXRlcltrSGFuZGxlUHJvbWlzZV0ocmVzb2x2ZSxyZWplY3QpfSxyZWplY3QpfX12YXIgQXN5bmNJdGVyYXRvclByb3RvdHlwZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZnVuY3Rpb24oKXt9KTt2YXIgUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yUHJvdG90eXBlPU9iamVjdC5zZXRQcm90b3R5cGVPZigoX09iamVjdCRzZXRQcm90b3R5cGVPPXtnZXQgc3RyZWFtKCl7cmV0dXJuIHRoaXNba1N0cmVhbV19LG5leHQ6ZnVuY3Rpb24gbmV4dCgpe3ZhciBfdGhpcz10aGlzO3ZhciBlcnJvcj10aGlzW2tFcnJvcl07aWYoZXJyb3IhPT1udWxsKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpfWlmKHRoaXNba0VuZGVkXSl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCx0cnVlKSl9aWYodGhpc1trU3RyZWFtXS5kZXN0cm95ZWQpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7cHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpe2lmKF90aGlzW2tFcnJvcl0pe3JlamVjdChfdGhpc1trRXJyb3JdKX1lbHNle3Jlc29sdmUoY3JlYXRlSXRlclJlc3VsdCh1bmRlZmluZWQsdHJ1ZSkpfX0pfSl9dmFyIGxhc3RQcm9taXNlPXRoaXNba0xhc3RQcm9taXNlXTt2YXIgcHJvbWlzZTtpZihsYXN0UHJvbWlzZSl7cHJvbWlzZT1uZXcgUHJvbWlzZSh3cmFwRm9yTmV4dChsYXN0UHJvbWlzZSx0aGlzKSl9ZWxzZXt2YXIgZGF0YT10aGlzW2tTdHJlYW1dLnJlYWQoKTtpZihkYXRhIT09bnVsbCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KGRhdGEsZmFsc2UpKX1wcm9taXNlPW5ldyBQcm9taXNlKHRoaXNba0hhbmRsZVByb21pc2VdKX10aGlzW2tMYXN0UHJvbWlzZV09cHJvbWlzZTtyZXR1cm4gcHJvbWlzZX19LF9kZWZpbmVQcm9wZXJ0eShfT2JqZWN0JHNldFByb3RvdHlwZU8sU3ltYm9sLmFzeW5jSXRlcmF0b3IsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLF9kZWZpbmVQcm9wZXJ0eShfT2JqZWN0JHNldFByb3RvdHlwZU8sInJldHVybiIsZnVuY3Rpb24gX3JldHVybigpe3ZhciBfdGhpczI9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe190aGlzMltrU3RyZWFtXS5kZXN0cm95KG51bGwsZnVuY3Rpb24oZXJyKXtpZihlcnIpe3JlamVjdChlcnIpO3JldHVybn1yZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQodW5kZWZpbmVkLHRydWUpKX0pfSl9KSxfT2JqZWN0JHNldFByb3RvdHlwZU8pLEFzeW5jSXRlcmF0b3JQcm90b3R5cGUpO3ZhciBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I9ZnVuY3Rpb24gY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yKHN0cmVhbSl7dmFyIF9PYmplY3QkY3JlYXRlO3ZhciBpdGVyYXRvcj1PYmplY3QuY3JlYXRlKFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvclByb3RvdHlwZSwoX09iamVjdCRjcmVhdGU9e30sX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLGtTdHJlYW0se3ZhbHVlOnN0cmVhbSx3cml0YWJsZTp0cnVlfSksX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLGtMYXN0UmVzb2x2ZSx7dmFsdWU6bnVsbCx3cml0YWJsZTp0cnVlfSksX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLGtMYXN0UmVqZWN0LHt2YWx1ZTpudWxsLHdyaXRhYmxlOnRydWV9KSxfZGVmaW5lUHJvcGVydHkoX09iamVjdCRjcmVhdGUsa0Vycm9yLHt2YWx1ZTpudWxsLHdyaXRhYmxlOnRydWV9KSxfZGVmaW5lUHJvcGVydHkoX09iamVjdCRjcmVhdGUsa0VuZGVkLHt2YWx1ZTpzdHJlYW0uX3JlYWRhYmxlU3RhdGUuZW5kRW1pdHRlZCx3cml0YWJsZTp0cnVlfSksX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLGtIYW5kbGVQcm9taXNlLHt2YWx1ZTpmdW5jdGlvbiB2YWx1ZShyZXNvbHZlLHJlamVjdCl7dmFyIGRhdGE9aXRlcmF0b3Jba1N0cmVhbV0ucmVhZCgpO2lmKGRhdGEpe2l0ZXJhdG9yW2tMYXN0UHJvbWlzZV09bnVsbDtpdGVyYXRvcltrTGFzdFJlc29sdmVdPW51bGw7aXRlcmF0b3Jba0xhc3RSZWplY3RdPW51bGw7cmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KGRhdGEsZmFsc2UpKX1lbHNle2l0ZXJhdG9yW2tMYXN0UmVzb2x2ZV09cmVzb2x2ZTtpdGVyYXRvcltrTGFzdFJlamVjdF09cmVqZWN0fX0sd3JpdGFibGU6dHJ1ZX0pLF9PYmplY3QkY3JlYXRlKSk7aXRlcmF0b3Jba0xhc3RQcm9taXNlXT1udWxsO2ZpbmlzaGVkKHN0cmVhbSxmdW5jdGlvbihlcnIpe2lmKGVyciYmZXJyLmNvZGUhPT0iRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0UiKXt2YXIgcmVqZWN0PWl0ZXJhdG9yW2tMYXN0UmVqZWN0XTtpZihyZWplY3QhPT1udWxsKXtpdGVyYXRvcltrTGFzdFByb21pc2VdPW51bGw7aXRlcmF0b3Jba0xhc3RSZXNvbHZlXT1udWxsO2l0ZXJhdG9yW2tMYXN0UmVqZWN0XT1udWxsO3JlamVjdChlcnIpfWl0ZXJhdG9yW2tFcnJvcl09ZXJyO3JldHVybn12YXIgcmVzb2x2ZT1pdGVyYXRvcltrTGFzdFJlc29sdmVdO2lmKHJlc29sdmUhPT1udWxsKXtpdGVyYXRvcltrTGFzdFByb21pc2VdPW51bGw7aXRlcmF0b3Jba0xhc3RSZXNvbHZlXT1udWxsO2l0ZXJhdG9yW2tMYXN0UmVqZWN0XT1udWxsO3Jlc29sdmUoY3JlYXRlSXRlclJlc3VsdCh1bmRlZmluZWQsdHJ1ZSkpfWl0ZXJhdG9yW2tFbmRlZF09dHJ1ZX0pO3N0cmVhbS5vbigicmVhZGFibGUiLG9uUmVhZGFibGUuYmluZChudWxsLGl0ZXJhdG9yKSk7cmV0dXJuIGl0ZXJhdG9yfTttb2R1bGUuZXhwb3J0cz1jcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3J9KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHJlcXVpcmUoIl9wcm9jZXNzIikpfSx7Ii4vZW5kLW9mLXN0cmVhbSI6NjgsX3Byb2Nlc3M6Mzl9XSw2NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG93bktleXMob2JqZWN0LGVudW1lcmFibGVPbmx5KXt2YXIga2V5cz1PYmplY3Qua2V5cyhvYmplY3QpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBzeW1ib2xzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTtlbnVtZXJhYmxlT25seSYmKHN5bWJvbHM9c3ltYm9scy5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3Qsc3ltKS5lbnVtZXJhYmxlfSkpLGtleXMucHVzaC5hcHBseShrZXlzLHN5bWJvbHMpfXJldHVybiBrZXlzfWZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KXtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPW51bGwhPWFyZ3VtZW50c1tpXT9hcmd1bWVudHNbaV06e307aSUyP293bktleXMoT2JqZWN0KHNvdXJjZSksITApLmZvckVhY2goZnVuY3Rpb24oa2V5KXtfZGVmaW5lUHJvcGVydHkodGFyZ2V0LGtleSxzb3VyY2Vba2V5XSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk6b3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbihrZXkpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLGtleSkpfSl9cmV0dXJuIHRhcmdldH1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLGtleSx2YWx1ZSl7a2V5PV90b1Byb3BlcnR5S2V5KGtleSk7aWYoa2V5IGluIG9iail7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbHVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSl9ZWxzZXtvYmpba2V5XT12YWx1ZX1yZXR1cm4gb2JqfWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSxDb25zdHJ1Y3Rvcil7aWYoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSxkZXNjcmlwdG9yKX19ZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsInByb3RvdHlwZSIse3dyaXRhYmxlOmZhbHNlfSk7cmV0dXJuIENvbnN0cnVjdG9yfWZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZyl7dmFyIGtleT1fdG9QcmltaXRpdmUoYXJnLCJzdHJpbmciKTtyZXR1cm4gdHlwZW9mIGtleT09PSJzeW1ib2wiP2tleTpTdHJpbmcoa2V5KX1mdW5jdGlvbiBfdG9QcmltaXRpdmUoaW5wdXQsaGludCl7aWYodHlwZW9mIGlucHV0IT09Im9iamVjdCJ8fGlucHV0PT09bnVsbClyZXR1cm4gaW5wdXQ7dmFyIHByaW09aW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTtpZihwcmltIT09dW5kZWZpbmVkKXt2YXIgcmVzPXByaW0uY2FsbChpbnB1dCxoaW50fHwiZGVmYXVsdCIpO2lmKHR5cGVvZiByZXMhPT0ib2JqZWN0IilyZXR1cm4gcmVzO3Rocm93IG5ldyBUeXBlRXJyb3IoIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuIil9cmV0dXJuKGhpbnQ9PT0ic3RyaW5nIj9TdHJpbmc6TnVtYmVyKShpbnB1dCl9dmFyIF9yZXF1aXJlPXJlcXVpcmUoImJ1ZmZlciIpLEJ1ZmZlcj1fcmVxdWlyZS5CdWZmZXI7dmFyIF9yZXF1aXJlMj1yZXF1aXJlKCJ1dGlsIiksaW5zcGVjdD1fcmVxdWlyZTIuaW5zcGVjdDt2YXIgY3VzdG9tPWluc3BlY3QmJmluc3BlY3QuY3VzdG9tfHwiaW5zcGVjdCI7ZnVuY3Rpb24gY29weUJ1ZmZlcihzcmMsdGFyZ2V0LG9mZnNldCl7QnVmZmVyLnByb3RvdHlwZS5jb3B5LmNhbGwoc3JjLHRhcmdldCxvZmZzZXQpfW1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQnVmZmVyTGlzdCgpe19jbGFzc0NhbGxDaGVjayh0aGlzLEJ1ZmZlckxpc3QpO3RoaXMuaGVhZD1udWxsO3RoaXMudGFpbD1udWxsO3RoaXMubGVuZ3RoPTB9X2NyZWF0ZUNsYXNzKEJ1ZmZlckxpc3QsW3trZXk6InB1c2giLHZhbHVlOmZ1bmN0aW9uIHB1c2godil7dmFyIGVudHJ5PXtkYXRhOnYsbmV4dDpudWxsfTtpZih0aGlzLmxlbmd0aD4wKXRoaXMudGFpbC5uZXh0PWVudHJ5O2Vsc2UgdGhpcy5oZWFkPWVudHJ5O3RoaXMudGFpbD1lbnRyeTsrK3RoaXMubGVuZ3RofX0se2tleToidW5zaGlmdCIsdmFsdWU6ZnVuY3Rpb24gdW5zaGlmdCh2KXt2YXIgZW50cnk9e2RhdGE6dixuZXh0OnRoaXMuaGVhZH07aWYodGhpcy5sZW5ndGg9PT0wKXRoaXMudGFpbD1lbnRyeTt0aGlzLmhlYWQ9ZW50cnk7Kyt0aGlzLmxlbmd0aH19LHtrZXk6InNoaWZ0Iix2YWx1ZTpmdW5jdGlvbiBzaGlmdCgpe2lmKHRoaXMubGVuZ3RoPT09MClyZXR1cm47dmFyIHJldD10aGlzLmhlYWQuZGF0YTtpZih0aGlzLmxlbmd0aD09PTEpdGhpcy5oZWFkPXRoaXMudGFpbD1udWxsO2Vsc2UgdGhpcy5oZWFkPXRoaXMuaGVhZC5uZXh0Oy0tdGhpcy5sZW5ndGg7cmV0dXJuIHJldH19LHtrZXk6ImNsZWFyIix2YWx1ZTpmdW5jdGlvbiBjbGVhcigpe3RoaXMuaGVhZD10aGlzLnRhaWw9bnVsbDt0aGlzLmxlbmd0aD0wfX0se2tleToiam9pbiIsdmFsdWU6ZnVuY3Rpb24gam9pbihzKXtpZih0aGlzLmxlbmd0aD09PTApcmV0dXJuIiI7dmFyIHA9dGhpcy5oZWFkO3ZhciByZXQ9IiIrcC5kYXRhO3doaWxlKHA9cC5uZXh0KXJldCs9cytwLmRhdGE7cmV0dXJuIHJldH19LHtrZXk6ImNvbmNhdCIsdmFsdWU6ZnVuY3Rpb24gY29uY2F0KG4pe2lmKHRoaXMubGVuZ3RoPT09MClyZXR1cm4gQnVmZmVyLmFsbG9jKDApO3ZhciByZXQ9QnVmZmVyLmFsbG9jVW5zYWZlKG4+Pj4wKTt2YXIgcD10aGlzLmhlYWQ7dmFyIGk9MDt3aGlsZShwKXtjb3B5QnVmZmVyKHAuZGF0YSxyZXQsaSk7aSs9cC5kYXRhLmxlbmd0aDtwPXAubmV4dH1yZXR1cm4gcmV0fX0se2tleToiY29uc3VtZSIsdmFsdWU6ZnVuY3Rpb24gY29uc3VtZShuLGhhc1N0cmluZ3Mpe3ZhciByZXQ7aWYobjx0aGlzLmhlYWQuZGF0YS5sZW5ndGgpe3JldD10aGlzLmhlYWQuZGF0YS5zbGljZSgwLG4pO3RoaXMuaGVhZC5kYXRhPXRoaXMuaGVhZC5kYXRhLnNsaWNlKG4pfWVsc2UgaWYobj09PXRoaXMuaGVhZC5kYXRhLmxlbmd0aCl7cmV0PXRoaXMuc2hpZnQoKX1lbHNle3JldD1oYXNTdHJpbmdzP3RoaXMuX2dldFN0cmluZyhuKTp0aGlzLl9nZXRCdWZmZXIobil9cmV0dXJuIHJldH19LHtrZXk6ImZpcnN0Iix2YWx1ZTpmdW5jdGlvbiBmaXJzdCgpe3JldHVybiB0aGlzLmhlYWQuZGF0YX19LHtrZXk6Il9nZXRTdHJpbmciLHZhbHVlOmZ1bmN0aW9uIF9nZXRTdHJpbmcobil7dmFyIHA9dGhpcy5oZWFkO3ZhciBjPTE7dmFyIHJldD1wLmRhdGE7bi09cmV0Lmxlbmd0aDt3aGlsZShwPXAubmV4dCl7dmFyIHN0cj1wLmRhdGE7dmFyIG5iPW4+c3RyLmxlbmd0aD9zdHIubGVuZ3RoOm47aWYobmI9PT1zdHIubGVuZ3RoKXJldCs9c3RyO2Vsc2UgcmV0Kz1zdHIuc2xpY2UoMCxuKTtuLT1uYjtpZihuPT09MCl7aWYobmI9PT1zdHIubGVuZ3RoKXsrK2M7aWYocC5uZXh0KXRoaXMuaGVhZD1wLm5leHQ7ZWxzZSB0aGlzLmhlYWQ9dGhpcy50YWlsPW51bGx9ZWxzZXt0aGlzLmhlYWQ9cDtwLmRhdGE9c3RyLnNsaWNlKG5iKX1icmVha30rK2N9dGhpcy5sZW5ndGgtPWM7cmV0dXJuIHJldH19LHtrZXk6Il9nZXRCdWZmZXIiLHZhbHVlOmZ1bmN0aW9uIF9nZXRCdWZmZXIobil7dmFyIHJldD1CdWZmZXIuYWxsb2NVbnNhZmUobik7dmFyIHA9dGhpcy5oZWFkO3ZhciBjPTE7cC5kYXRhLmNvcHkocmV0KTtuLT1wLmRhdGEubGVuZ3RoO3doaWxlKHA9cC5uZXh0KXt2YXIgYnVmPXAuZGF0YTt2YXIgbmI9bj5idWYubGVuZ3RoP2J1Zi5sZW5ndGg6bjtidWYuY29weShyZXQscmV0Lmxlbmd0aC1uLDAsbmIpO24tPW5iO2lmKG49PT0wKXtpZihuYj09PWJ1Zi5sZW5ndGgpeysrYztpZihwLm5leHQpdGhpcy5oZWFkPXAubmV4dDtlbHNlIHRoaXMuaGVhZD10aGlzLnRhaWw9bnVsbH1lbHNle3RoaXMuaGVhZD1wO3AuZGF0YT1idWYuc2xpY2UobmIpfWJyZWFrfSsrY310aGlzLmxlbmd0aC09YztyZXR1cm4gcmV0fX0se2tleTpjdXN0b20sdmFsdWU6ZnVuY3Rpb24gdmFsdWUoXyxvcHRpb25zKXtyZXR1cm4gaW5zcGVjdCh0aGlzLF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSxvcHRpb25zKSx7fSx7ZGVwdGg6MCxjdXN0b21JbnNwZWN0OmZhbHNlfSkpfX1dKTtyZXR1cm4gQnVmZmVyTGlzdH0oKX0se2J1ZmZlcjo4LHV0aWw6N31dLDY3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2Vzcyl7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGRlc3Ryb3koZXJyLGNiKXt2YXIgX3RoaXM9dGhpczt2YXIgcmVhZGFibGVEZXN0cm95ZWQ9dGhpcy5fcmVhZGFibGVTdGF0ZSYmdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ7dmFyIHdyaXRhYmxlRGVzdHJveWVkPXRoaXMuX3dyaXRhYmxlU3RhdGUmJnRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO2lmKHJlYWRhYmxlRGVzdHJveWVkfHx3cml0YWJsZURlc3Ryb3llZCl7aWYoY2Ipe2NiKGVycil9ZWxzZSBpZihlcnIpe2lmKCF0aGlzLl93cml0YWJsZVN0YXRlKXtwcm9jZXNzLm5leHRUaWNrKGVtaXRFcnJvck5ULHRoaXMsZXJyKX1lbHNlIGlmKCF0aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCl7dGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQ9dHJ1ZTtwcm9jZXNzLm5leHRUaWNrKGVtaXRFcnJvck5ULHRoaXMsZXJyKX19cmV0dXJuIHRoaXN9aWYodGhpcy5fcmVhZGFibGVTdGF0ZSl7dGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ9dHJ1ZX1pZih0aGlzLl93cml0YWJsZVN0YXRlKXt0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZD10cnVlfXRoaXMuX2Rlc3Ryb3koZXJyfHxudWxsLGZ1bmN0aW9uKGVycil7aWYoIWNiJiZlcnIpe2lmKCFfdGhpcy5fd3JpdGFibGVTdGF0ZSl7cHJvY2Vzcy5uZXh0VGljayhlbWl0RXJyb3JBbmRDbG9zZU5ULF90aGlzLGVycil9ZWxzZSBpZighX3RoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKXtfdGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQ9dHJ1ZTtwcm9jZXNzLm5leHRUaWNrKGVtaXRFcnJvckFuZENsb3NlTlQsX3RoaXMsZXJyKX1lbHNle3Byb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlTlQsX3RoaXMpfX1lbHNlIGlmKGNiKXtwcm9jZXNzLm5leHRUaWNrKGVtaXRDbG9zZU5ULF90aGlzKTtjYihlcnIpfWVsc2V7cHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2VOVCxfdGhpcyl9fSk7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gZW1pdEVycm9yQW5kQ2xvc2VOVChzZWxmLGVycil7ZW1pdEVycm9yTlQoc2VsZixlcnIpO2VtaXRDbG9zZU5UKHNlbGYpfWZ1bmN0aW9uIGVtaXRDbG9zZU5UKHNlbGYpe2lmKHNlbGYuX3dyaXRhYmxlU3RhdGUmJiFzZWxmLl93cml0YWJsZVN0YXRlLmVtaXRDbG9zZSlyZXR1cm47aWYoc2VsZi5fcmVhZGFibGVTdGF0ZSYmIXNlbGYuX3JlYWRhYmxlU3RhdGUuZW1pdENsb3NlKXJldHVybjtzZWxmLmVtaXQoImNsb3NlIil9ZnVuY3Rpb24gdW5kZXN0cm95KCl7aWYodGhpcy5fcmVhZGFibGVTdGF0ZSl7dGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ9ZmFsc2U7dGhpcy5fcmVhZGFibGVTdGF0ZS5yZWFkaW5nPWZhbHNlO3RoaXMuX3JlYWRhYmxlU3RhdGUuZW5kZWQ9ZmFsc2U7dGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkPWZhbHNlfWlmKHRoaXMuX3dyaXRhYmxlU3RhdGUpe3RoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkPWZhbHNlO3RoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQ9ZmFsc2U7dGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRpbmc9ZmFsc2U7dGhpcy5fd3JpdGFibGVTdGF0ZS5maW5hbENhbGxlZD1mYWxzZTt0aGlzLl93cml0YWJsZVN0YXRlLnByZWZpbmlzaGVkPWZhbHNlO3RoaXMuX3dyaXRhYmxlU3RhdGUuZmluaXNoZWQ9ZmFsc2U7dGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQ9ZmFsc2V9fWZ1bmN0aW9uIGVtaXRFcnJvck5UKHNlbGYsZXJyKXtzZWxmLmVtaXQoImVycm9yIixlcnIpfWZ1bmN0aW9uIGVycm9yT3JEZXN0cm95KHN0cmVhbSxlcnIpe3ZhciByU3RhdGU9c3RyZWFtLl9yZWFkYWJsZVN0YXRlO3ZhciB3U3RhdGU9c3RyZWFtLl93cml0YWJsZVN0YXRlO2lmKHJTdGF0ZSYmclN0YXRlLmF1dG9EZXN0cm95fHx3U3RhdGUmJndTdGF0ZS5hdXRvRGVzdHJveSlzdHJlYW0uZGVzdHJveShlcnIpO2Vsc2Ugc3RyZWFtLmVtaXQoImVycm9yIixlcnIpfW1vZHVsZS5leHBvcnRzPXtkZXN0cm95OmRlc3Ryb3ksdW5kZXN0cm95OnVuZGVzdHJveSxlcnJvck9yRGVzdHJveTplcnJvck9yRGVzdHJveX19KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHJlcXVpcmUoIl9wcm9jZXNzIikpfSx7X3Byb2Nlc3M6Mzl9XSw2ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO3ZhciBFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRT1yZXF1aXJlKCIuLi8uLi8uLi9lcnJvcnMiKS5jb2Rlcy5FUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRTtmdW5jdGlvbiBvbmNlKGNhbGxiYWNrKXt2YXIgY2FsbGVkPWZhbHNlO3JldHVybiBmdW5jdGlvbigpe2lmKGNhbGxlZClyZXR1cm47Y2FsbGVkPXRydWU7Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1uZXcgQXJyYXkoX2xlbiksX2tleT0wO19rZXk8X2xlbjtfa2V5Kyspe2FyZ3NbX2tleV09YXJndW1lbnRzW19rZXldfWNhbGxiYWNrLmFwcGx5KHRoaXMsYXJncyl9fWZ1bmN0aW9uIG5vb3AoKXt9ZnVuY3Rpb24gaXNSZXF1ZXN0KHN0cmVhbSl7cmV0dXJuIHN0cmVhbS5zZXRIZWFkZXImJnR5cGVvZiBzdHJlYW0uYWJvcnQ9PT0iZnVuY3Rpb24ifWZ1bmN0aW9uIGVvcyhzdHJlYW0sb3B0cyxjYWxsYmFjayl7aWYodHlwZW9mIG9wdHM9PT0iZnVuY3Rpb24iKXJldHVybiBlb3Moc3RyZWFtLG51bGwsb3B0cyk7aWYoIW9wdHMpb3B0cz17fTtjYWxsYmFjaz1vbmNlKGNhbGxiYWNrfHxub29wKTt2YXIgcmVhZGFibGU9b3B0cy5yZWFkYWJsZXx8b3B0cy5yZWFkYWJsZSE9PWZhbHNlJiZzdHJlYW0ucmVhZGFibGU7dmFyIHdyaXRhYmxlPW9wdHMud3JpdGFibGV8fG9wdHMud3JpdGFibGUhPT1mYWxzZSYmc3RyZWFtLndyaXRhYmxlO3ZhciBvbmxlZ2FjeWZpbmlzaD1mdW5jdGlvbiBvbmxlZ2FjeWZpbmlzaCgpe2lmKCFzdHJlYW0ud3JpdGFibGUpb25maW5pc2goKX07dmFyIHdyaXRhYmxlRW5kZWQ9c3RyZWFtLl93cml0YWJsZVN0YXRlJiZzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZmluaXNoZWQ7dmFyIG9uZmluaXNoPWZ1bmN0aW9uIG9uZmluaXNoKCl7d3JpdGFibGU9ZmFsc2U7d3JpdGFibGVFbmRlZD10cnVlO2lmKCFyZWFkYWJsZSljYWxsYmFjay5jYWxsKHN0cmVhbSl9O3ZhciByZWFkYWJsZUVuZGVkPXN0cmVhbS5fcmVhZGFibGVTdGF0ZSYmc3RyZWFtLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQ7dmFyIG9uZW5kPWZ1bmN0aW9uIG9uZW5kKCl7cmVhZGFibGU9ZmFsc2U7cmVhZGFibGVFbmRlZD10cnVlO2lmKCF3cml0YWJsZSljYWxsYmFjay5jYWxsKHN0cmVhbSl9O3ZhciBvbmVycm9yPWZ1bmN0aW9uIG9uZXJyb3IoZXJyKXtjYWxsYmFjay5jYWxsKHN0cmVhbSxlcnIpfTt2YXIgb25jbG9zZT1mdW5jdGlvbiBvbmNsb3NlKCl7dmFyIGVycjtpZihyZWFkYWJsZSYmIXJlYWRhYmxlRW5kZWQpe2lmKCFzdHJlYW0uX3JlYWRhYmxlU3RhdGV8fCFzdHJlYW0uX3JlYWRhYmxlU3RhdGUuZW5kZWQpZXJyPW5ldyBFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRTtyZXR1cm4gY2FsbGJhY2suY2FsbChzdHJlYW0sZXJyKX1pZih3cml0YWJsZSYmIXdyaXRhYmxlRW5kZWQpe2lmKCFzdHJlYW0uX3dyaXRhYmxlU3RhdGV8fCFzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZW5kZWQpZXJyPW5ldyBFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRTtyZXR1cm4gY2FsbGJhY2suY2FsbChzdHJlYW0sZXJyKX19O3ZhciBvbnJlcXVlc3Q9ZnVuY3Rpb24gb25yZXF1ZXN0KCl7c3RyZWFtLnJlcS5vbigiZmluaXNoIixvbmZpbmlzaCl9O2lmKGlzUmVxdWVzdChzdHJlYW0pKXtzdHJlYW0ub24oImNvbXBsZXRlIixvbmZpbmlzaCk7c3RyZWFtLm9uKCJhYm9ydCIsb25jbG9zZSk7aWYoc3RyZWFtLnJlcSlvbnJlcXVlc3QoKTtlbHNlIHN0cmVhbS5vbigicmVxdWVzdCIsb25yZXF1ZXN0KX1lbHNlIGlmKHdyaXRhYmxlJiYhc3RyZWFtLl93cml0YWJsZVN0YXRlKXtzdHJlYW0ub24oImVuZCIsb25sZWdhY3lmaW5pc2gpO3N0cmVhbS5vbigiY2xvc2UiLG9ubGVnYWN5ZmluaXNoKX1zdHJlYW0ub24oImVuZCIsb25lbmQpO3N0cmVhbS5vbigiZmluaXNoIixvbmZpbmlzaCk7aWYob3B0cy5lcnJvciE9PWZhbHNlKXN0cmVhbS5vbigiZXJyb3IiLG9uZXJyb3IpO3N0cmVhbS5vbigiY2xvc2UiLG9uY2xvc2UpO3JldHVybiBmdW5jdGlvbigpe3N0cmVhbS5yZW1vdmVMaXN0ZW5lcigiY29tcGxldGUiLG9uZmluaXNoKTtzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoImFib3J0IixvbmNsb3NlKTtzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoInJlcXVlc3QiLG9ucmVxdWVzdCk7aWYoc3RyZWFtLnJlcSlzdHJlYW0ucmVxLnJlbW92ZUxpc3RlbmVyKCJmaW5pc2giLG9uZmluaXNoKTtzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoImVuZCIsb25sZWdhY3lmaW5pc2gpO3N0cmVhbS5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLG9ubGVnYWN5ZmluaXNoKTtzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoImZpbmlzaCIsb25maW5pc2gpO3N0cmVhbS5yZW1vdmVMaXN0ZW5lcigiZW5kIixvbmVuZCk7c3RyZWFtLnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsb25lcnJvcik7c3RyZWFtLnJlbW92ZUxpc3RlbmVyKCJjbG9zZSIsb25jbG9zZSl9fW1vZHVsZS5leHBvcnRzPWVvc30seyIuLi8uLi8uLi9lcnJvcnMiOjU5fV0sNjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJSZWFkYWJsZS5mcm9tIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGJyb3dzZXIiKX19LHt9XSw3MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO3ZhciBlb3M7ZnVuY3Rpb24gb25jZShjYWxsYmFjayl7dmFyIGNhbGxlZD1mYWxzZTtyZXR1cm4gZnVuY3Rpb24oKXtpZihjYWxsZWQpcmV0dXJuO2NhbGxlZD10cnVlO2NhbGxiYWNrLmFwcGx5KHZvaWQgMCxhcmd1bWVudHMpfX12YXIgX3JlcXVpcmUkY29kZXM9cmVxdWlyZSgiLi4vLi4vLi4vZXJyb3JzIikuY29kZXMsRVJSX01JU1NJTkdfQVJHUz1fcmVxdWlyZSRjb2Rlcy5FUlJfTUlTU0lOR19BUkdTLEVSUl9TVFJFQU1fREVTVFJPWUVEPV9yZXF1aXJlJGNvZGVzLkVSUl9TVFJFQU1fREVTVFJPWUVEO2Z1bmN0aW9uIG5vb3AoZXJyKXtpZihlcnIpdGhyb3cgZXJyfWZ1bmN0aW9uIGlzUmVxdWVzdChzdHJlYW0pe3JldHVybiBzdHJlYW0uc2V0SGVhZGVyJiZ0eXBlb2Ygc3RyZWFtLmFib3J0PT09ImZ1bmN0aW9uIn1mdW5jdGlvbiBkZXN0cm95ZXIoc3RyZWFtLHJlYWRpbmcsd3JpdGluZyxjYWxsYmFjayl7Y2FsbGJhY2s9b25jZShjYWxsYmFjayk7dmFyIGNsb3NlZD1mYWxzZTtzdHJlYW0ub24oImNsb3NlIixmdW5jdGlvbigpe2Nsb3NlZD10cnVlfSk7aWYoZW9zPT09dW5kZWZpbmVkKWVvcz1yZXF1aXJlKCIuL2VuZC1vZi1zdHJlYW0iKTtlb3Moc3RyZWFtLHtyZWFkYWJsZTpyZWFkaW5nLHdyaXRhYmxlOndyaXRpbmd9LGZ1bmN0aW9uKGVycil7aWYoZXJyKXJldHVybiBjYWxsYmFjayhlcnIpO2Nsb3NlZD10cnVlO2NhbGxiYWNrKCl9KTt2YXIgZGVzdHJveWVkPWZhbHNlO3JldHVybiBmdW5jdGlvbihlcnIpe2lmKGNsb3NlZClyZXR1cm47aWYoZGVzdHJveWVkKXJldHVybjtkZXN0cm95ZWQ9dHJ1ZTtpZihpc1JlcXVlc3Qoc3RyZWFtKSlyZXR1cm4gc3RyZWFtLmFib3J0KCk7aWYodHlwZW9mIHN0cmVhbS5kZXN0cm95PT09ImZ1bmN0aW9uIilyZXR1cm4gc3RyZWFtLmRlc3Ryb3koKTtjYWxsYmFjayhlcnJ8fG5ldyBFUlJfU1RSRUFNX0RFU1RST1lFRCgicGlwZSIpKX19ZnVuY3Rpb24gY2FsbChmbil7Zm4oKX1mdW5jdGlvbiBwaXBlKGZyb20sdG8pe3JldHVybiBmcm9tLnBpcGUodG8pfWZ1bmN0aW9uIHBvcENhbGxiYWNrKHN0cmVhbXMpe2lmKCFzdHJlYW1zLmxlbmd0aClyZXR1cm4gbm9vcDtpZih0eXBlb2Ygc3RyZWFtc1tzdHJlYW1zLmxlbmd0aC0xXSE9PSJmdW5jdGlvbiIpcmV0dXJuIG5vb3A7cmV0dXJuIHN0cmVhbXMucG9wKCl9ZnVuY3Rpb24gcGlwZWxpbmUoKXtmb3IodmFyIF9sZW49YXJndW1lbnRzLmxlbmd0aCxzdHJlYW1zPW5ldyBBcnJheShfbGVuKSxfa2V5PTA7X2tleTxfbGVuO19rZXkrKyl7c3RyZWFtc1tfa2V5XT1hcmd1bWVudHNbX2tleV19dmFyIGNhbGxiYWNrPXBvcENhbGxiYWNrKHN0cmVhbXMpO2lmKEFycmF5LmlzQXJyYXkoc3RyZWFtc1swXSkpc3RyZWFtcz1zdHJlYW1zWzBdO2lmKHN0cmVhbXMubGVuZ3RoPDIpe3Rocm93IG5ldyBFUlJfTUlTU0lOR19BUkdTKCJzdHJlYW1zIil9dmFyIGVycm9yO3ZhciBkZXN0cm95cz1zdHJlYW1zLm1hcChmdW5jdGlvbihzdHJlYW0saSl7dmFyIHJlYWRpbmc9aTxzdHJlYW1zLmxlbmd0aC0xO3ZhciB3cml0aW5nPWk+MDtyZXR1cm4gZGVzdHJveWVyKHN0cmVhbSxyZWFkaW5nLHdyaXRpbmcsZnVuY3Rpb24oZXJyKXtpZighZXJyb3IpZXJyb3I9ZXJyO2lmKGVycilkZXN0cm95cy5mb3JFYWNoKGNhbGwpO2lmKHJlYWRpbmcpcmV0dXJuO2Rlc3Ryb3lzLmZvckVhY2goY2FsbCk7Y2FsbGJhY2soZXJyb3IpfSl9KTtyZXR1cm4gc3RyZWFtcy5yZWR1Y2UocGlwZSl9bW9kdWxlLmV4cG9ydHM9cGlwZWxpbmV9LHsiLi4vLi4vLi4vZXJyb3JzIjo1OSwiLi9lbmQtb2Ytc3RyZWFtIjo2OH1dLDcxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7dmFyIEVSUl9JTlZBTElEX09QVF9WQUxVRT1yZXF1aXJlKCIuLi8uLi8uLi9lcnJvcnMiKS5jb2Rlcy5FUlJfSU5WQUxJRF9PUFRfVkFMVUU7ZnVuY3Rpb24gaGlnaFdhdGVyTWFya0Zyb20ob3B0aW9ucyxpc0R1cGxleCxkdXBsZXhLZXkpe3JldHVybiBvcHRpb25zLmhpZ2hXYXRlck1hcmshPW51bGw/b3B0aW9ucy5oaWdoV2F0ZXJNYXJrOmlzRHVwbGV4P29wdGlvbnNbZHVwbGV4S2V5XTpudWxsfWZ1bmN0aW9uIGdldEhpZ2hXYXRlck1hcmsoc3RhdGUsb3B0aW9ucyxkdXBsZXhLZXksaXNEdXBsZXgpe3ZhciBod209aGlnaFdhdGVyTWFya0Zyb20ob3B0aW9ucyxpc0R1cGxleCxkdXBsZXhLZXkpO2lmKGh3bSE9bnVsbCl7aWYoIShpc0Zpbml0ZShod20pJiZNYXRoLmZsb29yKGh3bSk9PT1od20pfHxod208MCl7dmFyIG5hbWU9aXNEdXBsZXg/ZHVwbGV4S2V5OiJoaWdoV2F0ZXJNYXJrIjt0aHJvdyBuZXcgRVJSX0lOVkFMSURfT1BUX1ZBTFVFKG5hbWUsaHdtKX1yZXR1cm4gTWF0aC5mbG9vcihod20pfXJldHVybiBzdGF0ZS5vYmplY3RNb2RlPzE2OjE2KjEwMjR9bW9kdWxlLmV4cG9ydHM9e2dldEhpZ2hXYXRlck1hcms6Z2V0SGlnaFdhdGVyTWFya319LHsiLi4vLi4vLi4vZXJyb3JzIjo1OX1dLDcyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1yZXF1aXJlKCJldmVudHMiKS5FdmVudEVtaXR0ZXJ9LHtldmVudHM6MTR9XSw3MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7KGZ1bmN0aW9uKCl7dmFyIENsaWVudFJlcXVlc3Q9cmVxdWlyZSgiLi9saWIvcmVxdWVzdCIpO3ZhciByZXNwb25zZT1yZXF1aXJlKCIuL2xpYi9yZXNwb25zZSIpO3ZhciBleHRlbmQ9cmVxdWlyZSgieHRlbmQiKTt2YXIgc3RhdHVzQ29kZXM9cmVxdWlyZSgiYnVpbHRpbi1zdGF0dXMtY29kZXMiKTt2YXIgdXJsPXJlcXVpcmUoInVybCIpO3ZhciBodHRwPWV4cG9ydHM7aHR0cC5yZXF1ZXN0PWZ1bmN0aW9uKG9wdHMsY2Ipe2lmKHR5cGVvZiBvcHRzPT09InN0cmluZyIpb3B0cz11cmwucGFyc2Uob3B0cyk7ZWxzZSBvcHRzPWV4dGVuZChvcHRzKTt2YXIgZGVmYXVsdFByb3RvY29sPWdsb2JhbC5sb2NhdGlvbi5wcm90b2NvbC5zZWFyY2goL15odHRwcz86JC8pPT09LTE/Imh0dHA6IjoiIjt2YXIgcHJvdG9jb2w9b3B0cy5wcm90b2NvbHx8ZGVmYXVsdFByb3RvY29sO3ZhciBob3N0PW9wdHMuaG9zdG5hbWV8fG9wdHMuaG9zdDt2YXIgcG9ydD1vcHRzLnBvcnQ7dmFyIHBhdGg9b3B0cy5wYXRofHwiLyI7aWYoaG9zdCYmaG9zdC5pbmRleE9mKCI6IikhPT0tMSlob3N0PSJbIitob3N0KyJdIjtvcHRzLnVybD0oaG9zdD9wcm90b2NvbCsiLy8iK2hvc3Q6IiIpKyhwb3J0PyI6Iitwb3J0OiIiKStwYXRoO29wdHMubWV0aG9kPShvcHRzLm1ldGhvZHx8IkdFVCIpLnRvVXBwZXJDYXNlKCk7b3B0cy5oZWFkZXJzPW9wdHMuaGVhZGVyc3x8e307dmFyIHJlcT1uZXcgQ2xpZW50UmVxdWVzdChvcHRzKTtpZihjYilyZXEub24oInJlc3BvbnNlIixjYik7cmV0dXJuIHJlcX07aHR0cC5nZXQ9ZnVuY3Rpb24gZ2V0KG9wdHMsY2Ipe3ZhciByZXE9aHR0cC5yZXF1ZXN0KG9wdHMsY2IpO3JlcS5lbmQoKTtyZXR1cm4gcmVxfTtodHRwLkNsaWVudFJlcXVlc3Q9Q2xpZW50UmVxdWVzdDtodHRwLkluY29taW5nTWVzc2FnZT1yZXNwb25zZS5JbmNvbWluZ01lc3NhZ2U7aHR0cC5BZ2VudD1mdW5jdGlvbigpe307aHR0cC5BZ2VudC5kZWZhdWx0TWF4U29ja2V0cz00O2h0dHAuZ2xvYmFsQWdlbnQ9bmV3IGh0dHAuQWdlbnQ7aHR0cC5TVEFUVVNfQ09ERVM9c3RhdHVzQ29kZXM7aHR0cC5NRVRIT0RTPVsiQ0hFQ0tPVVQiLCJDT05ORUNUIiwiQ09QWSIsIkRFTEVURSIsIkdFVCIsIkhFQUQiLCJMT0NLIiwiTS1TRUFSQ0giLCJNRVJHRSIsIk1LQUNUSVZJVFkiLCJNS0NPTCIsIk1PVkUiLCJOT1RJRlkiLCJPUFRJT05TIiwiUEFUQ0giLCJQT1NUIiwiUFJPUEZJTkQiLCJQUk9QUEFUQ0giLCJQVVJHRSIsIlBVVCIsIlJFUE9SVCIsIlNFQVJDSCIsIlNVQlNDUklCRSIsIlRSQUNFIiwiVU5MT0NLIiwiVU5TVUJTQ1JJQkUiXX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCE9PSJ1bmRlZmluZWQiP2dsb2JhbDp0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSl9LHsiLi9saWIvcmVxdWVzdCI6NzUsIi4vbGliL3Jlc3BvbnNlIjo3NiwiYnVpbHRpbi1zdGF0dXMtY29kZXMiOjksdXJsOjkzLHh0ZW5kOjk5fV0sNzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpeyhmdW5jdGlvbigpe2V4cG9ydHMuZmV0Y2g9aXNGdW5jdGlvbihnbG9iYWwuZmV0Y2gpJiZpc0Z1bmN0aW9uKGdsb2JhbC5SZWFkYWJsZVN0cmVhbSk7ZXhwb3J0cy53cml0YWJsZVN0cmVhbT1pc0Z1bmN0aW9uKGdsb2JhbC5Xcml0YWJsZVN0cmVhbSk7ZXhwb3J0cy5hYm9ydENvbnRyb2xsZXI9aXNGdW5jdGlvbihnbG9iYWwuQWJvcnRDb250cm9sbGVyKTt2YXIgeGhyO2Z1bmN0aW9uIGdldFhIUigpe2lmKHhociE9PXVuZGVmaW5lZClyZXR1cm4geGhyO2lmKGdsb2JhbC5YTUxIdHRwUmVxdWVzdCl7eGhyPW5ldyBnbG9iYWwuWE1MSHR0cFJlcXVlc3Q7dHJ5e3hoci5vcGVuKCJHRVQiLGdsb2JhbC5YRG9tYWluUmVxdWVzdD8iLyI6Imh0dHBzOi8vZXhhbXBsZS5jb20iKX1jYXRjaChlKXt4aHI9bnVsbH19ZWxzZXt4aHI9bnVsbH1yZXR1cm4geGhyfWZ1bmN0aW9uIGNoZWNrVHlwZVN1cHBvcnQodHlwZSl7dmFyIHhocj1nZXRYSFIoKTtpZigheGhyKXJldHVybiBmYWxzZTt0cnl7eGhyLnJlc3BvbnNlVHlwZT10eXBlO3JldHVybiB4aHIucmVzcG9uc2VUeXBlPT09dHlwZX1jYXRjaChlKXt9cmV0dXJuIGZhbHNlfWV4cG9ydHMuYXJyYXlidWZmZXI9ZXhwb3J0cy5mZXRjaHx8Y2hlY2tUeXBlU3VwcG9ydCgiYXJyYXlidWZmZXIiKTtleHBvcnRzLm1zc3RyZWFtPSFleHBvcnRzLmZldGNoJiZjaGVja1R5cGVTdXBwb3J0KCJtcy1zdHJlYW0iKTtleHBvcnRzLm1vemNodW5rZWRhcnJheWJ1ZmZlcj0hZXhwb3J0cy5mZXRjaCYmY2hlY2tUeXBlU3VwcG9ydCgibW96LWNodW5rZWQtYXJyYXlidWZmZXIiKTtleHBvcnRzLm92ZXJyaWRlTWltZVR5cGU9ZXhwb3J0cy5mZXRjaHx8KGdldFhIUigpP2lzRnVuY3Rpb24oZ2V0WEhSKCkub3ZlcnJpZGVNaW1lVHlwZSk6ZmFsc2UpO2Z1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWU9PT0iZnVuY3Rpb24ifXhocj1udWxsfSkuY2FsbCh0aGlzKX0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9KX0se31dLDc1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2VzcyxnbG9iYWwsQnVmZmVyKXsoZnVuY3Rpb24oKXt2YXIgY2FwYWJpbGl0eT1yZXF1aXJlKCIuL2NhcGFiaWxpdHkiKTt2YXIgaW5oZXJpdHM9cmVxdWlyZSgiaW5oZXJpdHMiKTt2YXIgcmVzcG9uc2U9cmVxdWlyZSgiLi9yZXNwb25zZSIpO3ZhciBzdHJlYW09cmVxdWlyZSgicmVhZGFibGUtc3RyZWFtIik7dmFyIEluY29taW5nTWVzc2FnZT1yZXNwb25zZS5JbmNvbWluZ01lc3NhZ2U7dmFyIHJTdGF0ZXM9cmVzcG9uc2UucmVhZHlTdGF0ZXM7ZnVuY3Rpb24gZGVjaWRlTW9kZShwcmVmZXJCaW5hcnksdXNlRmV0Y2gpe2lmKGNhcGFiaWxpdHkuZmV0Y2gmJnVzZUZldGNoKXtyZXR1cm4iZmV0Y2gifWVsc2UgaWYoY2FwYWJpbGl0eS5tb3pjaHVua2VkYXJyYXlidWZmZXIpe3JldHVybiJtb3otY2h1bmtlZC1hcnJheWJ1ZmZlciJ9ZWxzZSBpZihjYXBhYmlsaXR5Lm1zc3RyZWFtKXtyZXR1cm4ibXMtc3RyZWFtIn1lbHNlIGlmKGNhcGFiaWxpdHkuYXJyYXlidWZmZXImJnByZWZlckJpbmFyeSl7cmV0dXJuImFycmF5YnVmZmVyIn1lbHNle3JldHVybiJ0ZXh0In19dmFyIENsaWVudFJlcXVlc3Q9bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24ob3B0cyl7dmFyIHNlbGY9dGhpcztzdHJlYW0uV3JpdGFibGUuY2FsbChzZWxmKTtzZWxmLl9vcHRzPW9wdHM7c2VsZi5fYm9keT1bXTtzZWxmLl9oZWFkZXJzPXt9O2lmKG9wdHMuYXV0aClzZWxmLnNldEhlYWRlcigiQXV0aG9yaXphdGlvbiIsIkJhc2ljICIrQnVmZmVyLmZyb20ob3B0cy5hdXRoKS50b1N0cmluZygiYmFzZTY0IikpO09iamVjdC5rZXlzKG9wdHMuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKXtzZWxmLnNldEhlYWRlcihuYW1lLG9wdHMuaGVhZGVyc1tuYW1lXSl9KTt2YXIgcHJlZmVyQmluYXJ5O3ZhciB1c2VGZXRjaD10cnVlO2lmKG9wdHMubW9kZT09PSJkaXNhYmxlLWZldGNoInx8InJlcXVlc3RUaW1lb3V0ImluIG9wdHMmJiFjYXBhYmlsaXR5LmFib3J0Q29udHJvbGxlcil7dXNlRmV0Y2g9ZmFsc2U7cHJlZmVyQmluYXJ5PXRydWV9ZWxzZSBpZihvcHRzLm1vZGU9PT0icHJlZmVyLXN0cmVhbWluZyIpe3ByZWZlckJpbmFyeT1mYWxzZX1lbHNlIGlmKG9wdHMubW9kZT09PSJhbGxvdy13cm9uZy1jb250ZW50LXR5cGUiKXtwcmVmZXJCaW5hcnk9IWNhcGFiaWxpdHkub3ZlcnJpZGVNaW1lVHlwZX1lbHNlIGlmKCFvcHRzLm1vZGV8fG9wdHMubW9kZT09PSJkZWZhdWx0Inx8b3B0cy5tb2RlPT09InByZWZlci1mYXN0Iil7cHJlZmVyQmluYXJ5PXRydWV9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgdmFsdWUgZm9yIG9wdHMubW9kZSIpfXNlbGYuX21vZGU9ZGVjaWRlTW9kZShwcmVmZXJCaW5hcnksdXNlRmV0Y2gpO3NlbGYuX2ZldGNoVGltZXI9bnVsbDtzZWxmLl9zb2NrZXRUaW1lb3V0PW51bGw7c2VsZi5fc29ja2V0VGltZXI9bnVsbDtzZWxmLm9uKCJmaW5pc2giLGZ1bmN0aW9uKCl7c2VsZi5fb25GaW5pc2goKX0pfTtpbmhlcml0cyhDbGllbnRSZXF1ZXN0LHN0cmVhbS5Xcml0YWJsZSk7Q2xpZW50UmVxdWVzdC5wcm90b3R5cGUuc2V0SGVhZGVyPWZ1bmN0aW9uKG5hbWUsdmFsdWUpe3ZhciBzZWxmPXRoaXM7dmFyIGxvd2VyTmFtZT1uYW1lLnRvTG93ZXJDYXNlKCk7aWYodW5zYWZlSGVhZGVycy5pbmRleE9mKGxvd2VyTmFtZSkhPT0tMSlyZXR1cm47c2VsZi5faGVhZGVyc1tsb3dlck5hbWVdPXtuYW1lOm5hbWUsdmFsdWU6dmFsdWV9fTtDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5nZXRIZWFkZXI9ZnVuY3Rpb24obmFtZSl7dmFyIGhlYWRlcj10aGlzLl9oZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV07aWYoaGVhZGVyKXJldHVybiBoZWFkZXIudmFsdWU7cmV0dXJuIG51bGx9O0NsaWVudFJlcXVlc3QucHJvdG90eXBlLnJlbW92ZUhlYWRlcj1mdW5jdGlvbihuYW1lKXt2YXIgc2VsZj10aGlzO2RlbGV0ZSBzZWxmLl9oZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV19O0NsaWVudFJlcXVlc3QucHJvdG90eXBlLl9vbkZpbmlzaD1mdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7aWYoc2VsZi5fZGVzdHJveWVkKXJldHVybjt2YXIgb3B0cz1zZWxmLl9vcHRzO2lmKCJ0aW1lb3V0ImluIG9wdHMmJm9wdHMudGltZW91dCE9PTApe3NlbGYuc2V0VGltZW91dChvcHRzLnRpbWVvdXQpfXZhciBoZWFkZXJzT2JqPXNlbGYuX2hlYWRlcnM7dmFyIGJvZHk9bnVsbDtpZihvcHRzLm1ldGhvZCE9PSJHRVQiJiZvcHRzLm1ldGhvZCE9PSJIRUFEIil7Ym9keT1uZXcgQmxvYihzZWxmLl9ib2R5LHt0eXBlOihoZWFkZXJzT2JqWyJjb250ZW50LXR5cGUiXXx8e30pLnZhbHVlfHwiIn0pfXZhciBoZWFkZXJzTGlzdD1bXTtPYmplY3Qua2V5cyhoZWFkZXJzT2JqKS5mb3JFYWNoKGZ1bmN0aW9uKGtleU5hbWUpe3ZhciBuYW1lPWhlYWRlcnNPYmpba2V5TmFtZV0ubmFtZTt2YXIgdmFsdWU9aGVhZGVyc09ialtrZXlOYW1lXS52YWx1ZTtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7dmFsdWUuZm9yRWFjaChmdW5jdGlvbih2KXtoZWFkZXJzTGlzdC5wdXNoKFtuYW1lLHZdKX0pfWVsc2V7aGVhZGVyc0xpc3QucHVzaChbbmFtZSx2YWx1ZV0pfX0pO2lmKHNlbGYuX21vZGU9PT0iZmV0Y2giKXt2YXIgc2lnbmFsPW51bGw7aWYoY2FwYWJpbGl0eS5hYm9ydENvbnRyb2xsZXIpe3ZhciBjb250cm9sbGVyPW5ldyBBYm9ydENvbnRyb2xsZXI7c2lnbmFsPWNvbnRyb2xsZXIuc2lnbmFsO3NlbGYuX2ZldGNoQWJvcnRDb250cm9sbGVyPWNvbnRyb2xsZXI7aWYoInJlcXVlc3RUaW1lb3V0ImluIG9wdHMmJm9wdHMucmVxdWVzdFRpbWVvdXQhPT0wKXtzZWxmLl9mZXRjaFRpbWVyPWdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi5lbWl0KCJyZXF1ZXN0VGltZW91dCIpO2lmKHNlbGYuX2ZldGNoQWJvcnRDb250cm9sbGVyKXNlbGYuX2ZldGNoQWJvcnRDb250cm9sbGVyLmFib3J0KCl9LG9wdHMucmVxdWVzdFRpbWVvdXQpfX1nbG9iYWwuZmV0Y2goc2VsZi5fb3B0cy51cmwse21ldGhvZDpzZWxmLl9vcHRzLm1ldGhvZCxoZWFkZXJzOmhlYWRlcnNMaXN0LGJvZHk6Ym9keXx8dW5kZWZpbmVkLG1vZGU6ImNvcnMiLGNyZWRlbnRpYWxzOm9wdHMud2l0aENyZWRlbnRpYWxzPyJpbmNsdWRlIjoic2FtZS1vcmlnaW4iLHNpZ25hbDpzaWduYWx9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtzZWxmLl9mZXRjaFJlc3BvbnNlPXJlc3BvbnNlO3NlbGYuX3Jlc2V0VGltZXJzKGZhbHNlKTtzZWxmLl9jb25uZWN0KCl9LGZ1bmN0aW9uKHJlYXNvbil7c2VsZi5fcmVzZXRUaW1lcnModHJ1ZSk7aWYoIXNlbGYuX2Rlc3Ryb3llZClzZWxmLmVtaXQoImVycm9yIixyZWFzb24pfSl9ZWxzZXt2YXIgeGhyPXNlbGYuX3hocj1uZXcgZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0O3RyeXt4aHIub3BlbihzZWxmLl9vcHRzLm1ldGhvZCxzZWxmLl9vcHRzLnVybCx0cnVlKX1jYXRjaChlcnIpe3Byb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKXtzZWxmLmVtaXQoImVycm9yIixlcnIpfSk7cmV0dXJufWlmKCJyZXNwb25zZVR5cGUiaW4geGhyKXhoci5yZXNwb25zZVR5cGU9c2VsZi5fbW9kZTtpZigid2l0aENyZWRlbnRpYWxzImluIHhocil4aHIud2l0aENyZWRlbnRpYWxzPSEhb3B0cy53aXRoQ3JlZGVudGlhbHM7aWYoc2VsZi5fbW9kZT09PSJ0ZXh0IiYmIm92ZXJyaWRlTWltZVR5cGUiaW4geGhyKXhoci5vdmVycmlkZU1pbWVUeXBlKCJ0ZXh0L3BsYWluOyBjaGFyc2V0PXgtdXNlci1kZWZpbmVkIik7aWYoInJlcXVlc3RUaW1lb3V0ImluIG9wdHMpe3hoci50aW1lb3V0PW9wdHMucmVxdWVzdFRpbWVvdXQ7eGhyLm9udGltZW91dD1mdW5jdGlvbigpe3NlbGYuZW1pdCgicmVxdWVzdFRpbWVvdXQiKX19aGVhZGVyc0xpc3QuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpe3hoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlclswXSxoZWFkZXJbMV0pfSk7c2VsZi5fcmVzcG9uc2U9bnVsbDt4aHIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7c3dpdGNoKHhoci5yZWFkeVN0YXRlKXtjYXNlIHJTdGF0ZXMuTE9BRElORzpjYXNlIHJTdGF0ZXMuRE9ORTpzZWxmLl9vblhIUlByb2dyZXNzKCk7YnJlYWt9fTtpZihzZWxmLl9tb2RlPT09Im1vei1jaHVua2VkLWFycmF5YnVmZmVyIil7eGhyLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oKXtzZWxmLl9vblhIUlByb2dyZXNzKCl9fXhoci5vbmVycm9yPWZ1bmN0aW9uKCl7aWYoc2VsZi5fZGVzdHJveWVkKXJldHVybjtzZWxmLl9yZXNldFRpbWVycyh0cnVlKTtzZWxmLmVtaXQoImVycm9yIixuZXcgRXJyb3IoIlhIUiBlcnJvciIpKX07dHJ5e3hoci5zZW5kKGJvZHkpfWNhdGNoKGVycil7cHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpe3NlbGYuZW1pdCgiZXJyb3IiLGVycil9KTtyZXR1cm59fX07ZnVuY3Rpb24gc3RhdHVzVmFsaWQoeGhyKXt0cnl7dmFyIHN0YXR1cz14aHIuc3RhdHVzO3JldHVybiBzdGF0dXMhPT1udWxsJiZzdGF0dXMhPT0wfWNhdGNoKGUpe3JldHVybiBmYWxzZX19Q2xpZW50UmVxdWVzdC5wcm90b3R5cGUuX29uWEhSUHJvZ3Jlc3M9ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3NlbGYuX3Jlc2V0VGltZXJzKGZhbHNlKTtpZighc3RhdHVzVmFsaWQoc2VsZi5feGhyKXx8c2VsZi5fZGVzdHJveWVkKXJldHVybjtpZighc2VsZi5fcmVzcG9uc2Upc2VsZi5fY29ubmVjdCgpO3NlbGYuX3Jlc3BvbnNlLl9vblhIUlByb2dyZXNzKHNlbGYuX3Jlc2V0VGltZXJzLmJpbmQoc2VsZikpfTtDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5fY29ubmVjdD1mdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7aWYoc2VsZi5fZGVzdHJveWVkKXJldHVybjtzZWxmLl9yZXNwb25zZT1uZXcgSW5jb21pbmdNZXNzYWdlKHNlbGYuX3hocixzZWxmLl9mZXRjaFJlc3BvbnNlLHNlbGYuX21vZGUsc2VsZi5fcmVzZXRUaW1lcnMuYmluZChzZWxmKSk7c2VsZi5fcmVzcG9uc2Uub24oImVycm9yIixmdW5jdGlvbihlcnIpe3NlbGYuZW1pdCgiZXJyb3IiLGVycil9KTtzZWxmLmVtaXQoInJlc3BvbnNlIixzZWxmLl9yZXNwb25zZSl9O0NsaWVudFJlcXVlc3QucHJvdG90eXBlLl93cml0ZT1mdW5jdGlvbihjaHVuayxlbmNvZGluZyxjYil7dmFyIHNlbGY9dGhpcztzZWxmLl9ib2R5LnB1c2goY2h1bmspO2NiKCl9O0NsaWVudFJlcXVlc3QucHJvdG90eXBlLl9yZXNldFRpbWVycz1mdW5jdGlvbihkb25lKXt2YXIgc2VsZj10aGlzO2dsb2JhbC5jbGVhclRpbWVvdXQoc2VsZi5fc29ja2V0VGltZXIpO3NlbGYuX3NvY2tldFRpbWVyPW51bGw7aWYoZG9uZSl7Z2xvYmFsLmNsZWFyVGltZW91dChzZWxmLl9mZXRjaFRpbWVyKTtzZWxmLl9mZXRjaFRpbWVyPW51bGx9ZWxzZSBpZihzZWxmLl9zb2NrZXRUaW1lb3V0KXtzZWxmLl9zb2NrZXRUaW1lcj1nbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpe3NlbGYuZW1pdCgidGltZW91dCIpfSxzZWxmLl9zb2NrZXRUaW1lb3V0KX19O0NsaWVudFJlcXVlc3QucHJvdG90eXBlLmFib3J0PUNsaWVudFJlcXVlc3QucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oZXJyKXt2YXIgc2VsZj10aGlzO3NlbGYuX2Rlc3Ryb3llZD10cnVlO3NlbGYuX3Jlc2V0VGltZXJzKHRydWUpO2lmKHNlbGYuX3Jlc3BvbnNlKXNlbGYuX3Jlc3BvbnNlLl9kZXN0cm95ZWQ9dHJ1ZTtpZihzZWxmLl94aHIpc2VsZi5feGhyLmFib3J0KCk7ZWxzZSBpZihzZWxmLl9mZXRjaEFib3J0Q29udHJvbGxlcilzZWxmLl9mZXRjaEFib3J0Q29udHJvbGxlci5hYm9ydCgpO2lmKGVycilzZWxmLmVtaXQoImVycm9yIixlcnIpfTtDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oZGF0YSxlbmNvZGluZyxjYil7dmFyIHNlbGY9dGhpcztpZih0eXBlb2YgZGF0YT09PSJmdW5jdGlvbiIpe2NiPWRhdGE7ZGF0YT11bmRlZmluZWR9c3RyZWFtLldyaXRhYmxlLnByb3RvdHlwZS5lbmQuY2FsbChzZWxmLGRhdGEsZW5jb2RpbmcsY2IpfTtDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5zZXRUaW1lb3V0PWZ1bmN0aW9uKHRpbWVvdXQsY2Ipe3ZhciBzZWxmPXRoaXM7aWYoY2Ipc2VsZi5vbmNlKCJ0aW1lb3V0IixjYik7c2VsZi5fc29ja2V0VGltZW91dD10aW1lb3V0O3NlbGYuX3Jlc2V0VGltZXJzKGZhbHNlKX07Q2xpZW50UmVxdWVzdC5wcm90b3R5cGUuZmx1c2hIZWFkZXJzPWZ1bmN0aW9uKCl7fTtDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5zZXROb0RlbGF5PWZ1bmN0aW9uKCl7fTtDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5zZXRTb2NrZXRLZWVwQWxpdmU9ZnVuY3Rpb24oKXt9O3ZhciB1bnNhZmVIZWFkZXJzPVsiYWNjZXB0LWNoYXJzZXQiLCJhY2NlcHQtZW5jb2RpbmciLCJhY2Nlc3MtY29udHJvbC1yZXF1ZXN0LWhlYWRlcnMiLCJhY2Nlc3MtY29udHJvbC1yZXF1ZXN0LW1ldGhvZCIsImNvbm5lY3Rpb24iLCJjb250ZW50LWxlbmd0aCIsImNvb2tpZSIsImNvb2tpZTIiLCJkYXRlIiwiZG50IiwiZXhwZWN0IiwiaG9zdCIsImtlZXAtYWxpdmUiLCJvcmlnaW4iLCJyZWZlcmVyIiwidGUiLCJ0cmFpbGVyIiwidHJhbnNmZXItZW5jb2RpbmciLCJ1cGdyYWRlIiwidmlhIl19KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHJlcXVpcmUoIl9wcm9jZXNzIiksdHlwZW9mIGdsb2JhbCE9PSJ1bmRlZmluZWQiP2dsb2JhbDp0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpfSx7Ii4vY2FwYWJpbGl0eSI6NzQsIi4vcmVzcG9uc2UiOjc2LF9wcm9jZXNzOjM5LGJ1ZmZlcjo4LGluaGVyaXRzOjI5LCJyZWFkYWJsZS1zdHJlYW0iOjkxfV0sNzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIpeyhmdW5jdGlvbigpe3ZhciBjYXBhYmlsaXR5PXJlcXVpcmUoIi4vY2FwYWJpbGl0eSIpO3ZhciBpbmhlcml0cz1yZXF1aXJlKCJpbmhlcml0cyIpO3ZhciBzdHJlYW09cmVxdWlyZSgicmVhZGFibGUtc3RyZWFtIik7dmFyIHJTdGF0ZXM9ZXhwb3J0cy5yZWFkeVN0YXRlcz17VU5TRU5UOjAsT1BFTkVEOjEsSEVBREVSU19SRUNFSVZFRDoyLExPQURJTkc6MyxET05FOjR9O3ZhciBJbmNvbWluZ01lc3NhZ2U9ZXhwb3J0cy5JbmNvbWluZ01lc3NhZ2U9ZnVuY3Rpb24oeGhyLHJlc3BvbnNlLG1vZGUscmVzZXRUaW1lcnMpe3ZhciBzZWxmPXRoaXM7c3RyZWFtLlJlYWRhYmxlLmNhbGwoc2VsZik7c2VsZi5fbW9kZT1tb2RlO3NlbGYuaGVhZGVycz17fTtzZWxmLnJhd0hlYWRlcnM9W107c2VsZi50cmFpbGVycz17fTtzZWxmLnJhd1RyYWlsZXJzPVtdO3NlbGYub24oImVuZCIsZnVuY3Rpb24oKXtwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCl7c2VsZi5lbWl0KCJjbG9zZSIpfSl9KTtpZihtb2RlPT09ImZldGNoIil7c2VsZi5fZmV0Y2hSZXNwb25zZT1yZXNwb25zZTtzZWxmLnVybD1yZXNwb25zZS51cmw7c2VsZi5zdGF0dXNDb2RlPXJlc3BvbnNlLnN0YXR1cztzZWxmLnN0YXR1c01lc3NhZ2U9cmVzcG9uc2Uuc3RhdHVzVGV4dDtyZXNwb25zZS5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyLGtleSl7c2VsZi5oZWFkZXJzW2tleS50b0xvd2VyQ2FzZSgpXT1oZWFkZXI7c2VsZi5yYXdIZWFkZXJzLnB1c2goa2V5LGhlYWRlcil9KTtpZihjYXBhYmlsaXR5LndyaXRhYmxlU3RyZWFtKXt2YXIgd3JpdGFibGU9bmV3IFdyaXRhYmxlU3RyZWFtKHt3cml0ZTpmdW5jdGlvbihjaHVuayl7cmVzZXRUaW1lcnMoZmFsc2UpO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7aWYoc2VsZi5fZGVzdHJveWVkKXtyZWplY3QoKX1lbHNlIGlmKHNlbGYucHVzaChCdWZmZXIuZnJvbShjaHVuaykpKXtyZXNvbHZlKCl9ZWxzZXtzZWxmLl9yZXN1bWVGZXRjaD1yZXNvbHZlfX0pfSxjbG9zZTpmdW5jdGlvbigpe3Jlc2V0VGltZXJzKHRydWUpO2lmKCFzZWxmLl9kZXN0cm95ZWQpc2VsZi5wdXNoKG51bGwpfSxhYm9ydDpmdW5jdGlvbihlcnIpe3Jlc2V0VGltZXJzKHRydWUpO2lmKCFzZWxmLl9kZXN0cm95ZWQpc2VsZi5lbWl0KCJlcnJvciIsZXJyKX19KTt0cnl7cmVzcG9uc2UuYm9keS5waXBlVG8od3JpdGFibGUpLmNhdGNoKGZ1bmN0aW9uKGVycil7cmVzZXRUaW1lcnModHJ1ZSk7aWYoIXNlbGYuX2Rlc3Ryb3llZClzZWxmLmVtaXQoImVycm9yIixlcnIpfSk7cmV0dXJufWNhdGNoKGUpe319dmFyIHJlYWRlcj1yZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO2Z1bmN0aW9uIHJlYWQoKXtyZWFkZXIucmVhZCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtpZihzZWxmLl9kZXN0cm95ZWQpcmV0dXJuO3Jlc2V0VGltZXJzKHJlc3VsdC5kb25lKTtpZihyZXN1bHQuZG9uZSl7c2VsZi5wdXNoKG51bGwpO3JldHVybn1zZWxmLnB1c2goQnVmZmVyLmZyb20ocmVzdWx0LnZhbHVlKSk7cmVhZCgpfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtyZXNldFRpbWVycyh0cnVlKTtpZighc2VsZi5fZGVzdHJveWVkKXNlbGYuZW1pdCgiZXJyb3IiLGVycil9KX1yZWFkKCl9ZWxzZXtzZWxmLl94aHI9eGhyO3NlbGYuX3Bvcz0wO3NlbGYudXJsPXhoci5yZXNwb25zZVVSTDtzZWxmLnN0YXR1c0NvZGU9eGhyLnN0YXR1cztzZWxmLnN0YXR1c01lc3NhZ2U9eGhyLnN0YXR1c1RleHQ7dmFyIGhlYWRlcnM9eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnNwbGl0KC9ccj9cbi8pO2hlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpe3ZhciBtYXRjaGVzPWhlYWRlci5tYXRjaCgvXihbXjpdKyk6XHMqKC4qKS8pO2lmKG1hdGNoZXMpe3ZhciBrZXk9bWF0Y2hlc1sxXS50b0xvd2VyQ2FzZSgpO2lmKGtleT09PSJzZXQtY29va2llIil7aWYoc2VsZi5oZWFkZXJzW2tleV09PT11bmRlZmluZWQpe3NlbGYuaGVhZGVyc1trZXldPVtdfXNlbGYuaGVhZGVyc1trZXldLnB1c2gobWF0Y2hlc1syXSl9ZWxzZSBpZihzZWxmLmhlYWRlcnNba2V5XSE9PXVuZGVmaW5lZCl7c2VsZi5oZWFkZXJzW2tleV0rPSIsICIrbWF0Y2hlc1syXX1lbHNle3NlbGYuaGVhZGVyc1trZXldPW1hdGNoZXNbMl19c2VsZi5yYXdIZWFkZXJzLnB1c2gobWF0Y2hlc1sxXSxtYXRjaGVzWzJdKX19KTtzZWxmLl9jaGFyc2V0PSJ4LXVzZXItZGVmaW5lZCI7aWYoIWNhcGFiaWxpdHkub3ZlcnJpZGVNaW1lVHlwZSl7dmFyIG1pbWVUeXBlPXNlbGYucmF3SGVhZGVyc1sibWltZS10eXBlIl07aWYobWltZVR5cGUpe3ZhciBjaGFyc2V0TWF0Y2g9bWltZVR5cGUubWF0Y2goLztccypjaGFyc2V0PShbXjtdKSg7fCQpLyk7aWYoY2hhcnNldE1hdGNoKXtzZWxmLl9jaGFyc2V0PWNoYXJzZXRNYXRjaFsxXS50b0xvd2VyQ2FzZSgpfX1pZighc2VsZi5fY2hhcnNldClzZWxmLl9jaGFyc2V0PSJ1dGYtOCJ9fX07aW5oZXJpdHMoSW5jb21pbmdNZXNzYWdlLHN0cmVhbS5SZWFkYWJsZSk7SW5jb21pbmdNZXNzYWdlLnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dmFyIHJlc29sdmU9c2VsZi5fcmVzdW1lRmV0Y2g7aWYocmVzb2x2ZSl7c2VsZi5fcmVzdW1lRmV0Y2g9bnVsbDtyZXNvbHZlKCl9fTtJbmNvbWluZ01lc3NhZ2UucHJvdG90eXBlLl9vblhIUlByb2dyZXNzPWZ1bmN0aW9uKHJlc2V0VGltZXJzKXt2YXIgc2VsZj10aGlzO3ZhciB4aHI9c2VsZi5feGhyO3ZhciByZXNwb25zZT1udWxsO3N3aXRjaChzZWxmLl9tb2RlKXtjYXNlInRleHQiOnJlc3BvbnNlPXhoci5yZXNwb25zZVRleHQ7aWYocmVzcG9uc2UubGVuZ3RoPnNlbGYuX3Bvcyl7dmFyIG5ld0RhdGE9cmVzcG9uc2Uuc3Vic3RyKHNlbGYuX3Bvcyk7aWYoc2VsZi5fY2hhcnNldD09PSJ4LXVzZXItZGVmaW5lZCIpe3ZhciBidWZmZXI9QnVmZmVyLmFsbG9jKG5ld0RhdGEubGVuZ3RoKTtmb3IodmFyIGk9MDtpPG5ld0RhdGEubGVuZ3RoO2krKylidWZmZXJbaV09bmV3RGF0YS5jaGFyQ29kZUF0KGkpJjI1NTtzZWxmLnB1c2goYnVmZmVyKX1lbHNle3NlbGYucHVzaChuZXdEYXRhLHNlbGYuX2NoYXJzZXQpfXNlbGYuX3Bvcz1yZXNwb25zZS5sZW5ndGh9YnJlYWs7Y2FzZSJhcnJheWJ1ZmZlciI6aWYoeGhyLnJlYWR5U3RhdGUhPT1yU3RhdGVzLkRPTkV8fCF4aHIucmVzcG9uc2UpYnJlYWs7cmVzcG9uc2U9eGhyLnJlc3BvbnNlO3NlbGYucHVzaChCdWZmZXIuZnJvbShuZXcgVWludDhBcnJheShyZXNwb25zZSkpKTticmVhaztjYXNlIm1vei1jaHVua2VkLWFycmF5YnVmZmVyIjpyZXNwb25zZT14aHIucmVzcG9uc2U7aWYoeGhyLnJlYWR5U3RhdGUhPT1yU3RhdGVzLkxPQURJTkd8fCFyZXNwb25zZSlicmVhaztzZWxmLnB1c2goQnVmZmVyLmZyb20obmV3IFVpbnQ4QXJyYXkocmVzcG9uc2UpKSk7YnJlYWs7Y2FzZSJtcy1zdHJlYW0iOnJlc3BvbnNlPXhoci5yZXNwb25zZTtpZih4aHIucmVhZHlTdGF0ZSE9PXJTdGF0ZXMuTE9BRElORylicmVhazt2YXIgcmVhZGVyPW5ldyBnbG9iYWwuTVNTdHJlYW1SZWFkZXI7cmVhZGVyLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oKXtpZihyZWFkZXIucmVzdWx0LmJ5dGVMZW5ndGg+c2VsZi5fcG9zKXtzZWxmLnB1c2goQnVmZmVyLmZyb20obmV3IFVpbnQ4QXJyYXkocmVhZGVyLnJlc3VsdC5zbGljZShzZWxmLl9wb3MpKSkpO3NlbGYuX3Bvcz1yZWFkZXIucmVzdWx0LmJ5dGVMZW5ndGh9fTtyZWFkZXIub25sb2FkPWZ1bmN0aW9uKCl7cmVzZXRUaW1lcnModHJ1ZSk7c2VsZi5wdXNoKG51bGwpfTtyZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIocmVzcG9uc2UpO2JyZWFrfWlmKHNlbGYuX3hoci5yZWFkeVN0YXRlPT09clN0YXRlcy5ET05FJiZzZWxmLl9tb2RlIT09Im1zLXN0cmVhbSIpe3Jlc2V0VGltZXJzKHRydWUpO3NlbGYucHVzaChudWxsKX19fSkuY2FsbCh0aGlzKX0pLmNhbGwodGhpcyxyZXF1aXJlKCJfcHJvY2VzcyIpLHR5cGVvZiBnbG9iYWwhPT0idW5kZWZpbmVkIj9nbG9iYWw6dHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30scmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKX0seyIuL2NhcGFiaWxpdHkiOjc0LF9wcm9jZXNzOjM5LGJ1ZmZlcjo4LGluaGVyaXRzOjI5LCJyZWFkYWJsZS1zdHJlYW0iOjkxfV0sNzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe2FyZ3VtZW50c1s0XVs1OV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpfSx7ZHVwOjU5fV0sNzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe2FyZ3VtZW50c1s0XVs2MF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpfSx7Ii4vX3N0cmVhbV9yZWFkYWJsZSI6ODAsIi4vX3N0cmVhbV93cml0YWJsZSI6ODIsX3Byb2Nlc3M6MzksZHVwOjYwLGluaGVyaXRzOjI5fV0sNzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe2FyZ3VtZW50c1s0XVs2MV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpfSx7Ii4vX3N0cmVhbV90cmFuc2Zvcm0iOjgxLGR1cDo2MSxpbmhlcml0czoyOX1dLDgwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXthcmd1bWVudHNbNF1bNjJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKX0seyIuLi9lcnJvcnMiOjc3LCIuL19zdHJlYW1fZHVwbGV4Ijo3OCwiLi9pbnRlcm5hbC9zdHJlYW1zL2FzeW5jX2l0ZXJhdG9yIjo4MywiLi9pbnRlcm5hbC9zdHJlYW1zL2J1ZmZlcl9saXN0Ijo4NCwiLi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3kiOjg1LCIuL2ludGVybmFsL3N0cmVhbXMvZnJvbSI6ODcsIi4vaW50ZXJuYWwvc3RyZWFtcy9zdGF0ZSI6ODksIi4vaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0iOjkwLF9wcm9jZXNzOjM5LGJ1ZmZlcjo4LGR1cDo2MixldmVudHM6MTQsaW5oZXJpdHM6MjksInN0cmluZ19kZWNvZGVyLyI6OTIsdXRpbDo3fV0sODE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe2FyZ3VtZW50c1s0XVs2M11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpfSx7Ii4uL2Vycm9ycyI6NzcsIi4vX3N0cmVhbV9kdXBsZXgiOjc4LGR1cDo2Myxpbmhlcml0czoyOX1dLDgyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXthcmd1bWVudHNbNF1bNjRdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKX0seyIuLi9lcnJvcnMiOjc3LCIuL19zdHJlYW1fZHVwbGV4Ijo3OCwiLi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3kiOjg1LCIuL2ludGVybmFsL3N0cmVhbXMvc3RhdGUiOjg5LCIuL2ludGVybmFsL3N0cmVhbXMvc3RyZWFtIjo5MCxfcHJvY2VzczozOSxidWZmZXI6OCxkdXA6NjQsaW5oZXJpdHM6MjksInV0aWwtZGVwcmVjYXRlIjo5NH1dLDgzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXthcmd1bWVudHNbNF1bNjVdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKX0seyIuL2VuZC1vZi1zdHJlYW0iOjg2LF9wcm9jZXNzOjM5LGR1cDo2NX1dLDg0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXthcmd1bWVudHNbNF1bNjZdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKX0se2J1ZmZlcjo4LGR1cDo2Nix1dGlsOjd9XSw4NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7YXJndW1lbnRzWzRdWzY3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cyl9LHtfcHJvY2VzczozOSxkdXA6Njd9XSw4NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7YXJndW1lbnRzWzRdWzY4XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cyl9LHsiLi4vLi4vLi4vZXJyb3JzIjo3NyxkdXA6Njh9XSw4NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7YXJndW1lbnRzWzRdWzY5XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cyl9LHtkdXA6Njl9XSw4ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7YXJndW1lbnRzWzRdWzcwXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cyl9LHsiLi4vLi4vLi4vZXJyb3JzIjo3NywiLi9lbmQtb2Ytc3RyZWFtIjo4NixkdXA6NzB9XSw4OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7YXJndW1lbnRzWzRdWzcxXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cyl9LHsiLi4vLi4vLi4vZXJyb3JzIjo3NyxkdXA6NzF9XSw5MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7YXJndW1lbnRzWzRdWzcyXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cyl9LHtkdXA6NzIsZXZlbnRzOjE0fV0sOTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe2V4cG9ydHM9bW9kdWxlLmV4cG9ydHM9cmVxdWlyZSgiLi9saWIvX3N0cmVhbV9yZWFkYWJsZS5qcyIpO2V4cG9ydHMuU3RyZWFtPWV4cG9ydHM7ZXhwb3J0cy5SZWFkYWJsZT1leHBvcnRzO2V4cG9ydHMuV3JpdGFibGU9cmVxdWlyZSgiLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcyIpO2V4cG9ydHMuRHVwbGV4PXJlcXVpcmUoIi4vbGliL19zdHJlYW1fZHVwbGV4LmpzIik7ZXhwb3J0cy5UcmFuc2Zvcm09cmVxdWlyZSgiLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMiKTtleHBvcnRzLlBhc3NUaHJvdWdoPXJlcXVpcmUoIi4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiKTtleHBvcnRzLmZpbmlzaGVkPXJlcXVpcmUoIi4vbGliL2ludGVybmFsL3N0cmVhbXMvZW5kLW9mLXN0cmVhbS5qcyIpO2V4cG9ydHMucGlwZWxpbmU9cmVxdWlyZSgiLi9saWIvaW50ZXJuYWwvc3RyZWFtcy9waXBlbGluZS5qcyIpfSx7Ii4vbGliL19zdHJlYW1fZHVwbGV4LmpzIjo3OCwiLi9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qcyI6NzksIi4vbGliL19zdHJlYW1fcmVhZGFibGUuanMiOjgwLCIuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyI6ODEsIi4vbGliL19zdHJlYW1fd3JpdGFibGUuanMiOjgyLCIuL2xpYi9pbnRlcm5hbC9zdHJlYW1zL2VuZC1vZi1zdHJlYW0uanMiOjg2LCIuL2xpYi9pbnRlcm5hbC9zdHJlYW1zL3BpcGVsaW5lLmpzIjo4OH1dLDkyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsidXNlIHN0cmljdCI7dmFyIEJ1ZmZlcj1yZXF1aXJlKCJzYWZlLWJ1ZmZlciIpLkJ1ZmZlcjt2YXIgaXNFbmNvZGluZz1CdWZmZXIuaXNFbmNvZGluZ3x8ZnVuY3Rpb24oZW5jb2Rpbmcpe2VuY29kaW5nPSIiK2VuY29kaW5nO3N3aXRjaChlbmNvZGluZyYmZW5jb2RpbmcudG9Mb3dlckNhc2UoKSl7Y2FzZSJoZXgiOmNhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6Y2FzZSJhc2NpaSI6Y2FzZSJiaW5hcnkiOmNhc2UiYmFzZTY0IjpjYXNlInVjczIiOmNhc2UidWNzLTIiOmNhc2UidXRmMTZsZSI6Y2FzZSJ1dGYtMTZsZSI6Y2FzZSJyYXciOnJldHVybiB0cnVlO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX07ZnVuY3Rpb24gX25vcm1hbGl6ZUVuY29kaW5nKGVuYyl7aWYoIWVuYylyZXR1cm4idXRmOCI7dmFyIHJldHJpZWQ7d2hpbGUodHJ1ZSl7c3dpdGNoKGVuYyl7Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpyZXR1cm4idXRmOCI7Y2FzZSJ1Y3MyIjpjYXNlInVjcy0yIjpjYXNlInV0ZjE2bGUiOmNhc2UidXRmLTE2bGUiOnJldHVybiJ1dGYxNmxlIjtjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOnJldHVybiJsYXRpbjEiO2Nhc2UiYmFzZTY0IjpjYXNlImFzY2lpIjpjYXNlImhleCI6cmV0dXJuIGVuYztkZWZhdWx0OmlmKHJldHJpZWQpcmV0dXJuO2VuYz0oIiIrZW5jKS50b0xvd2VyQ2FzZSgpO3JldHJpZWQ9dHJ1ZX19fWZ1bmN0aW9uIG5vcm1hbGl6ZUVuY29kaW5nKGVuYyl7dmFyIG5lbmM9X25vcm1hbGl6ZUVuY29kaW5nKGVuYyk7aWYodHlwZW9mIG5lbmMhPT0ic3RyaW5nIiYmKEJ1ZmZlci5pc0VuY29kaW5nPT09aXNFbmNvZGluZ3x8IWlzRW5jb2RpbmcoZW5jKSkpdGhyb3cgbmV3IEVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK2VuYyk7cmV0dXJuIG5lbmN8fGVuY31leHBvcnRzLlN0cmluZ0RlY29kZXI9U3RyaW5nRGVjb2RlcjtmdW5jdGlvbiBTdHJpbmdEZWNvZGVyKGVuY29kaW5nKXt0aGlzLmVuY29kaW5nPW5vcm1hbGl6ZUVuY29kaW5nKGVuY29kaW5nKTt2YXIgbmI7c3dpdGNoKHRoaXMuZW5jb2Rpbmcpe2Nhc2UidXRmMTZsZSI6dGhpcy50ZXh0PXV0ZjE2VGV4dDt0aGlzLmVuZD11dGYxNkVuZDtuYj00O2JyZWFrO2Nhc2UidXRmOCI6dGhpcy5maWxsTGFzdD11dGY4RmlsbExhc3Q7bmI9NDticmVhaztjYXNlImJhc2U2NCI6dGhpcy50ZXh0PWJhc2U2NFRleHQ7dGhpcy5lbmQ9YmFzZTY0RW5kO25iPTM7YnJlYWs7ZGVmYXVsdDp0aGlzLndyaXRlPXNpbXBsZVdyaXRlO3RoaXMuZW5kPXNpbXBsZUVuZDtyZXR1cm59dGhpcy5sYXN0TmVlZD0wO3RoaXMubGFzdFRvdGFsPTA7dGhpcy5sYXN0Q2hhcj1CdWZmZXIuYWxsb2NVbnNhZmUobmIpfVN0cmluZ0RlY29kZXIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGJ1Zil7aWYoYnVmLmxlbmd0aD09PTApcmV0dXJuIiI7dmFyIHI7dmFyIGk7aWYodGhpcy5sYXN0TmVlZCl7cj10aGlzLmZpbGxMYXN0KGJ1Zik7aWYocj09PXVuZGVmaW5lZClyZXR1cm4iIjtpPXRoaXMubGFzdE5lZWQ7dGhpcy5sYXN0TmVlZD0wfWVsc2V7aT0wfWlmKGk8YnVmLmxlbmd0aClyZXR1cm4gcj9yK3RoaXMudGV4dChidWYsaSk6dGhpcy50ZXh0KGJ1ZixpKTtyZXR1cm4gcnx8IiJ9O1N0cmluZ0RlY29kZXIucHJvdG90eXBlLmVuZD11dGY4RW5kO1N0cmluZ0RlY29kZXIucHJvdG90eXBlLnRleHQ9dXRmOFRleHQ7U3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZmlsbExhc3Q9ZnVuY3Rpb24oYnVmKXtpZih0aGlzLmxhc3ROZWVkPD1idWYubGVuZ3RoKXtidWYuY29weSh0aGlzLmxhc3RDaGFyLHRoaXMubGFzdFRvdGFsLXRoaXMubGFzdE5lZWQsMCx0aGlzLmxhc3ROZWVkKTtyZXR1cm4gdGhpcy5sYXN0Q2hhci50b1N0cmluZyh0aGlzLmVuY29kaW5nLDAsdGhpcy5sYXN0VG90YWwpfWJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsdGhpcy5sYXN0VG90YWwtdGhpcy5sYXN0TmVlZCwwLGJ1Zi5sZW5ndGgpO3RoaXMubGFzdE5lZWQtPWJ1Zi5sZW5ndGh9O2Z1bmN0aW9uIHV0ZjhDaGVja0J5dGUoYnl0ZSl7aWYoYnl0ZTw9MTI3KXJldHVybiAwO2Vsc2UgaWYoYnl0ZT4+NT09PTYpcmV0dXJuIDI7ZWxzZSBpZihieXRlPj40PT09MTQpcmV0dXJuIDM7ZWxzZSBpZihieXRlPj4zPT09MzApcmV0dXJuIDQ7cmV0dXJuIGJ5dGU+PjY9PT0yPy0xOi0yfWZ1bmN0aW9uIHV0ZjhDaGVja0luY29tcGxldGUoc2VsZixidWYsaSl7dmFyIGo9YnVmLmxlbmd0aC0xO2lmKGo8aSlyZXR1cm4gMDt2YXIgbmI9dXRmOENoZWNrQnl0ZShidWZbal0pO2lmKG5iPj0wKXtpZihuYj4wKXNlbGYubGFzdE5lZWQ9bmItMTtyZXR1cm4gbmJ9aWYoLS1qPGl8fG5iPT09LTIpcmV0dXJuIDA7bmI9dXRmOENoZWNrQnl0ZShidWZbal0pO2lmKG5iPj0wKXtpZihuYj4wKXNlbGYubGFzdE5lZWQ9bmItMjtyZXR1cm4gbmJ9aWYoLS1qPGl8fG5iPT09LTIpcmV0dXJuIDA7bmI9dXRmOENoZWNrQnl0ZShidWZbal0pO2lmKG5iPj0wKXtpZihuYj4wKXtpZihuYj09PTIpbmI9MDtlbHNlIHNlbGYubGFzdE5lZWQ9bmItM31yZXR1cm4gbmJ9cmV0dXJuIDB9ZnVuY3Rpb24gdXRmOENoZWNrRXh0cmFCeXRlcyhzZWxmLGJ1ZixwKXtpZigoYnVmWzBdJjE5MikhPT0xMjgpe3NlbGYubGFzdE5lZWQ9MDtyZXR1cm4i77+9In1pZihzZWxmLmxhc3ROZWVkPjEmJmJ1Zi5sZW5ndGg+MSl7aWYoKGJ1ZlsxXSYxOTIpIT09MTI4KXtzZWxmLmxhc3ROZWVkPTE7cmV0dXJuIu+/vSJ9aWYoc2VsZi5sYXN0TmVlZD4yJiZidWYubGVuZ3RoPjIpe2lmKChidWZbMl0mMTkyKSE9PTEyOCl7c2VsZi5sYXN0TmVlZD0yO3JldHVybiLvv70ifX19fWZ1bmN0aW9uIHV0ZjhGaWxsTGFzdChidWYpe3ZhciBwPXRoaXMubGFzdFRvdGFsLXRoaXMubGFzdE5lZWQ7dmFyIHI9dXRmOENoZWNrRXh0cmFCeXRlcyh0aGlzLGJ1ZixwKTtpZihyIT09dW5kZWZpbmVkKXJldHVybiByO2lmKHRoaXMubGFzdE5lZWQ8PWJ1Zi5sZW5ndGgpe2J1Zi5jb3B5KHRoaXMubGFzdENoYXIscCwwLHRoaXMubGFzdE5lZWQpO3JldHVybiB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsMCx0aGlzLmxhc3RUb3RhbCl9YnVmLmNvcHkodGhpcy5sYXN0Q2hhcixwLDAsYnVmLmxlbmd0aCk7dGhpcy5sYXN0TmVlZC09YnVmLmxlbmd0aH1mdW5jdGlvbiB1dGY4VGV4dChidWYsaSl7dmFyIHRvdGFsPXV0ZjhDaGVja0luY29tcGxldGUodGhpcyxidWYsaSk7aWYoIXRoaXMubGFzdE5lZWQpcmV0dXJuIGJ1Zi50b1N0cmluZygidXRmOCIsaSk7dGhpcy5sYXN0VG90YWw9dG90YWw7dmFyIGVuZD1idWYubGVuZ3RoLSh0b3RhbC10aGlzLmxhc3ROZWVkKTtidWYuY29weSh0aGlzLmxhc3RDaGFyLDAsZW5kKTtyZXR1cm4gYnVmLnRvU3RyaW5nKCJ1dGY4IixpLGVuZCl9ZnVuY3Rpb24gdXRmOEVuZChidWYpe3ZhciByPWJ1ZiYmYnVmLmxlbmd0aD90aGlzLndyaXRlKGJ1Zik6IiI7aWYodGhpcy5sYXN0TmVlZClyZXR1cm4gcisi77+9IjtyZXR1cm4gcn1mdW5jdGlvbiB1dGYxNlRleHQoYnVmLGkpe2lmKChidWYubGVuZ3RoLWkpJTI9PT0wKXt2YXIgcj1idWYudG9TdHJpbmcoInV0ZjE2bGUiLGkpO2lmKHIpe3ZhciBjPXIuY2hhckNvZGVBdChyLmxlbmd0aC0xKTtpZihjPj01NTI5NiYmYzw9NTYzMTkpe3RoaXMubGFzdE5lZWQ9Mjt0aGlzLmxhc3RUb3RhbD00O3RoaXMubGFzdENoYXJbMF09YnVmW2J1Zi5sZW5ndGgtMl07dGhpcy5sYXN0Q2hhclsxXT1idWZbYnVmLmxlbmd0aC0xXTtyZXR1cm4gci5zbGljZSgwLC0xKX19cmV0dXJuIHJ9dGhpcy5sYXN0TmVlZD0xO3RoaXMubGFzdFRvdGFsPTI7dGhpcy5sYXN0Q2hhclswXT1idWZbYnVmLmxlbmd0aC0xXTtyZXR1cm4gYnVmLnRvU3RyaW5nKCJ1dGYxNmxlIixpLGJ1Zi5sZW5ndGgtMSl9ZnVuY3Rpb24gdXRmMTZFbmQoYnVmKXt2YXIgcj1idWYmJmJ1Zi5sZW5ndGg/dGhpcy53cml0ZShidWYpOiIiO2lmKHRoaXMubGFzdE5lZWQpe3ZhciBlbmQ9dGhpcy5sYXN0VG90YWwtdGhpcy5sYXN0TmVlZDtyZXR1cm4gcit0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKCJ1dGYxNmxlIiwwLGVuZCl9cmV0dXJuIHJ9ZnVuY3Rpb24gYmFzZTY0VGV4dChidWYsaSl7dmFyIG49KGJ1Zi5sZW5ndGgtaSklMztpZihuPT09MClyZXR1cm4gYnVmLnRvU3RyaW5nKCJiYXNlNjQiLGkpO3RoaXMubGFzdE5lZWQ9My1uO3RoaXMubGFzdFRvdGFsPTM7aWYobj09PTEpe3RoaXMubGFzdENoYXJbMF09YnVmW2J1Zi5sZW5ndGgtMV19ZWxzZXt0aGlzLmxhc3RDaGFyWzBdPWJ1ZltidWYubGVuZ3RoLTJdO3RoaXMubGFzdENoYXJbMV09YnVmW2J1Zi5sZW5ndGgtMV19cmV0dXJuIGJ1Zi50b1N0cmluZygiYmFzZTY0IixpLGJ1Zi5sZW5ndGgtbil9ZnVuY3Rpb24gYmFzZTY0RW5kKGJ1Zil7dmFyIHI9YnVmJiZidWYubGVuZ3RoP3RoaXMud3JpdGUoYnVmKToiIjtpZih0aGlzLmxhc3ROZWVkKXJldHVybiByK3RoaXMubGFzdENoYXIudG9TdHJpbmcoImJhc2U2NCIsMCwzLXRoaXMubGFzdE5lZWQpO3JldHVybiByfWZ1bmN0aW9uIHNpbXBsZVdyaXRlKGJ1Zil7cmV0dXJuIGJ1Zi50b1N0cmluZyh0aGlzLmVuY29kaW5nKX1mdW5jdGlvbiBzaW1wbGVFbmQoYnVmKXtyZXR1cm4gYnVmJiZidWYubGVuZ3RoP3RoaXMud3JpdGUoYnVmKToiIn19LHsic2FmZS1idWZmZXIiOjQ2fV0sOTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgcHVueWNvZGU9cmVxdWlyZSgicHVueWNvZGUiKTtmdW5jdGlvbiBVcmwoKXt0aGlzLnByb3RvY29sPW51bGw7dGhpcy5zbGFzaGVzPW51bGw7dGhpcy5hdXRoPW51bGw7dGhpcy5ob3N0PW51bGw7dGhpcy5wb3J0PW51bGw7dGhpcy5ob3N0bmFtZT1udWxsO3RoaXMuaGFzaD1udWxsO3RoaXMuc2VhcmNoPW51bGw7dGhpcy5xdWVyeT1udWxsO3RoaXMucGF0aG5hbWU9bnVsbDt0aGlzLnBhdGg9bnVsbDt0aGlzLmhyZWY9bnVsbH12YXIgcHJvdG9jb2xQYXR0ZXJuPS9eKFthLXowLTkuKy1dKzopL2kscG9ydFBhdHRlcm49LzpbMC05XSokLyxzaW1wbGVQYXRoUGF0dGVybj0vXihcL1wvPyg/IVwvKVteP1xzXSopKFw/W15cc10qKT8kLyxkZWxpbXM9WyI8IiwiPiIsJyInLCJgIiwiICIsIlxyIiwiXG4iLCJcdCJdLHVud2lzZT1bInsiLCJ9IiwifCIsIlxcIiwiXiIsImAiXS5jb25jYXQoZGVsaW1zKSxhdXRvRXNjYXBlPVsiJyJdLmNvbmNhdCh1bndpc2UpLG5vbkhvc3RDaGFycz1bIiUiLCIvIiwiPyIsIjsiLCIjIl0uY29uY2F0KGF1dG9Fc2NhcGUpLGhvc3RFbmRpbmdDaGFycz1bIi8iLCI/IiwiIyJdLGhvc3RuYW1lTWF4TGVuPTI1NSxob3N0bmFtZVBhcnRQYXR0ZXJuPS9eWythLXowLTlBLVpfLV17MCw2M30kLyxob3N0bmFtZVBhcnRTdGFydD0vXihbK2EtejAtOUEtWl8tXXswLDYzfSkoLiopJC8sdW5zYWZlUHJvdG9jb2w9e2phdmFzY3JpcHQ6dHJ1ZSwiamF2YXNjcmlwdDoiOnRydWV9LGhvc3RsZXNzUHJvdG9jb2w9e2phdmFzY3JpcHQ6dHJ1ZSwiamF2YXNjcmlwdDoiOnRydWV9LHNsYXNoZWRQcm90b2NvbD17aHR0cDp0cnVlLGh0dHBzOnRydWUsZnRwOnRydWUsZ29waGVyOnRydWUsZmlsZTp0cnVlLCJodHRwOiI6dHJ1ZSwiaHR0cHM6Ijp0cnVlLCJmdHA6Ijp0cnVlLCJnb3BoZXI6Ijp0cnVlLCJmaWxlOiI6dHJ1ZX0scXVlcnlzdHJpbmc9cmVxdWlyZSgicXMiKTtmdW5jdGlvbiB1cmxQYXJzZSh1cmwscGFyc2VRdWVyeVN0cmluZyxzbGFzaGVzRGVub3RlSG9zdCl7aWYodXJsJiZ0eXBlb2YgdXJsPT09Im9iamVjdCImJnVybCBpbnN0YW5jZW9mIFVybCl7cmV0dXJuIHVybH12YXIgdT1uZXcgVXJsO3UucGFyc2UodXJsLHBhcnNlUXVlcnlTdHJpbmcsc2xhc2hlc0Rlbm90ZUhvc3QpO3JldHVybiB1fVVybC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odXJsLHBhcnNlUXVlcnlTdHJpbmcsc2xhc2hlc0Rlbm90ZUhvc3Qpe2lmKHR5cGVvZiB1cmwhPT0ic3RyaW5nIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiUGFyYW1ldGVyICd1cmwnIG11c3QgYmUgYSBzdHJpbmcsIG5vdCAiK3R5cGVvZiB1cmwpfXZhciBxdWVyeUluZGV4PXVybC5pbmRleE9mKCI/Iiksc3BsaXR0ZXI9cXVlcnlJbmRleCE9PS0xJiZxdWVyeUluZGV4PHVybC5pbmRleE9mKCIjIik/Ij8iOiIjIix1U3BsaXQ9dXJsLnNwbGl0KHNwbGl0dGVyKSxzbGFzaFJlZ2V4PS9cXC9nO3VTcGxpdFswXT11U3BsaXRbMF0ucmVwbGFjZShzbGFzaFJlZ2V4LCIvIik7dXJsPXVTcGxpdC5qb2luKHNwbGl0dGVyKTt2YXIgcmVzdD11cmw7cmVzdD1yZXN0LnRyaW0oKTtpZighc2xhc2hlc0Rlbm90ZUhvc3QmJnVybC5zcGxpdCgiIyIpLmxlbmd0aD09PTEpe3ZhciBzaW1wbGVQYXRoPXNpbXBsZVBhdGhQYXR0ZXJuLmV4ZWMocmVzdCk7aWYoc2ltcGxlUGF0aCl7dGhpcy5wYXRoPXJlc3Q7dGhpcy5ocmVmPXJlc3Q7dGhpcy5wYXRobmFtZT1zaW1wbGVQYXRoWzFdO2lmKHNpbXBsZVBhdGhbMl0pe3RoaXMuc2VhcmNoPXNpbXBsZVBhdGhbMl07aWYocGFyc2VRdWVyeVN0cmluZyl7dGhpcy5xdWVyeT1xdWVyeXN0cmluZy5wYXJzZSh0aGlzLnNlYXJjaC5zdWJzdHIoMSkpfWVsc2V7dGhpcy5xdWVyeT10aGlzLnNlYXJjaC5zdWJzdHIoMSl9fWVsc2UgaWYocGFyc2VRdWVyeVN0cmluZyl7dGhpcy5zZWFyY2g9IiI7dGhpcy5xdWVyeT17fX1yZXR1cm4gdGhpc319dmFyIHByb3RvPXByb3RvY29sUGF0dGVybi5leGVjKHJlc3QpO2lmKHByb3RvKXtwcm90bz1wcm90b1swXTt2YXIgbG93ZXJQcm90bz1wcm90by50b0xvd2VyQ2FzZSgpO3RoaXMucHJvdG9jb2w9bG93ZXJQcm90bztyZXN0PXJlc3Quc3Vic3RyKHByb3RvLmxlbmd0aCl9aWYoc2xhc2hlc0Rlbm90ZUhvc3R8fHByb3RvfHxyZXN0Lm1hdGNoKC9eXC9cL1teQC9dK0BbXkAvXSsvKSl7dmFyIHNsYXNoZXM9cmVzdC5zdWJzdHIoMCwyKT09PSIvLyI7aWYoc2xhc2hlcyYmIShwcm90byYmaG9zdGxlc3NQcm90b2NvbFtwcm90b10pKXtyZXN0PXJlc3Quc3Vic3RyKDIpO3RoaXMuc2xhc2hlcz10cnVlfX1pZighaG9zdGxlc3NQcm90b2NvbFtwcm90b10mJihzbGFzaGVzfHxwcm90byYmIXNsYXNoZWRQcm90b2NvbFtwcm90b10pKXt2YXIgaG9zdEVuZD0tMTtmb3IodmFyIGk9MDtpPGhvc3RFbmRpbmdDaGFycy5sZW5ndGg7aSsrKXt2YXIgaGVjPXJlc3QuaW5kZXhPZihob3N0RW5kaW5nQ2hhcnNbaV0pO2lmKGhlYyE9PS0xJiYoaG9zdEVuZD09PS0xfHxoZWM8aG9zdEVuZCkpe2hvc3RFbmQ9aGVjfX12YXIgYXV0aCxhdFNpZ247aWYoaG9zdEVuZD09PS0xKXthdFNpZ249cmVzdC5sYXN0SW5kZXhPZigiQCIpfWVsc2V7YXRTaWduPXJlc3QubGFzdEluZGV4T2YoIkAiLGhvc3RFbmQpfWlmKGF0U2lnbiE9PS0xKXthdXRoPXJlc3Quc2xpY2UoMCxhdFNpZ24pO3Jlc3Q9cmVzdC5zbGljZShhdFNpZ24rMSk7dGhpcy5hdXRoPWRlY29kZVVSSUNvbXBvbmVudChhdXRoKX1ob3N0RW5kPS0xO2Zvcih2YXIgaT0wO2k8bm9uSG9zdENoYXJzLmxlbmd0aDtpKyspe3ZhciBoZWM9cmVzdC5pbmRleE9mKG5vbkhvc3RDaGFyc1tpXSk7aWYoaGVjIT09LTEmJihob3N0RW5kPT09LTF8fGhlYzxob3N0RW5kKSl7aG9zdEVuZD1oZWN9fWlmKGhvc3RFbmQ9PT0tMSl7aG9zdEVuZD1yZXN0Lmxlbmd0aH10aGlzLmhvc3Q9cmVzdC5zbGljZSgwLGhvc3RFbmQpO3Jlc3Q9cmVzdC5zbGljZShob3N0RW5kKTt0aGlzLnBhcnNlSG9zdCgpO3RoaXMuaG9zdG5hbWU9dGhpcy5ob3N0bmFtZXx8IiI7dmFyIGlwdjZIb3N0bmFtZT10aGlzLmhvc3RuYW1lWzBdPT09IlsiJiZ0aGlzLmhvc3RuYW1lW3RoaXMuaG9zdG5hbWUubGVuZ3RoLTFdPT09Il0iO2lmKCFpcHY2SG9zdG5hbWUpe3ZhciBob3N0cGFydHM9dGhpcy5ob3N0bmFtZS5zcGxpdCgvXC4vKTtmb3IodmFyIGk9MCxsPWhvc3RwYXJ0cy5sZW5ndGg7aTxsO2krKyl7dmFyIHBhcnQ9aG9zdHBhcnRzW2ldO2lmKCFwYXJ0KXtjb250aW51ZX1pZighcGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSl7dmFyIG5ld3BhcnQ9IiI7Zm9yKHZhciBqPTAsaz1wYXJ0Lmxlbmd0aDtqPGs7aisrKXtpZihwYXJ0LmNoYXJDb2RlQXQoaik+MTI3KXtuZXdwYXJ0Kz0ieCJ9ZWxzZXtuZXdwYXJ0Kz1wYXJ0W2pdfX1pZighbmV3cGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSl7dmFyIHZhbGlkUGFydHM9aG9zdHBhcnRzLnNsaWNlKDAsaSk7dmFyIG5vdEhvc3Q9aG9zdHBhcnRzLnNsaWNlKGkrMSk7dmFyIGJpdD1wYXJ0Lm1hdGNoKGhvc3RuYW1lUGFydFN0YXJ0KTtpZihiaXQpe3ZhbGlkUGFydHMucHVzaChiaXRbMV0pO25vdEhvc3QudW5zaGlmdChiaXRbMl0pfWlmKG5vdEhvc3QubGVuZ3RoKXtyZXN0PSIvIitub3RIb3N0LmpvaW4oIi4iKStyZXN0fXRoaXMuaG9zdG5hbWU9dmFsaWRQYXJ0cy5qb2luKCIuIik7YnJlYWt9fX19aWYodGhpcy5ob3N0bmFtZS5sZW5ndGg+aG9zdG5hbWVNYXhMZW4pe3RoaXMuaG9zdG5hbWU9IiJ9ZWxzZXt0aGlzLmhvc3RuYW1lPXRoaXMuaG9zdG5hbWUudG9Mb3dlckNhc2UoKX1pZighaXB2Nkhvc3RuYW1lKXt0aGlzLmhvc3RuYW1lPXB1bnljb2RlLnRvQVNDSUkodGhpcy5ob3N0bmFtZSl9dmFyIHA9dGhpcy5wb3J0PyI6Iit0aGlzLnBvcnQ6IiI7dmFyIGg9dGhpcy5ob3N0bmFtZXx8IiI7dGhpcy5ob3N0PWgrcDt0aGlzLmhyZWYrPXRoaXMuaG9zdDtpZihpcHY2SG9zdG5hbWUpe3RoaXMuaG9zdG5hbWU9dGhpcy5ob3N0bmFtZS5zdWJzdHIoMSx0aGlzLmhvc3RuYW1lLmxlbmd0aC0yKTtpZihyZXN0WzBdIT09Ii8iKXtyZXN0PSIvIityZXN0fX19aWYoIXVuc2FmZVByb3RvY29sW2xvd2VyUHJvdG9dKXtmb3IodmFyIGk9MCxsPWF1dG9Fc2NhcGUubGVuZ3RoO2k8bDtpKyspe3ZhciBhZT1hdXRvRXNjYXBlW2ldO2lmKHJlc3QuaW5kZXhPZihhZSk9PT0tMSl7Y29udGludWV9dmFyIGVzYz1lbmNvZGVVUklDb21wb25lbnQoYWUpO2lmKGVzYz09PWFlKXtlc2M9ZXNjYXBlKGFlKX1yZXN0PXJlc3Quc3BsaXQoYWUpLmpvaW4oZXNjKX19dmFyIGhhc2g9cmVzdC5pbmRleE9mKCIjIik7aWYoaGFzaCE9PS0xKXt0aGlzLmhhc2g9cmVzdC5zdWJzdHIoaGFzaCk7cmVzdD1yZXN0LnNsaWNlKDAsaGFzaCl9dmFyIHFtPXJlc3QuaW5kZXhPZigiPyIpO2lmKHFtIT09LTEpe3RoaXMuc2VhcmNoPXJlc3Quc3Vic3RyKHFtKTt0aGlzLnF1ZXJ5PXJlc3Quc3Vic3RyKHFtKzEpO2lmKHBhcnNlUXVlcnlTdHJpbmcpe3RoaXMucXVlcnk9cXVlcnlzdHJpbmcucGFyc2UodGhpcy5xdWVyeSl9cmVzdD1yZXN0LnNsaWNlKDAscW0pfWVsc2UgaWYocGFyc2VRdWVyeVN0cmluZyl7dGhpcy5zZWFyY2g9IiI7dGhpcy5xdWVyeT17fX1pZihyZXN0KXt0aGlzLnBhdGhuYW1lPXJlc3R9aWYoc2xhc2hlZFByb3RvY29sW2xvd2VyUHJvdG9dJiZ0aGlzLmhvc3RuYW1lJiYhdGhpcy5wYXRobmFtZSl7dGhpcy5wYXRobmFtZT0iLyJ9aWYodGhpcy5wYXRobmFtZXx8dGhpcy5zZWFyY2gpe3ZhciBwPXRoaXMucGF0aG5hbWV8fCIiO3ZhciBzPXRoaXMuc2VhcmNofHwiIjt0aGlzLnBhdGg9cCtzfXRoaXMuaHJlZj10aGlzLmZvcm1hdCgpO3JldHVybiB0aGlzfTtmdW5jdGlvbiB1cmxGb3JtYXQob2JqKXtpZih0eXBlb2Ygb2JqPT09InN0cmluZyIpe29iaj11cmxQYXJzZShvYmopfWlmKCEob2JqIGluc3RhbmNlb2YgVXJsKSl7cmV0dXJuIFVybC5wcm90b3R5cGUuZm9ybWF0LmNhbGwob2JqKX1yZXR1cm4gb2JqLmZvcm1hdCgpfVVybC5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKCl7dmFyIGF1dGg9dGhpcy5hdXRofHwiIjtpZihhdXRoKXthdXRoPWVuY29kZVVSSUNvbXBvbmVudChhdXRoKTthdXRoPWF1dGgucmVwbGFjZSgvJTNBL2ksIjoiKTthdXRoKz0iQCJ9dmFyIHByb3RvY29sPXRoaXMucHJvdG9jb2x8fCIiLHBhdGhuYW1lPXRoaXMucGF0aG5hbWV8fCIiLGhhc2g9dGhpcy5oYXNofHwiIixob3N0PWZhbHNlLHF1ZXJ5PSIiO2lmKHRoaXMuaG9zdCl7aG9zdD1hdXRoK3RoaXMuaG9zdH1lbHNlIGlmKHRoaXMuaG9zdG5hbWUpe2hvc3Q9YXV0aCsodGhpcy5ob3N0bmFtZS5pbmRleE9mKCI6Iik9PT0tMT90aGlzLmhvc3RuYW1lOiJbIit0aGlzLmhvc3RuYW1lKyJdIik7aWYodGhpcy5wb3J0KXtob3N0Kz0iOiIrdGhpcy5wb3J0fX1pZih0aGlzLnF1ZXJ5JiZ0eXBlb2YgdGhpcy5xdWVyeT09PSJvYmplY3QiJiZPYmplY3Qua2V5cyh0aGlzLnF1ZXJ5KS5sZW5ndGgpe3F1ZXJ5PXF1ZXJ5c3RyaW5nLnN0cmluZ2lmeSh0aGlzLnF1ZXJ5KX12YXIgc2VhcmNoPXRoaXMuc2VhcmNofHxxdWVyeSYmIj8iK3F1ZXJ5fHwiIjtpZihwcm90b2NvbCYmcHJvdG9jb2wuc3Vic3RyKC0xKSE9PSI6Iil7cHJvdG9jb2wrPSI6In1pZih0aGlzLnNsYXNoZXN8fCghcHJvdG9jb2x8fHNsYXNoZWRQcm90b2NvbFtwcm90b2NvbF0pJiZob3N0IT09ZmFsc2Upe2hvc3Q9Ii8vIisoaG9zdHx8IiIpO2lmKHBhdGhuYW1lJiZwYXRobmFtZS5jaGFyQXQoMCkhPT0iLyIpe3BhdGhuYW1lPSIvIitwYXRobmFtZX19ZWxzZSBpZighaG9zdCl7aG9zdD0iIn1pZihoYXNoJiZoYXNoLmNoYXJBdCgwKSE9PSIjIil7aGFzaD0iIyIraGFzaH1pZihzZWFyY2gmJnNlYXJjaC5jaGFyQXQoMCkhPT0iPyIpe3NlYXJjaD0iPyIrc2VhcmNofXBhdGhuYW1lPXBhdGhuYW1lLnJlcGxhY2UoL1s/I10vZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChtYXRjaCl9KTtzZWFyY2g9c2VhcmNoLnJlcGxhY2UoIiMiLCIlMjMiKTtyZXR1cm4gcHJvdG9jb2wraG9zdCtwYXRobmFtZStzZWFyY2graGFzaH07ZnVuY3Rpb24gdXJsUmVzb2x2ZShzb3VyY2UscmVsYXRpdmUpe3JldHVybiB1cmxQYXJzZShzb3VyY2UsZmFsc2UsdHJ1ZSkucmVzb2x2ZShyZWxhdGl2ZSl9VXJsLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHJlbGF0aXZlKXtyZXR1cm4gdGhpcy5yZXNvbHZlT2JqZWN0KHVybFBhcnNlKHJlbGF0aXZlLGZhbHNlLHRydWUpKS5mb3JtYXQoKX07ZnVuY3Rpb24gdXJsUmVzb2x2ZU9iamVjdChzb3VyY2UscmVsYXRpdmUpe2lmKCFzb3VyY2Upe3JldHVybiByZWxhdGl2ZX1yZXR1cm4gdXJsUGFyc2Uoc291cmNlLGZhbHNlLHRydWUpLnJlc29sdmVPYmplY3QocmVsYXRpdmUpfVVybC5wcm90b3R5cGUucmVzb2x2ZU9iamVjdD1mdW5jdGlvbihyZWxhdGl2ZSl7aWYodHlwZW9mIHJlbGF0aXZlPT09InN0cmluZyIpe3ZhciByZWw9bmV3IFVybDtyZWwucGFyc2UocmVsYXRpdmUsZmFsc2UsdHJ1ZSk7cmVsYXRpdmU9cmVsfXZhciByZXN1bHQ9bmV3IFVybDt2YXIgdGtleXM9T2JqZWN0LmtleXModGhpcyk7Zm9yKHZhciB0az0wO3RrPHRrZXlzLmxlbmd0aDt0aysrKXt2YXIgdGtleT10a2V5c1t0a107cmVzdWx0W3RrZXldPXRoaXNbdGtleV19cmVzdWx0Lmhhc2g9cmVsYXRpdmUuaGFzaDtpZihyZWxhdGl2ZS5ocmVmPT09IiIpe3Jlc3VsdC5ocmVmPXJlc3VsdC5mb3JtYXQoKTtyZXR1cm4gcmVzdWx0fWlmKHJlbGF0aXZlLnNsYXNoZXMmJiFyZWxhdGl2ZS5wcm90b2NvbCl7dmFyIHJrZXlzPU9iamVjdC5rZXlzKHJlbGF0aXZlKTtmb3IodmFyIHJrPTA7cms8cmtleXMubGVuZ3RoO3JrKyspe3ZhciBya2V5PXJrZXlzW3JrXTtpZihya2V5IT09InByb3RvY29sIil7cmVzdWx0W3JrZXldPXJlbGF0aXZlW3JrZXldfX1pZihzbGFzaGVkUHJvdG9jb2xbcmVzdWx0LnByb3RvY29sXSYmcmVzdWx0Lmhvc3RuYW1lJiYhcmVzdWx0LnBhdGhuYW1lKXtyZXN1bHQucGF0aG5hbWU9Ii8iO3Jlc3VsdC5wYXRoPXJlc3VsdC5wYXRobmFtZX1yZXN1bHQuaHJlZj1yZXN1bHQuZm9ybWF0KCk7cmV0dXJuIHJlc3VsdH1pZihyZWxhdGl2ZS5wcm90b2NvbCYmcmVsYXRpdmUucHJvdG9jb2whPT1yZXN1bHQucHJvdG9jb2wpe2lmKCFzbGFzaGVkUHJvdG9jb2xbcmVsYXRpdmUucHJvdG9jb2xdKXt2YXIga2V5cz1PYmplY3Qua2V5cyhyZWxhdGl2ZSk7Zm9yKHZhciB2PTA7djxrZXlzLmxlbmd0aDt2Kyspe3ZhciBrPWtleXNbdl07cmVzdWx0W2tdPXJlbGF0aXZlW2tdfXJlc3VsdC5ocmVmPXJlc3VsdC5mb3JtYXQoKTtyZXR1cm4gcmVzdWx0fXJlc3VsdC5wcm90b2NvbD1yZWxhdGl2ZS5wcm90b2NvbDtpZighcmVsYXRpdmUuaG9zdCYmIWhvc3RsZXNzUHJvdG9jb2xbcmVsYXRpdmUucHJvdG9jb2xdKXt2YXIgcmVsUGF0aD0ocmVsYXRpdmUucGF0aG5hbWV8fCIiKS5zcGxpdCgiLyIpO3doaWxlKHJlbFBhdGgubGVuZ3RoJiYhKHJlbGF0aXZlLmhvc3Q9cmVsUGF0aC5zaGlmdCgpKSl7fWlmKCFyZWxhdGl2ZS5ob3N0KXtyZWxhdGl2ZS5ob3N0PSIifWlmKCFyZWxhdGl2ZS5ob3N0bmFtZSl7cmVsYXRpdmUuaG9zdG5hbWU9IiJ9aWYocmVsUGF0aFswXSE9PSIiKXtyZWxQYXRoLnVuc2hpZnQoIiIpfWlmKHJlbFBhdGgubGVuZ3RoPDIpe3JlbFBhdGgudW5zaGlmdCgiIil9cmVzdWx0LnBhdGhuYW1lPXJlbFBhdGguam9pbigiLyIpfWVsc2V7cmVzdWx0LnBhdGhuYW1lPXJlbGF0aXZlLnBhdGhuYW1lfXJlc3VsdC5zZWFyY2g9cmVsYXRpdmUuc2VhcmNoO3Jlc3VsdC5xdWVyeT1yZWxhdGl2ZS5xdWVyeTtyZXN1bHQuaG9zdD1yZWxhdGl2ZS5ob3N0fHwiIjtyZXN1bHQuYXV0aD1yZWxhdGl2ZS5hdXRoO3Jlc3VsdC5ob3N0bmFtZT1yZWxhdGl2ZS5ob3N0bmFtZXx8cmVsYXRpdmUuaG9zdDtyZXN1bHQucG9ydD1yZWxhdGl2ZS5wb3J0O2lmKHJlc3VsdC5wYXRobmFtZXx8cmVzdWx0LnNlYXJjaCl7dmFyIHA9cmVzdWx0LnBhdGhuYW1lfHwiIjt2YXIgcz1yZXN1bHQuc2VhcmNofHwiIjtyZXN1bHQucGF0aD1wK3N9cmVzdWx0LnNsYXNoZXM9cmVzdWx0LnNsYXNoZXN8fHJlbGF0aXZlLnNsYXNoZXM7cmVzdWx0LmhyZWY9cmVzdWx0LmZvcm1hdCgpO3JldHVybiByZXN1bHR9dmFyIGlzU291cmNlQWJzPXJlc3VsdC5wYXRobmFtZSYmcmVzdWx0LnBhdGhuYW1lLmNoYXJBdCgwKT09PSIvIixpc1JlbEFicz1yZWxhdGl2ZS5ob3N0fHxyZWxhdGl2ZS5wYXRobmFtZSYmcmVsYXRpdmUucGF0aG5hbWUuY2hhckF0KDApPT09Ii8iLG11c3RFbmRBYnM9aXNSZWxBYnN8fGlzU291cmNlQWJzfHxyZXN1bHQuaG9zdCYmcmVsYXRpdmUucGF0aG5hbWUscmVtb3ZlQWxsRG90cz1tdXN0RW5kQWJzLHNyY1BhdGg9cmVzdWx0LnBhdGhuYW1lJiZyZXN1bHQucGF0aG5hbWUuc3BsaXQoIi8iKXx8W10scmVsUGF0aD1yZWxhdGl2ZS5wYXRobmFtZSYmcmVsYXRpdmUucGF0aG5hbWUuc3BsaXQoIi8iKXx8W10scHN5Y2hvdGljPXJlc3VsdC5wcm90b2NvbCYmIXNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdO2lmKHBzeWNob3RpYyl7cmVzdWx0Lmhvc3RuYW1lPSIiO3Jlc3VsdC5wb3J0PW51bGw7aWYocmVzdWx0Lmhvc3Qpe2lmKHNyY1BhdGhbMF09PT0iIil7c3JjUGF0aFswXT1yZXN1bHQuaG9zdH1lbHNle3NyY1BhdGgudW5zaGlmdChyZXN1bHQuaG9zdCl9fXJlc3VsdC5ob3N0PSIiO2lmKHJlbGF0aXZlLnByb3RvY29sKXtyZWxhdGl2ZS5ob3N0bmFtZT1udWxsO3JlbGF0aXZlLnBvcnQ9bnVsbDtpZihyZWxhdGl2ZS5ob3N0KXtpZihyZWxQYXRoWzBdPT09IiIpe3JlbFBhdGhbMF09cmVsYXRpdmUuaG9zdH1lbHNle3JlbFBhdGgudW5zaGlmdChyZWxhdGl2ZS5ob3N0KX19cmVsYXRpdmUuaG9zdD1udWxsfW11c3RFbmRBYnM9bXVzdEVuZEFicyYmKHJlbFBhdGhbMF09PT0iInx8c3JjUGF0aFswXT09PSIiKX1pZihpc1JlbEFicyl7cmVzdWx0Lmhvc3Q9cmVsYXRpdmUuaG9zdHx8cmVsYXRpdmUuaG9zdD09PSIiP3JlbGF0aXZlLmhvc3Q6cmVzdWx0Lmhvc3Q7cmVzdWx0Lmhvc3RuYW1lPXJlbGF0aXZlLmhvc3RuYW1lfHxyZWxhdGl2ZS5ob3N0bmFtZT09PSIiP3JlbGF0aXZlLmhvc3RuYW1lOnJlc3VsdC5ob3N0bmFtZTtyZXN1bHQuc2VhcmNoPXJlbGF0aXZlLnNlYXJjaDtyZXN1bHQucXVlcnk9cmVsYXRpdmUucXVlcnk7c3JjUGF0aD1yZWxQYXRofWVsc2UgaWYocmVsUGF0aC5sZW5ndGgpe2lmKCFzcmNQYXRoKXtzcmNQYXRoPVtdfXNyY1BhdGgucG9wKCk7c3JjUGF0aD1zcmNQYXRoLmNvbmNhdChyZWxQYXRoKTtyZXN1bHQuc2VhcmNoPXJlbGF0aXZlLnNlYXJjaDtyZXN1bHQucXVlcnk9cmVsYXRpdmUucXVlcnl9ZWxzZSBpZihyZWxhdGl2ZS5zZWFyY2ghPW51bGwpe2lmKHBzeWNob3RpYyl7cmVzdWx0Lmhvc3Q9c3JjUGF0aC5zaGlmdCgpO3Jlc3VsdC5ob3N0bmFtZT1yZXN1bHQuaG9zdDt2YXIgYXV0aEluSG9zdD1yZXN1bHQuaG9zdCYmcmVzdWx0Lmhvc3QuaW5kZXhPZigiQCIpPjA/cmVzdWx0Lmhvc3Quc3BsaXQoIkAiKTpmYWxzZTtpZihhdXRoSW5Ib3N0KXtyZXN1bHQuYXV0aD1hdXRoSW5Ib3N0LnNoaWZ0KCk7cmVzdWx0Lmhvc3RuYW1lPWF1dGhJbkhvc3Quc2hpZnQoKTtyZXN1bHQuaG9zdD1yZXN1bHQuaG9zdG5hbWV9fXJlc3VsdC5zZWFyY2g9cmVsYXRpdmUuc2VhcmNoO3Jlc3VsdC5xdWVyeT1yZWxhdGl2ZS5xdWVyeTtpZihyZXN1bHQucGF0aG5hbWUhPT1udWxsfHxyZXN1bHQuc2VhcmNoIT09bnVsbCl7cmVzdWx0LnBhdGg9KHJlc3VsdC5wYXRobmFtZT9yZXN1bHQucGF0aG5hbWU6IiIpKyhyZXN1bHQuc2VhcmNoP3Jlc3VsdC5zZWFyY2g6IiIpfXJlc3VsdC5ocmVmPXJlc3VsdC5mb3JtYXQoKTtyZXR1cm4gcmVzdWx0fWlmKCFzcmNQYXRoLmxlbmd0aCl7cmVzdWx0LnBhdGhuYW1lPW51bGw7aWYocmVzdWx0LnNlYXJjaCl7cmVzdWx0LnBhdGg9Ii8iK3Jlc3VsdC5zZWFyY2h9ZWxzZXtyZXN1bHQucGF0aD1udWxsfXJlc3VsdC5ocmVmPXJlc3VsdC5mb3JtYXQoKTtyZXR1cm4gcmVzdWx0fXZhciBsYXN0PXNyY1BhdGguc2xpY2UoLTEpWzBdO3ZhciBoYXNUcmFpbGluZ1NsYXNoPShyZXN1bHQuaG9zdHx8cmVsYXRpdmUuaG9zdHx8c3JjUGF0aC5sZW5ndGg+MSkmJihsYXN0PT09Ii4ifHxsYXN0PT09Ii4uIil8fGxhc3Q9PT0iIjt2YXIgdXA9MDtmb3IodmFyIGk9c3JjUGF0aC5sZW5ndGg7aT49MDtpLS0pe2xhc3Q9c3JjUGF0aFtpXTtpZihsYXN0PT09Ii4iKXtzcmNQYXRoLnNwbGljZShpLDEpfWVsc2UgaWYobGFzdD09PSIuLiIpe3NyY1BhdGguc3BsaWNlKGksMSk7dXArK31lbHNlIGlmKHVwKXtzcmNQYXRoLnNwbGljZShpLDEpO3VwLS19fWlmKCFtdXN0RW5kQWJzJiYhcmVtb3ZlQWxsRG90cyl7Zm9yKDt1cC0tO3VwKXtzcmNQYXRoLnVuc2hpZnQoIi4uIil9fWlmKG11c3RFbmRBYnMmJnNyY1BhdGhbMF0hPT0iIiYmKCFzcmNQYXRoWzBdfHxzcmNQYXRoWzBdLmNoYXJBdCgwKSE9PSIvIikpe3NyY1BhdGgudW5zaGlmdCgiIil9aWYoaGFzVHJhaWxpbmdTbGFzaCYmc3JjUGF0aC5qb2luKCIvIikuc3Vic3RyKC0xKSE9PSIvIil7c3JjUGF0aC5wdXNoKCIiKX12YXIgaXNBYnNvbHV0ZT1zcmNQYXRoWzBdPT09IiJ8fHNyY1BhdGhbMF0mJnNyY1BhdGhbMF0uY2hhckF0KDApPT09Ii8iO2lmKHBzeWNob3RpYyl7cmVzdWx0Lmhvc3RuYW1lPWlzQWJzb2x1dGU/IiI6c3JjUGF0aC5sZW5ndGg/c3JjUGF0aC5zaGlmdCgpOiIiO3Jlc3VsdC5ob3N0PXJlc3VsdC5ob3N0bmFtZTt2YXIgYXV0aEluSG9zdD1yZXN1bHQuaG9zdCYmcmVzdWx0Lmhvc3QuaW5kZXhPZigiQCIpPjA/cmVzdWx0Lmhvc3Quc3BsaXQoIkAiKTpmYWxzZTtpZihhdXRoSW5Ib3N0KXtyZXN1bHQuYXV0aD1hdXRoSW5Ib3N0LnNoaWZ0KCk7cmVzdWx0Lmhvc3RuYW1lPWF1dGhJbkhvc3Quc2hpZnQoKTtyZXN1bHQuaG9zdD1yZXN1bHQuaG9zdG5hbWV9fW11c3RFbmRBYnM9bXVzdEVuZEFic3x8cmVzdWx0Lmhvc3QmJnNyY1BhdGgubGVuZ3RoO2lmKG11c3RFbmRBYnMmJiFpc0Fic29sdXRlKXtzcmNQYXRoLnVuc2hpZnQoIiIpfWlmKHNyY1BhdGgubGVuZ3RoPjApe3Jlc3VsdC5wYXRobmFtZT1zcmNQYXRoLmpvaW4oIi8iKX1lbHNle3Jlc3VsdC5wYXRobmFtZT1udWxsO3Jlc3VsdC5wYXRoPW51bGx9aWYocmVzdWx0LnBhdGhuYW1lIT09bnVsbHx8cmVzdWx0LnNlYXJjaCE9PW51bGwpe3Jlc3VsdC5wYXRoPShyZXN1bHQucGF0aG5hbWU/cmVzdWx0LnBhdGhuYW1lOiIiKSsocmVzdWx0LnNlYXJjaD9yZXN1bHQuc2VhcmNoOiIiKX1yZXN1bHQuYXV0aD1yZWxhdGl2ZS5hdXRofHxyZXN1bHQuYXV0aDtyZXN1bHQuc2xhc2hlcz1yZXN1bHQuc2xhc2hlc3x8cmVsYXRpdmUuc2xhc2hlcztyZXN1bHQuaHJlZj1yZXN1bHQuZm9ybWF0KCk7cmV0dXJuIHJlc3VsdH07VXJsLnByb3RvdHlwZS5wYXJzZUhvc3Q9ZnVuY3Rpb24oKXt2YXIgaG9zdD10aGlzLmhvc3Q7dmFyIHBvcnQ9cG9ydFBhdHRlcm4uZXhlYyhob3N0KTtpZihwb3J0KXtwb3J0PXBvcnRbMF07aWYocG9ydCE9PSI6Iil7dGhpcy5wb3J0PXBvcnQuc3Vic3RyKDEpfWhvc3Q9aG9zdC5zdWJzdHIoMCxob3N0Lmxlbmd0aC1wb3J0Lmxlbmd0aCl9aWYoaG9zdCl7dGhpcy5ob3N0bmFtZT1ob3N0fX07ZXhwb3J0cy5wYXJzZT11cmxQYXJzZTtleHBvcnRzLnJlc29sdmU9dXJsUmVzb2x2ZTtleHBvcnRzLnJlc29sdmVPYmplY3Q9dXJsUmVzb2x2ZU9iamVjdDtleHBvcnRzLmZvcm1hdD11cmxGb3JtYXQ7ZXhwb3J0cy5Vcmw9VXJsfSx7cHVueWNvZGU6NDAscXM6NDJ9XSw5NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7KGZ1bmN0aW9uKCl7bW9kdWxlLmV4cG9ydHM9ZGVwcmVjYXRlO2Z1bmN0aW9uIGRlcHJlY2F0ZShmbixtc2cpe2lmKGNvbmZpZygibm9EZXByZWNhdGlvbiIpKXtyZXR1cm4gZm59dmFyIHdhcm5lZD1mYWxzZTtmdW5jdGlvbiBkZXByZWNhdGVkKCl7aWYoIXdhcm5lZCl7aWYoY29uZmlnKCJ0aHJvd0RlcHJlY2F0aW9uIikpe3Rocm93IG5ldyBFcnJvcihtc2cpfWVsc2UgaWYoY29uZmlnKCJ0cmFjZURlcHJlY2F0aW9uIikpe2NvbnNvbGUudHJhY2UobXNnKX1lbHNle2NvbnNvbGUud2Fybihtc2cpfXdhcm5lZD10cnVlfXJldHVybiBmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGRlcHJlY2F0ZWR9ZnVuY3Rpb24gY29uZmlnKG5hbWUpe3RyeXtpZighZ2xvYmFsLmxvY2FsU3RvcmFnZSlyZXR1cm4gZmFsc2V9Y2F0Y2goXyl7cmV0dXJuIGZhbHNlfXZhciB2YWw9Z2xvYmFsLmxvY2FsU3RvcmFnZVtuYW1lXTtpZihudWxsPT12YWwpcmV0dXJuIGZhbHNlO3JldHVybiBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpPT09InRydWUifX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCE9PSJ1bmRlZmluZWQiP2dsb2JhbDp0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSl9LHt9XSw5NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7YXJndW1lbnRzWzRdWzNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKX0se2R1cDozfV0sOTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgaXNBcmd1bWVudHNPYmplY3Q9cmVxdWlyZSgiaXMtYXJndW1lbnRzIik7dmFyIGlzR2VuZXJhdG9yRnVuY3Rpb249cmVxdWlyZSgiaXMtZ2VuZXJhdG9yLWZ1bmN0aW9uIik7dmFyIHdoaWNoVHlwZWRBcnJheT1yZXF1aXJlKCJ3aGljaC10eXBlZC1hcnJheSIpO3ZhciBpc1R5cGVkQXJyYXk9cmVxdWlyZSgiaXMtdHlwZWQtYXJyYXkiKTtmdW5jdGlvbiB1bmN1cnJ5VGhpcyhmKXtyZXR1cm4gZi5jYWxsLmJpbmQoZil9dmFyIEJpZ0ludFN1cHBvcnRlZD10eXBlb2YgQmlnSW50IT09InVuZGVmaW5lZCI7dmFyIFN5bWJvbFN1cHBvcnRlZD10eXBlb2YgU3ltYm9sIT09InVuZGVmaW5lZCI7dmFyIE9iamVjdFRvU3RyaW5nPXVuY3VycnlUaGlzKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpO3ZhciBudW1iZXJWYWx1ZT11bmN1cnJ5VGhpcyhOdW1iZXIucHJvdG90eXBlLnZhbHVlT2YpO3ZhciBzdHJpbmdWYWx1ZT11bmN1cnJ5VGhpcyhTdHJpbmcucHJvdG90eXBlLnZhbHVlT2YpO3ZhciBib29sZWFuVmFsdWU9dW5jdXJyeVRoaXMoQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZik7aWYoQmlnSW50U3VwcG9ydGVkKXt2YXIgYmlnSW50VmFsdWU9dW5jdXJyeVRoaXMoQmlnSW50LnByb3RvdHlwZS52YWx1ZU9mKX1pZihTeW1ib2xTdXBwb3J0ZWQpe3ZhciBzeW1ib2xWYWx1ZT11bmN1cnJ5VGhpcyhTeW1ib2wucHJvdG90eXBlLnZhbHVlT2YpfWZ1bmN0aW9uIGNoZWNrQm94ZWRQcmltaXRpdmUodmFsdWUscHJvdG90eXBlVmFsdWVPZil7aWYodHlwZW9mIHZhbHVlIT09Im9iamVjdCIpe3JldHVybiBmYWxzZX10cnl7cHJvdG90eXBlVmFsdWVPZih2YWx1ZSk7cmV0dXJuIHRydWV9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX1leHBvcnRzLmlzQXJndW1lbnRzT2JqZWN0PWlzQXJndW1lbnRzT2JqZWN0O2V4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbj1pc0dlbmVyYXRvckZ1bmN0aW9uO2V4cG9ydHMuaXNUeXBlZEFycmF5PWlzVHlwZWRBcnJheTtmdW5jdGlvbiBpc1Byb21pc2UoaW5wdXQpe3JldHVybiB0eXBlb2YgUHJvbWlzZSE9PSJ1bmRlZmluZWQiJiZpbnB1dCBpbnN0YW5jZW9mIFByb21pc2V8fGlucHV0IT09bnVsbCYmdHlwZW9mIGlucHV0PT09Im9iamVjdCImJnR5cGVvZiBpbnB1dC50aGVuPT09ImZ1bmN0aW9uIiYmdHlwZW9mIGlucHV0LmNhdGNoPT09ImZ1bmN0aW9uIn1leHBvcnRzLmlzUHJvbWlzZT1pc1Byb21pc2U7ZnVuY3Rpb24gaXNBcnJheUJ1ZmZlclZpZXcodmFsdWUpe2lmKHR5cGVvZiBBcnJheUJ1ZmZlciE9PSJ1bmRlZmluZWQiJiZBcnJheUJ1ZmZlci5pc1ZpZXcpe3JldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpfXJldHVybiBpc1R5cGVkQXJyYXkodmFsdWUpfHxpc0RhdGFWaWV3KHZhbHVlKX1leHBvcnRzLmlzQXJyYXlCdWZmZXJWaWV3PWlzQXJyYXlCdWZmZXJWaWV3O2Z1bmN0aW9uIGlzVWludDhBcnJheSh2YWx1ZSl7cmV0dXJuIHdoaWNoVHlwZWRBcnJheSh2YWx1ZSk9PT0iVWludDhBcnJheSJ9ZXhwb3J0cy5pc1VpbnQ4QXJyYXk9aXNVaW50OEFycmF5O2Z1bmN0aW9uIGlzVWludDhDbGFtcGVkQXJyYXkodmFsdWUpe3JldHVybiB3aGljaFR5cGVkQXJyYXkodmFsdWUpPT09IlVpbnQ4Q2xhbXBlZEFycmF5In1leHBvcnRzLmlzVWludDhDbGFtcGVkQXJyYXk9aXNVaW50OENsYW1wZWRBcnJheTtmdW5jdGlvbiBpc1VpbnQxNkFycmF5KHZhbHVlKXtyZXR1cm4gd2hpY2hUeXBlZEFycmF5KHZhbHVlKT09PSJVaW50MTZBcnJheSJ9ZXhwb3J0cy5pc1VpbnQxNkFycmF5PWlzVWludDE2QXJyYXk7ZnVuY3Rpb24gaXNVaW50MzJBcnJheSh2YWx1ZSl7cmV0dXJuIHdoaWNoVHlwZWRBcnJheSh2YWx1ZSk9PT0iVWludDMyQXJyYXkifWV4cG9ydHMuaXNVaW50MzJBcnJheT1pc1VpbnQzMkFycmF5O2Z1bmN0aW9uIGlzSW50OEFycmF5KHZhbHVlKXtyZXR1cm4gd2hpY2hUeXBlZEFycmF5KHZhbHVlKT09PSJJbnQ4QXJyYXkifWV4cG9ydHMuaXNJbnQ4QXJyYXk9aXNJbnQ4QXJyYXk7ZnVuY3Rpb24gaXNJbnQxNkFycmF5KHZhbHVlKXtyZXR1cm4gd2hpY2hUeXBlZEFycmF5KHZhbHVlKT09PSJJbnQxNkFycmF5In1leHBvcnRzLmlzSW50MTZBcnJheT1pc0ludDE2QXJyYXk7ZnVuY3Rpb24gaXNJbnQzMkFycmF5KHZhbHVlKXtyZXR1cm4gd2hpY2hUeXBlZEFycmF5KHZhbHVlKT09PSJJbnQzMkFycmF5In1leHBvcnRzLmlzSW50MzJBcnJheT1pc0ludDMyQXJyYXk7ZnVuY3Rpb24gaXNGbG9hdDMyQXJyYXkodmFsdWUpe3JldHVybiB3aGljaFR5cGVkQXJyYXkodmFsdWUpPT09IkZsb2F0MzJBcnJheSJ9ZXhwb3J0cy5pc0Zsb2F0MzJBcnJheT1pc0Zsb2F0MzJBcnJheTtmdW5jdGlvbiBpc0Zsb2F0NjRBcnJheSh2YWx1ZSl7cmV0dXJuIHdoaWNoVHlwZWRBcnJheSh2YWx1ZSk9PT0iRmxvYXQ2NEFycmF5In1leHBvcnRzLmlzRmxvYXQ2NEFycmF5PWlzRmxvYXQ2NEFycmF5O2Z1bmN0aW9uIGlzQmlnSW50NjRBcnJheSh2YWx1ZSl7cmV0dXJuIHdoaWNoVHlwZWRBcnJheSh2YWx1ZSk9PT0iQmlnSW50NjRBcnJheSJ9ZXhwb3J0cy5pc0JpZ0ludDY0QXJyYXk9aXNCaWdJbnQ2NEFycmF5O2Z1bmN0aW9uIGlzQmlnVWludDY0QXJyYXkodmFsdWUpe3JldHVybiB3aGljaFR5cGVkQXJyYXkodmFsdWUpPT09IkJpZ1VpbnQ2NEFycmF5In1leHBvcnRzLmlzQmlnVWludDY0QXJyYXk9aXNCaWdVaW50NjRBcnJheTtmdW5jdGlvbiBpc01hcFRvU3RyaW5nKHZhbHVlKXtyZXR1cm4gT2JqZWN0VG9TdHJpbmcodmFsdWUpPT09IltvYmplY3QgTWFwXSJ9aXNNYXBUb1N0cmluZy53b3JraW5nPXR5cGVvZiBNYXAhPT0idW5kZWZpbmVkIiYmaXNNYXBUb1N0cmluZyhuZXcgTWFwKTtmdW5jdGlvbiBpc01hcCh2YWx1ZSl7aWYodHlwZW9mIE1hcD09PSJ1bmRlZmluZWQiKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGlzTWFwVG9TdHJpbmcud29ya2luZz9pc01hcFRvU3RyaW5nKHZhbHVlKTp2YWx1ZSBpbnN0YW5jZW9mIE1hcH1leHBvcnRzLmlzTWFwPWlzTWFwO2Z1bmN0aW9uIGlzU2V0VG9TdHJpbmcodmFsdWUpe3JldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSk9PT0iW29iamVjdCBTZXRdIn1pc1NldFRvU3RyaW5nLndvcmtpbmc9dHlwZW9mIFNldCE9PSJ1bmRlZmluZWQiJiZpc1NldFRvU3RyaW5nKG5ldyBTZXQpO2Z1bmN0aW9uIGlzU2V0KHZhbHVlKXtpZih0eXBlb2YgU2V0PT09InVuZGVmaW5lZCIpe3JldHVybiBmYWxzZX1yZXR1cm4gaXNTZXRUb1N0cmluZy53b3JraW5nP2lzU2V0VG9TdHJpbmcodmFsdWUpOnZhbHVlIGluc3RhbmNlb2YgU2V0fWV4cG9ydHMuaXNTZXQ9aXNTZXQ7ZnVuY3Rpb24gaXNXZWFrTWFwVG9TdHJpbmcodmFsdWUpe3JldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSk9PT0iW29iamVjdCBXZWFrTWFwXSJ9aXNXZWFrTWFwVG9TdHJpbmcud29ya2luZz10eXBlb2YgV2Vha01hcCE9PSJ1bmRlZmluZWQiJiZpc1dlYWtNYXBUb1N0cmluZyhuZXcgV2Vha01hcCk7ZnVuY3Rpb24gaXNXZWFrTWFwKHZhbHVlKXtpZih0eXBlb2YgV2Vha01hcD09PSJ1bmRlZmluZWQiKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGlzV2Vha01hcFRvU3RyaW5nLndvcmtpbmc/aXNXZWFrTWFwVG9TdHJpbmcodmFsdWUpOnZhbHVlIGluc3RhbmNlb2YgV2Vha01hcH1leHBvcnRzLmlzV2Vha01hcD1pc1dlYWtNYXA7ZnVuY3Rpb24gaXNXZWFrU2V0VG9TdHJpbmcodmFsdWUpe3JldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSk9PT0iW29iamVjdCBXZWFrU2V0XSJ9aXNXZWFrU2V0VG9TdHJpbmcud29ya2luZz10eXBlb2YgV2Vha1NldCE9PSJ1bmRlZmluZWQiJiZpc1dlYWtTZXRUb1N0cmluZyhuZXcgV2Vha1NldCk7ZnVuY3Rpb24gaXNXZWFrU2V0KHZhbHVlKXtyZXR1cm4gaXNXZWFrU2V0VG9TdHJpbmcodmFsdWUpfWV4cG9ydHMuaXNXZWFrU2V0PWlzV2Vha1NldDtmdW5jdGlvbiBpc0FycmF5QnVmZmVyVG9TdHJpbmcodmFsdWUpe3JldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSk9PT0iW29iamVjdCBBcnJheUJ1ZmZlcl0ifWlzQXJyYXlCdWZmZXJUb1N0cmluZy53b3JraW5nPXR5cGVvZiBBcnJheUJ1ZmZlciE9PSJ1bmRlZmluZWQiJiZpc0FycmF5QnVmZmVyVG9TdHJpbmcobmV3IEFycmF5QnVmZmVyKTtmdW5jdGlvbiBpc0FycmF5QnVmZmVyKHZhbHVlKXtpZih0eXBlb2YgQXJyYXlCdWZmZXI9PT0idW5kZWZpbmVkIil7cmV0dXJuIGZhbHNlfXJldHVybiBpc0FycmF5QnVmZmVyVG9TdHJpbmcud29ya2luZz9pc0FycmF5QnVmZmVyVG9TdHJpbmcodmFsdWUpOnZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ9ZXhwb3J0cy5pc0FycmF5QnVmZmVyPWlzQXJyYXlCdWZmZXI7ZnVuY3Rpb24gaXNEYXRhVmlld1RvU3RyaW5nKHZhbHVlKXtyZXR1cm4gT2JqZWN0VG9TdHJpbmcodmFsdWUpPT09IltvYmplY3QgRGF0YVZpZXddIn1pc0RhdGFWaWV3VG9TdHJpbmcud29ya2luZz10eXBlb2YgQXJyYXlCdWZmZXIhPT0idW5kZWZpbmVkIiYmdHlwZW9mIERhdGFWaWV3IT09InVuZGVmaW5lZCImJmlzRGF0YVZpZXdUb1N0cmluZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpLDAsMSkpO2Z1bmN0aW9uIGlzRGF0YVZpZXcodmFsdWUpe2lmKHR5cGVvZiBEYXRhVmlldz09PSJ1bmRlZmluZWQiKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGlzRGF0YVZpZXdUb1N0cmluZy53b3JraW5nP2lzRGF0YVZpZXdUb1N0cmluZyh2YWx1ZSk6dmFsdWUgaW5zdGFuY2VvZiBEYXRhVmlld31leHBvcnRzLmlzRGF0YVZpZXc9aXNEYXRhVmlldzt2YXIgU2hhcmVkQXJyYXlCdWZmZXJDb3B5PXR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciE9PSJ1bmRlZmluZWQiP1NoYXJlZEFycmF5QnVmZmVyOnVuZGVmaW5lZDtmdW5jdGlvbiBpc1NoYXJlZEFycmF5QnVmZmVyVG9TdHJpbmcodmFsdWUpe3JldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSk9PT0iW29iamVjdCBTaGFyZWRBcnJheUJ1ZmZlcl0ifWZ1bmN0aW9uIGlzU2hhcmVkQXJyYXlCdWZmZXIodmFsdWUpe2lmKHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlckNvcHk9PT0idW5kZWZpbmVkIil7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBpc1NoYXJlZEFycmF5QnVmZmVyVG9TdHJpbmcud29ya2luZz09PSJ1bmRlZmluZWQiKXtpc1NoYXJlZEFycmF5QnVmZmVyVG9TdHJpbmcud29ya2luZz1pc1NoYXJlZEFycmF5QnVmZmVyVG9TdHJpbmcobmV3IFNoYXJlZEFycmF5QnVmZmVyQ29weSl9cmV0dXJuIGlzU2hhcmVkQXJyYXlCdWZmZXJUb1N0cmluZy53b3JraW5nP2lzU2hhcmVkQXJyYXlCdWZmZXJUb1N0cmluZyh2YWx1ZSk6dmFsdWUgaW5zdGFuY2VvZiBTaGFyZWRBcnJheUJ1ZmZlckNvcHl9ZXhwb3J0cy5pc1NoYXJlZEFycmF5QnVmZmVyPWlzU2hhcmVkQXJyYXlCdWZmZXI7ZnVuY3Rpb24gaXNBc3luY0Z1bmN0aW9uKHZhbHVlKXtyZXR1cm4gT2JqZWN0VG9TdHJpbmcodmFsdWUpPT09IltvYmplY3QgQXN5bmNGdW5jdGlvbl0ifWV4cG9ydHMuaXNBc3luY0Z1bmN0aW9uPWlzQXN5bmNGdW5jdGlvbjtmdW5jdGlvbiBpc01hcEl0ZXJhdG9yKHZhbHVlKXtyZXR1cm4gT2JqZWN0VG9TdHJpbmcodmFsdWUpPT09IltvYmplY3QgTWFwIEl0ZXJhdG9yXSJ9ZXhwb3J0cy5pc01hcEl0ZXJhdG9yPWlzTWFwSXRlcmF0b3I7ZnVuY3Rpb24gaXNTZXRJdGVyYXRvcih2YWx1ZSl7cmV0dXJuIE9iamVjdFRvU3RyaW5nKHZhbHVlKT09PSJbb2JqZWN0IFNldCBJdGVyYXRvcl0ifWV4cG9ydHMuaXNTZXRJdGVyYXRvcj1pc1NldEl0ZXJhdG9yO2Z1bmN0aW9uIGlzR2VuZXJhdG9yT2JqZWN0KHZhbHVlKXtyZXR1cm4gT2JqZWN0VG9TdHJpbmcodmFsdWUpPT09IltvYmplY3QgR2VuZXJhdG9yXSJ9ZXhwb3J0cy5pc0dlbmVyYXRvck9iamVjdD1pc0dlbmVyYXRvck9iamVjdDtmdW5jdGlvbiBpc1dlYkFzc2VtYmx5Q29tcGlsZWRNb2R1bGUodmFsdWUpe3JldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSk9PT0iW29iamVjdCBXZWJBc3NlbWJseS5Nb2R1bGVdIn1leHBvcnRzLmlzV2ViQXNzZW1ibHlDb21waWxlZE1vZHVsZT1pc1dlYkFzc2VtYmx5Q29tcGlsZWRNb2R1bGU7ZnVuY3Rpb24gaXNOdW1iZXJPYmplY3QodmFsdWUpe3JldHVybiBjaGVja0JveGVkUHJpbWl0aXZlKHZhbHVlLG51bWJlclZhbHVlKX1leHBvcnRzLmlzTnVtYmVyT2JqZWN0PWlzTnVtYmVyT2JqZWN0O2Z1bmN0aW9uIGlzU3RyaW5nT2JqZWN0KHZhbHVlKXtyZXR1cm4gY2hlY2tCb3hlZFByaW1pdGl2ZSh2YWx1ZSxzdHJpbmdWYWx1ZSl9ZXhwb3J0cy5pc1N0cmluZ09iamVjdD1pc1N0cmluZ09iamVjdDtmdW5jdGlvbiBpc0Jvb2xlYW5PYmplY3QodmFsdWUpe3JldHVybiBjaGVja0JveGVkUHJpbWl0aXZlKHZhbHVlLGJvb2xlYW5WYWx1ZSl9ZXhwb3J0cy5pc0Jvb2xlYW5PYmplY3Q9aXNCb29sZWFuT2JqZWN0O2Z1bmN0aW9uIGlzQmlnSW50T2JqZWN0KHZhbHVlKXtyZXR1cm4gQmlnSW50U3VwcG9ydGVkJiZjaGVja0JveGVkUHJpbWl0aXZlKHZhbHVlLGJpZ0ludFZhbHVlKX1leHBvcnRzLmlzQmlnSW50T2JqZWN0PWlzQmlnSW50T2JqZWN0O2Z1bmN0aW9uIGlzU3ltYm9sT2JqZWN0KHZhbHVlKXtyZXR1cm4gU3ltYm9sU3VwcG9ydGVkJiZjaGVja0JveGVkUHJpbWl0aXZlKHZhbHVlLHN5bWJvbFZhbHVlKX1leHBvcnRzLmlzU3ltYm9sT2JqZWN0PWlzU3ltYm9sT2JqZWN0O2Z1bmN0aW9uIGlzQm94ZWRQcmltaXRpdmUodmFsdWUpe3JldHVybiBpc051bWJlck9iamVjdCh2YWx1ZSl8fGlzU3RyaW5nT2JqZWN0KHZhbHVlKXx8aXNCb29sZWFuT2JqZWN0KHZhbHVlKXx8aXNCaWdJbnRPYmplY3QodmFsdWUpfHxpc1N5bWJvbE9iamVjdCh2YWx1ZSl9ZXhwb3J0cy5pc0JveGVkUHJpbWl0aXZlPWlzQm94ZWRQcmltaXRpdmU7ZnVuY3Rpb24gaXNBbnlBcnJheUJ1ZmZlcih2YWx1ZSl7cmV0dXJuIHR5cGVvZiBVaW50OEFycmF5IT09InVuZGVmaW5lZCImJihpc0FycmF5QnVmZmVyKHZhbHVlKXx8aXNTaGFyZWRBcnJheUJ1ZmZlcih2YWx1ZSkpfWV4cG9ydHMuaXNBbnlBcnJheUJ1ZmZlcj1pc0FueUFycmF5QnVmZmVyO1siaXNQcm94eSIsImlzRXh0ZXJuYWwiLCJpc01vZHVsZU5hbWVzcGFjZU9iamVjdCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxtZXRob2Qse2VudW1lcmFibGU6ZmFsc2UsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IobWV0aG9kKyIgaXMgbm90IHN1cHBvcnRlZCBpbiB1c2VybGFuZCIpfX0pfSl9LHsiaXMtYXJndW1lbnRzIjozMCwiaXMtZ2VuZXJhdG9yLWZ1bmN0aW9uIjozMiwiaXMtdHlwZWQtYXJyYXkiOjMzLCJ3aGljaC10eXBlZC1hcnJheSI6OTh9XSw5NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKHByb2Nlc3MpeyhmdW5jdGlvbigpe3ZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzfHxmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iail7dmFyIGtleXM9T2JqZWN0LmtleXMob2JqKTt2YXIgZGVzY3JpcHRvcnM9e307Zm9yKHZhciBpPTA7aTxrZXlzLmxlbmd0aDtpKyspe2Rlc2NyaXB0b3JzW2tleXNbaV1dPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLGtleXNbaV0pfXJldHVybiBkZXNjcmlwdG9yc307dmFyIGZvcm1hdFJlZ0V4cD0vJVtzZGolXS9nO2V4cG9ydHMuZm9ybWF0PWZ1bmN0aW9uKGYpe2lmKCFpc1N0cmluZyhmKSl7dmFyIG9iamVjdHM9W107Zm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7b2JqZWN0cy5wdXNoKGluc3BlY3QoYXJndW1lbnRzW2ldKSl9cmV0dXJuIG9iamVjdHMuam9pbigiICIpfXZhciBpPTE7dmFyIGFyZ3M9YXJndW1lbnRzO3ZhciBsZW49YXJncy5sZW5ndGg7dmFyIHN0cj1TdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsZnVuY3Rpb24oeCl7aWYoeD09PSIlJSIpcmV0dXJuIiUiO2lmKGk+PWxlbilyZXR1cm4geDtzd2l0Y2goeCl7Y2FzZSIlcyI6cmV0dXJuIFN0cmluZyhhcmdzW2krK10pO2Nhc2UiJWQiOnJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtjYXNlIiVqIjp0cnl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZ3NbaSsrXSl9Y2F0Y2goXyl7cmV0dXJuIltDaXJjdWxhcl0ifWRlZmF1bHQ6cmV0dXJuIHh9fSk7Zm9yKHZhciB4PWFyZ3NbaV07aTxsZW47eD1hcmdzWysraV0pe2lmKGlzTnVsbCh4KXx8IWlzT2JqZWN0KHgpKXtzdHIrPSIgIit4fWVsc2V7c3RyKz0iICIraW5zcGVjdCh4KX19cmV0dXJuIHN0cn07ZXhwb3J0cy5kZXByZWNhdGU9ZnVuY3Rpb24oZm4sbXNnKXtpZih0eXBlb2YgcHJvY2VzcyE9PSJ1bmRlZmluZWQiJiZwcm9jZXNzLm5vRGVwcmVjYXRpb249PT10cnVlKXtyZXR1cm4gZm59aWYodHlwZW9mIHByb2Nlc3M9PT0idW5kZWZpbmVkIil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGV4cG9ydHMuZGVwcmVjYXRlKGZuLG1zZykuYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgd2FybmVkPWZhbHNlO2Z1bmN0aW9uIGRlcHJlY2F0ZWQoKXtpZighd2FybmVkKXtpZihwcm9jZXNzLnRocm93RGVwcmVjYXRpb24pe3Rocm93IG5ldyBFcnJvcihtc2cpfWVsc2UgaWYocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKXtjb25zb2xlLnRyYWNlKG1zZyl9ZWxzZXtjb25zb2xlLmVycm9yKG1zZyl9d2FybmVkPXRydWV9cmV0dXJuIGZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gZGVwcmVjYXRlZH07dmFyIGRlYnVncz17fTt2YXIgZGVidWdFbnZSZWdleD0vXiQvO2lmKHByb2Nlc3MuZW52Lk5PREVfREVCVUcpe3ZhciBkZWJ1Z0Vudj1wcm9jZXNzLmVudi5OT0RFX0RFQlVHO2RlYnVnRW52PWRlYnVnRW52LnJlcGxhY2UoL1t8XFx7fSgpW1xdXiQrPy5dL2csIlxcJCYiKS5yZXBsYWNlKC9cKi9nLCIuKiIpLnJlcGxhY2UoLywvZywiJHxeIikudG9VcHBlckNhc2UoKTtkZWJ1Z0VudlJlZ2V4PW5ldyBSZWdFeHAoIl4iK2RlYnVnRW52KyIkIiwiaSIpfWV4cG9ydHMuZGVidWdsb2c9ZnVuY3Rpb24oc2V0KXtzZXQ9c2V0LnRvVXBwZXJDYXNlKCk7aWYoIWRlYnVnc1tzZXRdKXtpZihkZWJ1Z0VudlJlZ2V4LnRlc3Qoc2V0KSl7dmFyIHBpZD1wcm9jZXNzLnBpZDtkZWJ1Z3Nbc2V0XT1mdW5jdGlvbigpe3ZhciBtc2c9ZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpO2NvbnNvbGUuZXJyb3IoIiVzICVkOiAlcyIsc2V0LHBpZCxtc2cpfX1lbHNle2RlYnVnc1tzZXRdPWZ1bmN0aW9uKCl7fX19cmV0dXJuIGRlYnVnc1tzZXRdfTtmdW5jdGlvbiBpbnNwZWN0KG9iaixvcHRzKXt2YXIgY3R4PXtzZWVuOltdLHN0eWxpemU6c3R5bGl6ZU5vQ29sb3J9O2lmKGFyZ3VtZW50cy5sZW5ndGg+PTMpY3R4LmRlcHRoPWFyZ3VtZW50c1syXTtpZihhcmd1bWVudHMubGVuZ3RoPj00KWN0eC5jb2xvcnM9YXJndW1lbnRzWzNdO2lmKGlzQm9vbGVhbihvcHRzKSl7Y3R4LnNob3dIaWRkZW49b3B0c31lbHNlIGlmKG9wdHMpe2V4cG9ydHMuX2V4dGVuZChjdHgsb3B0cyl9aWYoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKWN0eC5zaG93SGlkZGVuPWZhbHNlO2lmKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpY3R4LmRlcHRoPTI7aWYoaXNVbmRlZmluZWQoY3R4LmNvbG9ycykpY3R4LmNvbG9ycz1mYWxzZTtpZihpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpY3R4LmN1c3RvbUluc3BlY3Q9dHJ1ZTtpZihjdHguY29sb3JzKWN0eC5zdHlsaXplPXN0eWxpemVXaXRoQ29sb3I7cmV0dXJuIGZvcm1hdFZhbHVlKGN0eCxvYmosY3R4LmRlcHRoKX1leHBvcnRzLmluc3BlY3Q9aW5zcGVjdDtpbnNwZWN0LmNvbG9ycz17Ym9sZDpbMSwyMl0saXRhbGljOlszLDIzXSx1bmRlcmxpbmU6WzQsMjRdLGludmVyc2U6WzcsMjddLHdoaXRlOlszNywzOV0sZ3JleTpbOTAsMzldLGJsYWNrOlszMCwzOV0sYmx1ZTpbMzQsMzldLGN5YW46WzM2LDM5XSxncmVlbjpbMzIsMzldLG1hZ2VudGE6WzM1LDM5XSxyZWQ6WzMxLDM5XSx5ZWxsb3c6WzMzLDM5XX07aW5zcGVjdC5zdHlsZXM9e3NwZWNpYWw6ImN5YW4iLG51bWJlcjoieWVsbG93Iixib29sZWFuOiJ5ZWxsb3ciLHVuZGVmaW5lZDoiZ3JleSIsbnVsbDoiYm9sZCIsc3RyaW5nOiJncmVlbiIsZGF0ZToibWFnZW50YSIscmVnZXhwOiJyZWQifTtmdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0cixzdHlsZVR5cGUpe3ZhciBzdHlsZT1pbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO2lmKHN0eWxlKXtyZXR1cm4iG1siK2luc3BlY3QuY29sb3JzW3N0eWxlXVswXSsibSIrc3RyKyIbWyIraW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdKyJtIn1lbHNle3JldHVybiBzdHJ9fWZ1bmN0aW9uIHN0eWxpemVOb0NvbG9yKHN0cixzdHlsZVR5cGUpe3JldHVybiBzdHJ9ZnVuY3Rpb24gYXJyYXlUb0hhc2goYXJyYXkpe3ZhciBoYXNoPXt9O2FycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLGlkeCl7aGFzaFt2YWxdPXRydWV9KTtyZXR1cm4gaGFzaH1mdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsdmFsdWUscmVjdXJzZVRpbWVzKXtpZihjdHguY3VzdG9tSW5zcGVjdCYmdmFsdWUmJmlzRnVuY3Rpb24odmFsdWUuaW5zcGVjdCkmJnZhbHVlLmluc3BlY3QhPT1leHBvcnRzLmluc3BlY3QmJiEodmFsdWUuY29uc3RydWN0b3ImJnZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZT09PXZhbHVlKSl7dmFyIHJldD12YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcyxjdHgpO2lmKCFpc1N0cmluZyhyZXQpKXtyZXQ9Zm9ybWF0VmFsdWUoY3R4LHJldCxyZWN1cnNlVGltZXMpfXJldHVybiByZXR9dmFyIHByaW1pdGl2ZT1mb3JtYXRQcmltaXRpdmUoY3R4LHZhbHVlKTtpZihwcmltaXRpdmUpe3JldHVybiBwcmltaXRpdmV9dmFyIGtleXM9T2JqZWN0LmtleXModmFsdWUpO3ZhciB2aXNpYmxlS2V5cz1hcnJheVRvSGFzaChrZXlzKTtpZihjdHguc2hvd0hpZGRlbil7a2V5cz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSl9aWYoaXNFcnJvcih2YWx1ZSkmJihrZXlzLmluZGV4T2YoIm1lc3NhZ2UiKT49MHx8a2V5cy5pbmRleE9mKCJkZXNjcmlwdGlvbiIpPj0wKSl7cmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKX1pZihrZXlzLmxlbmd0aD09PTApe2lmKGlzRnVuY3Rpb24odmFsdWUpKXt2YXIgbmFtZT12YWx1ZS5uYW1lPyI6ICIrdmFsdWUubmFtZToiIjtyZXR1cm4gY3R4LnN0eWxpemUoIltGdW5jdGlvbiIrbmFtZSsiXSIsInNwZWNpYWwiKX1pZihpc1JlZ0V4cCh2YWx1ZSkpe3JldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCJyZWdleHAiKX1pZihpc0RhdGUodmFsdWUpKXtyZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksImRhdGUiKX1pZihpc0Vycm9yKHZhbHVlKSl7cmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKX19dmFyIGJhc2U9IiIsYXJyYXk9ZmFsc2UsYnJhY2VzPVsieyIsIn0iXTtpZihpc0FycmF5KHZhbHVlKSl7YXJyYXk9dHJ1ZTticmFjZXM9WyJbIiwiXSJdfWlmKGlzRnVuY3Rpb24odmFsdWUpKXt2YXIgbj12YWx1ZS5uYW1lPyI6ICIrdmFsdWUubmFtZToiIjtiYXNlPSIgW0Z1bmN0aW9uIituKyJdIn1pZihpc1JlZ0V4cCh2YWx1ZSkpe2Jhc2U9IiAiK1JlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSl9aWYoaXNEYXRlKHZhbHVlKSl7YmFzZT0iICIrRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh2YWx1ZSl9aWYoaXNFcnJvcih2YWx1ZSkpe2Jhc2U9IiAiK2Zvcm1hdEVycm9yKHZhbHVlKX1pZihrZXlzLmxlbmd0aD09PTAmJighYXJyYXl8fHZhbHVlLmxlbmd0aD09MCkpe3JldHVybiBicmFjZXNbMF0rYmFzZSticmFjZXNbMV19aWYocmVjdXJzZVRpbWVzPDApe2lmKGlzUmVnRXhwKHZhbHVlKSl7cmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksInJlZ2V4cCIpfWVsc2V7cmV0dXJuIGN0eC5zdHlsaXplKCJbT2JqZWN0XSIsInNwZWNpYWwiKX19Y3R4LnNlZW4ucHVzaCh2YWx1ZSk7dmFyIG91dHB1dDtpZihhcnJheSl7b3V0cHV0PWZvcm1hdEFycmF5KGN0eCx2YWx1ZSxyZWN1cnNlVGltZXMsdmlzaWJsZUtleXMsa2V5cyl9ZWxzZXtvdXRwdXQ9a2V5cy5tYXAoZnVuY3Rpb24oa2V5KXtyZXR1cm4gZm9ybWF0UHJvcGVydHkoY3R4LHZhbHVlLHJlY3Vyc2VUaW1lcyx2aXNpYmxlS2V5cyxrZXksYXJyYXkpfSl9Y3R4LnNlZW4ucG9wKCk7cmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCxiYXNlLGJyYWNlcyl9ZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCx2YWx1ZSl7aWYoaXNVbmRlZmluZWQodmFsdWUpKXJldHVybiBjdHguc3R5bGl6ZSgidW5kZWZpbmVkIiwidW5kZWZpbmVkIik7aWYoaXNTdHJpbmcodmFsdWUpKXt2YXIgc2ltcGxlPSInIitKU09OLnN0cmluZ2lmeSh2YWx1ZSkucmVwbGFjZSgvXiJ8IiQvZywiIikucmVwbGFjZSgvJy9nLCJcXCciKS5yZXBsYWNlKC9cXCIvZywnIicpKyInIjtyZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCJzdHJpbmciKX1pZihpc051bWJlcih2YWx1ZSkpcmV0dXJuIGN0eC5zdHlsaXplKCIiK3ZhbHVlLCJudW1iZXIiKTtpZihpc0Jvb2xlYW4odmFsdWUpKXJldHVybiBjdHguc3R5bGl6ZSgiIit2YWx1ZSwiYm9vbGVhbiIpO2lmKGlzTnVsbCh2YWx1ZSkpcmV0dXJuIGN0eC5zdHlsaXplKCJudWxsIiwibnVsbCIpfWZ1bmN0aW9uIGZvcm1hdEVycm9yKHZhbHVlKXtyZXR1cm4iWyIrRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpKyJdIn1mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsdmFsdWUscmVjdXJzZVRpbWVzLHZpc2libGVLZXlzLGtleXMpe3ZhciBvdXRwdXQ9W107Zm9yKHZhciBpPTAsbD12YWx1ZS5sZW5ndGg7aTxsOysraSl7aWYoaGFzT3duUHJvcGVydHkodmFsdWUsU3RyaW5nKGkpKSl7b3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LHZhbHVlLHJlY3Vyc2VUaW1lcyx2aXNpYmxlS2V5cyxTdHJpbmcoaSksdHJ1ZSkpfWVsc2V7b3V0cHV0LnB1c2goIiIpfX1rZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KXtpZigha2V5Lm1hdGNoKC9eXGQrJC8pKXtvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsdmFsdWUscmVjdXJzZVRpbWVzLHZpc2libGVLZXlzLGtleSx0cnVlKSl9fSk7cmV0dXJuIG91dHB1dH1mdW5jdGlvbiBmb3JtYXRQcm9wZXJ0eShjdHgsdmFsdWUscmVjdXJzZVRpbWVzLHZpc2libGVLZXlzLGtleSxhcnJheSl7dmFyIG5hbWUsc3RyLGRlc2M7ZGVzYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLGtleSl8fHt2YWx1ZTp2YWx1ZVtrZXldfTtpZihkZXNjLmdldCl7aWYoZGVzYy5zZXQpe3N0cj1jdHguc3R5bGl6ZSgiW0dldHRlci9TZXR0ZXJdIiwic3BlY2lhbCIpfWVsc2V7c3RyPWN0eC5zdHlsaXplKCJbR2V0dGVyXSIsInNwZWNpYWwiKX19ZWxzZXtpZihkZXNjLnNldCl7c3RyPWN0eC5zdHlsaXplKCJbU2V0dGVyXSIsInNwZWNpYWwiKX19aWYoIWhhc093blByb3BlcnR5KHZpc2libGVLZXlzLGtleSkpe25hbWU9IlsiK2tleSsiXSJ9aWYoIXN0cil7aWYoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKTwwKXtpZihpc051bGwocmVjdXJzZVRpbWVzKSl7c3RyPWZvcm1hdFZhbHVlKGN0eCxkZXNjLnZhbHVlLG51bGwpfWVsc2V7c3RyPWZvcm1hdFZhbHVlKGN0eCxkZXNjLnZhbHVlLHJlY3Vyc2VUaW1lcy0xKX1pZihzdHIuaW5kZXhPZigiXG4iKT4tMSl7aWYoYXJyYXkpe3N0cj1zdHIuc3BsaXQoIlxuIikubWFwKGZ1bmN0aW9uKGxpbmUpe3JldHVybiIgICIrbGluZX0pLmpvaW4oIlxuIikuc2xpY2UoMil9ZWxzZXtzdHI9IlxuIitzdHIuc3BsaXQoIlxuIikubWFwKGZ1bmN0aW9uKGxpbmUpe3JldHVybiIgICAiK2xpbmV9KS5qb2luKCJcbiIpfX19ZWxzZXtzdHI9Y3R4LnN0eWxpemUoIltDaXJjdWxhcl0iLCJzcGVjaWFsIil9fWlmKGlzVW5kZWZpbmVkKG5hbWUpKXtpZihhcnJheSYma2V5Lm1hdGNoKC9eXGQrJC8pKXtyZXR1cm4gc3RyfW5hbWU9SlNPTi5zdHJpbmdpZnkoIiIra2V5KTtpZihuYW1lLm1hdGNoKC9eIihbYS16QS1aX11bYS16QS1aXzAtOV0qKSIkLykpe25hbWU9bmFtZS5zbGljZSgxLC0xKTtuYW1lPWN0eC5zdHlsaXplKG5hbWUsIm5hbWUiKX1lbHNle25hbWU9bmFtZS5yZXBsYWNlKC8nL2csIlxcJyIpLnJlcGxhY2UoL1xcIi9nLCciJykucmVwbGFjZSgvKF4ifCIkKS9nLCInIik7bmFtZT1jdHguc3R5bGl6ZShuYW1lLCJzdHJpbmciKX19cmV0dXJuIG5hbWUrIjogIitzdHJ9ZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LGJhc2UsYnJhY2VzKXt2YXIgbnVtTGluZXNFc3Q9MDt2YXIgbGVuZ3RoPW91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldixjdXIpe251bUxpbmVzRXN0Kys7aWYoY3VyLmluZGV4T2YoIlxuIik+PTApbnVtTGluZXNFc3QrKztyZXR1cm4gcHJlditjdXIucmVwbGFjZSgvXHUwMDFiXFtcZFxkP20vZywiIikubGVuZ3RoKzF9LDApO2lmKGxlbmd0aD42MCl7cmV0dXJuIGJyYWNlc1swXSsoYmFzZT09PSIiPyIiOmJhc2UrIlxuICIpKyIgIitvdXRwdXQuam9pbigiLFxuICAiKSsiICIrYnJhY2VzWzFdfXJldHVybiBicmFjZXNbMF0rYmFzZSsiICIrb3V0cHV0LmpvaW4oIiwgIikrIiAiK2JyYWNlc1sxXX1leHBvcnRzLnR5cGVzPXJlcXVpcmUoIi4vc3VwcG9ydC90eXBlcyIpO2Z1bmN0aW9uIGlzQXJyYXkoYXIpe3JldHVybiBBcnJheS5pc0FycmF5KGFyKX1leHBvcnRzLmlzQXJyYXk9aXNBcnJheTtmdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKXtyZXR1cm4gdHlwZW9mIGFyZz09PSJib29sZWFuIn1leHBvcnRzLmlzQm9vbGVhbj1pc0Jvb2xlYW47ZnVuY3Rpb24gaXNOdWxsKGFyZyl7cmV0dXJuIGFyZz09PW51bGx9ZXhwb3J0cy5pc051bGw9aXNOdWxsO2Z1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZyl7cmV0dXJuIGFyZz09bnVsbH1leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkPWlzTnVsbE9yVW5kZWZpbmVkO2Z1bmN0aW9uIGlzTnVtYmVyKGFyZyl7cmV0dXJuIHR5cGVvZiBhcmc9PT0ibnVtYmVyIn1leHBvcnRzLmlzTnVtYmVyPWlzTnVtYmVyO2Z1bmN0aW9uIGlzU3RyaW5nKGFyZyl7cmV0dXJuIHR5cGVvZiBhcmc9PT0ic3RyaW5nIn1leHBvcnRzLmlzU3RyaW5nPWlzU3RyaW5nO2Z1bmN0aW9uIGlzU3ltYm9sKGFyZyl7cmV0dXJuIHR5cGVvZiBhcmc9PT0ic3ltYm9sIn1leHBvcnRzLmlzU3ltYm9sPWlzU3ltYm9sO2Z1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZyl7cmV0dXJuIGFyZz09PXZvaWQgMH1leHBvcnRzLmlzVW5kZWZpbmVkPWlzVW5kZWZpbmVkO2Z1bmN0aW9uIGlzUmVnRXhwKHJlKXtyZXR1cm4gaXNPYmplY3QocmUpJiZvYmplY3RUb1N0cmluZyhyZSk9PT0iW29iamVjdCBSZWdFeHBdIn1leHBvcnRzLmlzUmVnRXhwPWlzUmVnRXhwO2V4cG9ydHMudHlwZXMuaXNSZWdFeHA9aXNSZWdFeHA7ZnVuY3Rpb24gaXNPYmplY3QoYXJnKXtyZXR1cm4gdHlwZW9mIGFyZz09PSJvYmplY3QiJiZhcmchPT1udWxsfWV4cG9ydHMuaXNPYmplY3Q9aXNPYmplY3Q7ZnVuY3Rpb24gaXNEYXRlKGQpe3JldHVybiBpc09iamVjdChkKSYmb2JqZWN0VG9TdHJpbmcoZCk9PT0iW29iamVjdCBEYXRlXSJ9ZXhwb3J0cy5pc0RhdGU9aXNEYXRlO2V4cG9ydHMudHlwZXMuaXNEYXRlPWlzRGF0ZTtmdW5jdGlvbiBpc0Vycm9yKGUpe3JldHVybiBpc09iamVjdChlKSYmKG9iamVjdFRvU3RyaW5nKGUpPT09IltvYmplY3QgRXJyb3JdInx8ZSBpbnN0YW5jZW9mIEVycm9yKX1leHBvcnRzLmlzRXJyb3I9aXNFcnJvcjtleHBvcnRzLnR5cGVzLmlzTmF0aXZlRXJyb3I9aXNFcnJvcjtmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZyl7cmV0dXJuIHR5cGVvZiBhcmc9PT0iZnVuY3Rpb24ifWV4cG9ydHMuaXNGdW5jdGlvbj1pc0Z1bmN0aW9uO2Z1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZyl7cmV0dXJuIGFyZz09PW51bGx8fHR5cGVvZiBhcmc9PT0iYm9vbGVhbiJ8fHR5cGVvZiBhcmc9PT0ibnVtYmVyInx8dHlwZW9mIGFyZz09PSJzdHJpbmcifHx0eXBlb2YgYXJnPT09InN5bWJvbCJ8fHR5cGVvZiBhcmc9PT0idW5kZWZpbmVkIn1leHBvcnRzLmlzUHJpbWl0aXZlPWlzUHJpbWl0aXZlO2V4cG9ydHMuaXNCdWZmZXI9cmVxdWlyZSgiLi9zdXBwb3J0L2lzQnVmZmVyIik7ZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobyl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKX1mdW5jdGlvbiBwYWQobil7cmV0dXJuIG48MTA/IjAiK24udG9TdHJpbmcoMTApOm4udG9TdHJpbmcoMTApfXZhciBtb250aHM9WyJKYW4iLCJGZWIiLCJNYXIiLCJBcHIiLCJNYXkiLCJKdW4iLCJKdWwiLCJBdWciLCJTZXAiLCJPY3QiLCJOb3YiLCJEZWMiXTtmdW5jdGlvbiB0aW1lc3RhbXAoKXt2YXIgZD1uZXcgRGF0ZTt2YXIgdGltZT1bcGFkKGQuZ2V0SG91cnMoKSkscGFkKGQuZ2V0TWludXRlcygpKSxwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCI6Iik7cmV0dXJuW2QuZ2V0RGF0ZSgpLG1vbnRoc1tkLmdldE1vbnRoKCldLHRpbWVdLmpvaW4oIiAiKX1leHBvcnRzLmxvZz1mdW5jdGlvbigpe2NvbnNvbGUubG9nKCIlcyAtICVzIix0aW1lc3RhbXAoKSxleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLGFyZ3VtZW50cykpfTtleHBvcnRzLmluaGVyaXRzPXJlcXVpcmUoImluaGVyaXRzIik7ZXhwb3J0cy5fZXh0ZW5kPWZ1bmN0aW9uKG9yaWdpbixhZGQpe2lmKCFhZGR8fCFpc09iamVjdChhZGQpKXJldHVybiBvcmlnaW47dmFyIGtleXM9T2JqZWN0LmtleXMoYWRkKTt2YXIgaT1rZXlzLmxlbmd0aDt3aGlsZShpLS0pe29yaWdpbltrZXlzW2ldXT1hZGRba2V5c1tpXV19cmV0dXJuIG9yaWdpbn07ZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLHByb3Ape3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLHByb3ApfXZhciBrQ3VzdG9tUHJvbWlzaWZpZWRTeW1ib2w9dHlwZW9mIFN5bWJvbCE9PSJ1bmRlZmluZWQiP1N5bWJvbCgidXRpbC5wcm9taXNpZnkuY3VzdG9tIik6dW5kZWZpbmVkO2V4cG9ydHMucHJvbWlzaWZ5PWZ1bmN0aW9uIHByb21pc2lmeShvcmlnaW5hbCl7aWYodHlwZW9mIG9yaWdpbmFsIT09ImZ1bmN0aW9uIil0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgIm9yaWdpbmFsIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24nKTtpZihrQ3VzdG9tUHJvbWlzaWZpZWRTeW1ib2wmJm9yaWdpbmFsW2tDdXN0b21Qcm9taXNpZmllZFN5bWJvbF0pe3ZhciBmbj1vcmlnaW5hbFtrQ3VzdG9tUHJvbWlzaWZpZWRTeW1ib2xdO2lmKHR5cGVvZiBmbiE9PSJmdW5jdGlvbiIpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAidXRpbC5wcm9taXNpZnkuY3VzdG9tIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24nKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sa0N1c3RvbVByb21pc2lmaWVkU3ltYm9sLHt2YWx1ZTpmbixlbnVtZXJhYmxlOmZhbHNlLHdyaXRhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7cmV0dXJuIGZufWZ1bmN0aW9uIGZuKCl7dmFyIHByb21pc2VSZXNvbHZlLHByb21pc2VSZWplY3Q7dmFyIHByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3Byb21pc2VSZXNvbHZlPXJlc29sdmU7cHJvbWlzZVJlamVjdD1yZWplY3R9KTt2YXIgYXJncz1bXTtmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXthcmdzLnB1c2goYXJndW1lbnRzW2ldKX1hcmdzLnB1c2goZnVuY3Rpb24oZXJyLHZhbHVlKXtpZihlcnIpe3Byb21pc2VSZWplY3QoZXJyKX1lbHNle3Byb21pc2VSZXNvbHZlKHZhbHVlKX19KTt0cnl7b3JpZ2luYWwuYXBwbHkodGhpcyxhcmdzKX1jYXRjaChlcnIpe3Byb21pc2VSZWplY3QoZXJyKX1yZXR1cm4gcHJvbWlzZX1PYmplY3Quc2V0UHJvdG90eXBlT2YoZm4sT2JqZWN0LmdldFByb3RvdHlwZU9mKG9yaWdpbmFsKSk7aWYoa0N1c3RvbVByb21pc2lmaWVkU3ltYm9sKU9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbixrQ3VzdG9tUHJvbWlzaWZpZWRTeW1ib2wse3ZhbHVlOmZuLGVudW1lcmFibGU6ZmFsc2Usd3JpdGFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWV9KTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZm4sZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvcmlnaW5hbCkpfTtleHBvcnRzLnByb21pc2lmeS5jdXN0b209a0N1c3RvbVByb21pc2lmaWVkU3ltYm9sO2Z1bmN0aW9uIGNhbGxiYWNraWZ5T25SZWplY3RlZChyZWFzb24sY2Ipe2lmKCFyZWFzb24pe3ZhciBuZXdSZWFzb249bmV3IEVycm9yKCJQcm9taXNlIHdhcyByZWplY3RlZCB3aXRoIGEgZmFsc3kgdmFsdWUiKTtuZXdSZWFzb24ucmVhc29uPXJlYXNvbjtyZWFzb249bmV3UmVhc29ufXJldHVybiBjYihyZWFzb24pfWZ1bmN0aW9uIGNhbGxiYWNraWZ5KG9yaWdpbmFsKXtpZih0eXBlb2Ygb3JpZ2luYWwhPT0iZnVuY3Rpb24iKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgIm9yaWdpbmFsIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24nKX1mdW5jdGlvbiBjYWxsYmFja2lmaWVkKCl7dmFyIGFyZ3M9W107Zm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7YXJncy5wdXNoKGFyZ3VtZW50c1tpXSl9dmFyIG1heWJlQ2I9YXJncy5wb3AoKTtpZih0eXBlb2YgbWF5YmVDYiE9PSJmdW5jdGlvbiIpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlRoZSBsYXN0IGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbiIpfXZhciBzZWxmPXRoaXM7dmFyIGNiPWZ1bmN0aW9uKCl7cmV0dXJuIG1heWJlQ2IuYXBwbHkoc2VsZixhcmd1bWVudHMpfTtvcmlnaW5hbC5hcHBseSh0aGlzLGFyZ3MpLnRoZW4oZnVuY3Rpb24ocmV0KXtwcm9jZXNzLm5leHRUaWNrKGNiLmJpbmQobnVsbCxudWxsLHJldCkpfSxmdW5jdGlvbihyZWope3Byb2Nlc3MubmV4dFRpY2soY2FsbGJhY2tpZnlPblJlamVjdGVkLmJpbmQobnVsbCxyZWosY2IpKX0pfU9iamVjdC5zZXRQcm90b3R5cGVPZihjYWxsYmFja2lmaWVkLE9iamVjdC5nZXRQcm90b3R5cGVPZihvcmlnaW5hbCkpO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGNhbGxiYWNraWZpZWQsZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvcmlnaW5hbCkpO3JldHVybiBjYWxsYmFja2lmaWVkfWV4cG9ydHMuY2FsbGJhY2tpZnk9Y2FsbGJhY2tpZnl9KS5jYWxsKHRoaXMpfSkuY2FsbCh0aGlzLHJlcXVpcmUoIl9wcm9jZXNzIikpfSx7Ii4vc3VwcG9ydC9pc0J1ZmZlciI6OTUsIi4vc3VwcG9ydC90eXBlcyI6OTYsX3Byb2Nlc3M6MzksaW5oZXJpdHM6Mjl9XSw5ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBmb3JFYWNoPXJlcXVpcmUoImZvci1lYWNoIik7dmFyIGF2YWlsYWJsZVR5cGVkQXJyYXlzPXJlcXVpcmUoImF2YWlsYWJsZS10eXBlZC1hcnJheXMiKTt2YXIgY2FsbEJvdW5kPXJlcXVpcmUoImNhbGwtYmluZC9jYWxsQm91bmQiKTt2YXIgZ09QRD1yZXF1aXJlKCJnb3BkIik7dmFyICR0b1N0cmluZz1jYWxsQm91bmQoIk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmciKTt2YXIgaGFzVG9TdHJpbmdUYWc9cmVxdWlyZSgiaGFzLXRvc3RyaW5ndGFnL3NoYW1zIikoKTt2YXIgZz10eXBlb2YgZ2xvYmFsVGhpcz09PSJ1bmRlZmluZWQiP2dsb2JhbDpnbG9iYWxUaGlzO3ZhciB0eXBlZEFycmF5cz1hdmFpbGFibGVUeXBlZEFycmF5cygpO3ZhciAkc2xpY2U9Y2FsbEJvdW5kKCJTdHJpbmcucHJvdG90eXBlLnNsaWNlIik7dmFyIHRvU3RyVGFncz17fTt2YXIgZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LmdldFByb3RvdHlwZU9mO2lmKGhhc1RvU3RyaW5nVGFnJiZnT1BEJiZnZXRQcm90b3R5cGVPZil7Zm9yRWFjaCh0eXBlZEFycmF5cyxmdW5jdGlvbih0eXBlZEFycmF5KXtpZih0eXBlb2YgZ1t0eXBlZEFycmF5XT09PSJmdW5jdGlvbiIpe3ZhciBhcnI9bmV3IGdbdHlwZWRBcnJheV07aWYoU3ltYm9sLnRvU3RyaW5nVGFnIGluIGFycil7dmFyIHByb3RvPWdldFByb3RvdHlwZU9mKGFycik7dmFyIGRlc2NyaXB0b3I9Z09QRChwcm90byxTeW1ib2wudG9TdHJpbmdUYWcpO2lmKCFkZXNjcmlwdG9yKXt2YXIgc3VwZXJQcm90bz1nZXRQcm90b3R5cGVPZihwcm90byk7ZGVzY3JpcHRvcj1nT1BEKHN1cGVyUHJvdG8sU3ltYm9sLnRvU3RyaW5nVGFnKX10b1N0clRhZ3NbdHlwZWRBcnJheV09ZGVzY3JpcHRvci5nZXR9fX0pfXZhciB0cnlUeXBlZEFycmF5cz1mdW5jdGlvbiB0cnlBbGxUeXBlZEFycmF5cyh2YWx1ZSl7dmFyIGZvdW5kTmFtZT1mYWxzZTtmb3JFYWNoKHRvU3RyVGFncyxmdW5jdGlvbihnZXR0ZXIsdHlwZWRBcnJheSl7aWYoIWZvdW5kTmFtZSl7dHJ5e3ZhciBuYW1lPWdldHRlci5jYWxsKHZhbHVlKTtpZihuYW1lPT09dHlwZWRBcnJheSl7Zm91bmROYW1lPW5hbWV9fWNhdGNoKGUpe319fSk7cmV0dXJuIGZvdW5kTmFtZX07dmFyIGlzVHlwZWRBcnJheT1yZXF1aXJlKCJpcy10eXBlZC1hcnJheSIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIHdoaWNoVHlwZWRBcnJheSh2YWx1ZSl7aWYoIWlzVHlwZWRBcnJheSh2YWx1ZSkpe3JldHVybiBmYWxzZX1pZighaGFzVG9TdHJpbmdUYWd8fCEoU3ltYm9sLnRvU3RyaW5nVGFnIGluIHZhbHVlKSl7cmV0dXJuICRzbGljZSgkdG9TdHJpbmcodmFsdWUpLDgsLTEpfXJldHVybiB0cnlUeXBlZEFycmF5cyh2YWx1ZSl9fSkuY2FsbCh0aGlzKX0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9KX0seyJhdmFpbGFibGUtdHlwZWQtYXJyYXlzIjo1LCJjYWxsLWJpbmQvY2FsbEJvdW5kIjoxMCwiZm9yLWVhY2giOjE3LGdvcGQ6MjEsImhhcy10b3N0cmluZ3RhZy9zaGFtcyI6MjUsImlzLXR5cGVkLWFycmF5IjozM31dLDk5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1leHRlbmQ7dmFyIGhhc093blByb3BlcnR5PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gZXh0ZW5kKCl7dmFyIHRhcmdldD17fTtmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpXTtmb3IodmFyIGtleSBpbiBzb3VyY2Upe2lmKGhhc093blByb3BlcnR5LmNhbGwoc291cmNlLGtleSkpe3RhcmdldFtrZXldPXNvdXJjZVtrZXldfX19cmV0dXJuIHRhcmdldH19LHt9XSwxMDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgX3dyYXBwZXI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJzb2xjL3dyYXBwZXIiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9fWltcG9ydFNjcmlwdHMoImh0dHBzOi8vYmluYXJpZXMuc29saWRpdHlsYW5nLm9yZy9iaW4vc29sanNvbi12MC44LjE5K2NvbW1pdC43ZGQ2ZDQwNC5qcyIpO3NlbGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oZSl7dmFyIGNvbnRyYWN0Q29kZT1lLmRhdGEuY29udHJhY3RDb2RlO3ZhciBzb3VyY2VDb2RlPXtsYW5ndWFnZToiU29saWRpdHkiLHNvdXJjZXM6e2NvbnRyYWN0Ontjb250ZW50OmNvbnRyYWN0Q29kZX19LHNldHRpbmdzOntvcHRpbWl6ZXI6e2VuYWJsZWQ6dHJ1ZSxydW5zOjFlM30sb3V0cHV0U2VsZWN0aW9uOnsiKiI6eyIqIjpbIioiXX19fX07dmFyIGNvbXBpbGVyPSgwLF93cmFwcGVyWyJkZWZhdWx0Il0pKHNlbGYuTW9kdWxlKTtjb25zb2xlLmxvZygiU29sYyB2ZXJzaW9uOiAiLmNvbmNhdChjb21waWxlci52ZXJzaW9uKCkpKTtzZWxmLnBvc3RNZXNzYWdlKHtvdXRwdXQ6SlNPTi5wYXJzZShjb21waWxlci5jb21waWxlKEpTT04uc3RyaW5naWZ5KHNvdXJjZUNvZGUpKSl9KX0sZmFsc2UpfSx7InNvbGMvd3JhcHBlciI6NTd9XX0se30sWzEwMF0pOwo=";
                const contentType = 'application/javascript';
                const byteCharacters = atob(bundleCode);
                const byteArrays = [];
                const sliceSize = 512;

                for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {
                    const slice = byteCharacters.slice(offset, offset + sliceSize);
                    const byteNumbers = new Uint8Array(slice.length);
                    
                    for (let i = 0; i < slice.length; i++) {
                        byteNumbers[i] = slice.charCodeAt(i);
                    }

                    byteArrays.push(byteNumbers);
                }

                const blob = new Blob(byteArrays, { type: contentType });
                const blobUrl = URL.createObjectURL(blob);

                var worker = new Worker(blobUrl);
                worker.addEventListener('message', function (e) {
                    const output = e.data.output;
                    resolve(output);
                }, false);

                const testInput = 't>>(t%16==0?4:6)|t>>(t%128==0?10:4)';

                worker.postMessage({
                    runs: 1000,
                    optimize: 'true',
                    contractCode: `contract BEAT {uint32 public constant OFFSET = 0; uint32 public constant SAMPLE_RATE = 8000; uint32 public constant LENGTH = SAMPLE_RATE * 60; function getBeat() external pure returns (bytes memory, uint32) { bytes memory buffer = new bytes(LENGTH); for(uint256 t = OFFSET; t<LENGTH+OFFSET; ++t) { buffer[t-OFFSET] = bytes1(uint8(${testInput})); } return (buffer, SAMPLE_RATE); } }`,
                });
            });
        }
    </script>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (window == window.top) {
                var web3 = document.querySelector('.web3');
                var connectButton = document.querySelector('.connect-button');
                var switchButton = document.querySelector('.switch-button');
                var mintButton = document.querySelector('.mint-button');
                var outputBox = document.querySelector('.output-box');

                web3.style.display = 'block';

                if (typeof window.ethereum !== 'undefined') {
                    window.ethereum.request({ method: 'eth_requestAccounts' });

                    ethereum
                        .request({ method: 'eth_accounts' })
                        .then(function (accounts) {
                            if (accounts.length === 0) {
                                setDotColor('red');
                                connectButton.style.display = 'block';
                                switchButton.style.display = 'none';
                            } else {
                                ethereum
                                    .request({ method: 'eth_chainId' })
                                    .then(function (chainId) {
                                        if (chainId === '0xa4b1') {
                                            setDotColor('green');
                                            connectButton.style.display = 'none';
                                            switchButton.style.display = 'none';
                                        } else {
                                            setDotColor('red');
                                            connectButton.style.display = 'none';
                                            switchButton.style.display = 'block';
                                        }
                                    })
                                    .catch(console.error);
                            }
                        })
                        .catch(console.error);

                    connectButton.addEventListener('click', function () {
                        ethereum
                            .request({ method: 'eth_requestAccounts' })
                            .then(function (accounts) {
                                if (accounts.length > 0) {
                                    setDotColor('green');
                                    connectButton.style.display = 'none';
                                    switchButton.style.display = 'none';
                                }
                            })
                            .catch(console.error);
                    });

                    switchButton.addEventListener('click', function () {
                        window.ethereum.request({
                            method: "wallet_addEthereumChain",
                            params: [{
                                chainId: "0xa4b1",
                                rpcUrls: ["https://arbitrum-one.publicnode.com"],
                                chainName: "Arbitrum One",
                                nativeCurrency: {
                                    name: "Arbitrum ETH",
                                    symbol: "ETH",
                                    decimals: 18,
                                },
                                blockExplorerUrls: ["https://explorer.arbitrum.io/"],
                            }],
                        }).then(function () {
                            switchButton.style.display = 'none';
                        })
                            .catch(console.error);
                    });

                    mintButton.addEventListener('click', function () {
                        var lineInput = document.querySelector('input[type="text"]');
                        var line = lineInput.value;
                        if (!line) {
                            alert('Please enter a line');
                            return;
                        }
                        compileContract(line)
                            .then(output => {
                                if (output.error) {
                                    alert('There was an error compiling. The formula should only include a single variable "t".');
                                } else {
                                    for (var contractName in output.contracts['contract']) {
                                        var bytecode = output.contracts['contract'][contractName].evm.bytecode.object;
                                        outputBox.innerHTML = `Bytecode of contract ${contractName}:\n${bytecode} length: ${bytecode.length}`;
                                        outputBox.style.display = 'block';
                                    }
                                }
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    });
                } else {
                    setDotColor('red');
                    connectButton.style.display = 'block';
                    switchButton.style.display = 'none';
                }
            } else {
                document.querySelector('.iframe').style.display = 'block';
            }
        });

        function setDotColor(color) {
            document.querySelector('.dot').style.backgroundColor = color;
        }
    </script>
    
</body>
</html>